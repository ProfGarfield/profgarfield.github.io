<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="/assets/css/style.css">
  <!--<link rel="icon" type="image/png" href="/assets/civfanatics_icon.png">-->
</head>
<body><header class="site-header">
  <div class="wrapper">
    <!--img src="/assets/logo-cfc.png" class="center"--><a class="site-title" rel="author" href="/">Lua for Civilization II</a><nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger"><a class="page-link" href="/about/">About</a><a class="page-link" href="/auto_doc/autoIndex.html">Function Docs</a><a class="page-link" href="/executionPoints.html">Execution Points</a><a class="page-link" href="/lua_lessons/lessons_toc.html">Lua Lessons</a></div>
      </nav></div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <head><title>Hello World (Lesson 1)</title>
</head>
<article class="post">

  <header class="post-header">
    <h1 class="post-title">Hello World</h1>
  </header>
  
  <div class="post-content">
    <table>
  <tbody>
    <tr>
      <td>Next: <a href="02_writingScripts.html">Writing Programs</a></td>
    </tr>
  </tbody>
</table>
<h1 id="hello-world">
  
  
    Hello World <a href="#hello-world"><span class="self-link">&#128279</span></a>
  
  
</h1>
    
<h2 id="introduction">
  
  
    Introduction <a href="#introduction"><span class="self-link">&#128279</span></a>
  
  
</h2>
    

<p>Welcome.  This is the first in a series of lessons designed to teach you how to use the Lua Programming Language in order to write scenario events for Civilization II: Test of Time.  If you’ve never programmed before, don’t worry.  I’ll teach you the basics as we go along.  But before you seek the power of The Moon, I must give you this warning: Since Lua will give you the power to do almost anything in your scenario, you will be tempted to do almost everything.</p>

<p>I must emphasize that you should actually perform the instructions that I give in these lessons.  Type out the code and run the scripts as instructed. Don’t just read the “story.”  You will pick up a lot more by doing the work, and it will start to get you comfortable with programming.  However, if for some reason you have a typo that you can’t find that is causing the code to fail, then, by all means, copy and paste from the code I give you.</p>

<p>If you have questions (or feedback) about these lessons, you can ask them <a href="https://forums.civfanatics.com/threads/feedback-thread-for-totpp-get-started-with-lua-events.636239/">here</a>.  Note that this thread originally served an <a href="https://forums.civfanatics.com/threads/totpp-get-started-with-lua-events.636192/">older set of lessons</a> so the first couple pages of posts are not directly applicable to these lessons.</p>

<p>When teaching programming, it is traditional to start with a “Hello World” example.  In that spirit, this lesson will show you how to open the “Lua Console” and how to paste some code into it.  Do not worry about <em>understanding</em> the code at this stage.  In fact, the more interesting commands you use here are actually hidden from you when you use my Lua Scenario Template.</p>
<h2 id="getting-started">
  
  
    Getting Started <a href="#getting-started"><span class="self-link">&#128279</span></a>
  
  
</h2>
    

<p>The Lua Programming Language was not integrated with the original Test of Time game.  Rather, it was introduced as part of the <a href="https://forums.civfanatics.com/threads/the-test-of-time-patch-project.517282/">Test of Time Patch Project</a>, so you must install that.  At the time or writing, the most recent version is <a href="https://forums.civfanatics.com/threads/the-test-of-time-patch-project.517282/page-66#post-16214239">0.18.4</a>, but a more recent version should be fine.  Also, make sure that you have enabled <strong>Lua scripting</strong> and <strong>Lua scenario events</strong> in the TOTPP launcher.</p>

<p><img src="01_lesson_images/lua-scripting-patch.png" alt="TOTPP Launcher with highlighted patches" /></p>

<p>Now, start a new Original game.  (If you’ve replaced the Original folder with a mod that uses Lua, restore the original version of the folder.  The reason will be explained in a later lesson.)  For convenience, start as the Romans.  None of the other selections matter.</p>

<p>Once the game has begun, activate Cheat Mode.</p>
<h2 id="printing-hello-world-in-the-lua-console">
  
  
    Printing Hello World in the Lua Console <a href="#printing-hello-world-in-the-lua-console"><span class="self-link">&#128279</span></a>
  
  
</h2>
    

<p>Press Ctrl+Shift+F3 to open the Lua Console.  This window can be used to type in instructions line by line to be executed immediately.</p>

<p><img src="01_lesson_images/Lua-Console.png" alt="TOTPP Lua Console" /></p>

<p>For your first command, type the following into the command line at the bottom of the console.</p>

<div class="language-lua highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">print</span><span class="p">(</span><span class="s2">"Hello World"</span><span class="p">)</span>
</code></pre></div></div>

<p><img src="01_lesson_images/hello-world-command.png" alt="Hello World Command" /></p>

<p>Once you’ve finished typing, press Enter, and your console should look like this:</p>

<p><img src="01_lesson_images/hello-world-printed.png" alt="Hello World Printed" /></p>

<p>Notice how the command you typed in was printed, then, on the next line, ‘Hello World’ was printed.</p>

<p>Perhaps you made a typo.  Depending on where you put it, either ‘Hello World’ was different, or something else happened.</p>

<p>Let’s show an example, where the ‘(‘ was forgotten.  Type the following into the console command line:</p>

<div class="language-lua highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">print</span><span class="s2">"Hello World"</span><span class="p">)</span>
</code></pre></div></div>
<p>You will get the following error:</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&gt; print"Hello World")
input:1: unexpected symbol near ')'
</code></pre></div></div>
<p>We will learn to interpret errors soon enough.  For now, let’s try this mistake:</p>
<div class="language-lua highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">Print</span><span class="p">(</span><span class="s2">"Hello World"</span><span class="p">)</span>
</code></pre></div></div>
<p>In this case, we get a slightly different error:</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&gt; Print("Hello World")
input:1: attempt to call a nil value (global 'Print')
stack traceback:
	input:1: in main chunk
</code></pre></div></div>
<p>Commands in Lua are case sensitive, so <code class="language-plaintext highlighter-rouge">print</code> is not the same as <code class="language-plaintext highlighter-rouge">Print</code>.  Again, we’ll discuss how to interpret error messages in later lessons.</p>

<p>For a final “mistake,” try the following line:</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>print("Hello World"
</code></pre></div></div>
<p>In this case, we don’t get an error message, we just get the line we put in:</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&gt; print("Hello World"
</code></pre></div></div>
<p>This is because the Lua Console recognizes this as an <em>incomplete</em> command, rather than a <em>bad</em> command.  Type in the closing <code class="language-plaintext highlighter-rouge">)</code> to get Hello World printed again.  If you’ve typed in everything the way I have, your console will look like this:</p>

<p><img src="01_lesson_images/console-after-errors.png" alt="Lua console after errors" /></p>

<p>If it looks slightly different, don’t worry about it.  As long as you’ve successfully printed Hello World to the console, move on to the next section.</p>
<h2 id="creating-a-text-box">
  
  
    Creating a Text Box <a href="#creating-a-text-box"><span class="self-link">&#128279</span></a>
  
  
</h2>
    

<p>The command <code class="language-plaintext highlighter-rouge">print()</code> displays to the console, and this will be useful for debugging code when the time comes. However, the point of Lua is to interact with the game itself. Therefore, we will now create a text box.</p>

<p>Enter the following command into the Lua Console:</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>civ.ui.text("Hello World!")
</code></pre></div></div>

<p>If typed correctly, a text box should appear:</p>

<p><img src="01_lesson_images/hello-world-text-box.png" alt="Generated Text Box" /></p>

<p>In the above command, the characters within the quote marks <code class="language-plaintext highlighter-rouge">"</code> are displayed to the player.  Try changing the command to show a text box containing <em>Hello Moon!</em> instead. Note that you can use the up and down arrow keys to bring up previous console commands.</p>
<h2 id="registering-an-event">
  
  
    Registering an Event <a href="#registering-an-event"><span class="self-link">&#128279</span></a>
  
  
</h2>
    

<p>Thus far, we’ve only been able to make the game do something by writing a command in the Lua Console.  Now we will write code to register an event.  Don’t worry about <em>why</em> the code is written this way.  That will be explained later.  (In fact, the Lua Scenario Template will have you use slightly different code to register an event.)</p>

<p>Enter the following code into the Lua Console:</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>civ.scen.onActivateUnit(function() civ.ui.text("Hello World!") end)
</code></pre></div></div>
<p>If no error is printed, close the Lua Console (the X in the top left corner). Activate a unit (clicking on it will do). You should get a “Hello World!” text box message.</p>

<p><img src="01_lesson_images/activate-hello-world.png" alt="Unit activation Hello World" /></p>
<h2 id="a-unit-killed-event">
  
  
    A Unit Killed Event <a href="#a-unit-killed-event"><span class="self-link">&#128279</span></a>
  
  
</h2>
    

<p>Now that we have an event when units are activated, let’s write an event for when units are killed.</p>

<p>Open the Lua Console again, and enter this command:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>civ.scen.onUnitKilled(function() civ.ui.text("Goodbye Cruel World!") end)
</code></pre></div></div>

<p>Now, create 2 warriors, one from a different tribe, and make them fight.</p>

<p>You should get a text box like this:</p>

<p><img src="01_lesson_images/goodbye-cruel-world.png" alt="Goodbye Cruel World" /></p>
<h2 id="conclusion">
  
  
    Conclusion <a href="#conclusion"><span class="self-link">&#128279</span></a>
  
  
</h2>
    

<p>In this short lesson, we’ve given commands to the game and seen the game react.  We’ve also seen some errors in the Lua Console.  As we progress, we’ll come to understand the commands we give and the errors we will sometimes receive.  For now, I hope you are just a little bit less intimidated by the idea of programming.  You’ve given the computer instructions, and it has followed them.  You have started programming.</p>

<table>
  <tbody>
    <tr>
      <td>Next: <a href="02_writingScripts.html">Writing Programs</a></td>
    </tr>
  </tbody>
</table>

  </div>
</article>
<!--
    <table>
  <tbody>
    <tr>
      <td>Next: <a href="02_writingScripts.html">Writing Programs</a></td>
    </tr>
  </tbody>
</table>
<h1 id="hello-world">
  
  
    <a href="#hello-world">&#128279</a> Hello World
  
  
</h1>
    
<h2 id="introduction">
  
  
    <a href="#introduction">&#128279</a> Introduction
  
  
</h2>
    

<p>Welcome.  This is the first in a series of lessons designed to teach you how to use the Lua Programming Language in order to write scenario events for Civilization II: Test of Time.  If you’ve never programmed before, don’t worry.  I’ll teach you the basics as we go along.  But before you seek the power of The Moon, I must give you this warning: Since Lua will give you the power to do almost anything in your scenario, you will be tempted to do almost everything.</p>

<p>I must emphasize that you should actually perform the instructions that I give in these lessons.  Type out the code and run the scripts as instructed. Don’t just read the “story.”  You will pick up a lot more by doing the work, and it will start to get you comfortable with programming.  However, if for some reason you have a typo that you can’t find that is causing the code to fail, then, by all means, copy and paste from the code I give you.</p>

<p>If you have questions (or feedback) about these lessons, you can ask them <a href="https://forums.civfanatics.com/threads/feedback-thread-for-totpp-get-started-with-lua-events.636239/">here</a>.  Note that this thread originally served an <a href="https://forums.civfanatics.com/threads/totpp-get-started-with-lua-events.636192/">older set of lessons</a> so the first couple pages of posts are not directly applicable to these lessons.</p>

<p>When teaching programming, it is traditional to start with a “Hello World” example.  In that spirit, this lesson will show you how to open the “Lua Console” and how to paste some code into it.  Do not worry about <em>understanding</em> the code at this stage.  In fact, the more interesting commands you use here are actually hidden from you when you use my Lua Scenario Template.</p>
<h2 id="getting-started">
  
  
    <a href="#getting-started">&#128279</a> Getting Started
  
  
</h2>
    

<p>The Lua Programming Language was not integrated with the original Test of Time game.  Rather, it was introduced as part of the <a href="https://forums.civfanatics.com/threads/the-test-of-time-patch-project.517282/">Test of Time Patch Project</a>, so you must install that.  At the time or writing, the most recent version is <a href="https://forums.civfanatics.com/threads/the-test-of-time-patch-project.517282/page-66#post-16214239">0.18.4</a>, but a more recent version should be fine.  Also, make sure that you have enabled <strong>Lua scripting</strong> and <strong>Lua scenario events</strong> in the TOTPP launcher.</p>

<p><img src="01_lesson_images/lua-scripting-patch.png" alt="TOTPP Launcher with highlighted patches" /></p>

<p>Now, start a new Original game.  (If you’ve replaced the Original folder with a mod that uses Lua, restore the original version of the folder.  The reason will be explained in a later lesson.)  For convenience, start as the Romans.  None of the other selections matter.</p>

<p>Once the game has begun, activate Cheat Mode.</p>
<h2 id="printing-hello-world-in-the-lua-console">
  
  
    <a href="#printing-hello-world-in-the-lua-console">&#128279</a> Printing Hello World in the Lua Console
  
  
</h2>
    

<p>Press Ctrl+Shift+F3 to open the Lua Console.  This window can be used to type in instructions line by line to be executed immediately.</p>

<p><img src="01_lesson_images/Lua-Console.png" alt="TOTPP Lua Console" /></p>

<p>For your first command, type the following into the command line at the bottom of the console.</p>

<div class="language-lua highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">print</span><span class="p">(</span><span class="s2">"Hello World"</span><span class="p">)</span>
</code></pre></div></div>

<p><img src="01_lesson_images/hello-world-command.png" alt="Hello World Command" /></p>

<p>Once you’ve finished typing, press Enter, and your console should look like this:</p>

<p><img src="01_lesson_images/hello-world-printed.png" alt="Hello World Printed" /></p>

<p>Notice how the command you typed in was printed, then, on the next line, ‘Hello World’ was printed.</p>

<p>Perhaps you made a typo.  Depending on where you put it, either ‘Hello World’ was different, or something else happened.</p>

<p>Let’s show an example, where the ‘(‘ was forgotten.  Type the following into the console command line:</p>

<div class="language-lua highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">print</span><span class="s2">"Hello World"</span><span class="p">)</span>
</code></pre></div></div>
<p>You will get the following error:</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&gt; print"Hello World")
input:1: unexpected symbol near ')'
</code></pre></div></div>
<p>We will learn to interpret errors soon enough.  For now, let’s try this mistake:</p>
<div class="language-lua highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">Print</span><span class="p">(</span><span class="s2">"Hello World"</span><span class="p">)</span>
</code></pre></div></div>
<p>In this case, we get a slightly different error:</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&gt; Print("Hello World")
input:1: attempt to call a nil value (global 'Print')
stack traceback:
	input:1: in main chunk
</code></pre></div></div>
<p>Commands in Lua are case sensitive, so <code class="language-plaintext highlighter-rouge">print</code> is not the same as <code class="language-plaintext highlighter-rouge">Print</code>.  Again, we’ll discuss how to interpret error messages in later lessons.</p>

<p>For a final “mistake,” try the following line:</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>print("Hello World"
</code></pre></div></div>
<p>In this case, we don’t get an error message, we just get the line we put in:</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&gt; print("Hello World"
</code></pre></div></div>
<p>This is because the Lua Console recognizes this as an <em>incomplete</em> command, rather than a <em>bad</em> command.  Type in the closing <code class="language-plaintext highlighter-rouge">)</code> to get Hello World printed again.  If you’ve typed in everything the way I have, your console will look like this:</p>

<p><img src="01_lesson_images/console-after-errors.png" alt="Lua console after errors" /></p>

<p>If it looks slightly different, don’t worry about it.  As long as you’ve successfully printed Hello World to the console, move on to the next section.</p>
<h2 id="creating-a-text-box">
  
  
    <a href="#creating-a-text-box">&#128279</a> Creating a Text Box
  
  
</h2>
    

<p>The command <code class="language-plaintext highlighter-rouge">print()</code> displays to the console, and this will be useful for debugging code when the time comes. However, the point of Lua is to interact with the game itself. Therefore, we will now create a text box.</p>

<p>Enter the following command into the Lua Console:</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>civ.ui.text("Hello World!")
</code></pre></div></div>

<p>If typed correctly, a text box should appear:</p>

<p><img src="01_lesson_images/hello-world-text-box.png" alt="Generated Text Box" /></p>

<p>In the above command, the characters within the quote marks <code class="language-plaintext highlighter-rouge">"</code> are displayed to the player.  Try changing the command to show a text box containing <em>Hello Moon!</em> instead. Note that you can use the up and down arrow keys to bring up previous console commands.</p>
<h2 id="registering-an-event">
  
  
    <a href="#registering-an-event">&#128279</a> Registering an Event
  
  
</h2>
    

<p>Thus far, we’ve only been able to make the game do something by writing a command in the Lua Console.  Now we will write code to register an event.  Don’t worry about <em>why</em> the code is written this way.  That will be explained later.  (In fact, the Lua Scenario Template will have you use slightly different code to register an event.)</p>

<p>Enter the following code into the Lua Console:</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>civ.scen.onActivateUnit(function() civ.ui.text("Hello World!") end)
</code></pre></div></div>
<p>If no error is printed, close the Lua Console (the X in the top left corner). Activate a unit (clicking on it will do). You should get a “Hello World!” text box message.</p>

<p><img src="01_lesson_images/activate-hello-world.png" alt="Unit activation Hello World" /></p>
<h2 id="a-unit-killed-event">
  
  
    <a href="#a-unit-killed-event">&#128279</a> A Unit Killed Event
  
  
</h2>
    

<p>Now that we have an event when units are activated, let’s write an event for when units are killed.</p>

<p>Open the Lua Console again, and enter this command:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>civ.scen.onUnitKilled(function() civ.ui.text("Goodbye Cruel World!") end)
</code></pre></div></div>

<p>Now, create 2 warriors, one from a different tribe, and make them fight.</p>

<p>You should get a text box like this:</p>

<p><img src="01_lesson_images/goodbye-cruel-world.png" alt="Goodbye Cruel World" /></p>
<h2 id="conclusion">
  
  
    <a href="#conclusion">&#128279</a> Conclusion
  
  
</h2>
    

<p>In this short lesson, we’ve given commands to the game and seen the game react.  We’ve also seen some errors in the Lua Console.  As we progress, we’ll come to understand the commands we give and the errors we will sometimes receive.  For now, I hope you are just a little bit less intimidated by the idea of programming.  You’ve given the computer instructions, and it has followed them.  You have started programming.</p>

<table>
  <tbody>
    <tr>
      <td>Next: <a href="02_writingScripts.html">Writing Programs</a></td>
    </tr>
  </tbody>
</table>
 -->
      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/"></data>

  <div class="wrapper">

    <div class="footer-col-wrapper">
      <div class="footer-col">
<!--        <p class="feed-subscribe">
          <a href="/feed.xml">
            <svg class="svg-icon orange">
              <use xlink:href="/assets/minima-social-icons.svg#rss"></use>
            </svg><span>Subscribe</span>
          </a>
        </p>
-->
<!--
-->
      </div>
      <div class="footer-col">
        <p>Reference materials and lessons for using Lua to program events for Civilization II: Test of Time</p>
      </div>
    </div>

    <div class="social-links">
<ul class="social-media-list">
  <li><a rel="me" href="https://github.com/ProfGarfield" target="_blank" title="ProfGarfield"><svg class="svg-icon grey"><use xlink:href="/assets/minima-social-icons.svg#github"></use></svg>ProfGarfield</a></li>
  <li><a rel="me" href="https://www.youtube.com/user/ProfCiv2" target="_blank" title="YouTube"><svg class="svg-icon grey"><use xlink:href="/assets/minima-social-icons.svg#youtube"></use></svg>ProfCiv2</a></li>
  <li><a rel="me" href="https://forums.civfanatics.com/members/prof-garfield.43783/" target="_blank" title="Civfanatics Profile"><img src="/assets/civfanatics_icon.png" class="svg-icon grey"></img>Prof. Garfield</a></li>
</ul>
</div>

  </div>

</footer>
</body>

</html>

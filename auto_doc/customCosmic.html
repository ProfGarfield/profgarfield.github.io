<!DOCTYPE html>

<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="/assets/css/style.css">
  <!--<link rel="icon" type="image/png" href="/assets/civfanatics_icon.png">-->
    <title>customCosmic</title>
    <link type="application/atom+xml" rel="alternate" href="http://localhost:4000/feed.xml" title="Lua for Civilization II" />
    <!-- Begin Jekyll SEO tag v2.8.0 -->
<title>customCosmic | Lua for Civilization II</title>
<meta name="generator" content="Jekyll v4.3.2" />
<meta property="og:title" content="customCosmic" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Reference materials and lessons for using Lua to program events for Civilization II: Test of Time" />
<meta property="og:description" content="Reference materials and lessons for using Lua to program events for Civilization II: Test of Time" />
<link rel="canonical" href="http://localhost:4000/auto_doc/customCosmic.html" />
<meta property="og:url" content="http://localhost:4000/auto_doc/customCosmic.html" />
<meta property="og:site_name" content="Lua for Civilization II" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="customCosmic" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"WebPage","description":"Reference materials and lessons for using Lua to program events for Civilization II: Test of Time","headline":"customCosmic","url":"http://localhost:4000/auto_doc/customCosmic.html"}</script>
<!-- End Jekyll SEO tag -->

</head>
<body><header class="site-header">
  <div class="wrapper">
    <!--img src="/assets/logo-cfc.png" class="center"--><a class="site-title" rel="author" href="/">Lua for Civilization II</a><nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger"><a class="page-link" href="/about/">About</a><a class="page-link" href="/auto_doc/autoIndex.html">Function Docs</a><a class="page-link" href="/executionPoints.html">Execution Points</a><a class="page-link" href="/lua_lessons/lessons_toc.html">Lua Lessons</a></div>
      </nav></div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <head><title>customCosmic.lua Documentation</title>
</head>
<article class="post">

  <header class="post-header">
    <h1 class="post-title">customCosmic</h1>
  </header>
  
  <div class="toc-div">
    <h2 class="toc-header">Contents</h2>
    <ul><li><a href="#changeephemeralforcity">changeEphemeralForCity</a></li><li><a href="#changeephemeralfortribe">changeEphemeralForTribe</a></li><li><a href="#changeephemeralforunit">changeEphemeralForUnit</a></li><li><a href="#computemovementallowance">computeMovementAllowance</a></li><li><a href="#defaultmovementmultipliers">defaultMovementMultipliers</a></li><li><a href="#enablecustomcosmic">enableCustomCosmic</a></li><li><a href="#enableephemeralmaptransportsettings">enableEphemeralMapTransportSettings</a></li><li><a href="#fullhealthmovementallowance">fullHealthMovementAllowance</a></li><li><a href="#getcitycustomisation">getCityCustomisation</a></li><li><a href="#getcustomisedterraininfo">getCustomisedTerrainInfo</a></li><li><a href="#getemptyunittypecustomisation">getEmptyUnitTypeCustomisation</a></li><li><a href="#getfreesupport">getFreeSupport</a></li><li><a href="#getmovementmultipliers">getMovementMultipliers</a></li><li><a href="#gettribecustomisation">getTribeCustomisation</a></li><li><a href="#gettribeupkeep">getTribeUpkeep</a></li><li><a href="#getunittypecustomisation">getUnitTypeCustomisation</a></li><li><a href="#isenabled">isEnabled</a></li><li><a href="#isimpassablefor">isImpassableFor</a></li><li><a href="#isunittypecustomisation">isUnitTypeCustomisation</a></li><li><a href="#makecitycustomisation">makeCityCustomisation</a></li><li><a href="#maketribecustomisation">makeTribeCustomisation</a></li><li><a href="#makeunittypecustomisation">makeUnitTypeCustomisation</a></li><li><a href="#registercitycustomisation">registerCityCustomisation</a></li><li><a href="#registergetcitycustomisation">registerGetCityCustomisation</a></li><li><a href="#registergettribecustomisation">registerGetTribeCustomisation</a></li><li><a href="#registergetunittypecustomisation">registerGetUnitTypeCustomisation</a></li><li><a href="#registertribecustomisation">registerTribeCustomisation</a></li><li><a href="#registerunittypecustomisation">registerUnitTypeCustomisation</a></li></ul></div>  
  
  <div class="post-content">
    <h1 id="customcosmic">
  
  
    customCosmic <a href="#customcosmic"><span class="self-link">&#128279</span></a>
  
  
</h1>
    

<p>undefined</p>
<h3 id="changeephemeralforcity">
  
  
    changeEphemeralForCity <a href="#changeephemeralforcity"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function customCosmic.changeEphemeralForCity(city: any)
</code></pre></div></div>
<h3 id="changeephemeralfortribe">
  
  
    changeEphemeralForTribe <a href="#changeephemeralfortribe"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function customCosmic.changeEphemeralForTribe(tribe: any)
</code></pre></div></div>
<h3 id="changeephemeralforunit">
  
  
    changeEphemeralForUnit <a href="#changeephemeralforunit"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function customCosmic.changeEphemeralForUnit(unit: unitObject)
</code></pre></div></div>
<p>Changes the ephemeral rules so that the unit customisations
will work</p>
<h3 id="computemovementallowance">
  
  
    computeMovementAllowance <a href="#computemovementallowance"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function customCosmic.computeMovementAllowance(unit: unitObject, customisation?: table)
  -&gt; integer
</code></pre></div></div>
<p>Computes the value that <code class="language-plaintext highlighter-rouge">unit.type.move</code> should have so that <code class="language-plaintext highlighter-rouge">unit</code> satisfies
all its customisations.</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">customisation</code> — If not defined, customCosmic.getUnitTypeCustomisation is called to retrieve it.</p>
<h3 id="defaultmovementmultipliers">
  
  
    defaultMovementMultipliers <a href="#defaultmovementmultipliers"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>customCosmic.defaultMovementMultipliers --&gt; unknown
</code></pre></div></div>
<h3 id="enablecustomcosmic">
  
  
    enableCustomCosmic <a href="#enablecustomcosmic"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function customCosmic.enableCustomCosmic()
</code></pre></div></div>
<h3 id="enableephemeralmaptransportsettings">
  
  
    enableEphemeralMapTransportSettings <a href="#enableephemeralmaptransportsettings"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function customCosmic.enableEphemeralMapTransportSettings()
</code></pre></div></div>
<p>Enables the nativeTransport, buildTransport, useTransport fields
 to be altered by the customCosmic module.  Usually, these
 fields are saved as part of the game, so game events can enable
 or disable transport.  Those kinds of events will no longer work,
 (unless you program them into customCosmic customisations instead).</p>
<h3 id="fullhealthmovementallowance">
  
  
    fullHealthMovementAllowance <a href="#fullhealthmovementallowance"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function customCosmic.fullHealthMovementAllowance(unit: unitObject, customisation?: table)
  -&gt; integer
</code></pre></div></div>
<p>Computes the movement allowance for the unit if it is at full health.</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">customisation</code> — If not defined, customCosmic.getUnitTypeCustomisation is called to retrieve it.</p>
<h3 id="getcitycustomisation">
  
  
    getCityCustomisation <a href="#getcitycustomisation"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function customCosmic.getCityCustomisation(city: cityObject)
  -&gt; table
</code></pre></div></div>
<p>Returns the cityCustomisation for <code class="language-plaintext highlighter-rouge">city</code></p>
<h3 id="getcustomisedterraininfo">
  
  
    getCustomisedTerrainInfo <a href="#getcustomisedterraininfo"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function customCosmic.getCustomisedTerrainInfo(tile: any, city: any)
  -&gt; table
  2. table
  3. table&lt;integer|mapObject, bitmask&gt;
</code></pre></div></div>
<h3 id="getemptyunittypecustomisation">
  
  
    getEmptyUnitTypeCustomisation <a href="#getemptyunittypecustomisation"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function customCosmic.getEmptyUnitTypeCustomisation()
  -&gt; table
</code></pre></div></div>
<p>Returns an ‘empty’ unitTypeCustomisation, with priority set to -1</p>
<h3 id="getfreesupport">
  
  
    getFreeSupport <a href="#getfreesupport"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function customCosmic.getFreeSupport(tribe: any)
  -&gt; table
</code></pre></div></div>
<h3 id="getmovementmultipliers">
  
  
    getMovementMultipliers <a href="#getmovementmultipliers"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function customCosmic.getMovementMultipliers(unit: unitObject, customisation?: table)
  -&gt; { alpine: integer, road: integer, railroad: integer, river: integer, aggregate: integer }
</code></pre></div></div>
<p>Returns the movementMultipliers for <code class="language-plaintext highlighter-rouge">unit</code> in a table.</p>
<h3 id="gettribecustomisation">
  
  
    getTribeCustomisation <a href="#gettribecustomisation"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function customCosmic.getTribeCustomisation(tribe: tribeObject)
  -&gt; table
</code></pre></div></div>
<p>Returns the tribeCustomisation for <code class="language-plaintext highlighter-rouge">tribe</code></p>
<h3 id="gettribeupkeep">
  
  
    getTribeUpkeep <a href="#gettribeupkeep"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function customCosmic.getTribeUpkeep(tribe: tribeObject, recalculate?: boolean)
  -&gt; integer
</code></pre></div></div>
<p>Returns the total improvement maintenance cost a tribe must pay each turn.
If <code class="language-plaintext highlighter-rouge">recalculate</code> is false or absent, the value is from the most recent
update of each city.  If <code class="language-plaintext highlighter-rouge">recalculate</code> is true, city improvement customisations
are calculated to get the current version of upkeep.</p>
<h3 id="getunittypecustomisation">
  
  
    getUnitTypeCustomisation <a href="#getunittypecustomisation"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function customCosmic.getUnitTypeCustomisation(unit: unitObject)
  -&gt; table
</code></pre></div></div>
<p>Returns the unitTypeCustomisation for <code class="language-plaintext highlighter-rouge">unit</code>.</p>
<h3 id="isenabled">
  
  
    isEnabled <a href="#isenabled"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function customCosmic.isEnabled()
  -&gt; boolean
</code></pre></div></div>
<p>Returns true if the customCosmic module has been enabled 
using <code class="language-plaintext highlighter-rouge">cusomCosmic.enableCustomCosmic()</code>, and false otherwise.</p>
<h3 id="isimpassablefor">
  
  
    isImpassableFor <a href="#isimpassablefor"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function customCosmic.isImpassableFor(baseTerrain: baseTerrainObject, unit: unitObject, customisation: table|nil)
  -&gt; boolean
</code></pre></div></div>
<p>Determines if a base terrain type is impassable for the specified unit.</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">customisation</code> — if nil, the customisation is retrieved by calling <code class="language-plaintext highlighter-rouge">customCosmic.getUnitTypeCustomisation</code></p>
<h3 id="isunittypecustomisation">
  
  
    isUnitTypeCustomisation <a href="#isunittypecustomisation"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>customCosmic.isUnitTypeCustomisation --&gt; fun(item: any):boolean
</code></pre></div></div>
<h3 id="makecitycustomisation">
  
  
    makeCityCustomisation <a href="#makecitycustomisation"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function customCosmic.makeCityCustomisation(table: any)
  -&gt; unknown
</code></pre></div></div>
<h3 id="maketribecustomisation">
  
  
    makeTribeCustomisation <a href="#maketribecustomisation"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function customCosmic.makeTribeCustomisation(table: any)
  -&gt; unknown
</code></pre></div></div>
<h3 id="makeunittypecustomisation">
  
  
    makeUnitTypeCustomisation <a href="#makeunittypecustomisation"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function customCosmic.makeUnitTypeCustomisation(table: any)
  -&gt; unknown
</code></pre></div></div>
<h3 id="registercitycustomisation">
  
  
    registerCityCustomisation <a href="#registercitycustomisation"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function customCosmic.registerCityCustomisation(customisation: table)
</code></pre></div></div>
<p>Registers a customisation for cities.<br />
Keys and descriptions for city customisation tables:</p>

<ul>
  <li>These keys are used to change cosmic parameters that relate to city 
production.  Some cosmic parameters relating to city production are in the tribe
customisations, because they are used before code in onCalculateCityYield can
change them.
    <ul>
      <li><code class="language-plaintext highlighter-rouge">communismPalaceDistance</code> = nil\|int&gt;=0 or function(city) –&gt; nil\|int&gt;=0
        <ul>
          <li>Specifies the base value to be used for civ.cosmic.communismPalaceDistance</li>
          <li>If nil, the value from the authoritativeDefaultRules is used.</li>
          <li>If function, use the returned value when given the city as the argument.</li>
        </ul>
      </li>
      <li><code class="language-plaintext highlighter-rouge">communismPalaceDistanceModifier</code> = nil\|int or function(city) –&gt; nil\|int
        <ul>
          <li>Add this to the base value to be used for civ.cosmic.communismPalaceDistance</li>
          <li>If nil, add 0.  Note, a negative number here will not reduce the base value below 0.</li>
          <li>If function, use the returned value when given the city as the argument.</li>
        </ul>
      </li>
      <li><code class="language-plaintext highlighter-rouge">foodEaten</code> = nil\|int&gt;=0 or function(city) –&gt; nil\|int&gt;=0
        <ul>
          <li>Specifies the base value to be used for civ.cosmic.foodEaten</li>
          <li>If nil, the value from the authoritativeDefaultRules is used.</li>
          <li>If function, use the returned value when given the city as the argument.</li>
        </ul>
      </li>
      <li><code class="language-plaintext highlighter-rouge">foodEatenModifier</code> = nil\|int or function(city) –&gt; nil\|int
        <ul>
          <li>Add this to the base value to be used for civ.cosmic.foodEaten</li>
          <li>If nil, add 0.  Note, a negative number here will not reduce the base value below 0.</li>
          <li>If function, use the returned value when given the city as the argument.</li>
        </ul>
      </li>
      <li><code class="language-plaintext highlighter-rouge">prodChangePenalty</code>= nil\|int&gt;=0 or function(city) –&gt; nil\|int&gt;=0
        <ul>
          <li>Specifies the base value to be used for civ.cosmic.prodChangePenalty</li>
          <li>If nil, the value from the authoritativeDefaultRules is used.</li>
          <li>If function, use the returned value when given the city as the argument.</li>
        </ul>
      </li>
      <li><code class="language-plaintext highlighter-rouge">prodChangePenaltyModifier</code>= nil\|int or function(city) –&gt; nil\|int
        <ul>
          <li>Add this to the base value to be used for civ.cosmic.prodChangePenalty</li>
          <li>If nil, add 0.  Note, a negative number here will not reduce the base value below 0.</li>
          <li>If function, use the returned value when given the city as the argument.</li>
        </ul>
      </li>
      <li><code class="language-plaintext highlighter-rouge">riotFactor</code>= nil\|int&gt;=0 or function(city) –&gt; nil\|int&gt;=0
        <ul>
          <li>Specifies the base value to be used for civ.cosmic.riotFactor</li>
          <li>If nil, the value from the authoritativeDefaultRules is used.</li>
          <li>If function, use the returned value when given the city as the argument.</li>
        </ul>
      </li>
      <li><code class="language-plaintext highlighter-rouge">riotFactorModifier</code> = nil\|int or function(city) –&gt; nil\|int
        <ul>
          <li>Add this to the base value to be used for civ.cosmic.riotFactor</li>
          <li>If nil, add 0.  Note, a negative number here will not reduce the base value below 0.</li>
          <li>If function, use the returned value when given the city as the argument.</li>
        </ul>
      </li>
      <li><code class="language-plaintext highlighter-rouge">scienceLostFundamentalism</code>= nil\|int&gt;=0 or function(city) –&gt; nil\|int&gt;=0
        <ul>
          <li>Specifies the base value to be used for civ.cosmic.scienceLostFundamentalism</li>
          <li>If nil, the value from the authoritativeDefaultRules is used.</li>
          <li>If function, use the returned value when given the city as the argument.</li>
        </ul>
      </li>
      <li><code class="language-plaintext highlighter-rouge">scienceLostFundamentalismModifier</code>= nil\|int or function(city) –&gt; nil\|int
        <ul>
          <li>Add this to the base value to be used for civ.cosmic.scienceLostFundamentalism</li>
          <li>If nil, add 0.  Note, a negative number here will not reduce the base value below 0.</li>
          <li>If function, use the returned value when given the city as the argument.</li>
        </ul>
      </li>
      <li><code class="language-plaintext highlighter-rouge">scienceRateFundamentalism</code>= nil\|int&gt;=0 or function(city) –&gt; nil\|int&gt;=0
        <ul>
          <li>Specifies the base value to be used for civ.cosmic.scienceRateFundamentalism</li>
          <li>If nil, the value from the authoritativeDefaultRules is used.</li>
          <li>If function, use the returned value when given the city as the argument.</li>
        </ul>
      </li>
      <li><code class="language-plaintext highlighter-rouge">scienceRateFundamentalismModifier</code>= nil\|int or function(city) –&gt; nil\|int
        <ul>
          <li>Add this to the base value to be used for civ.cosmic.scienceRateFundamentalism</li>
          <li>If nil, add 0.  Note, a negative number here will not reduce the base value below 0.</li>
          <li>If function, use the returned value when given the city as the argument.</li>
        </ul>
      </li>
      <li><code class="language-plaintext highlighter-rouge">sizeUnhappiness</code>= nil\|int&gt;=0 or function(city) –&gt; nil\|int&gt;=0
        <ul>
          <li>Specifies the base value to be used for civ.cosmic.sizeUnhappiness</li>
          <li>If nil, the value from the authoritativeDefaultRules is used.</li>
          <li>If function, use the returned value when given the city as the argument.</li>
        </ul>
      </li>
      <li><code class="language-plaintext highlighter-rouge">sizeUnhappinessModifier</code>= nil\|int or function(city) –&gt; nil\|int
        <ul>
          <li>Add this to the base value to be used for  civ.cosmic.sizeUnhappiness</li>
          <li>If nil, add 0.  Note, a negative number here will not reduce the base value below 0.</li>
          <li>If function, use the returned value when given the city as the argument.</li>
        </ul>
      </li>
    </ul>
  </li>
  <li>The <code class="language-plaintext highlighter-rouge">condition</code> and <code class="language-plaintext highlighter-rouge">priority</code> keys determine which customisation table is chosen for a particular city.  The <code class="language-plaintext highlighter-rouge">customisationName</code> key is used to give the customisation a name which is used in some error messages.
    <ul>
      <li><code class="language-plaintext highlighter-rouge">customisationName</code> = nil\|string
        <ul>
          <li>A name to be used during certain kinds of error and debugging messages</li>
          <li>nil will give “Unnamed City Customisation”</li>
        </ul>
      </li>
      <li><code class="language-plaintext highlighter-rouge">condition</code> = nil\|tribeObject\|traitString\|function(city)–&gt;boolean or table of tribeObject\|traitString
        <ul>
          <li>if nil, this customisation applies to all cities (unless a higher  priority customisation also applies)</li>
          <li>if tribeObject, this customisation applies to cities owned by the tribe</li>
          <li>if traitString, this customisation applies to tribes which have the trait</li>
          <li>if table of tribeObject\|traitString, this applies to any tribe or traitString in the table</li>
          <li>if function(city) –&gt; boolean, then this customisation applies to cities which make this function return true</li>
          <li>only one customisation can apply to any city.  The <code class="language-plaintext highlighter-rouge">priority</code> key is used to tie break.</li>
        </ul>
      </li>
      <li><code class="language-plaintext highlighter-rouge">priority</code> = nil or number &gt;= 0
        <ul>
          <li>If multiple customisations can apply to a city, this value chooses among them, with higher priority taking precedence.</li>
          <li>If the city is eligible for two customisations of the same priority, an error may be generated, and will certainly be generated if they are of the highest priority.</li>
        </ul>
      </li>
    </ul>
  </li>
  <li>The following types of objects can also be keys in a city customisation table: <code class="language-plaintext highlighter-rouge">unitTypeObject</code>, <code class="language-plaintext highlighter-rouge">improvementObject</code>, <code class="language-plaintext highlighter-rouge">wonderObject</code>, <code class="language-plaintext highlighter-rouge">baseTerrainObject</code>, and <code class="language-plaintext highlighter-rouge">terrainObject</code>.  (These are associated with integer values behind the scenes, but don’t worry about that.  Just use the object (NOT the ID) as the key.)  Each key takes a table value (or nil), to govern some aspects of the item.
    <ul>
      <li><code class="language-plaintext highlighter-rouge">[unitTypeObject]</code> = nil\|table
        <ul>
          <li><code class="language-plaintext highlighter-rouge">cost</code> = nil\|int&gt;=0 or function(city)–&gt;nil\|int&gt;=0
            <ul>
              <li>Sets the base cost (in shield rows) for the city</li>
              <li>If nil, refer to authoritativeDefaultRules</li>
              <li>If function, use result after evaluating function(city)</li>
            </ul>
          </li>
          <li><code class="language-plaintext highlighter-rouge">costModifier</code> = nil\|int or function(city)–&gt;nil\|int
            <ul>
              <li>Add this to the base cost, but cost won’t be less than 0</li>
              <li>If nil, use 0</li>
              <li>If function, use result after evaluating function(city)</li>
            </ul>
          </li>
        </ul>
      </li>
      <li><code class="language-plaintext highlighter-rouge">[improvementObject]</code> = nil\|table
        <ul>
          <li><code class="language-plaintext highlighter-rouge">cost</code> = nil\|int&gt;=0 or function(city)–&gt;nil\|int&gt;=0
            <ul>
              <li>Sets the base cost (in shield rows) for the city</li>
              <li>If nil, refer to authoritativeDefaultRules</li>
              <li>If function, use result after evaluating function(city)</li>
            </ul>
          </li>
          <li><code class="language-plaintext highlighter-rouge">costModifier</code> = nil\|int or function(city)–&gt;nil\|int
            <ul>
              <li>Add this to the base cost, but cost won’t be less than 0</li>
              <li>If nil, use 0</li>
              <li>If function, use result after evaluating function(city)</li>
            </ul>
          </li>
          <li><code class="language-plaintext highlighter-rouge">cantSell</code> = nil\|boolean or function(city)–&gt;nil\|boolean
            <ul>
              <li>If true, the city can’t sell the improvement, if false, it can.</li>
              <li>If nil, refer to the authoritativeDefaultRules</li>
            </ul>
          </li>
          <li><code class="language-plaintext highlighter-rouge">upkeep</code> = nil\|int&gt;=0 or function(city)–&gt;nil\|int&gt;=0
            <ul>
              <li>Sets the base upkeep (gold per turn) this improvement in this city</li>
              <li>If nil, refer to authoritativeDefaultRules</li>
              <li>If function, use result after evaluating function(city)</li>
              <li>Note: Upkeep costs will be calculated correctly during city processing, but the Tax Rate and Trade Adviser windows will not be correct if the upkeep isn’t the same for all cities (Costs for the most recently looked at city will be used.)</li>
              <li><code class="language-plaintext highlighter-rouge">customCosmic.getTribeUpkeep</code> will calculate the actual upkeep per turn for the tribe.</li>
            </ul>
          </li>
          <li><code class="language-plaintext highlighter-rouge">upkeepModifier</code> = nil\|int or function(city)–&gt;nil\|int
            <ul>
              <li>Add this to the base upkeep, but upkeep won’t be less than 0</li>
              <li>If nil, use 0</li>
              <li>If function, use result after evaluating function(city)</li>
            </ul>
          </li>
        </ul>
      </li>
      <li><code class="language-plaintext highlighter-rouge">[wonderObject]</code> = nil\|table
        <ul>
          <li><code class="language-plaintext highlighter-rouge">cost</code> = nil\|int&gt;=0 or function(city)–&gt;nil\|int&gt;=0
            <ul>
              <li>Sets the base cost (in shield rows) for the city</li>
              <li>If nil, refer to authoritativeDefaultRules</li>
              <li>If function, use result after evaluating function(city)</li>
            </ul>
          </li>
          <li><code class="language-plaintext highlighter-rouge">costModifier</code> = nil\|int or function(city)–&gt;nil\|int
            <ul>
              <li>Add this to the base cost, but cost won’t be less than 0</li>
              <li>If nil, use 0</li>
              <li>If function, use result after evaluating function(city)</li>
            </ul>
          </li>
        </ul>
      </li>
      <li><code class="language-plaintext highlighter-rouge">[baseTerrainObject]</code> = nil\|table
        <ul>
          <li><code class="language-plaintext highlighter-rouge">irrigateBonus</code> = nil\|int&gt;=0 or function(city)–&gt;nil\|int&gt;=0
            <ul>
              <li>Sets the base value of the irrigation bonus for the city and baseTerrain.</li>
              <li>If nil, refer to the authoritativeDefaultRules,</li>
              <li>If function, use the result of function(city),</li>
            </ul>
          </li>
          <li><code class="language-plaintext highlighter-rouge">irrigateBonusModifier</code> = nil\|int or function(city)–&gt;nil\|int
            <ul>
              <li>Add this to the base irrigation bonus, but results less than 0 will be set to 0.</li>
              <li>If nil, use 0.</li>
              <li>If function, use result after evaluating function(city)</li>
            </ul>
          </li>
          <li><code class="language-plaintext highlighter-rouge">mineBonus</code> = nil\|int&gt;=0 or function(city)–&gt;nil\|int&gt;=0
            <ul>
              <li>Sets the base value of the mining bonus for the city and baseTerrain.</li>
              <li>If nil, refer to the authoritativeDefaultRules,</li>
              <li>If function, use the result of function(city),</li>
            </ul>
          </li>
          <li><code class="language-plaintext highlighter-rouge">mineBonusModifier</code> = nil\|int or function(city)–&gt;nil\|int
            <ul>
              <li>Add this to the base mining bonus, but results less than 0 will be set to 0.</li>
              <li>If nil, use 0.</li>
              <li>If function, use result after evaluating function(city)</li>
            </ul>
          </li>
          <li><code class="language-plaintext highlighter-rouge">roadTrade</code> = nil\|boolean or function(city)–&gt;nil\|boolean
            <ul>
              <li>If true, for this city and baseTerrain, the road trade bonus is applied.  If false, it is not.</li>
              <li>If nil, refer to the authoritativeDefaultRules</li>
              <li>If function, use result after evaluating function(city)</li>
            </ul>
          </li>
        </ul>
      </li>
      <li><code class="language-plaintext highlighter-rouge">[terrainObject]</code> = {
        <ul>
          <li><code class="language-plaintext highlighter-rouge">food</code> = nil\|int&gt;=0 or function(city)–&gt;nil\|int&gt;=0
            <ul>
              <li>Sets the base value for the food produced for this city by this terrain type.</li>
              <li>If nil, refer to the authoritativeDefaultRules</li>
              <li>If function, use the result of function(city)</li>
            </ul>
          </li>
          <li><code class="language-plaintext highlighter-rouge">foodModifier</code> = nil\|int or function(city)–&gt;nil\|int
            <ul>
              <li>Add this to the base food production value, but if the result is less than 0, it will be raised to 0.</li>
              <li>If nil, use 0.</li>
              <li>If function, use the result of function(city)</li>
            </ul>
          </li>
          <li><code class="language-plaintext highlighter-rouge">shields</code> = nil\|int&gt;=0 or function(city)–&gt;nil\|int&gt;=0
            <ul>
              <li>Sets the base value for the shields produced for this city by this terrain type.</li>
              <li>If nil, refer to the authoritativeDefaultRules</li>
              <li>If function, use the result of function(city)</li>
            </ul>
          </li>
          <li><code class="language-plaintext highlighter-rouge">shieldsModifier</code> = nil\|int or function(city)–&gt;nil\|int
            <ul>
              <li>Add this to the base shield production value, but if the result is less than 0, it will be raised to 0.</li>
              <li>If nil, use 0.</li>
              <li>If function, use the result of function(city)</li>
            </ul>
          </li>
          <li><code class="language-plaintext highlighter-rouge">trade</code> = nil\|int&gt;=0 or function(city)–&gt;nil\|int&gt;=0
            <ul>
              <li>Sets the base value for the trade produced for this city by this terrain type.</li>
              <li>If nil, refer to the authoritativeDefaultRules</li>
              <li>If function, use the result of function(city)</li>
            </ul>
          </li>
          <li><code class="language-plaintext highlighter-rouge">tradeModifier</code> = nil\|int or function(city)–&gt;nil\|int
            <ul>
              <li>Add this to the base trade production value, but if the result is less than 0, it will be raised to 0.</li>
              <li>If nil, use 0.</li>
              <li>If function, use the result of function(city)</li>
            </ul>
          </li>
        </ul>
      </li>
    </ul>
  </li>
  <li>You can assign the same data table to multiple items by providing a table as the key, instead of a string or luaObject.  Consider:
<br /> [keyTable] = data
<br />For each value in the <code class="language-plaintext highlighter-rouge">keyTable</code>, if value is not a trait, assign
<br />customisation[value] = gen.copyTable(data)
<br />if the value is a trait, for each ITEM such that 
<br />traits.hasTrait(ITEM,value)` 
<br />is true, assign
<br />customisation[ITEM] = gen.copyTable(data)</li>
</ul>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">customisation</code> — A city customisation table, described above.</p>
<h3 id="registergetcitycustomisation">
  
  
    registerGetCityCustomisation <a href="#registergetcitycustomisation"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function customCosmic.registerGetCityCustomisation(fun: fun(city: cityObject):table)
</code></pre></div></div>
<p>Allows the scenario designer to register a function(city)–&gt;cityCustomisation
to be used instead of the <code class="language-plaintext highlighter-rouge">customCosmic.registerCityCustomisation</code> system.
The function must return a cityCustomisation for every 
city under all circumstances</p>
<h3 id="registergettribecustomisation">
  
  
    registerGetTribeCustomisation <a href="#registergettribecustomisation"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function customCosmic.registerGetTribeCustomisation(fun: fun(tribe: tribeObject):table)
</code></pre></div></div>
<p>Allows the scenario designer to register a function(tribe)–&gt;tribeCustomisation
to be used instead of the <code class="language-plaintext highlighter-rouge">customCosmic.registerTribeCustomisation</code> system.
The function must return a tribeCustomisation for every 
tribe under all circumstances</p>
<h3 id="registergetunittypecustomisation">
  
  
    registerGetUnitTypeCustomisation <a href="#registergetunittypecustomisation"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function customCosmic.registerGetUnitTypeCustomisation(fun: fun(unit: unitObject):table)
</code></pre></div></div>
<p>Allows a scenario designer to register a function(unit)–&gt;unitTypeCustomisation
to be used instead of the <code class="language-plaintext highlighter-rouge">customCosmic.registerUnitTypeCustomisation</code> system.
The function must return a unitTypeCustomisation for every unit
under all circumstances</p>
<h3 id="registertribecustomisation">
  
  
    registerTribeCustomisation <a href="#registertribecustomisation"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function customCosmic.registerTribeCustomisation(customisation: table)
</code></pre></div></div>
<p>Registers a customisation for tribes.<br />
Keys and descriptions for tribe customisation tables:</p>

<ul>
  <li>These keys are used to change cosmic parameters that relate to city
production.  These are customised by tribe because the game uses them
before onCalculateCityYield can change them. Other customisations can be made on a per city basis.
    <ul>
      <li><code class="language-plaintext highlighter-rouge">foodRows</code>= nil\|int&gt;=0 or function(tribe) –&gt; nil\|int&gt;=0
        <ul>
          <li>Specifies the base value to be used for civ.cosmic.foodRows</li>
          <li>If nil, the value from the authoritativeDefaultRules is used.</li>
          <li>If function, use the returned value when given the tribe as the argument.</li>
        </ul>
      </li>
      <li><code class="language-plaintext highlighter-rouge">foodRowsModifier</code> = nil\|int or function(tribe) –&gt; nil\|int
        <ul>
          <li>Add this to the base value to be used for  civ.cosmic.foodRows</li>
          <li>If nil, add 0.  Note, a negative number here will not reduce the base value below 0.</li>
          <li>If function, use the returned value when given the tribe as the argument.</li>
        </ul>
      </li>
      <li><code class="language-plaintext highlighter-rouge">settlersEatHigh</code>= nil\|int&gt;=0 or function(tribe) –&gt; nil\|int&gt;=0
        <ul>
          <li>Specifies the base value to be used for civ.cosmic.settlersEatHigh</li>
          <li>If nil, the value from the authoritativeDefaultRules is used.</li>
          <li>If function, use the returned value when given the tribe as the argument.</li>
        </ul>
      </li>
      <li><code class="language-plaintext highlighter-rouge">settlersEatHighModifier</code>= nil\|int or function(tribe) –&gt; nil\|int
        <ul>
          <li>Add this to the base value to be used for  civ.cosmic.settlersEatHigh</li>
          <li>If nil, add 0.  Note, a negative number here will not reduce the base value below 0.</li>
          <li>If function, use the returned value when given the tribe as the argument.</li>
        </ul>
      </li>
      <li><code class="language-plaintext highlighter-rouge">settlersEatLow</code>= nil\|int&gt;=0 or function(tribe) –&gt; nil\|int&gt;=0
        <ul>
          <li>Specifies the base value to be used for civ.cosmic.settlersEatLow</li>
          <li>If nil, the value from the authoritativeDefaultRules is used.</li>
          <li>If function, use the returned value when given the tribe as the argument.</li>
        </ul>
      </li>
      <li><code class="language-plaintext highlighter-rouge">settlersEatLowModifier</code>= nil\|int or function(tribe) –&gt; nil\|int
        <ul>
          <li>Add this to the base value to be used for  civ.cosmic.settlersEatLow</li>
          <li>If nil, add 0.  Note, a negative number here will not reduce the base value below 0.</li>
          <li>If function, use the returned value when given the tribe as the argument.</li>
        </ul>
      </li>
      <li><code class="language-plaintext highlighter-rouge">shieldRows</code>= nil\|int&gt;=0 or function(tribe) –&gt; nil\|int&gt;=0
        <ul>
          <li>Specifies the base value to be used for civ.cosmic.shieldRows</li>
          <li>If nil, the value from the authoritativeDefaultRules is used.</li>
          <li>If function, use the returned value when given the tribe as the argument.</li>
        </ul>
      </li>
      <li><code class="language-plaintext highlighter-rouge">shieldRowsModifier</code>= nil\|int or function(tribe) –&gt; nil\|int
        <ul>
          <li>Add this to the base value to be used for  civ.cosmic.shieldRows</li>
          <li>If nil, add 0.  Note, a negative number here will not reduce the base value below 0.</li>
          <li>If function, use the returned value when given the tribe as the argument.</li>
        </ul>
      </li>
      <li><code class="language-plaintext highlighter-rouge">sizeAquaduct</code>= nil\|int&gt;=0 or function(tribe) –&gt; nil\|int&gt;=0
        <ul>
          <li>Specifies the base value to be used for civ.cosmic.sizeAquaduct</li>
          <li>If nil, the value from the authoritativeDefaultRules is used.</li>
          <li>If function, use the returned value when given the tribe as the argument.</li>
          <li>NOTE: sizeAqueduct can be used instead to refer to this value.</li>
        </ul>
      </li>
      <li><code class="language-plaintext highlighter-rouge">sizeAquaductModifier</code>= nil\|int or function(tribe) –&gt; nil\|int
        <ul>
          <li>Add this to the base value to be used for  civ.cosmic.sizeAquaduct</li>
          <li>If nil, add 0.  Note, a negative number here will not reduce the base value below 0.</li>
          <li>If function, use the returned value when given the tribe as the argument.</li>
          <li>NOTE: sizeAqueductModifier can be used instead to refer to this value.</li>
        </ul>
      </li>
      <li><code class="language-plaintext highlighter-rouge">sizeSewer</code>= nil\|int&gt;=0 or function(tribe) –&gt; nil\|int&gt;=0
        <ul>
          <li>Specifies the base value to be used for civ.cosmic.sizeSewer</li>
          <li>If nil, the value from the authoritativeDefaultRules is used.</li>
          <li>If function, use the returned value when given the tribe as the argument.</li>
        </ul>
      </li>
      <li><code class="language-plaintext highlighter-rouge">sizeSewerModifier</code>= nil\|int or function(tribe) –&gt; nil\|int
        <ul>
          <li>Add this to the base value to be used for  civ.cosmic.sizeSewer</li>
          <li>If nil, add 0.  Note, a negative number here will not reduce the base value below 0.</li>
          <li>If function, use the returned value when given the tribe as the argument.</li>
        </ul>
      </li>
      <li><code class="language-plaintext highlighter-rouge">supportCommunism</code>= nil\|int&gt;=0 or function(tribe) –&gt; nil\|int&gt;=0
        <ul>
          <li>Specifies the base value to be used for civ.cosmic.supportCommunism</li>
          <li>If nil, the value from the authoritativeDefaultRules is used.</li>
          <li>If function, use the returned value when given the tribe as the argument.</li>
        </ul>
      </li>
      <li><code class="language-plaintext highlighter-rouge">supportCommunismModifier</code>= nil\|int or function(tribe) –&gt; nil\|int
        <ul>
          <li>Add this to the base value to be used for  civ.cosmic.supportCommunism</li>
          <li>If nil, add 0.  Note, a negative number here will not reduce the base value below 0.</li>
          <li>If function, use the returned value when given the tribe as the argument.</li>
        </ul>
      </li>
      <li><code class="language-plaintext highlighter-rouge">supportFundamentalism</code>= nil\|int&gt;=0 or function(tribe) –&gt; nil\|int&gt;=0
        <ul>
          <li>Specifies the base value to be used for civ.cosmic.supportFundamentalism</li>
          <li>If nil, the value from the authoritativeDefaultRules is used.</li>
          <li>If function, use the returned value when given the tribe as the argument.</li>
        </ul>
      </li>
      <li><code class="language-plaintext highlighter-rouge">supportFundamentalismModifier</code>= nil\|int or function(tribe) –&gt; nil\|int
        <ul>
          <li>Add this to the base value to be used for  civ.cosmic.supportFundamentalism</li>
          <li>If nil, add 0.  Note, a negative number here will not reduce the base value below 0.</li>
          <li>If function, use the returned value when given the tribe as the argument.</li>
        </ul>
      </li>
      <li><code class="language-plaintext highlighter-rouge">supportMonarchy</code>= nil\|int&gt;=0 or function(tribe) –&gt; nil\|int&gt;=0
        <ul>
          <li>Specifies the base value to be used for civ.cosmic.supportMonarchy</li>
          <li>If nil, the value from the authoritativeDefaultRules is used.</li>
          <li>If function, use the returned value when given the tribe as the argument.</li>
        </ul>
      </li>
      <li><code class="language-plaintext highlighter-rouge">supportMonarchyModifier</code>= nil\|int or function(tribe) –&gt; nil\|int
        <ul>
          <li>Add this to the base value to be used for  civ.cosmic.supportMonarchy</li>
          <li>If nil, add 0.  Note, a negative number here will not reduce the base value below 0.</li>
          <li>If function, use the returned value when given the tribe as the argument.</li>
        </ul>
      </li>
    </ul>
  </li>
  <li>The <code class="language-plaintext highlighter-rouge">condition</code> and <code class="language-plaintext highlighter-rouge">priority</code> keys determine which customisation table is chosen for a particular tribe.  The <code class="language-plaintext highlighter-rouge">customisationName</code> key is used to give the customisation a name which is used in some error messages.
    <ul>
      <li><code class="language-plaintext highlighter-rouge">customisationName</code> = nil\|string
        <ul>
          <li>A name to be used during certain kinds of error and debugging messages</li>
          <li>nil will give “Unnamed Tribe Customisation”</li>
        </ul>
      </li>
      <li><code class="language-plaintext highlighter-rouge">condition</code> = nil\|tribeObject\|traitString\|function(tribe)–&gt;boolean or table of tribeObject\|traitString
        <ul>
          <li>if nil, this customisation applies to all tribes (unless a higher  priority customisation also applies)</li>
          <li>if tribeObject, this customisation applies to that tribe</li>
          <li>if traitString, this customisation applies to tribes which have the trait</li>
          <li>if table of tribeObject\|traitString, this applies to any tribe or traitString in the table</li>
          <li>if function(tribe) –&gt; boolean, then this customisation applies to tribes which make this function return true</li>
          <li>only one customisation can apply to any tribe.  The <code class="language-plaintext highlighter-rouge">priority</code> key is used to tie break.</li>
        </ul>
      </li>
      <li><code class="language-plaintext highlighter-rouge">priority</code> = nil\|number&gt;=0
        <ul>
          <li>If multiple customisations can apply to a tribe, this value chooses among them, with higher priority taking precedence.</li>
          <li>If the tribe is eligible for two customisations of the same priority, an error may be generated, and will certainly be generated if they are of the highest priority.</li>
        </ul>
      </li>
    </ul>
  </li>
  <li><code class="language-plaintext highlighter-rouge">unitTypeObject</code>s can also be keys in a tribe customisation table.
(These are associated with integer values behind the scenes,
 but don’t worry about that.  Just use the object (NOT the ID) as the key.)
Each key takes a table (or nil) as a value, to govern the support
characteristics of the item.
    <ul>
      <li><code class="language-plaintext highlighter-rouge">[unitTypeObject]</code> = nil\|table
        <ul>
          <li><code class="language-plaintext highlighter-rouge">freeSupportUnderFundamentalism</code> = nil\|boolean or function(tribe)–&gt;nil\|boolean
            <ul>
              <li>If true, unitType has the freeSupportUnderFundamentalism flag for this tribe.  If false, it does not.</li>
              <li>If nil, refer to the authoritativeDefaultRules</li>
            </ul>
          </li>
          <li><code class="language-plaintext highlighter-rouge">requiresFoodSupport</code> = nil\|boolean or function(tribe)–&gt;nil\|boolean
            <ul>
              <li>If true, the tribe must pay food support for this unitType.</li>
              <li>If false, it does not. (Setting this to true makes both settler and non-settler unit types require food.)</li>
              <li>If nil, refer to the authoritativeDefaultRules
  –          }</li>
            </ul>
          </li>
        </ul>
      </li>
    </ul>
  </li>
  <li>You can assign the same data table to multiple items by providing a table as the key, instead of a string or luaObject.  Consider:
<br /> [keyTable] = data
<br />For each value in the <code class="language-plaintext highlighter-rouge">keyTable</code>, if value is not a trait, assign
<br />customisation[value] = gen.copyTable(data)
<br />if the value is a trait, for each ITEM such that 
<br />traits.hasTrait(ITEM,value)` 
<br />is true, assign
<br />customisation[ITEM] = gen.copyTable(data)</li>
</ul>
<h3 id="registerunittypecustomisation">
  
  
    registerUnitTypeCustomisation <a href="#registerunittypecustomisation"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function customCosmic.registerUnitTypeCustomisation(unitTypeOrTrait: string|table&lt;any, string|unitTypeObject&gt;|unitTypeObject, unitTypeCustomisation: table)
</code></pre></div></div>
<p>Registers a customisation for a unitType, a trait for unitTypes, or a table of unitTypes and traits for unitTypes.<br />
Keys and descriptions for unitType customisation tables:
<br /></p>
<ul>
  <li>If both <code class="language-plaintext highlighter-rouge">atomicMovementBonus</code> and <code class="language-plaintext highlighter-rouge">movementBonus</code> are used, both modify movement.
    <ul>
      <li><code class="language-plaintext highlighter-rouge">atomicMovementBonus</code> = nil\|int or function(unit)–&gt;nil\|Int
        <ul>
          <li>Bonus movement points (compared to authoritativeDefaultRules)</li>
          <li>Positive means add, negative means subtract</li>
          <li>nil means no change</li>
          <li>if function, the returned value of function(unit) is used.</li>
        </ul>
      </li>
      <li><code class="language-plaintext highlighter-rouge">movementBonus</code> = nil\|num or function(unit)–&gt;nil\|num
        <ul>
          <li>Bonus movement points (compared to authoritativeDefaultRules)</li>
          <li>whole movement points, positive means add, negative means subtract</li>
          <li>nil means no change</li>
          <li>if function, the returned value of function(unit) is used.</li>
        </ul>
      </li>
    </ul>
  </li>
  <li>Only one of <code class="language-plaintext highlighter-rouge">atomicCustomMovement</code> and <code class="language-plaintext highlighter-rouge">customMovement</code> is permissible.  If both exist, <code class="language-plaintext highlighter-rouge">atomicCustomMovement</code> is used.  If this and the <code class="language-plaintext highlighter-rouge">movementBonus</code> both exist, the <code class="language-plaintext highlighter-rouge">movementBonus</code> is added to this instead of the authoritativeDefaultRules.  If both are nil, refer to the authoritativeDefaultRules.
    <ul>
      <li><code class="language-plaintext highlighter-rouge">atomicCustomMovement</code> = nil\|int&gt;=0 or function(unit)–&gt;nil\|int&gt;=0
        <ul>
          <li>Unit type will have this amount of atomic movement points, regardless of the authoritativeDefaultRules</li>
          <li>if function, the returned value of function(unit) is used.</li>
        </ul>
      </li>
      <li><code class="language-plaintext highlighter-rouge">customMovement</code> = nil\|num&gt;=0 or function(unit)–&gt; nil\|num&gt;=0
        <ul>
          <li>Unit type will have this amount of movement points, regardless of the authoritativeDefaultRules.</li>
          <li>if function, the returned value of function(unit) is used.</li>
        </ul>
      </li>
    </ul>
  </li>
  <li>If both of <code class="language-plaintext highlighter-rouge">atomicMinMove</code> and <code class="language-plaintext highlighter-rouge">minMove</code> are specified, the one yielding a larger bonus is used.
    <ul>
      <li><code class="language-plaintext highlighter-rouge">atomicMinMove</code> = nil\|int or function(unit)–&gt;nil\|int
        <ul>
          <li>Ensures a damaged land or sea unit will still be able to move this many atomic movement points (unless that would require setting it’s unit type’s atomic movement beyond 255, which can’t be overcome.  If this is a problem,
  consider changing movement multipliers for the unit to have
  a lower aggregate value)</li>
          <li>nil means no minimum movement</li>
          <li>does not increase movement beyond the unit’s movement allowance</li>
          <li>since a damaged unit can’t have a fractional movement allowance,
  the effective atomicMinMove is reduced to the next lowest full
  movement point.</li>
        </ul>
      </li>
      <li><code class="language-plaintext highlighter-rouge">minMove</code> = nil\|num or function(unit)–&gt;nil\|num
        <ul>
          <li>Ensures a damaged land or sea unit will still be able to move this many movement points (unless that would require setting it’s unit type’s atomic movement beyond 255, which can’t be overcome.  If this is a problem,
  consider changing movement multipliers for the unit to have
  a lower aggregate value)</li>
          <li>nil means no minimum movement</li>
          <li>does not increase movement beyond the unit’s movement allowance</li>
        </ul>
      </li>
    </ul>
  </li>
  <li>Movement Multipliers have no special interactions.
    <ul>
      <li><code class="language-plaintext highlighter-rouge">roadMultiplier</code> = nil or int&gt;=-1 or function(unit)–&gt;nil int&gt;=-1
        <ul>
          <li>The road multiplier for the unit type</li>
          <li>nil means refer first to the defaultMovementMultipliers, then to authoritativeDefaultRules</li>
          <li>if function, the returned value of function(unit) is used.</li>
        </ul>
      </li>
      <li><code class="language-plaintext highlighter-rouge">railroadMultiplier</code> = nil or int&gt;=-1 or function(unit)–&gt;nil int&gt;=-1
        <ul>
          <li>The railroad multiplier for this unit type</li>
          <li>nil means refer first to the defaultMovementMultipliers, then to authoritativeDefaultRules</li>
          <li>if function, the returned value of function(unit) is used.</li>
        </ul>
      </li>
      <li><code class="language-plaintext highlighter-rouge">alpineMultiplier</code> = nil or int&gt;=-1 or function(unit)–&gt;nil int&gt;=-1
        <ul>
          <li>The alpine multiplier for this unit type</li>
          <li>nil means refer first to the defaultMovementMultipliers, then to authoritativeDefaultRules</li>
          <li>if function, the returned value of function(unit) is used.</li>
        </ul>
      </li>
      <li><code class="language-plaintext highlighter-rouge">riverMultiplier</code> = nil or int&gt;=-1 or function(unit)–&gt;nil int&gt;=-1
        <ul>
          <li>The river multiplier for this unit type</li>
          <li>nil means refer first to the defaultMovementMultipliers, then to authoritativeDefaultRules</li>
          <li>if function, the returned value of function(unit) is used.</li>
        </ul>
      </li>
    </ul>
  </li>
  <li>The <code class="language-plaintext highlighter-rouge">isImpassable</code> and <code class="language-plaintext highlighter-rouge">moveCost</code> keys have tables as values (or nil, if you wish to make no changes).  These tables accept either <code class="language-plaintext highlighter-rouge">baseTerrainObject</code>s as keys, or integers, as determined by <code class="language-plaintext highlighter-rouge">gen.getBaseTerrainID</code>. Using the baseTerrainObject is recommended for clarity.
    <ul>
      <li><code class="language-plaintext highlighter-rouge">isImpassable[baseTerrainObject/ID]</code> = nil or boolean or function(unit)–&gt;nil or boolean
        <ul>
          <li>if true, the baseTerrain is impassable for the unit type</li>
          <li>if false, the baseTerrain is not impassable for the unit type</li>
          <li>if nil, refer to the authoritativeDefaultRules</li>
          <li>if function, the returned value of function(unit) is used.</li>
        </ul>
      </li>
      <li><code class="language-plaintext highlighter-rouge">moveCost[baseTerrainObject/ID]</code> = nil\|int&gt;=0 or function(unit)–&gt;nil\|int&gt;=0
        <ul>
          <li>if integer, this is the (full movement point) movement cost of the base terrain</li>
          <li>if nil, refer to the authoritativeDefaultRules</li>
          <li>if function, the returned value of function(unit) is used.</li>
        </ul>
      </li>
    </ul>
  </li>
  <li>The <code class="language-plaintext highlighter-rouge">cosmic</code> and <code class="language-plaintext highlighter-rouge">flag</code> keys have tables as values.  The <code class="language-plaintext highlighter-rouge">cosmic</code> table keys change the <code class="language-plaintext highlighter-rouge">civ.cosmic</code> fields with the same key.  The <code class="language-plaintext highlighter-rouge">flags</code> table keys are derived from General Library function names.
    <ul>
      <li><code class="language-plaintext highlighter-rouge">cosmic[cosmicKey]</code> = int&gt;=0\|nil or function(unit)–&gt;int&gt;=0\|nil
        <ul>
          <li>if nil, use the value in the authoritativeDefaultRules instead</li>
          <li>possible values for cosmicKey:
            <ul>
              <li>“paradropRange”</li>
              <li>“triremeLost”</li>
              <li>“transformBase”</li>
            </ul>
          </li>
          <li>if function, the returned value of function(unit) is used.</li>
        </ul>
      </li>
      <li><code class="language-plaintext highlighter-rouge">flags[flagKey]</code> = nil or boolean or function(unit)–&gt;nil or boolean
        <ul>
          <li>if true, the unit has the flag corresponding to the flagKey</li>
          <li>if false, the unit does not have the flag corresponding to flagKey</li>
          <li>if nil, flags from the authoritativeDefaultRules are used</li>
          <li>possible values for flagKey:
            <ul>
              <li>“canCrossImpassableTerrain”</li>
              <li>“canFoundCities”</li>
              <li>“canImproveTiles” (no effect if not settler)</li>
              <li>“seeTwoSpaces”</li>
              <li>“ignoreZOC”</li>
              <li>“amphibious”</li>
              <li>“coastal”</li>
              <li>“ignoreWalls”</li>
              <li>“carryAir”</li>
              <li>“paradrop”</li>
              <li>“alpine”</li>
              <li>“destroyedAfterAttacking”</li>
              <li>“spotSubmarines”</li>
            </ul>
          </li>
          <li>if function, the returned value of function(unit) is used.</li>
        </ul>
      </li>
    </ul>
  </li>
  <li>The <code class="language-plaintext highlighter-rouge">condition</code> and <code class="language-plaintext highlighter-rouge">priority</code> keys determine which customisation table is chosen for a particular unit.  The <code class="language-plaintext highlighter-rouge">customisationName</code> key is used to give the customisation a name which is used in some error messages.
    <ul>
      <li><code class="language-plaintext highlighter-rouge">condition</code> = nil\|tribeObject\|traitString\|function(unit)–&gt;boolean or table of tribeObject\|traitString
        <ul>
          <li>if nil, this unit type customisation applies to all units of the relevant type(s).</li>
          <li>if tribeObject, this customisation can only apply to units owned by that tribe (as long as the unit is also of the relevant type)</li>
          <li>if traitString, this customisation applies to tribes which have the trait</li>
          <li>if table of tribeObject\|traitString, this applies to any tribe or traitString in the table</li>
          <li>if function(unit) –&gt; boolean, then this customisation applies to units of the relevant type(s) which also make this function return true</li>
          <li>Only one customisation can apply to any unit.  The <code class="language-plaintext highlighter-rouge">priority</code> key is used to tie break.</li>
        </ul>
      </li>
      <li><code class="language-plaintext highlighter-rouge">priority</code> = nil or number&gt;=0
        <ul>
          <li>If multiple customisations can apply to a unit, this value chooses among them, with higher priority taking precedence.</li>
          <li>If the unit is eligible for two customisations of the same priority, an error may be generated, and will certainly be generated if they are of the highest priority.</li>
        </ul>
      </li>
      <li><code class="language-plaintext highlighter-rouge">customisationName</code> = nil\|string,
        <ul>
          <li>A name to be used during certain kinds of error and debugging messages</li>
          <li>nil will give “Unnamed UnitType Customisation”</li>
        </ul>
      </li>
    </ul>
  </li>
  <li>Transport settings have no effect unless <code class="language-plaintext highlighter-rouge">customCosmic.ephemeralMapTransportSettings()</code> has been called.  The final transport settings are computed as follows:
<br />1. restore the unitType to the authoritativeDefaultRules transportation settings
<br />2. Apply the <something>Transport strings to the result of step 1
<br />3. Apply transportXY data to the result of step 2
</something>    <ul>
      <li><code class="language-plaintext highlighter-rouge">nativeTransport</code> = string\|nil or function(unit) –&gt; string\|nil
        <ul>
          <li>Governs the unitType nativeTransport field</li>
          <li>String should be 16 characters, 0,1, or x</li>
          <li>Each of the 16 characters reference one of the possible map transport relationships.  If it is 0, the corresponding relationship is disabled, if it is 1, the corresponding relationship is enabled, and if it is x, reference the authoritativeDefaultRules</li>
          <li>if nil, use authoritativeDefaultRules, if function,</li>
          <li>evaluate function(unit) and use the result</li>
        </ul>
      </li>
      <li><code class="language-plaintext highlighter-rouge">buildTransport</code> = string\|nil or function(unit) –&gt; string\|nil
        <ul>
          <li>Governs the unitType buildTransport field</li>
          <li>String should be 16 characters, 0,1, or x</li>
          <li>Each of the 16 characters reference one of the possible map transport relationships.  If it is 0, the corresponding relationship is disabled, if it is 1, the corresponding relationship is enabled, and if it is x, reference the authoritativeDefaultRules</li>
          <li>if nil, use authoritativeDefaultRules, if function,</li>
          <li>evaluate function(unit) and use the result</li>
        </ul>
      </li>
      <li><code class="language-plaintext highlighter-rouge">useTransport</code> = string\|nil or function(unit) –&gt; string\|nil
        <ul>
          <li>Governs the unitType useTransport field</li>
          <li>String should be 16 characters, 0,1, or x</li>
          <li>Each of the 16 characters reference one of the possible map transport relationships.  If it is 0, the corresponding relationship is disabled, if it is 1, the corresponding relationship is enabled, and if it is x, reference the authoritativeDefaultRules</li>
          <li>if nil, use authoritativeDefaultRules, if function,</li>
          <li>evaluate function(unit) and use the result</li>
        </ul>
      </li>
      <li><code class="language-plaintext highlighter-rouge">transportXY</code> = {
  <br /> nativeTransport = nil\|boolean or function(unit) –&gt; nil\|boolean
  <br /> buildTransport = nil\|boolean or function(unit) –&gt; nil\|boolean
  <br /> useTransport = nil\|boolean or function(unit) –&gt; nil\|boolean
  <br />}
        <ul>
          <li>transportXY governs the transport relationship between maps X and Y</li>
          <li>if <code class="language-plaintext highlighter-rouge">somethingTransport</code> key is true, then the relationship between the two maps is enabled for maps X and Y in unitType.somethingTransport</li>
          <li>if it is false, the relationship is disabled</li>
          <li>if nil, use the authoritativeDefaultRules, or the relationship set out by the somethingTransport key defined above</li>
          <li>if function, evaluate function(unit) and use the result</li>
          <li><code class="language-plaintext highlighter-rouge">transportXY</code> represents the following available keys:
            <ul>
              <li><code class="language-plaintext highlighter-rouge">transport01</code></li>
              <li><code class="language-plaintext highlighter-rouge">transport02</code></li>
              <li><code class="language-plaintext highlighter-rouge">transport03</code></li>
              <li><code class="language-plaintext highlighter-rouge">transport12</code></li>
              <li><code class="language-plaintext highlighter-rouge">transport13</code></li>
              <li>
<h2 id="transport23">
  
  
    <code class="language-plaintext highlighter-rouge">transport23</code> <a href="#transport23"><span class="self-link">&#128279</span></a>
  
  
</h2>
    
              </li>
            </ul>
          </li>
        </ul>
      </li>
    </ul>
  </li>
</ul>

  </div>
</article>
<!--
    <h1 id="customcosmic">
  
  
    <a href="#customcosmic">&#128279</a> customCosmic
  
  
</h1>
    

<p>undefined</p>
<h3 id="changeephemeralforcity">
  
  
    <a href="#changeephemeralforcity">&#128279</a> changeEphemeralForCity
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function customCosmic.changeEphemeralForCity(city: any)
</code></pre></div></div>
<h3 id="changeephemeralfortribe">
  
  
    <a href="#changeephemeralfortribe">&#128279</a> changeEphemeralForTribe
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function customCosmic.changeEphemeralForTribe(tribe: any)
</code></pre></div></div>
<h3 id="changeephemeralforunit">
  
  
    <a href="#changeephemeralforunit">&#128279</a> changeEphemeralForUnit
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function customCosmic.changeEphemeralForUnit(unit: unitObject)
</code></pre></div></div>
<p>Changes the ephemeral rules so that the unit customisations
will work</p>
<h3 id="computemovementallowance">
  
  
    <a href="#computemovementallowance">&#128279</a> computeMovementAllowance
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function customCosmic.computeMovementAllowance(unit: unitObject, customisation?: table)
  -&gt; integer
</code></pre></div></div>
<p>Computes the value that <code class="language-plaintext highlighter-rouge">unit.type.move</code> should have so that <code class="language-plaintext highlighter-rouge">unit</code> satisfies
all its customisations.</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">customisation</code> — If not defined, customCosmic.getUnitTypeCustomisation is called to retrieve it.</p>
<h3 id="defaultmovementmultipliers">
  
  
    <a href="#defaultmovementmultipliers">&#128279</a> defaultMovementMultipliers
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>customCosmic.defaultMovementMultipliers --&gt; unknown
</code></pre></div></div>
<h3 id="enablecustomcosmic">
  
  
    <a href="#enablecustomcosmic">&#128279</a> enableCustomCosmic
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function customCosmic.enableCustomCosmic()
</code></pre></div></div>
<h3 id="enableephemeralmaptransportsettings">
  
  
    <a href="#enableephemeralmaptransportsettings">&#128279</a> enableEphemeralMapTransportSettings
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function customCosmic.enableEphemeralMapTransportSettings()
</code></pre></div></div>
<p>Enables the nativeTransport, buildTransport, useTransport fields
 to be altered by the customCosmic module.  Usually, these
 fields are saved as part of the game, so game events can enable
 or disable transport.  Those kinds of events will no longer work,
 (unless you program them into customCosmic customisations instead).</p>
<h3 id="fullhealthmovementallowance">
  
  
    <a href="#fullhealthmovementallowance">&#128279</a> fullHealthMovementAllowance
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function customCosmic.fullHealthMovementAllowance(unit: unitObject, customisation?: table)
  -&gt; integer
</code></pre></div></div>
<p>Computes the movement allowance for the unit if it is at full health.</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">customisation</code> — If not defined, customCosmic.getUnitTypeCustomisation is called to retrieve it.</p>
<h3 id="getcitycustomisation">
  
  
    <a href="#getcitycustomisation">&#128279</a> getCityCustomisation
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function customCosmic.getCityCustomisation(city: cityObject)
  -&gt; table
</code></pre></div></div>
<p>Returns the cityCustomisation for <code class="language-plaintext highlighter-rouge">city</code></p>
<h3 id="getcustomisedterraininfo">
  
  
    <a href="#getcustomisedterraininfo">&#128279</a> getCustomisedTerrainInfo
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function customCosmic.getCustomisedTerrainInfo(tile: any, city: any)
  -&gt; table
  2. table
  3. table&lt;integer|mapObject, bitmask&gt;
</code></pre></div></div>
<h3 id="getemptyunittypecustomisation">
  
  
    <a href="#getemptyunittypecustomisation">&#128279</a> getEmptyUnitTypeCustomisation
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function customCosmic.getEmptyUnitTypeCustomisation()
  -&gt; table
</code></pre></div></div>
<p>Returns an ‘empty’ unitTypeCustomisation, with priority set to -1</p>
<h3 id="getfreesupport">
  
  
    <a href="#getfreesupport">&#128279</a> getFreeSupport
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function customCosmic.getFreeSupport(tribe: any)
  -&gt; table
</code></pre></div></div>
<h3 id="getmovementmultipliers">
  
  
    <a href="#getmovementmultipliers">&#128279</a> getMovementMultipliers
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function customCosmic.getMovementMultipliers(unit: unitObject, customisation?: table)
  -&gt; { alpine: integer, road: integer, railroad: integer, river: integer, aggregate: integer }
</code></pre></div></div>
<p>Returns the movementMultipliers for <code class="language-plaintext highlighter-rouge">unit</code> in a table.</p>
<h3 id="gettribecustomisation">
  
  
    <a href="#gettribecustomisation">&#128279</a> getTribeCustomisation
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function customCosmic.getTribeCustomisation(tribe: tribeObject)
  -&gt; table
</code></pre></div></div>
<p>Returns the tribeCustomisation for <code class="language-plaintext highlighter-rouge">tribe</code></p>
<h3 id="gettribeupkeep">
  
  
    <a href="#gettribeupkeep">&#128279</a> getTribeUpkeep
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function customCosmic.getTribeUpkeep(tribe: tribeObject, recalculate?: boolean)
  -&gt; integer
</code></pre></div></div>
<p>Returns the total improvement maintenance cost a tribe must pay each turn.
If <code class="language-plaintext highlighter-rouge">recalculate</code> is false or absent, the value is from the most recent
update of each city.  If <code class="language-plaintext highlighter-rouge">recalculate</code> is true, city improvement customisations
are calculated to get the current version of upkeep.</p>
<h3 id="getunittypecustomisation">
  
  
    <a href="#getunittypecustomisation">&#128279</a> getUnitTypeCustomisation
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function customCosmic.getUnitTypeCustomisation(unit: unitObject)
  -&gt; table
</code></pre></div></div>
<p>Returns the unitTypeCustomisation for <code class="language-plaintext highlighter-rouge">unit</code>.</p>
<h3 id="isenabled">
  
  
    <a href="#isenabled">&#128279</a> isEnabled
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function customCosmic.isEnabled()
  -&gt; boolean
</code></pre></div></div>
<p>Returns true if the customCosmic module has been enabled 
using <code class="language-plaintext highlighter-rouge">cusomCosmic.enableCustomCosmic()</code>, and false otherwise.</p>
<h3 id="isimpassablefor">
  
  
    <a href="#isimpassablefor">&#128279</a> isImpassableFor
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function customCosmic.isImpassableFor(baseTerrain: baseTerrainObject, unit: unitObject, customisation: table|nil)
  -&gt; boolean
</code></pre></div></div>
<p>Determines if a base terrain type is impassable for the specified unit.</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">customisation</code> — if nil, the customisation is retrieved by calling <code class="language-plaintext highlighter-rouge">customCosmic.getUnitTypeCustomisation</code></p>
<h3 id="isunittypecustomisation">
  
  
    <a href="#isunittypecustomisation">&#128279</a> isUnitTypeCustomisation
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>customCosmic.isUnitTypeCustomisation --&gt; fun(item: any):boolean
</code></pre></div></div>
<h3 id="makecitycustomisation">
  
  
    <a href="#makecitycustomisation">&#128279</a> makeCityCustomisation
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function customCosmic.makeCityCustomisation(table: any)
  -&gt; unknown
</code></pre></div></div>
<h3 id="maketribecustomisation">
  
  
    <a href="#maketribecustomisation">&#128279</a> makeTribeCustomisation
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function customCosmic.makeTribeCustomisation(table: any)
  -&gt; unknown
</code></pre></div></div>
<h3 id="makeunittypecustomisation">
  
  
    <a href="#makeunittypecustomisation">&#128279</a> makeUnitTypeCustomisation
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function customCosmic.makeUnitTypeCustomisation(table: any)
  -&gt; unknown
</code></pre></div></div>
<h3 id="registercitycustomisation">
  
  
    <a href="#registercitycustomisation">&#128279</a> registerCityCustomisation
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function customCosmic.registerCityCustomisation(customisation: table)
</code></pre></div></div>
<p>Registers a customisation for cities.<br />
Keys and descriptions for city customisation tables:</p>

<ul>
  <li>These keys are used to change cosmic parameters that relate to city 
production.  Some cosmic parameters relating to city production are in the tribe
customisations, because they are used before code in onCalculateCityYield can
change them.
    <ul>
      <li><code class="language-plaintext highlighter-rouge">communismPalaceDistance</code> = nil\|int&gt;=0 or function(city) –&gt; nil\|int&gt;=0
        <ul>
          <li>Specifies the base value to be used for civ.cosmic.communismPalaceDistance</li>
          <li>If nil, the value from the authoritativeDefaultRules is used.</li>
          <li>If function, use the returned value when given the city as the argument.</li>
        </ul>
      </li>
      <li><code class="language-plaintext highlighter-rouge">communismPalaceDistanceModifier</code> = nil\|int or function(city) –&gt; nil\|int
        <ul>
          <li>Add this to the base value to be used for civ.cosmic.communismPalaceDistance</li>
          <li>If nil, add 0.  Note, a negative number here will not reduce the base value below 0.</li>
          <li>If function, use the returned value when given the city as the argument.</li>
        </ul>
      </li>
      <li><code class="language-plaintext highlighter-rouge">foodEaten</code> = nil\|int&gt;=0 or function(city) –&gt; nil\|int&gt;=0
        <ul>
          <li>Specifies the base value to be used for civ.cosmic.foodEaten</li>
          <li>If nil, the value from the authoritativeDefaultRules is used.</li>
          <li>If function, use the returned value when given the city as the argument.</li>
        </ul>
      </li>
      <li><code class="language-plaintext highlighter-rouge">foodEatenModifier</code> = nil\|int or function(city) –&gt; nil\|int
        <ul>
          <li>Add this to the base value to be used for civ.cosmic.foodEaten</li>
          <li>If nil, add 0.  Note, a negative number here will not reduce the base value below 0.</li>
          <li>If function, use the returned value when given the city as the argument.</li>
        </ul>
      </li>
      <li><code class="language-plaintext highlighter-rouge">prodChangePenalty</code>= nil\|int&gt;=0 or function(city) –&gt; nil\|int&gt;=0
        <ul>
          <li>Specifies the base value to be used for civ.cosmic.prodChangePenalty</li>
          <li>If nil, the value from the authoritativeDefaultRules is used.</li>
          <li>If function, use the returned value when given the city as the argument.</li>
        </ul>
      </li>
      <li><code class="language-plaintext highlighter-rouge">prodChangePenaltyModifier</code>= nil\|int or function(city) –&gt; nil\|int
        <ul>
          <li>Add this to the base value to be used for civ.cosmic.prodChangePenalty</li>
          <li>If nil, add 0.  Note, a negative number here will not reduce the base value below 0.</li>
          <li>If function, use the returned value when given the city as the argument.</li>
        </ul>
      </li>
      <li><code class="language-plaintext highlighter-rouge">riotFactor</code>= nil\|int&gt;=0 or function(city) –&gt; nil\|int&gt;=0
        <ul>
          <li>Specifies the base value to be used for civ.cosmic.riotFactor</li>
          <li>If nil, the value from the authoritativeDefaultRules is used.</li>
          <li>If function, use the returned value when given the city as the argument.</li>
        </ul>
      </li>
      <li><code class="language-plaintext highlighter-rouge">riotFactorModifier</code> = nil\|int or function(city) –&gt; nil\|int
        <ul>
          <li>Add this to the base value to be used for civ.cosmic.riotFactor</li>
          <li>If nil, add 0.  Note, a negative number here will not reduce the base value below 0.</li>
          <li>If function, use the returned value when given the city as the argument.</li>
        </ul>
      </li>
      <li><code class="language-plaintext highlighter-rouge">scienceLostFundamentalism</code>= nil\|int&gt;=0 or function(city) –&gt; nil\|int&gt;=0
        <ul>
          <li>Specifies the base value to be used for civ.cosmic.scienceLostFundamentalism</li>
          <li>If nil, the value from the authoritativeDefaultRules is used.</li>
          <li>If function, use the returned value when given the city as the argument.</li>
        </ul>
      </li>
      <li><code class="language-plaintext highlighter-rouge">scienceLostFundamentalismModifier</code>= nil\|int or function(city) –&gt; nil\|int
        <ul>
          <li>Add this to the base value to be used for civ.cosmic.scienceLostFundamentalism</li>
          <li>If nil, add 0.  Note, a negative number here will not reduce the base value below 0.</li>
          <li>If function, use the returned value when given the city as the argument.</li>
        </ul>
      </li>
      <li><code class="language-plaintext highlighter-rouge">scienceRateFundamentalism</code>= nil\|int&gt;=0 or function(city) –&gt; nil\|int&gt;=0
        <ul>
          <li>Specifies the base value to be used for civ.cosmic.scienceRateFundamentalism</li>
          <li>If nil, the value from the authoritativeDefaultRules is used.</li>
          <li>If function, use the returned value when given the city as the argument.</li>
        </ul>
      </li>
      <li><code class="language-plaintext highlighter-rouge">scienceRateFundamentalismModifier</code>= nil\|int or function(city) –&gt; nil\|int
        <ul>
          <li>Add this to the base value to be used for civ.cosmic.scienceRateFundamentalism</li>
          <li>If nil, add 0.  Note, a negative number here will not reduce the base value below 0.</li>
          <li>If function, use the returned value when given the city as the argument.</li>
        </ul>
      </li>
      <li><code class="language-plaintext highlighter-rouge">sizeUnhappiness</code>= nil\|int&gt;=0 or function(city) –&gt; nil\|int&gt;=0
        <ul>
          <li>Specifies the base value to be used for civ.cosmic.sizeUnhappiness</li>
          <li>If nil, the value from the authoritativeDefaultRules is used.</li>
          <li>If function, use the returned value when given the city as the argument.</li>
        </ul>
      </li>
      <li><code class="language-plaintext highlighter-rouge">sizeUnhappinessModifier</code>= nil\|int or function(city) –&gt; nil\|int
        <ul>
          <li>Add this to the base value to be used for  civ.cosmic.sizeUnhappiness</li>
          <li>If nil, add 0.  Note, a negative number here will not reduce the base value below 0.</li>
          <li>If function, use the returned value when given the city as the argument.</li>
        </ul>
      </li>
    </ul>
  </li>
  <li>The <code class="language-plaintext highlighter-rouge">condition</code> and <code class="language-plaintext highlighter-rouge">priority</code> keys determine which customisation table is chosen for a particular city.  The <code class="language-plaintext highlighter-rouge">customisationName</code> key is used to give the customisation a name which is used in some error messages.
    <ul>
      <li><code class="language-plaintext highlighter-rouge">customisationName</code> = nil\|string
        <ul>
          <li>A name to be used during certain kinds of error and debugging messages</li>
          <li>nil will give “Unnamed City Customisation”</li>
        </ul>
      </li>
      <li><code class="language-plaintext highlighter-rouge">condition</code> = nil\|tribeObject\|traitString\|function(city)–&gt;boolean or table of tribeObject\|traitString
        <ul>
          <li>if nil, this customisation applies to all cities (unless a higher  priority customisation also applies)</li>
          <li>if tribeObject, this customisation applies to cities owned by the tribe</li>
          <li>if traitString, this customisation applies to tribes which have the trait</li>
          <li>if table of tribeObject\|traitString, this applies to any tribe or traitString in the table</li>
          <li>if function(city) –&gt; boolean, then this customisation applies to cities which make this function return true</li>
          <li>only one customisation can apply to any city.  The <code class="language-plaintext highlighter-rouge">priority</code> key is used to tie break.</li>
        </ul>
      </li>
      <li><code class="language-plaintext highlighter-rouge">priority</code> = nil or number &gt;= 0
        <ul>
          <li>If multiple customisations can apply to a city, this value chooses among them, with higher priority taking precedence.</li>
          <li>If the city is eligible for two customisations of the same priority, an error may be generated, and will certainly be generated if they are of the highest priority.</li>
        </ul>
      </li>
    </ul>
  </li>
  <li>The following types of objects can also be keys in a city customisation table: <code class="language-plaintext highlighter-rouge">unitTypeObject</code>, <code class="language-plaintext highlighter-rouge">improvementObject</code>, <code class="language-plaintext highlighter-rouge">wonderObject</code>, <code class="language-plaintext highlighter-rouge">baseTerrainObject</code>, and <code class="language-plaintext highlighter-rouge">terrainObject</code>.  (These are associated with integer values behind the scenes, but don’t worry about that.  Just use the object (NOT the ID) as the key.)  Each key takes a table value (or nil), to govern some aspects of the item.
    <ul>
      <li><code class="language-plaintext highlighter-rouge">[unitTypeObject]</code> = nil\|table
        <ul>
          <li><code class="language-plaintext highlighter-rouge">cost</code> = nil\|int&gt;=0 or function(city)–&gt;nil\|int&gt;=0
            <ul>
              <li>Sets the base cost (in shield rows) for the city</li>
              <li>If nil, refer to authoritativeDefaultRules</li>
              <li>If function, use result after evaluating function(city)</li>
            </ul>
          </li>
          <li><code class="language-plaintext highlighter-rouge">costModifier</code> = nil\|int or function(city)–&gt;nil\|int
            <ul>
              <li>Add this to the base cost, but cost won’t be less than 0</li>
              <li>If nil, use 0</li>
              <li>If function, use result after evaluating function(city)</li>
            </ul>
          </li>
        </ul>
      </li>
      <li><code class="language-plaintext highlighter-rouge">[improvementObject]</code> = nil\|table
        <ul>
          <li><code class="language-plaintext highlighter-rouge">cost</code> = nil\|int&gt;=0 or function(city)–&gt;nil\|int&gt;=0
            <ul>
              <li>Sets the base cost (in shield rows) for the city</li>
              <li>If nil, refer to authoritativeDefaultRules</li>
              <li>If function, use result after evaluating function(city)</li>
            </ul>
          </li>
          <li><code class="language-plaintext highlighter-rouge">costModifier</code> = nil\|int or function(city)–&gt;nil\|int
            <ul>
              <li>Add this to the base cost, but cost won’t be less than 0</li>
              <li>If nil, use 0</li>
              <li>If function, use result after evaluating function(city)</li>
            </ul>
          </li>
          <li><code class="language-plaintext highlighter-rouge">cantSell</code> = nil\|boolean or function(city)–&gt;nil\|boolean
            <ul>
              <li>If true, the city can’t sell the improvement, if false, it can.</li>
              <li>If nil, refer to the authoritativeDefaultRules</li>
            </ul>
          </li>
          <li><code class="language-plaintext highlighter-rouge">upkeep</code> = nil\|int&gt;=0 or function(city)–&gt;nil\|int&gt;=0
            <ul>
              <li>Sets the base upkeep (gold per turn) this improvement in this city</li>
              <li>If nil, refer to authoritativeDefaultRules</li>
              <li>If function, use result after evaluating function(city)</li>
              <li>Note: Upkeep costs will be calculated correctly during city processing, but the Tax Rate and Trade Adviser windows will not be correct if the upkeep isn’t the same for all cities (Costs for the most recently looked at city will be used.)</li>
              <li><code class="language-plaintext highlighter-rouge">customCosmic.getTribeUpkeep</code> will calculate the actual upkeep per turn for the tribe.</li>
            </ul>
          </li>
          <li><code class="language-plaintext highlighter-rouge">upkeepModifier</code> = nil\|int or function(city)–&gt;nil\|int
            <ul>
              <li>Add this to the base upkeep, but upkeep won’t be less than 0</li>
              <li>If nil, use 0</li>
              <li>If function, use result after evaluating function(city)</li>
            </ul>
          </li>
        </ul>
      </li>
      <li><code class="language-plaintext highlighter-rouge">[wonderObject]</code> = nil\|table
        <ul>
          <li><code class="language-plaintext highlighter-rouge">cost</code> = nil\|int&gt;=0 or function(city)–&gt;nil\|int&gt;=0
            <ul>
              <li>Sets the base cost (in shield rows) for the city</li>
              <li>If nil, refer to authoritativeDefaultRules</li>
              <li>If function, use result after evaluating function(city)</li>
            </ul>
          </li>
          <li><code class="language-plaintext highlighter-rouge">costModifier</code> = nil\|int or function(city)–&gt;nil\|int
            <ul>
              <li>Add this to the base cost, but cost won’t be less than 0</li>
              <li>If nil, use 0</li>
              <li>If function, use result after evaluating function(city)</li>
            </ul>
          </li>
        </ul>
      </li>
      <li><code class="language-plaintext highlighter-rouge">[baseTerrainObject]</code> = nil\|table
        <ul>
          <li><code class="language-plaintext highlighter-rouge">irrigateBonus</code> = nil\|int&gt;=0 or function(city)–&gt;nil\|int&gt;=0
            <ul>
              <li>Sets the base value of the irrigation bonus for the city and baseTerrain.</li>
              <li>If nil, refer to the authoritativeDefaultRules,</li>
              <li>If function, use the result of function(city),</li>
            </ul>
          </li>
          <li><code class="language-plaintext highlighter-rouge">irrigateBonusModifier</code> = nil\|int or function(city)–&gt;nil\|int
            <ul>
              <li>Add this to the base irrigation bonus, but results less than 0 will be set to 0.</li>
              <li>If nil, use 0.</li>
              <li>If function, use result after evaluating function(city)</li>
            </ul>
          </li>
          <li><code class="language-plaintext highlighter-rouge">mineBonus</code> = nil\|int&gt;=0 or function(city)–&gt;nil\|int&gt;=0
            <ul>
              <li>Sets the base value of the mining bonus for the city and baseTerrain.</li>
              <li>If nil, refer to the authoritativeDefaultRules,</li>
              <li>If function, use the result of function(city),</li>
            </ul>
          </li>
          <li><code class="language-plaintext highlighter-rouge">mineBonusModifier</code> = nil\|int or function(city)–&gt;nil\|int
            <ul>
              <li>Add this to the base mining bonus, but results less than 0 will be set to 0.</li>
              <li>If nil, use 0.</li>
              <li>If function, use result after evaluating function(city)</li>
            </ul>
          </li>
          <li><code class="language-plaintext highlighter-rouge">roadTrade</code> = nil\|boolean or function(city)–&gt;nil\|boolean
            <ul>
              <li>If true, for this city and baseTerrain, the road trade bonus is applied.  If false, it is not.</li>
              <li>If nil, refer to the authoritativeDefaultRules</li>
              <li>If function, use result after evaluating function(city)</li>
            </ul>
          </li>
        </ul>
      </li>
      <li><code class="language-plaintext highlighter-rouge">[terrainObject]</code> = {
        <ul>
          <li><code class="language-plaintext highlighter-rouge">food</code> = nil\|int&gt;=0 or function(city)–&gt;nil\|int&gt;=0
            <ul>
              <li>Sets the base value for the food produced for this city by this terrain type.</li>
              <li>If nil, refer to the authoritativeDefaultRules</li>
              <li>If function, use the result of function(city)</li>
            </ul>
          </li>
          <li><code class="language-plaintext highlighter-rouge">foodModifier</code> = nil\|int or function(city)–&gt;nil\|int
            <ul>
              <li>Add this to the base food production value, but if the result is less than 0, it will be raised to 0.</li>
              <li>If nil, use 0.</li>
              <li>If function, use the result of function(city)</li>
            </ul>
          </li>
          <li><code class="language-plaintext highlighter-rouge">shields</code> = nil\|int&gt;=0 or function(city)–&gt;nil\|int&gt;=0
            <ul>
              <li>Sets the base value for the shields produced for this city by this terrain type.</li>
              <li>If nil, refer to the authoritativeDefaultRules</li>
              <li>If function, use the result of function(city)</li>
            </ul>
          </li>
          <li><code class="language-plaintext highlighter-rouge">shieldsModifier</code> = nil\|int or function(city)–&gt;nil\|int
            <ul>
              <li>Add this to the base shield production value, but if the result is less than 0, it will be raised to 0.</li>
              <li>If nil, use 0.</li>
              <li>If function, use the result of function(city)</li>
            </ul>
          </li>
          <li><code class="language-plaintext highlighter-rouge">trade</code> = nil\|int&gt;=0 or function(city)–&gt;nil\|int&gt;=0
            <ul>
              <li>Sets the base value for the trade produced for this city by this terrain type.</li>
              <li>If nil, refer to the authoritativeDefaultRules</li>
              <li>If function, use the result of function(city)</li>
            </ul>
          </li>
          <li><code class="language-plaintext highlighter-rouge">tradeModifier</code> = nil\|int or function(city)–&gt;nil\|int
            <ul>
              <li>Add this to the base trade production value, but if the result is less than 0, it will be raised to 0.</li>
              <li>If nil, use 0.</li>
              <li>If function, use the result of function(city)</li>
            </ul>
          </li>
        </ul>
      </li>
    </ul>
  </li>
  <li>You can assign the same data table to multiple items by providing a table as the key, instead of a string or luaObject.  Consider:
<br /> [keyTable] = data
<br />For each value in the <code class="language-plaintext highlighter-rouge">keyTable</code>, if value is not a trait, assign
<br />customisation[value] = gen.copyTable(data)
<br />if the value is a trait, for each ITEM such that 
<br />traits.hasTrait(ITEM,value)` 
<br />is true, assign
<br />customisation[ITEM] = gen.copyTable(data)</li>
</ul>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">customisation</code> — A city customisation table, described above.</p>
<h3 id="registergetcitycustomisation">
  
  
    <a href="#registergetcitycustomisation">&#128279</a> registerGetCityCustomisation
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function customCosmic.registerGetCityCustomisation(fun: fun(city: cityObject):table)
</code></pre></div></div>
<p>Allows the scenario designer to register a function(city)–&gt;cityCustomisation
to be used instead of the <code class="language-plaintext highlighter-rouge">customCosmic.registerCityCustomisation</code> system.
The function must return a cityCustomisation for every 
city under all circumstances</p>
<h3 id="registergettribecustomisation">
  
  
    <a href="#registergettribecustomisation">&#128279</a> registerGetTribeCustomisation
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function customCosmic.registerGetTribeCustomisation(fun: fun(tribe: tribeObject):table)
</code></pre></div></div>
<p>Allows the scenario designer to register a function(tribe)–&gt;tribeCustomisation
to be used instead of the <code class="language-plaintext highlighter-rouge">customCosmic.registerTribeCustomisation</code> system.
The function must return a tribeCustomisation for every 
tribe under all circumstances</p>
<h3 id="registergetunittypecustomisation">
  
  
    <a href="#registergetunittypecustomisation">&#128279</a> registerGetUnitTypeCustomisation
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function customCosmic.registerGetUnitTypeCustomisation(fun: fun(unit: unitObject):table)
</code></pre></div></div>
<p>Allows a scenario designer to register a function(unit)–&gt;unitTypeCustomisation
to be used instead of the <code class="language-plaintext highlighter-rouge">customCosmic.registerUnitTypeCustomisation</code> system.
The function must return a unitTypeCustomisation for every unit
under all circumstances</p>
<h3 id="registertribecustomisation">
  
  
    <a href="#registertribecustomisation">&#128279</a> registerTribeCustomisation
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function customCosmic.registerTribeCustomisation(customisation: table)
</code></pre></div></div>
<p>Registers a customisation for tribes.<br />
Keys and descriptions for tribe customisation tables:</p>

<ul>
  <li>These keys are used to change cosmic parameters that relate to city
production.  These are customised by tribe because the game uses them
before onCalculateCityYield can change them. Other customisations can be made on a per city basis.
    <ul>
      <li><code class="language-plaintext highlighter-rouge">foodRows</code>= nil\|int&gt;=0 or function(tribe) –&gt; nil\|int&gt;=0
        <ul>
          <li>Specifies the base value to be used for civ.cosmic.foodRows</li>
          <li>If nil, the value from the authoritativeDefaultRules is used.</li>
          <li>If function, use the returned value when given the tribe as the argument.</li>
        </ul>
      </li>
      <li><code class="language-plaintext highlighter-rouge">foodRowsModifier</code> = nil\|int or function(tribe) –&gt; nil\|int
        <ul>
          <li>Add this to the base value to be used for  civ.cosmic.foodRows</li>
          <li>If nil, add 0.  Note, a negative number here will not reduce the base value below 0.</li>
          <li>If function, use the returned value when given the tribe as the argument.</li>
        </ul>
      </li>
      <li><code class="language-plaintext highlighter-rouge">settlersEatHigh</code>= nil\|int&gt;=0 or function(tribe) –&gt; nil\|int&gt;=0
        <ul>
          <li>Specifies the base value to be used for civ.cosmic.settlersEatHigh</li>
          <li>If nil, the value from the authoritativeDefaultRules is used.</li>
          <li>If function, use the returned value when given the tribe as the argument.</li>
        </ul>
      </li>
      <li><code class="language-plaintext highlighter-rouge">settlersEatHighModifier</code>= nil\|int or function(tribe) –&gt; nil\|int
        <ul>
          <li>Add this to the base value to be used for  civ.cosmic.settlersEatHigh</li>
          <li>If nil, add 0.  Note, a negative number here will not reduce the base value below 0.</li>
          <li>If function, use the returned value when given the tribe as the argument.</li>
        </ul>
      </li>
      <li><code class="language-plaintext highlighter-rouge">settlersEatLow</code>= nil\|int&gt;=0 or function(tribe) –&gt; nil\|int&gt;=0
        <ul>
          <li>Specifies the base value to be used for civ.cosmic.settlersEatLow</li>
          <li>If nil, the value from the authoritativeDefaultRules is used.</li>
          <li>If function, use the returned value when given the tribe as the argument.</li>
        </ul>
      </li>
      <li><code class="language-plaintext highlighter-rouge">settlersEatLowModifier</code>= nil\|int or function(tribe) –&gt; nil\|int
        <ul>
          <li>Add this to the base value to be used for  civ.cosmic.settlersEatLow</li>
          <li>If nil, add 0.  Note, a negative number here will not reduce the base value below 0.</li>
          <li>If function, use the returned value when given the tribe as the argument.</li>
        </ul>
      </li>
      <li><code class="language-plaintext highlighter-rouge">shieldRows</code>= nil\|int&gt;=0 or function(tribe) –&gt; nil\|int&gt;=0
        <ul>
          <li>Specifies the base value to be used for civ.cosmic.shieldRows</li>
          <li>If nil, the value from the authoritativeDefaultRules is used.</li>
          <li>If function, use the returned value when given the tribe as the argument.</li>
        </ul>
      </li>
      <li><code class="language-plaintext highlighter-rouge">shieldRowsModifier</code>= nil\|int or function(tribe) –&gt; nil\|int
        <ul>
          <li>Add this to the base value to be used for  civ.cosmic.shieldRows</li>
          <li>If nil, add 0.  Note, a negative number here will not reduce the base value below 0.</li>
          <li>If function, use the returned value when given the tribe as the argument.</li>
        </ul>
      </li>
      <li><code class="language-plaintext highlighter-rouge">sizeAquaduct</code>= nil\|int&gt;=0 or function(tribe) –&gt; nil\|int&gt;=0
        <ul>
          <li>Specifies the base value to be used for civ.cosmic.sizeAquaduct</li>
          <li>If nil, the value from the authoritativeDefaultRules is used.</li>
          <li>If function, use the returned value when given the tribe as the argument.</li>
          <li>NOTE: sizeAqueduct can be used instead to refer to this value.</li>
        </ul>
      </li>
      <li><code class="language-plaintext highlighter-rouge">sizeAquaductModifier</code>= nil\|int or function(tribe) –&gt; nil\|int
        <ul>
          <li>Add this to the base value to be used for  civ.cosmic.sizeAquaduct</li>
          <li>If nil, add 0.  Note, a negative number here will not reduce the base value below 0.</li>
          <li>If function, use the returned value when given the tribe as the argument.</li>
          <li>NOTE: sizeAqueductModifier can be used instead to refer to this value.</li>
        </ul>
      </li>
      <li><code class="language-plaintext highlighter-rouge">sizeSewer</code>= nil\|int&gt;=0 or function(tribe) –&gt; nil\|int&gt;=0
        <ul>
          <li>Specifies the base value to be used for civ.cosmic.sizeSewer</li>
          <li>If nil, the value from the authoritativeDefaultRules is used.</li>
          <li>If function, use the returned value when given the tribe as the argument.</li>
        </ul>
      </li>
      <li><code class="language-plaintext highlighter-rouge">sizeSewerModifier</code>= nil\|int or function(tribe) –&gt; nil\|int
        <ul>
          <li>Add this to the base value to be used for  civ.cosmic.sizeSewer</li>
          <li>If nil, add 0.  Note, a negative number here will not reduce the base value below 0.</li>
          <li>If function, use the returned value when given the tribe as the argument.</li>
        </ul>
      </li>
      <li><code class="language-plaintext highlighter-rouge">supportCommunism</code>= nil\|int&gt;=0 or function(tribe) –&gt; nil\|int&gt;=0
        <ul>
          <li>Specifies the base value to be used for civ.cosmic.supportCommunism</li>
          <li>If nil, the value from the authoritativeDefaultRules is used.</li>
          <li>If function, use the returned value when given the tribe as the argument.</li>
        </ul>
      </li>
      <li><code class="language-plaintext highlighter-rouge">supportCommunismModifier</code>= nil\|int or function(tribe) –&gt; nil\|int
        <ul>
          <li>Add this to the base value to be used for  civ.cosmic.supportCommunism</li>
          <li>If nil, add 0.  Note, a negative number here will not reduce the base value below 0.</li>
          <li>If function, use the returned value when given the tribe as the argument.</li>
        </ul>
      </li>
      <li><code class="language-plaintext highlighter-rouge">supportFundamentalism</code>= nil\|int&gt;=0 or function(tribe) –&gt; nil\|int&gt;=0
        <ul>
          <li>Specifies the base value to be used for civ.cosmic.supportFundamentalism</li>
          <li>If nil, the value from the authoritativeDefaultRules is used.</li>
          <li>If function, use the returned value when given the tribe as the argument.</li>
        </ul>
      </li>
      <li><code class="language-plaintext highlighter-rouge">supportFundamentalismModifier</code>= nil\|int or function(tribe) –&gt; nil\|int
        <ul>
          <li>Add this to the base value to be used for  civ.cosmic.supportFundamentalism</li>
          <li>If nil, add 0.  Note, a negative number here will not reduce the base value below 0.</li>
          <li>If function, use the returned value when given the tribe as the argument.</li>
        </ul>
      </li>
      <li><code class="language-plaintext highlighter-rouge">supportMonarchy</code>= nil\|int&gt;=0 or function(tribe) –&gt; nil\|int&gt;=0
        <ul>
          <li>Specifies the base value to be used for civ.cosmic.supportMonarchy</li>
          <li>If nil, the value from the authoritativeDefaultRules is used.</li>
          <li>If function, use the returned value when given the tribe as the argument.</li>
        </ul>
      </li>
      <li><code class="language-plaintext highlighter-rouge">supportMonarchyModifier</code>= nil\|int or function(tribe) –&gt; nil\|int
        <ul>
          <li>Add this to the base value to be used for  civ.cosmic.supportMonarchy</li>
          <li>If nil, add 0.  Note, a negative number here will not reduce the base value below 0.</li>
          <li>If function, use the returned value when given the tribe as the argument.</li>
        </ul>
      </li>
    </ul>
  </li>
  <li>The <code class="language-plaintext highlighter-rouge">condition</code> and <code class="language-plaintext highlighter-rouge">priority</code> keys determine which customisation table is chosen for a particular tribe.  The <code class="language-plaintext highlighter-rouge">customisationName</code> key is used to give the customisation a name which is used in some error messages.
    <ul>
      <li><code class="language-plaintext highlighter-rouge">customisationName</code> = nil\|string
        <ul>
          <li>A name to be used during certain kinds of error and debugging messages</li>
          <li>nil will give “Unnamed Tribe Customisation”</li>
        </ul>
      </li>
      <li><code class="language-plaintext highlighter-rouge">condition</code> = nil\|tribeObject\|traitString\|function(tribe)–&gt;boolean or table of tribeObject\|traitString
        <ul>
          <li>if nil, this customisation applies to all tribes (unless a higher  priority customisation also applies)</li>
          <li>if tribeObject, this customisation applies to that tribe</li>
          <li>if traitString, this customisation applies to tribes which have the trait</li>
          <li>if table of tribeObject\|traitString, this applies to any tribe or traitString in the table</li>
          <li>if function(tribe) –&gt; boolean, then this customisation applies to tribes which make this function return true</li>
          <li>only one customisation can apply to any tribe.  The <code class="language-plaintext highlighter-rouge">priority</code> key is used to tie break.</li>
        </ul>
      </li>
      <li><code class="language-plaintext highlighter-rouge">priority</code> = nil\|number&gt;=0
        <ul>
          <li>If multiple customisations can apply to a tribe, this value chooses among them, with higher priority taking precedence.</li>
          <li>If the tribe is eligible for two customisations of the same priority, an error may be generated, and will certainly be generated if they are of the highest priority.</li>
        </ul>
      </li>
    </ul>
  </li>
  <li><code class="language-plaintext highlighter-rouge">unitTypeObject</code>s can also be keys in a tribe customisation table.
(These are associated with integer values behind the scenes,
 but don’t worry about that.  Just use the object (NOT the ID) as the key.)
Each key takes a table (or nil) as a value, to govern the support
characteristics of the item.
    <ul>
      <li><code class="language-plaintext highlighter-rouge">[unitTypeObject]</code> = nil\|table
        <ul>
          <li><code class="language-plaintext highlighter-rouge">freeSupportUnderFundamentalism</code> = nil\|boolean or function(tribe)–&gt;nil\|boolean
            <ul>
              <li>If true, unitType has the freeSupportUnderFundamentalism flag for this tribe.  If false, it does not.</li>
              <li>If nil, refer to the authoritativeDefaultRules</li>
            </ul>
          </li>
          <li><code class="language-plaintext highlighter-rouge">requiresFoodSupport</code> = nil\|boolean or function(tribe)–&gt;nil\|boolean
            <ul>
              <li>If true, the tribe must pay food support for this unitType.</li>
              <li>If false, it does not. (Setting this to true makes both settler and non-settler unit types require food.)</li>
              <li>If nil, refer to the authoritativeDefaultRules
  –          }</li>
            </ul>
          </li>
        </ul>
      </li>
    </ul>
  </li>
  <li>You can assign the same data table to multiple items by providing a table as the key, instead of a string or luaObject.  Consider:
<br /> [keyTable] = data
<br />For each value in the <code class="language-plaintext highlighter-rouge">keyTable</code>, if value is not a trait, assign
<br />customisation[value] = gen.copyTable(data)
<br />if the value is a trait, for each ITEM such that 
<br />traits.hasTrait(ITEM,value)` 
<br />is true, assign
<br />customisation[ITEM] = gen.copyTable(data)</li>
</ul>
<h3 id="registerunittypecustomisation">
  
  
    <a href="#registerunittypecustomisation">&#128279</a> registerUnitTypeCustomisation
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function customCosmic.registerUnitTypeCustomisation(unitTypeOrTrait: string|table&lt;any, string|unitTypeObject&gt;|unitTypeObject, unitTypeCustomisation: table)
</code></pre></div></div>
<p>Registers a customisation for a unitType, a trait for unitTypes, or a table of unitTypes and traits for unitTypes.<br />
Keys and descriptions for unitType customisation tables:
<br /></p>
<ul>
  <li>If both <code class="language-plaintext highlighter-rouge">atomicMovementBonus</code> and <code class="language-plaintext highlighter-rouge">movementBonus</code> are used, both modify movement.
    <ul>
      <li><code class="language-plaintext highlighter-rouge">atomicMovementBonus</code> = nil\|int or function(unit)–&gt;nil\|Int
        <ul>
          <li>Bonus movement points (compared to authoritativeDefaultRules)</li>
          <li>Positive means add, negative means subtract</li>
          <li>nil means no change</li>
          <li>if function, the returned value of function(unit) is used.</li>
        </ul>
      </li>
      <li><code class="language-plaintext highlighter-rouge">movementBonus</code> = nil\|num or function(unit)–&gt;nil\|num
        <ul>
          <li>Bonus movement points (compared to authoritativeDefaultRules)</li>
          <li>whole movement points, positive means add, negative means subtract</li>
          <li>nil means no change</li>
          <li>if function, the returned value of function(unit) is used.</li>
        </ul>
      </li>
    </ul>
  </li>
  <li>Only one of <code class="language-plaintext highlighter-rouge">atomicCustomMovement</code> and <code class="language-plaintext highlighter-rouge">customMovement</code> is permissible.  If both exist, <code class="language-plaintext highlighter-rouge">atomicCustomMovement</code> is used.  If this and the <code class="language-plaintext highlighter-rouge">movementBonus</code> both exist, the <code class="language-plaintext highlighter-rouge">movementBonus</code> is added to this instead of the authoritativeDefaultRules.  If both are nil, refer to the authoritativeDefaultRules.
    <ul>
      <li><code class="language-plaintext highlighter-rouge">atomicCustomMovement</code> = nil\|int&gt;=0 or function(unit)–&gt;nil\|int&gt;=0
        <ul>
          <li>Unit type will have this amount of atomic movement points, regardless of the authoritativeDefaultRules</li>
          <li>if function, the returned value of function(unit) is used.</li>
        </ul>
      </li>
      <li><code class="language-plaintext highlighter-rouge">customMovement</code> = nil\|num&gt;=0 or function(unit)–&gt; nil\|num&gt;=0
        <ul>
          <li>Unit type will have this amount of movement points, regardless of the authoritativeDefaultRules.</li>
          <li>if function, the returned value of function(unit) is used.</li>
        </ul>
      </li>
    </ul>
  </li>
  <li>If both of <code class="language-plaintext highlighter-rouge">atomicMinMove</code> and <code class="language-plaintext highlighter-rouge">minMove</code> are specified, the one yielding a larger bonus is used.
    <ul>
      <li><code class="language-plaintext highlighter-rouge">atomicMinMove</code> = nil\|int or function(unit)–&gt;nil\|int
        <ul>
          <li>Ensures a damaged land or sea unit will still be able to move this many atomic movement points (unless that would require setting it’s unit type’s atomic movement beyond 255, which can’t be overcome.  If this is a problem,
  consider changing movement multipliers for the unit to have
  a lower aggregate value)</li>
          <li>nil means no minimum movement</li>
          <li>does not increase movement beyond the unit’s movement allowance</li>
          <li>since a damaged unit can’t have a fractional movement allowance,
  the effective atomicMinMove is reduced to the next lowest full
  movement point.</li>
        </ul>
      </li>
      <li><code class="language-plaintext highlighter-rouge">minMove</code> = nil\|num or function(unit)–&gt;nil\|num
        <ul>
          <li>Ensures a damaged land or sea unit will still be able to move this many movement points (unless that would require setting it’s unit type’s atomic movement beyond 255, which can’t be overcome.  If this is a problem,
  consider changing movement multipliers for the unit to have
  a lower aggregate value)</li>
          <li>nil means no minimum movement</li>
          <li>does not increase movement beyond the unit’s movement allowance</li>
        </ul>
      </li>
    </ul>
  </li>
  <li>Movement Multipliers have no special interactions.
    <ul>
      <li><code class="language-plaintext highlighter-rouge">roadMultiplier</code> = nil or int&gt;=-1 or function(unit)–&gt;nil int&gt;=-1
        <ul>
          <li>The road multiplier for the unit type</li>
          <li>nil means refer first to the defaultMovementMultipliers, then to authoritativeDefaultRules</li>
          <li>if function, the returned value of function(unit) is used.</li>
        </ul>
      </li>
      <li><code class="language-plaintext highlighter-rouge">railroadMultiplier</code> = nil or int&gt;=-1 or function(unit)–&gt;nil int&gt;=-1
        <ul>
          <li>The railroad multiplier for this unit type</li>
          <li>nil means refer first to the defaultMovementMultipliers, then to authoritativeDefaultRules</li>
          <li>if function, the returned value of function(unit) is used.</li>
        </ul>
      </li>
      <li><code class="language-plaintext highlighter-rouge">alpineMultiplier</code> = nil or int&gt;=-1 or function(unit)–&gt;nil int&gt;=-1
        <ul>
          <li>The alpine multiplier for this unit type</li>
          <li>nil means refer first to the defaultMovementMultipliers, then to authoritativeDefaultRules</li>
          <li>if function, the returned value of function(unit) is used.</li>
        </ul>
      </li>
      <li><code class="language-plaintext highlighter-rouge">riverMultiplier</code> = nil or int&gt;=-1 or function(unit)–&gt;nil int&gt;=-1
        <ul>
          <li>The river multiplier for this unit type</li>
          <li>nil means refer first to the defaultMovementMultipliers, then to authoritativeDefaultRules</li>
          <li>if function, the returned value of function(unit) is used.</li>
        </ul>
      </li>
    </ul>
  </li>
  <li>The <code class="language-plaintext highlighter-rouge">isImpassable</code> and <code class="language-plaintext highlighter-rouge">moveCost</code> keys have tables as values (or nil, if you wish to make no changes).  These tables accept either <code class="language-plaintext highlighter-rouge">baseTerrainObject</code>s as keys, or integers, as determined by <code class="language-plaintext highlighter-rouge">gen.getBaseTerrainID</code>. Using the baseTerrainObject is recommended for clarity.
    <ul>
      <li><code class="language-plaintext highlighter-rouge">isImpassable[baseTerrainObject/ID]</code> = nil or boolean or function(unit)–&gt;nil or boolean
        <ul>
          <li>if true, the baseTerrain is impassable for the unit type</li>
          <li>if false, the baseTerrain is not impassable for the unit type</li>
          <li>if nil, refer to the authoritativeDefaultRules</li>
          <li>if function, the returned value of function(unit) is used.</li>
        </ul>
      </li>
      <li><code class="language-plaintext highlighter-rouge">moveCost[baseTerrainObject/ID]</code> = nil\|int&gt;=0 or function(unit)–&gt;nil\|int&gt;=0
        <ul>
          <li>if integer, this is the (full movement point) movement cost of the base terrain</li>
          <li>if nil, refer to the authoritativeDefaultRules</li>
          <li>if function, the returned value of function(unit) is used.</li>
        </ul>
      </li>
    </ul>
  </li>
  <li>The <code class="language-plaintext highlighter-rouge">cosmic</code> and <code class="language-plaintext highlighter-rouge">flag</code> keys have tables as values.  The <code class="language-plaintext highlighter-rouge">cosmic</code> table keys change the <code class="language-plaintext highlighter-rouge">civ.cosmic</code> fields with the same key.  The <code class="language-plaintext highlighter-rouge">flags</code> table keys are derived from General Library function names.
    <ul>
      <li><code class="language-plaintext highlighter-rouge">cosmic[cosmicKey]</code> = int&gt;=0\|nil or function(unit)–&gt;int&gt;=0\|nil
        <ul>
          <li>if nil, use the value in the authoritativeDefaultRules instead</li>
          <li>possible values for cosmicKey:
            <ul>
              <li>“paradropRange”</li>
              <li>“triremeLost”</li>
              <li>“transformBase”</li>
            </ul>
          </li>
          <li>if function, the returned value of function(unit) is used.</li>
        </ul>
      </li>
      <li><code class="language-plaintext highlighter-rouge">flags[flagKey]</code> = nil or boolean or function(unit)–&gt;nil or boolean
        <ul>
          <li>if true, the unit has the flag corresponding to the flagKey</li>
          <li>if false, the unit does not have the flag corresponding to flagKey</li>
          <li>if nil, flags from the authoritativeDefaultRules are used</li>
          <li>possible values for flagKey:
            <ul>
              <li>“canCrossImpassableTerrain”</li>
              <li>“canFoundCities”</li>
              <li>“canImproveTiles” (no effect if not settler)</li>
              <li>“seeTwoSpaces”</li>
              <li>“ignoreZOC”</li>
              <li>“amphibious”</li>
              <li>“coastal”</li>
              <li>“ignoreWalls”</li>
              <li>“carryAir”</li>
              <li>“paradrop”</li>
              <li>“alpine”</li>
              <li>“destroyedAfterAttacking”</li>
              <li>“spotSubmarines”</li>
            </ul>
          </li>
          <li>if function, the returned value of function(unit) is used.</li>
        </ul>
      </li>
    </ul>
  </li>
  <li>The <code class="language-plaintext highlighter-rouge">condition</code> and <code class="language-plaintext highlighter-rouge">priority</code> keys determine which customisation table is chosen for a particular unit.  The <code class="language-plaintext highlighter-rouge">customisationName</code> key is used to give the customisation a name which is used in some error messages.
    <ul>
      <li><code class="language-plaintext highlighter-rouge">condition</code> = nil\|tribeObject\|traitString\|function(unit)–&gt;boolean or table of tribeObject\|traitString
        <ul>
          <li>if nil, this unit type customisation applies to all units of the relevant type(s).</li>
          <li>if tribeObject, this customisation can only apply to units owned by that tribe (as long as the unit is also of the relevant type)</li>
          <li>if traitString, this customisation applies to tribes which have the trait</li>
          <li>if table of tribeObject\|traitString, this applies to any tribe or traitString in the table</li>
          <li>if function(unit) –&gt; boolean, then this customisation applies to units of the relevant type(s) which also make this function return true</li>
          <li>Only one customisation can apply to any unit.  The <code class="language-plaintext highlighter-rouge">priority</code> key is used to tie break.</li>
        </ul>
      </li>
      <li><code class="language-plaintext highlighter-rouge">priority</code> = nil or number&gt;=0
        <ul>
          <li>If multiple customisations can apply to a unit, this value chooses among them, with higher priority taking precedence.</li>
          <li>If the unit is eligible for two customisations of the same priority, an error may be generated, and will certainly be generated if they are of the highest priority.</li>
        </ul>
      </li>
      <li><code class="language-plaintext highlighter-rouge">customisationName</code> = nil\|string,
        <ul>
          <li>A name to be used during certain kinds of error and debugging messages</li>
          <li>nil will give “Unnamed UnitType Customisation”</li>
        </ul>
      </li>
    </ul>
  </li>
  <li>Transport settings have no effect unless <code class="language-plaintext highlighter-rouge">customCosmic.ephemeralMapTransportSettings()</code> has been called.  The final transport settings are computed as follows:
<br />1. restore the unitType to the authoritativeDefaultRules transportation settings
<br />2. Apply the <something>Transport strings to the result of step 1
<br />3. Apply transportXY data to the result of step 2
</something>    <ul>
      <li><code class="language-plaintext highlighter-rouge">nativeTransport</code> = string\|nil or function(unit) –&gt; string\|nil
        <ul>
          <li>Governs the unitType nativeTransport field</li>
          <li>String should be 16 characters, 0,1, or x</li>
          <li>Each of the 16 characters reference one of the possible map transport relationships.  If it is 0, the corresponding relationship is disabled, if it is 1, the corresponding relationship is enabled, and if it is x, reference the authoritativeDefaultRules</li>
          <li>if nil, use authoritativeDefaultRules, if function,</li>
          <li>evaluate function(unit) and use the result</li>
        </ul>
      </li>
      <li><code class="language-plaintext highlighter-rouge">buildTransport</code> = string\|nil or function(unit) –&gt; string\|nil
        <ul>
          <li>Governs the unitType buildTransport field</li>
          <li>String should be 16 characters, 0,1, or x</li>
          <li>Each of the 16 characters reference one of the possible map transport relationships.  If it is 0, the corresponding relationship is disabled, if it is 1, the corresponding relationship is enabled, and if it is x, reference the authoritativeDefaultRules</li>
          <li>if nil, use authoritativeDefaultRules, if function,</li>
          <li>evaluate function(unit) and use the result</li>
        </ul>
      </li>
      <li><code class="language-plaintext highlighter-rouge">useTransport</code> = string\|nil or function(unit) –&gt; string\|nil
        <ul>
          <li>Governs the unitType useTransport field</li>
          <li>String should be 16 characters, 0,1, or x</li>
          <li>Each of the 16 characters reference one of the possible map transport relationships.  If it is 0, the corresponding relationship is disabled, if it is 1, the corresponding relationship is enabled, and if it is x, reference the authoritativeDefaultRules</li>
          <li>if nil, use authoritativeDefaultRules, if function,</li>
          <li>evaluate function(unit) and use the result</li>
        </ul>
      </li>
      <li><code class="language-plaintext highlighter-rouge">transportXY</code> = {
  <br /> nativeTransport = nil\|boolean or function(unit) –&gt; nil\|boolean
  <br /> buildTransport = nil\|boolean or function(unit) –&gt; nil\|boolean
  <br /> useTransport = nil\|boolean or function(unit) –&gt; nil\|boolean
  <br />}
        <ul>
          <li>transportXY governs the transport relationship between maps X and Y</li>
          <li>if <code class="language-plaintext highlighter-rouge">somethingTransport</code> key is true, then the relationship between the two maps is enabled for maps X and Y in unitType.somethingTransport</li>
          <li>if it is false, the relationship is disabled</li>
          <li>if nil, use the authoritativeDefaultRules, or the relationship set out by the somethingTransport key defined above</li>
          <li>if function, evaluate function(unit) and use the result</li>
          <li><code class="language-plaintext highlighter-rouge">transportXY</code> represents the following available keys:
            <ul>
              <li><code class="language-plaintext highlighter-rouge">transport01</code></li>
              <li><code class="language-plaintext highlighter-rouge">transport02</code></li>
              <li><code class="language-plaintext highlighter-rouge">transport03</code></li>
              <li><code class="language-plaintext highlighter-rouge">transport12</code></li>
              <li><code class="language-plaintext highlighter-rouge">transport13</code></li>
              <li>
<h2 id="transport23">
  
  
    <a href="#transport23">&#128279</a> <code class="language-plaintext highlighter-rouge">transport23</code>
  
  
</h2>
    
              </li>
            </ul>
          </li>
        </ul>
      </li>
    </ul>
  </li>
</ul>
 -->
      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/"></data>

  <div class="wrapper">

    <div class="footer-col-wrapper">
      <div class="footer-col">
<!--        <p class="feed-subscribe">
          <a href="/feed.xml">
            <svg class="svg-icon orange">
              <use xlink:href="/assets/minima-social-icons.svg#rss"></use>
            </svg><span>Subscribe</span>
          </a>
        </p>
-->
<!--
-->
      </div>
      <div class="footer-col">
        <p>Reference materials and lessons for using Lua to program events for Civilization II: Test of Time</p>
      </div>
    </div>

    <div class="social-links">
<ul class="social-media-list">
  <li><a rel="me" href="https://github.com/ProfGarfield" target="_blank" title="ProfGarfield"><svg class="svg-icon grey"><use xlink:href="/assets/minima-social-icons.svg#github"></use></svg>ProfGarfield</a></li>
  <li><a rel="me" href="https://www.youtube.com/user/ProfCiv2" target="_blank" title="YouTube"><svg class="svg-icon grey"><use xlink:href="/assets/minima-social-icons.svg#youtube"></use></svg>ProfCiv2</a></li>
  <li><a rel="me" href="https://forums.civfanatics.com/members/prof-garfield.43783/" target="_blank" title="Civfanatics Profile"><img src="/assets/civfanatics_icon.png" class="svg-icon grey"></img>Prof. Garfield</a></li>
</ul>
</div>

  </div>

</footer>
</body>

</html>

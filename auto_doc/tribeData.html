<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="/assets/css/style.css">
  <!--<link rel="icon" type="image/png" href="/assets/civfanatics_icon.png">-->
</head>
<body><header class="site-header">
  <div class="wrapper">
    <!--img src="/assets/logo-cfc.png" class="center"--><a class="site-title" rel="author" href="/">Lua for Civilization II</a><nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger"><a class="page-link" href="/about/">About</a><a class="page-link" href="/auto_doc/autoIndex.html">Function Docs</a><a class="page-link" href="/executionPoints.html">Execution Points</a></div>
      </nav></div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <head><title>tribeData.lua Documentation</title>
</head>
<article class="post">

  <header class="post-header">
    <h1 class="post-title">tribeData</h1>
  </header>
  
  <div class="toc-div">
    <h2 class="toc-header">Contents</h2>
    <ul><li><a href="#flags">Flags</a><ul><li><a href="#defineflag">defineFlag</a></li><li><a href="#definemoduleflag">defineModuleFlag</a></li><li><a href="#flaggetvalue">flagGetValue</a></li><li><a href="#flagsettrue">flagSetTrue</a></li><li><a href="#flagsetfalse">flagSetFalse</a></li><li><a href="#flagisnil">flagIsNil</a></li><li><a href="#flagreset">flagReset</a></li></ul></li><li><a href="#counters">Counters</a><ul><li><a href="#definecounter">defineCounter</a></li><li><a href="#definemodulecounter">defineModuleCounter</a></li><li><a href="#countergetvalue">counterGetValue</a></li><li><a href="#countersetvalue">counterSetValue</a></li><li><a href="#counterisnil">counterIsNil</a></li><li><a href="#counterreset">counterReset</a></li><li><a href="#counteradd">counterAdd</a></li><li><a href="#countersubtract">counterSubtract</a></li><li><a href="#counterisatleast">counterIsAtLeast</a></li><li><a href="#counterisatmost">counterIsAtMost</a></li><li><a href="#countersetwithin">counterSetWithin</a></li></ul></li><li><a href="#generic-data">Generic Data</a><ul><li><a href="#definegeneric">defineGeneric</a></li><li><a href="#definemodulegeneric">defineModuleGeneric</a></li><li><a href="#genericgetvalue">genericGetValue</a></li><li><a href="#genericsetvalue">genericSetValue</a></li></ul></li><li><a href="#phrases">Phrases</a><ul><li><a href="#definephrase">definePhrase</a></li><li><a href="#definemodulephrase">defineModulePhrase</a></li><li><a href="#phrasegetvalue">phraseGetValue</a></li><li><a href="#phrasesetvalue">phraseSetValue</a></li><li><a href="#phraseisnil">phraseIsNil</a></li><li><a href="#phrasereset">phraseReset</a></li></ul></li><li><a href="#general-tools">General Tools</a><ul><li><a href="#deletedata">deleteData</a></li><li><a href="#transferdata">transferData</a></li><li><a href="#transferordeletedata">transferOrDeleteData</a></li><li><a href="#update">update</a></li><li><a href="#generalupdate">generalUpdate</a></li><li><a href="#validate">validate</a></li><li><a href="#changevalidationinfo">changeValidationInfo</a></li></ul></li></ul></div>  
  
  <div class="post-content">
    <h1 id="tribedata">
  
  
    tribeData <a href="#tribedata"><span class="self-link">&#128279</span></a>
  
  
</h1>
    

<p>This module is used to associate data with individual tribes.  Functions are used to
get the data and to change it, so you don’t have to interact and maintain the underlying
tables directly.  These functions also check the data that you input, so that errors are
caught quickly rather than being saved in tables only to surface later.</p>

<p>This module provides “flags”, which store boolean values, “counters”, which store number
values, and “phrases”, which store string values.  There is also some basic “generic”
data storage, which can store “state savable” data, and so is more flexible, but also has
fewer error checks and built in features.</p>

<p>These flags, counters, and phrases have names, which are strings.  To access a piece of data,
you will need to have the tribe it is associated with, as well as the name, and whether the
data is a flag, counter, or phrase.  Then, you can use one of the provided functions
to interact with that data.</p>

<p>By default, all data is nil.  However, flags, counters, and phrases will not return nil
when you get their values (generic, however, will).  Instead, when you define a
data entry, you will define a default value which is to be returned if the data is nil.
Functions are provided to check if the underlying value is actually nil, and to reset
the data to nil if you need to.  A data value stops being nil when you assign it an
actual value.</p>

<p>You can set data to update periodically, during onTurn, onTribeTurnBegin, or onTribeTurnEnd
events.  Flags and Phrases can be reset to nil automatically, while counters and generic data
can be assigned update parameters or functions.  Usually, updates are only performed on
data which is already non-nil, but you can choose to update all if that is needed for your
functionality.  The update time can also be set to ‘custom’, which will only update the
data on specific function call.</p>
<h2 id="flags">
  
  
    Flags <a href="#flags"><span class="self-link">&#128279</span></a>
  
  
</h2>
    
<h3 id="defineflag">
  
  
    defineFlag <a href="#defineflag"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function tribeData.defineFlag(flagName: string, defaultValue?: boolean, resetTime?: "custom"|"never"|"onTribeTurnBegin"|"onTribeTurnEnd"|"onTurn")
</code></pre></div></div>
<p>Defines a flag for tribe data, which keeps boolean values</p>
<ul>
  <li>flagName = string
    <ul>
      <li>the name of the flag</li>
    </ul>
  </li>
  <li>defaultValue = boolean | nil
    <ul>
      <li>If the underlying stored value is nil, this is the value the flag takes on.</li>
      <li>Defaults to false.</li>
    </ul>
  </li>
  <li>resetTime = “never”|“onTurn”|“onTribeTurnBegin”|“onTribeTurnEnd”|“custom”|nil
    <ul>
      <li>Gives the time when the flag’s stored value is reset to nil.</li>
      <li>Defaults to “never”.</li>
      <li>“never” means never reset automatically</li>
      <li>“onTurn” means at the very beginning of the onTurn event (before all other code)</li>
      <li>“onTribeTurnBegin” means at the very start of the onTribeTurnBegin event for the owner (before all other code)</li>
      <li>“onTribeTurnEnd” means at the very end of the onTribeTurnEnd event for the owner (after all other code)</li>
      <li>if tribe has no owner, onTribeTurnBegin and onTribeTurnEnd updates happen</li>
      <li>during the onTurn update</li>
      <li>“custom” means the update must be programmed in manually using tribeData.update</li>
    </ul>
  </li>
</ul>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">flagName</code> — the name of the flag</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">defaultValue</code> — If the underlying stored value is nil, this is the value the flag takes on. Defaults to false.</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">resetTime</code> — Gives the time when the flag’s stored value is reset to nil. Defaults to “never”.</p>

<div class="language-lua highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">resetTime</span><span class="p">:</span>
    <span class="err">\|</span> <span class="s2">"never"</span>
    <span class="err">\|</span> <span class="s2">"onTurn"</span>
    <span class="err">\|</span> <span class="s2">"onTribeTurnBegin"</span>
    <span class="err">\|</span> <span class="s2">"onTribeTurnEnd"</span>
    <span class="err">\|</span> <span class="s2">"custom"</span>
</code></pre></div></div>
<h3 id="definemoduleflag">
  
  
    defineModuleFlag <a href="#definemoduleflag"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function tribeData.defineModuleFlag(moduleName: string, flagName: string, defaultValue?: boolean, resetTime?: "custom"|"never"|"onTribeTurnBegin"|"onTribeTurnEnd"|"onTurn")
</code></pre></div></div>
<p>Defines a flag for tribe data, which keeps boolean values.  This version of defineFlag allows you to add a moduleName to the flag name, which will prevent name collision between modules and code written for a specific scenario.,
for a specific scenario.</p>
<ul>
  <li>moduleName = string
    <ul>
      <li>the name of the module</li>
    </ul>
  </li>
  <li>flagName = string
    <ul>
      <li>the name of the flag</li>
    </ul>
  </li>
  <li>defaultValue = boolean | nil
    <ul>
      <li>If the underlying stored value is nil, this is the value the flag takes on.</li>
      <li>Defaults to false.</li>
    </ul>
  </li>
  <li>resetTime = “never”|“onTurn”|“onTribeTurnBegin”|“onTribeTurnEnd”|“custom”|nil
    <ul>
      <li>Gives the time when the flag’s stored value is reset to nil.</li>
      <li>Defaults to “never”.</li>
      <li>“never” means never reset automatically</li>
      <li>“onTurn” means at the very beginning of the onTurn event (before all other code)</li>
      <li>“onTribeTurnBegin” means at the very start of the onTribeTurnBegin event for the owner (before all other code)</li>
      <li>“onTribeTurnEnd” means at the very end of the onTribeTurnEnd event for the owner (after all other code)</li>
      <li>if tribe has no owner, onTribeTurnBegin and onTribeTurnEnd updates happen</li>
      <li>during the onTurn update</li>
      <li>“custom” means the update must be programmed in manually using tribeData.update</li>
    </ul>
  </li>
</ul>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">moduleName</code> — the name of the module</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">flagName</code> — the name of the flag</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">defaultValue</code> — If the underlying stored value is nil, this is the value the flag takes on. Defaults to false.</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">resetTime</code> — Gives the time when the flag’s stored value is reset to nil. Defaults to “never”.</p>

<div class="language-lua highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">resetTime</span><span class="p">:</span>
    <span class="err">\|</span> <span class="s2">"never"</span>
    <span class="err">\|</span> <span class="s2">"onTurn"</span>
    <span class="err">\|</span> <span class="s2">"onTribeTurnBegin"</span>
    <span class="err">\|</span> <span class="s2">"onTribeTurnEnd"</span>
    <span class="err">\|</span> <span class="s2">"custom"</span>
</code></pre></div></div>
<h3 id="flaggetvalue">
  
  
    flagGetValue <a href="#flaggetvalue"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function tribeData.flagGetValue(tribe: tribeObject, flagName: string, moduleName?: string)
  -&gt; The: boolean
</code></pre></div></div>
<p>Returns the value associated with the <code class="language-plaintext highlighter-rouge">tribe</code>’s flag of <code class="language-plaintext highlighter-rouge">flagName</code>.
If the value is nil, the default specified during the definition is returned.</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">flagName</code> — The name of the flag</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">moduleName</code> — The name of the module (if applicable)</p><hr />

<p>@<em>return</em> <code class="language-plaintext highlighter-rouge">The</code> — value associated with the <code class="language-plaintext highlighter-rouge">tribe</code>’s flag of <code class="language-plaintext highlighter-rouge">flagName</code>.</p>
<h3 id="flagsettrue">
  
  
    flagSetTrue <a href="#flagsettrue"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function tribeData.flagSetTrue(tribe: tribeObject, flagName: string, moduleName?: string)
</code></pre></div></div>
<p>Sets the value associated with the tribe’s flag of flagName to <code class="language-plaintext highlighter-rouge">true</code>.</p>
<h3 id="flagsetfalse">
  
  
    flagSetFalse <a href="#flagsetfalse"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function tribeData.flagSetFalse(tribe: tribeObject, flagName: string, moduleName?: string)
</code></pre></div></div>
<p>Sets the value associated with the tribe’s flag of flagName to <code class="language-plaintext highlighter-rouge">false</code></p>
<h3 id="flagisnil">
  
  
    flagIsNil <a href="#flagisnil"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function tribeData.flagIsNil(tribe: tribeObject, flagName: string, moduleName?: string)
  -&gt; boolean
</code></pre></div></div>
<p>Returns true if the underlying value of tribe’s flagName flag is nil
(including if all of the flag’s keys are nil)
and false otherwise.</p>
<h3 id="flagreset">
  
  
    flagReset <a href="#flagreset"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function tribeData.flagReset(tribe: tribeObject, flagName: string, moduleName?: string)
</code></pre></div></div>
<p>Sets the value associated with the tribe’s flag of flagName to nil
(meaning that it returns the default value set when it was defined).</p>
<h2 id="counters">
  
  
    Counters <a href="#counters"><span class="self-link">&#128279</span></a>
  
  
</h2>
    
<h3 id="definecounter">
  
  
    defineCounter <a href="#definecounter"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function tribeData.defineCounter(counterName: string, defaultValue?: number, minValue?: number, maxValue?: number, update?: "function"|"functionAll"|"increment"|"incrementAll"|"none"...(+3), updateTime?: "custom"|"never"|"onTribeTurnBegin"|"onTribeTurnEnd"|"onTurn", updateParameter?: number|function, nonInteger?: boolean)
</code></pre></div></div>
<p>Define a counter for tribe data, which keeps numerical values</p>
<ul>
  <li>counterName = string
    <ul>
      <li>the name of the counter</li>
    </ul>
  </li>
  <li>defaultValue = number
    <ul>
      <li>If the underlying stored value is nil, this is the value the counter takes on.</li>
      <li>Default is 0.</li>
    </ul>
  </li>
  <li>minValue = number
    <ul>
      <li>This is the smallest number the counter can be.  If anything would set the counter below this number,
  the counter is set to this number instead.</li>
      <li>Default is <code class="language-plaintext highlighter-rouge">-math.huge</code>.</li>
    </ul>
  </li>
  <li>maxValue = number
    <ul>
      <li>This is the largest number the counter can be.  If anything would set the counter above this number,
  the counter is set to this number instead</li>
      <li>Default is <code class="language-plaintext highlighter-rouge">math.huge</code>.</li>
    </ul>
  </li>
  <li>update = “none”|“increment”|“set”|“reset”|“function”| “incrementAll”|“setAll”|“functionAll”
    <ul>
      <li>This is the kind of update the counter receives each turn
        <ul>
          <li>“none” means no update</li>
          <li>“increment” means that the updateParameter is added to the current value of the counter (subject to maxValue and minValue) ,</li>
          <li>but only if the counter isn’t currently nil</li>
          <li>“incrementAll” same as increment, but is also applied to tribes with nil as the underlying value of the counter</li>
          <li>“set” means the counter is set to the updateParameter, but only applies if the counter isn’t currently nil</li>
          <li>“setAll” same as “set”, but is also applied to tribes with nil as the underlying value of the counter</li>
          <li>“reset” sets the underlying counter value to nil</li>
          <li>“function” sets the underlying counter value to the result of updateParameter(formerUnderlyingValue,tribeID) (subject to maxValue and minValue), only for underlying values which are not nil</li>
          <li>“functionAll” sets the underlying counter value to the result of updateParameter(formerUnderlyingValue,tribeID) (subject to maxValue and minValue), even for nil underlying values</li>
        </ul>
      </li>
      <li>Default is “none”.</li>
    </ul>
  </li>
  <li>updateTime = “never”|“onTurn”|“onTribeTurnBegin”|“onTribeTurnEnd”|“custom”
    <ul>
      <li>Gives the time when the counter update happens
        <ul>
          <li>“never” means no update</li>
          <li>“onTurn” means at the very beginning of the onTurn event (before all other code)</li>
          <li>“onTribeTurnBegin” means at the very start of the onTribeTurnBegin event for the owner (before all other code)</li>
          <li>“onTribeTurnEnd” means at the very end of the onTribeTurnEnd event for the owner (after all other code)</li>
          <li>if tribe has no owner, onTribeTurnBegin and onTribeTurnEnd updates happen
  during the onTurn update</li>
          <li>“custom” means the update must be programmed in manually using tribeData.update</li>
        </ul>
      </li>
      <li>Default is “never”.</li>
    </ul>
  </li>
  <li>updateParameter = number|nil|function
    <ul>
      <li>if update is “increment”,”incrementAll”, “set”, “setAll” then this must be a number</li>
      <li>if update is “none” or “reset”, this is ignored and can be nil</li>
      <li>if update is “function”, this is a function(numberOrNil,tribeID) -&gt; numberOrNil</li>
      <li>Default is nil.</li>
    </ul>
  </li>
  <li>nonInteger = bool|nil
    <ul>
      <li>if true, the counter can take on non-integer values</li>
      <li>if false, the value is rounded using math.floor(initialValue+0.5)</li>
      <li>if nil, an error is thrown when the counter is set to a non-integer value</li>
      <li>Default is nil.</li>
    </ul>
  </li>
</ul>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">counterName</code> — the name of the counter</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">defaultValue</code> — If the underlying stored value is nil, this is the value the counter takes on. Default is 0.</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">minValue</code> — This is the smallest number the counter can be.  If anything would set the counter below this number, the counter is set to this number instead. Default is <code class="language-plaintext highlighter-rouge">-math.huge</code>.</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">maxValue</code> — This is the largest number the counter can be.  If anything would set the counter above this number, the counter is set to this number instead. Default is <code class="language-plaintext highlighter-rouge">math.huge</code>.</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">update</code> — This is the kind of update the counter receives each turn. Default is “none”.</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">updateTime</code> — Gives the time when the counter update happens. Default is “never”.</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">updateParameter</code> — if update is “increment”,”incrementAll”, “set”, “setAll” then this must be a number. if update is “none” or “reset”, this is ignored and can be nil. if update is “function”, this is a function(numberOrNil,tribeID) -&gt; numberOrNil. Default is nil.</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">nonInteger</code> — if true, the counter can take on non-integer values. if false, the value is rounded using math.floor(initialValue+0.5). if nil, an error is thrown when the counter is set to a non-integer value. Default is nil.</p>

<div class="language-lua highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">update</span><span class="p">:</span>
    <span class="err">\|</span> <span class="s2">"none"</span>
    <span class="err">\|</span> <span class="s2">"increment"</span>
    <span class="err">\|</span> <span class="s2">"set"</span>
    <span class="err">\|</span> <span class="s2">"reset"</span>
    <span class="err">\|</span> <span class="s2">"function"</span>
    <span class="err">\|</span> <span class="s2">"incrementAll"</span>
    <span class="err">\|</span> <span class="s2">"setAll"</span>
    <span class="err">\|</span> <span class="s2">"functionAll"</span>

<span class="n">updateTime</span><span class="p">:</span>
    <span class="err">\|</span> <span class="s2">"never"</span>
    <span class="err">\|</span> <span class="s2">"onTurn"</span>
    <span class="err">\|</span> <span class="s2">"onTribeTurnBegin"</span>
    <span class="err">\|</span> <span class="s2">"onTribeTurnEnd"</span>
    <span class="err">\|</span> <span class="s2">"custom"</span>
</code></pre></div></div>
<h3 id="definemodulecounter">
  
  
    defineModuleCounter <a href="#definemodulecounter"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function tribeData.defineModuleCounter(moduleName: string, counterName: string, defaultValue?: number, minValue?: number, maxValue?: number, update?: "function"|"functionAll"|"increment"|"incrementAll"|"none"...(+3), updateTime?: "custom"|"never"|"onTribeTurnBegin"|"onTribeTurnEnd"|"onTurn", updateParameter?: number|function, nonInteger?: boolean)
</code></pre></div></div>
<p>Defines a counter for tribe data, which keeps numerical values.  This version of defineCounter allows you to add a moduleName to the counter,
which will prevent name collisions with counters written for other modules 
and code written for a specific scenario.</p>
<ul>
  <li>moduleName = string
    <ul>
      <li>the name of the module</li>
    </ul>
  </li>
  <li>counterName = string
    <ul>
      <li>the name of the counter</li>
    </ul>
  </li>
  <li>defaultValue = number
    <ul>
      <li>If the underlying stored value is nil, this is the value the counter takes on.</li>
      <li>Default is 0.</li>
    </ul>
  </li>
  <li>minValue = number
    <ul>
      <li>This is the smallest number the counter can be.  If anything would set the counter below this number,
  the counter is set to this number instead.</li>
      <li>Default is <code class="language-plaintext highlighter-rouge">-math.huge</code>.</li>
    </ul>
  </li>
  <li>maxValue = number
    <ul>
      <li>This is the largest number the counter can be.  If anything would set the counter above this number,
  the counter is set to this number instead</li>
      <li>Default is <code class="language-plaintext highlighter-rouge">math.huge</code>.</li>
    </ul>
  </li>
  <li>update = “none”|“increment”|“set”|“reset”|“function”| “incrementAll”|“setAll”|“functionAll”
    <ul>
      <li>This is the kind of update the counter receives each turn
        <ul>
          <li>“none” means no update</li>
          <li>“increment” means that the updateParameter is added to the current value of the counter (subject to maxValue and minValue) ,</li>
          <li>but only if the counter isn’t currently nil</li>
          <li>“incrementAll” same as increment, but is also applied to tribes with nil as the underlying value of the counter</li>
          <li>“set” means the counter is set to the updateParameter, but only applies if the counter isn’t currently nil</li>
          <li>“setAll” same as “set”, but is also applied to tribes with nil as the underlying value of the counter</li>
          <li>“reset” sets the underlying counter value to nil</li>
          <li>“function” sets the underlying counter value to the result of updateParameter(formerUnderlyingValue,tribeID) (subject to maxValue and minValue), only for underlying values which are not nil</li>
          <li>“functionAll” sets the underlying counter value to the result of updateParameter(formerUnderlyingValue,tribeID) (subject to maxValue and minValue), even for nil underlying values</li>
        </ul>
      </li>
      <li>Default is “none”.</li>
    </ul>
  </li>
  <li>updateTime = “never”|“onTurn”|“onTribeTurnBegin”|“onTribeTurnEnd”|“custom”
    <ul>
      <li>Gives the time when the counter update happens
        <ul>
          <li>“never” means no update</li>
          <li>“onTurn” means at the very beginning of the onTurn event (before all other code)</li>
          <li>“onTribeTurnBegin” means at the very start of the onTribeTurnBegin event for the owner (before all other code)</li>
          <li>“onTribeTurnEnd” means at the very end of the onTribeTurnEnd event for the owner (after all other code)</li>
          <li>if tribe has no owner, onTribeTurnBegin and onTribeTurnEnd updates happen
  during the onTurn update</li>
          <li>“custom” means the update must be programmed in manually using tribeData.update</li>
        </ul>
      </li>
      <li>Default is “never”.</li>
    </ul>
  </li>
  <li>updateParameter = number|nil|function
    <ul>
      <li>if update is “increment”,”incrementAll”, “set”, “setAll” then this must be a number</li>
      <li>if update is “none” or “reset”, this is ignored and can be nil</li>
      <li>if update is “function”, this is a function(numberOrNil,tribeID) -&gt; numberOrNil</li>
      <li>Default is nil.</li>
    </ul>
  </li>
  <li>nonInteger = boolean|nil
    <ul>
      <li>if true, the counter can take on non-integer values</li>
      <li>if false, the value is rounded using math.floor(initialValue+0.5)</li>
      <li>if nil, an error is thrown when the counter is set to a non-integer value</li>
      <li>Default is nil.</li>
    </ul>
  </li>
</ul>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">moduleName</code> — the name of the module</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">counterName</code> — the name of the counter</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">defaultValue</code> — If the underlying stored value is nil, this is the value the counter takes on. Default is 0.</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">minValue</code> — This is the smallest number the counter can be.  If anything would set the counter below this number, the counter is set to this number instead. Default is <code class="language-plaintext highlighter-rouge">-math.huge</code>.</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">maxValue</code> — This is the largest number the counter can be.  If anything would set the counter above this number, the counter is set to this number instead. Default is <code class="language-plaintext highlighter-rouge">math.huge</code>.</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">update</code> — This is the kind of update the counter receives each turn. Default is “none”.</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">updateTime</code> — Gives the time when the counter update happens. Default is “never”.</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">updateParameter</code> — if update is “increment”,”incrementAll”, “set”, “setAll” then this must be a number. if update is “none” or “reset”, this is ignored and can be nil. if update is “function”, this is a function(numberOrNil,tribeID) -&gt; numberOrNil. Default is nil.</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">nonInteger</code> — if true, the counter can take on non-integer values. if false, the value is rounded using math.floor(initialValue+0.5). if nil, an error is thrown when the counter is set to a non-integer value. Default is nil.</p>

<div class="language-lua highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">update</span><span class="p">:</span>
    <span class="err">\|</span> <span class="s2">"none"</span>
    <span class="err">\|</span> <span class="s2">"increment"</span>
    <span class="err">\|</span> <span class="s2">"set"</span>
    <span class="err">\|</span> <span class="s2">"reset"</span>
    <span class="err">\|</span> <span class="s2">"function"</span>
    <span class="err">\|</span> <span class="s2">"incrementAll"</span>
    <span class="err">\|</span> <span class="s2">"setAll"</span>
    <span class="err">\|</span> <span class="s2">"functionAll"</span>

<span class="n">updateTime</span><span class="p">:</span>
    <span class="err">\|</span> <span class="s2">"never"</span>
    <span class="err">\|</span> <span class="s2">"onTurn"</span>
    <span class="err">\|</span> <span class="s2">"onTribeTurnBegin"</span>
    <span class="err">\|</span> <span class="s2">"onTribeTurnEnd"</span>
    <span class="err">\|</span> <span class="s2">"custom"</span>
</code></pre></div></div>
<h3 id="countergetvalue">
  
  
    counterGetValue <a href="#countergetvalue"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function tribeData.counterGetValue(tribe: tribeObject, counterName: string, moduleName?: string)
  -&gt; number
</code></pre></div></div>
<p>Returns the value associated with the tribe’s counter of counterName.
If the value is nil, the default specified during the definition is returned.</p>
<h3 id="countersetvalue">
  
  
    counterSetValue <a href="#countersetvalue"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function tribeData.counterSetValue(tribe: tribeObject, counterName: string, value: number, moduleName?: string)
  -&gt; number
</code></pre></div></div>
<p>Sets the value associated with the tribe’s counter of counterName to value.
If this value is outside the counter’s defined maxValue and minValue,
those values are then applied.
Returns the value the counter was set to.</p>
<h3 id="counterisnil">
  
  
    counterIsNil <a href="#counterisnil"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function tribeData.counterIsNil(tribe: tribeObject, counterName: string, moduleName?: string)
  -&gt; boolean
</code></pre></div></div>
<p>Returns true if the underlying value of tribe’s counterName counter is nil
 and false otherwise.</p>
<h3 id="counterreset">
  
  
    counterReset <a href="#counterreset"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function tribeData.counterReset(tribe: tribeObject, counterName: string, moduleName?: string)
  -&gt; void
</code></pre></div></div>
<p>Sets the value associated with the tribe’s counterName to nil
(meaning that it returns the default value set when it was defined).</p>
<h3 id="counteradd">
  
  
    counterAdd <a href="#counteradd"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function tribeData.counterAdd(tribe: tribeObject, counterName: string, increment: number, minValue?: number, maxValue?: number, moduleName?: string)
  -&gt; number
</code></pre></div></div>
<p>Adds the increment to the tribe’s counterName current value, but substituting minValue or maxValue
if the result is out of the range.  Then, the minimum and maximum values specified
when the counter was defined are applied (i.e. the minValue and maxValue here do not
override the defined min and max values).
Returns the value the counter was set to.</p>
<h3 id="countersubtract">
  
  
    counterSubtract <a href="#countersubtract"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function tribeData.counterSubtract(tribe: tribeObject, counterName: string, increment: number, minValue?: number, maxValue?: number, moduleName?: string)
  -&gt; number
</code></pre></div></div>
<p>Subtracts the increment to the tribe’s current value, but substituting minValue or maxValue
if the result is out of the range.  Then, the minimum and maximum values specified
when the counter was defined are applied (i.e. the minValue and maxValue here do not
override the defined min and max values).
Returns the value the counter was set to.</p>
<h3 id="counterisatleast">
  
  
    counterIsAtLeast <a href="#counterisatleast"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function tribeData.counterIsAtLeast(tribe: tribeObject, counterName: string, threshold: number, moduleName?: string)
  -&gt; boolean
</code></pre></div></div>
<p>Returns true if the tribe’s counterName is at least the threshold
and false otherwise.</p>
<h3 id="counterisatmost">
  
  
    counterIsAtMost <a href="#counterisatmost"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function tribeData.counterIsAtMost(tribe: tribeObject, counterName: string, threshold: number, moduleName?: string)
  -&gt; boolean
</code></pre></div></div>
<p>Returns true if the tribe’s counterName is at most the threshold
and false otherwise.</p>
<h3 id="countersetwithin">
  
  
    counterSetWithin <a href="#countersetwithin"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function tribeData.counterSetWithin(tribe: tribeObject, counterName: string, minValue?: number, maxValue?: number, moduleName?: string)
  -&gt; number
</code></pre></div></div>
<p>Sets the counter’s current value within the minValue and maxValue specified
(This does not change the overall max and min set when defining the counter).
Returns the value the counter was set to.</p>
<h2 id="generic-data">
  
  
    Generic Data <a href="#generic-data"><span class="self-link">&#128279</span></a>
  
  
</h2>
    
<h3 id="definegeneric">
  
  
    defineGeneric <a href="#definegeneric"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function tribeData.defineGeneric(dataName: string, updateTime?: "custom"|"never"|"onTribeTurnBegin"|"onTribeTurnEnd"|"onTurn", updateAll?: boolean, updateFunction?: fun(value: any, tribeID: number):any)
</code></pre></div></div>
<p>Defines a generic entry for tribe data, and can keep any item that is “state savable” (since it must be saved in the state table).
An item is “state savable” if it is one of the following:
    - nil
    - a number
    - a string
    - a boolean
    - a table with keys that are numbers or strings and with values that are also state savable
“generic” data doesn’t have the same guards against misuse that the other tribeData types have, but it is more flexible.
The function <code class="language-plaintext highlighter-rouge">gen.isStateSavable(item)</code> may be useful to you.</p>
<ul>
  <li>dataName = string
    <ul>
      <li>The name of the data entry.</li>
    </ul>
  </li>
  <li>updateTime = “never”|“onTurn”|“onTribeTurnBegin”|“onTribeTurnEnd”|“custom”
    <ul>
      <li>updateTime defines when the updateFunction is executed.
        <ul>
          <li>“never” means no update</li>
          <li>“onTurn” means at the very beginning of the onTurn event (before all other code)</li>
          <li>“onTribeTurnBegin” means at the very start of the onTribeTurnBegin event for the owner (before all other code)</li>
          <li>“onTribeTurnEnd” means at the very end of the onTribeTurnEnd event for the owner (after all other code)</li>
          <li>if tribe has no owner, onTribeTurnBegin and onTribeTurnEnd updates happen
  during the onTurn update</li>
          <li>“custom” means the update must be programmed in manually using tribeData.update</li>
        </ul>
      </li>
      <li>Default is “never”.</li>
    </ul>
  </li>
  <li>updateAll = nil|boolean
    <ul>
      <li>If true, the update function is applied to all tribe, not just those with non-nil values for this generic data.</li>
      <li>Default is nil.</li>
    </ul>
  </li>
  <li>updateFunction = function(value,tribeID) –&gt; value
    <ul>
      <li>Takes the existing value for tribe’s generic data under dataName and the tribe’s ID number, and produces a new value for the generic data under dataName.</li>
      <li>Default is nil.  However, this is only valid if updateTime is “never”.</li>
    </ul>
  </li>
</ul>

<div class="language-lua highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">updateTime</span><span class="p">:</span>
    <span class="err">\|</span> <span class="s2">"never"</span>
    <span class="err">\|</span> <span class="s2">"onTurn"</span>
    <span class="err">\|</span> <span class="s2">"onTribeTurnBegin"</span>
    <span class="err">\|</span> <span class="s2">"onTribeTurnEnd"</span>
    <span class="err">\|</span> <span class="s2">"custom"</span>
</code></pre></div></div>
<h3 id="definemodulegeneric">
  
  
    defineModuleGeneric <a href="#definemodulegeneric"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function tribeData.defineModuleGeneric(moduleName: string, dataName: string, updateTime?: "custom"|"never"|"onTribeTurnBegin"|"onTribeTurnEnd"|"onTurn", updateAll?: boolean, updateFunction?: fun(value: any, tribeID: number):any)
</code></pre></div></div>
<p>Defines a generic entry for tribe data, and can keep any item that is “state savable” (since it must be saved in the state table).  This version of defineGeneric allows you 
to add a module name to the generic name, which will prevent name collisions with
generic data from other modules and code written for a specific scenario.
An item is “state savable” if it is one of the following:
    - nil
    - a number
    - a string
    - a boolean
    - a table with keys that are numbers or strings and with values that are also state savable
“generic” data doesn’t have the same guards against misuse that the other tribeData types have, but it is more flexible.
The function <code class="language-plaintext highlighter-rouge">gen.isStateSavable(item)</code> may be useful to you.</p>
<ul>
  <li>moduleName = string
    <ul>
      <li>The name of the module using this data</li>
    </ul>
  </li>
  <li>dataName = string
    <ul>
      <li>The name of the data entry.</li>
    </ul>
  </li>
  <li>updateTime = “never”|“onTurn”|“onTribeTurnBegin”|“onTribeTurnEnd”|“custom”
    <ul>
      <li>updateTime defines when the updateFunction is executed.
        <ul>
          <li>“never” means no update</li>
          <li>“onTurn” means at the very beginning of the onTurn event (before all other code)</li>
          <li>“onTribeTurnBegin” means at the very start of the onTribeTurnBegin event for the owner (before all other code)</li>
          <li>“onTribeTurnEnd” means at the very end of the onTribeTurnEnd event for the owner (after all other code)</li>
          <li>if tribe has no owner, onTribeTurnBegin and onTribeTurnEnd updates happen
  during the onTurn update</li>
          <li>“custom” means the update must be programmed in manually using tribeData.update</li>
        </ul>
      </li>
      <li>Default is “never”.</li>
    </ul>
  </li>
  <li>updateAll = nil|boolean
    <ul>
      <li>If true, the update function is applied to all tribe, not just those with non-nil values for this generic data.</li>
      <li>Default is nil.</li>
    </ul>
  </li>
  <li>updateFunction = function(value,tribeID) –&gt; value
    <ul>
      <li>Takes the existing value for tribe’s generic data under dataName and the tribe’s ID number, and produces a new value for the generic data under dataName.</li>
      <li>Default is nil.  However, this is only valid if updateTime is “never”.</li>
    </ul>
  </li>
</ul>

<div class="language-lua highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">updateTime</span><span class="p">:</span>
    <span class="err">\|</span> <span class="s2">"never"</span>
    <span class="err">\|</span> <span class="s2">"onTurn"</span>
    <span class="err">\|</span> <span class="s2">"onTribeTurnBegin"</span>
    <span class="err">\|</span> <span class="s2">"onTribeTurnEnd"</span>
    <span class="err">\|</span> <span class="s2">"custom"</span>
</code></pre></div></div>
<h3 id="genericgetvalue">
  
  
    genericGetValue <a href="#genericgetvalue"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function tribeData.genericGetValue(tribe: tribeObject, keyName: string, moduleName?: string)
  -&gt; any
</code></pre></div></div>
<p>Returns the value stored by the tribe’s keyName, or the default value if the keyName is not set.</p>
<h3 id="genericsetvalue">
  
  
    genericSetValue <a href="#genericsetvalue"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function tribeData.genericSetValue(tribe: tribeObject, keyName: string, value: any, moduleName?: string)
  -&gt; any
</code></pre></div></div>
<p>Changes the value stored by the tribe’s keyName to value.
Returns the value that was just set.</p>
<h2 id="phrases">
  
  
    Phrases <a href="#phrases"><span class="self-link">&#128279</span></a>
  
  
</h2>
    
<h3 id="definephrase">
  
  
    definePhrase <a href="#definephrase"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function tribeData.definePhrase(phraseName: string, defaultValue?: string, resetTime?: "custom"|"never"|"onTribeTurnBegin"|"onTribeTurnEnd"|"onTurn")
</code></pre></div></div>
<p>Defines a phrase for tribe data, which keeps string values.</p>
<ul>
  <li>phraseName = string
    <ul>
      <li>The name of the phrase.</li>
    </ul>
  </li>
  <li>defaultValue = string
    <ul>
      <li>If the underlying stored value is nil, this is the value the phrase takes on.</li>
      <li>Default value is “”.</li>
    </ul>
  </li>
  <li>resetTime = “never”|“onTurn”|“onTribeTurnBegin”|“onTribeTurnEnd”|“custom”
    <ul>
      <li>Gives the time when the phrase’s stored value is reset to nil.</li>
      <li>“never” means never reset automatically.</li>
      <li>“onTurn” means at the very beginning of the onTurn event (before all other code).</li>
      <li>“onTribeTurnBegin” means at the very start of the onTribeTurnBegin event for the owner (before all other code).</li>
      <li>“onTribeTurnEnd” means at the very end of the onTribeTurnEnd event for the owner (after all other code).</li>
      <li>If tribe has no owner, onTribeTurnBegin and onTribeTurnEnd updates happen during the onTurn update.</li>
      <li>“custom” means the update must be programmed in manually using tribeData.update.</li>
      <li>Default value is “never”.</li>
    </ul>
  </li>
</ul>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">phraseName</code> — The name of the phrase.</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">defaultValue</code> — If the underlying stored value is nil, this is the value the phrase takes on.</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">resetTime</code> — Gives the time when the phrase’s stored value is reset to nil.</p>

<div class="language-lua highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">resetTime</span><span class="p">:</span>
    <span class="err">\|</span> <span class="s2">"never"</span>
    <span class="err">\|</span> <span class="s2">"onTurn"</span>
    <span class="err">\|</span> <span class="s2">"onTribeTurnBegin"</span>
    <span class="err">\|</span> <span class="s2">"onTribeTurnEnd"</span>
    <span class="err">\|</span> <span class="s2">"custom"</span>
</code></pre></div></div>
<h3 id="definemodulephrase">
  
  
    defineModulePhrase <a href="#definemodulephrase"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function tribeData.defineModulePhrase(moduleName: string, phraseName: string, defaultValue?: string, resetTime?: "custom"|"never"|"onTribeTurnBegin"|"onTribeTurnEnd"|"onTurn")
</code></pre></div></div>
<p>Defines a phrase for tribe data, which keeps string values.   This version of defineCounter allows you to add a module name to the phrase name, which
will prevent name collisions with phrases from other modules and code
written for a specific scenario.</p>
<ul>
  <li>moduleName = string
    <ul>
      <li>The name of the module.</li>
    </ul>
  </li>
  <li>phraseName = string
    <ul>
      <li>The name of the phrase.</li>
    </ul>
  </li>
  <li>defaultValue = string
    <ul>
      <li>If the underlying stored value is nil, this is the value the phrase takes on.</li>
      <li>Default value is “”.</li>
    </ul>
  </li>
  <li>resetTime = “never”|“onTurn”|“onTribeTurnBegin”|“onTribeTurnEnd”|“custom”
    <ul>
      <li>Gives the time when the phrase’s stored value is reset to nil.</li>
      <li>“never” means never reset automatically.</li>
      <li>“onTurn” means at the very beginning of the onTurn event (before all other code).</li>
      <li>“onTribeTurnBegin” means at the very start of the onTribeTurnBegin event for the owner (before all other code).</li>
      <li>“onTribeTurnEnd” means at the very end of the onTribeTurnEnd event for the owner (after all other code).</li>
      <li>If tribe has no owner, onTribeTurnBegin and onTribeTurnEnd updates happen during the onTurn update.</li>
      <li>“custom” means the update must be programmed in manually using tribeData.update.</li>
      <li>Default value is “never”.</li>
    </ul>
  </li>
</ul>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">moduleName</code> — The name of the module.</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">phraseName</code> — The name of the phrase.</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">defaultValue</code> — If the underlying stored value is nil, this is the value the phrase takes on.</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">resetTime</code> — Gives the time when the phrase’s stored value is reset to nil.</p>

<div class="language-lua highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">resetTime</span><span class="p">:</span>
    <span class="err">\|</span> <span class="s2">"never"</span>
    <span class="err">\|</span> <span class="s2">"onTurn"</span>
    <span class="err">\|</span> <span class="s2">"onTribeTurnBegin"</span>
    <span class="err">\|</span> <span class="s2">"onTribeTurnEnd"</span>
    <span class="err">\|</span> <span class="s2">"custom"</span>
</code></pre></div></div>
<h3 id="phrasegetvalue">
  
  
    phraseGetValue <a href="#phrasegetvalue"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function tribeData.phraseGetValue(tribe: tribeObject, phraseName: string, moduleName?: string)
  -&gt; string
</code></pre></div></div>
<p>Returns the value associated with the tribe’s phrase of phraseName.
If the associated value is nil, the default specified during the definition is returned.</p>
<h3 id="phrasesetvalue">
  
  
    phraseSetValue <a href="#phrasesetvalue"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function tribeData.phraseSetValue(tribe: tribeObject, phraseName: string, value: string, moduleName?: string)
</code></pre></div></div>
<p>Sets the value associated with tribe’s phraseName to value.</p>
<h3 id="phraseisnil">
  
  
    phraseIsNil <a href="#phraseisnil"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function tribeData.phraseIsNil(tribe: tribeObject, phraseName: string, moduleName?: string)
  -&gt; boolean
</code></pre></div></div>
<p>Returns true if the underlying value of tribe’s phraseName phrase is nil, and false otherwise.</p>
<h3 id="phrasereset">
  
  
    phraseReset <a href="#phrasereset"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function tribeData.phraseReset(tribe: tribeObject, phraseName: string, moduleName?: string)
</code></pre></div></div>
<p>Sets the value associated with the tribe’s phraseName to nil.
(meaning that it returns the default value set when it was defined)</p>
<h2 id="general-tools">
  
  
    General Tools <a href="#general-tools"><span class="self-link">&#128279</span></a>
  
  
</h2>
    
<h3 id="deletedata">
  
  
    deleteData <a href="#deletedata"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function tribeData.deleteData(tribe: tribeObject)
</code></pre></div></div>
<p>Deletes the data associated with the tribe.</p>
<h3 id="transferdata">
  
  
    transferData <a href="#transferdata"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function tribeData.transferData(oldtribe: tribeObject, newtribe: tribeObject)
</code></pre></div></div>
<p>Associates the tribeData from the old tribe to the new one (deleting the association with the old one).
newtribe can’t be nil.</p>
<h3 id="transferordeletedata">
  
  
    transferOrDeleteData <a href="#transferordeletedata"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function tribeData.transferOrDeleteData(oldTribe: tribeObject, newTribe: tribeObject|nil)
</code></pre></div></div>
<p>If newTribe is not nil, transfers the data from the old tribe to the new one (deleting the data for the old one).  If newTribe is nil, the data is deleted for oldTribe.</p>
<h3 id="update">
  
  
    update <a href="#update"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function tribeData.update(tribe?: number, time?: "custom"|"onTribeTurnBegin"|"onTribeTurnEnd"|"onTurn", tribe: number, key?: string, moduleName?: string)
</code></pre></div></div>
<p>Updates all of tribe’s data keys that have an updateTime of time, unless
key is specified, in which case, update that key only.</p>
<ul>
  <li>time = “onTurn”|“onTribeTurnBegin”|“onTribeTurnEnd”|“custom”
    <ul>
      <li>Update the tribe’s data keys that have this updateTime.</li>
      <li>Default is “custom”.</li>
    </ul>
  </li>
  <li>tribe = nil|tribeObject
    <ul>
      <li>The tribe to consider the active tribe for onTribeTurnBegin and onTribeTurnEnd updates.</li>
      <li>Default is nil.</li>
    </ul>
  </li>
  <li>key = nil|string
    <ul>
      <li>The key to update.</li>
      <li>Default is nil, in which case all keys with the updateTime specified by time are updated.</li>
    </ul>
  </li>
  <li>moduleName = nil|string
    <ul>
      <li>The name of the module using this name, if applicable.</li>
      <li>Default is nil.</li>
    </ul>
  </li>
</ul><hr />

<div class="language-lua highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">time</span><span class="p">:</span>
    <span class="err">\|</span> <span class="s2">"onTurn"</span>
    <span class="err">\|</span> <span class="s2">"onTribeTurnBegin"</span>
    <span class="err">\|</span> <span class="s2">"onTribeTurnEnd"</span>
    <span class="err">\|</span> <span class="s2">"custom"</span>
</code></pre></div></div>
<h3 id="generalupdate">
  
  
    generalUpdate <a href="#generalupdate"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function tribeData.generalUpdate(time?: "custom"|"onTribeTurnBegin"|"onTribeTurnEnd"|"onTurn", tribe?: tribeObject)
</code></pre></div></div>
<p>Updates data keys that have an updateTime of <code class="language-plaintext highlighter-rouge">time</code> for all tribes.</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">time</code> — Default is “custom”.</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">tribe</code> — The tribe to consider the active tribe for onTribeTurnBegin and onTribeTurnEnd updates. Default is nil.</p>

<div class="language-lua highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">time</span><span class="p">:</span>
    <span class="err">\|</span> <span class="s2">"onTurn"</span>
    <span class="err">\|</span> <span class="s2">"onTribeTurnBegin"</span>
    <span class="err">\|</span> <span class="s2">"onTribeTurnEnd"</span>
    <span class="err">\|</span> <span class="s2">"custom"</span>
</code></pre></div></div>
<h3 id="validate">
  
  
    validate <a href="#validate"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function tribeData.validate(tribe: tribeObject)
</code></pre></div></div>
<p>Checks that the item is still the same tribe it was before (i.e. that the tribe hasn’t been deleted and the ID reused).  If it has, eliminate all data for that tribe.</p>
<h3 id="changevalidationinfo">
  
  
    changeValidationInfo <a href="#changevalidationinfo"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function tribeData.changeValidationInfo(tribe: tribeObject)
</code></pre></div></div>
<p>Replaces existing values of the sameItemCheck with new ones.</p>

  </div>
</article>
<!--
    <h1 id="tribedata">
  
  
    <a href="#tribedata">&#128279</a> tribeData
  
  
</h1>
    

<p>This module is used to associate data with individual tribes.  Functions are used to
get the data and to change it, so you don’t have to interact and maintain the underlying
tables directly.  These functions also check the data that you input, so that errors are
caught quickly rather than being saved in tables only to surface later.</p>

<p>This module provides “flags”, which store boolean values, “counters”, which store number
values, and “phrases”, which store string values.  There is also some basic “generic”
data storage, which can store “state savable” data, and so is more flexible, but also has
fewer error checks and built in features.</p>

<p>These flags, counters, and phrases have names, which are strings.  To access a piece of data,
you will need to have the tribe it is associated with, as well as the name, and whether the
data is a flag, counter, or phrase.  Then, you can use one of the provided functions
to interact with that data.</p>

<p>By default, all data is nil.  However, flags, counters, and phrases will not return nil
when you get their values (generic, however, will).  Instead, when you define a
data entry, you will define a default value which is to be returned if the data is nil.
Functions are provided to check if the underlying value is actually nil, and to reset
the data to nil if you need to.  A data value stops being nil when you assign it an
actual value.</p>

<p>You can set data to update periodically, during onTurn, onTribeTurnBegin, or onTribeTurnEnd
events.  Flags and Phrases can be reset to nil automatically, while counters and generic data
can be assigned update parameters or functions.  Usually, updates are only performed on
data which is already non-nil, but you can choose to update all if that is needed for your
functionality.  The update time can also be set to ‘custom’, which will only update the
data on specific function call.</p>
<h2 id="flags">
  
  
    <a href="#flags">&#128279</a> Flags
  
  
</h2>
    
<h3 id="defineflag">
  
  
    <a href="#defineflag">&#128279</a> defineFlag
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function tribeData.defineFlag(flagName: string, defaultValue?: boolean, resetTime?: "custom"|"never"|"onTribeTurnBegin"|"onTribeTurnEnd"|"onTurn")
</code></pre></div></div>
<p>Defines a flag for tribe data, which keeps boolean values</p>
<ul>
  <li>flagName = string
    <ul>
      <li>the name of the flag</li>
    </ul>
  </li>
  <li>defaultValue = boolean | nil
    <ul>
      <li>If the underlying stored value is nil, this is the value the flag takes on.</li>
      <li>Defaults to false.</li>
    </ul>
  </li>
  <li>resetTime = “never”|“onTurn”|“onTribeTurnBegin”|“onTribeTurnEnd”|“custom”|nil
    <ul>
      <li>Gives the time when the flag’s stored value is reset to nil.</li>
      <li>Defaults to “never”.</li>
      <li>“never” means never reset automatically</li>
      <li>“onTurn” means at the very beginning of the onTurn event (before all other code)</li>
      <li>“onTribeTurnBegin” means at the very start of the onTribeTurnBegin event for the owner (before all other code)</li>
      <li>“onTribeTurnEnd” means at the very end of the onTribeTurnEnd event for the owner (after all other code)</li>
      <li>if tribe has no owner, onTribeTurnBegin and onTribeTurnEnd updates happen</li>
      <li>during the onTurn update</li>
      <li>“custom” means the update must be programmed in manually using tribeData.update</li>
    </ul>
  </li>
</ul>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">flagName</code> — the name of the flag</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">defaultValue</code> — If the underlying stored value is nil, this is the value the flag takes on. Defaults to false.</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">resetTime</code> — Gives the time when the flag’s stored value is reset to nil. Defaults to “never”.</p>

<div class="language-lua highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">resetTime</span><span class="p">:</span>
    <span class="err">\|</span> <span class="s2">"never"</span>
    <span class="err">\|</span> <span class="s2">"onTurn"</span>
    <span class="err">\|</span> <span class="s2">"onTribeTurnBegin"</span>
    <span class="err">\|</span> <span class="s2">"onTribeTurnEnd"</span>
    <span class="err">\|</span> <span class="s2">"custom"</span>
</code></pre></div></div>
<h3 id="definemoduleflag">
  
  
    <a href="#definemoduleflag">&#128279</a> defineModuleFlag
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function tribeData.defineModuleFlag(moduleName: string, flagName: string, defaultValue?: boolean, resetTime?: "custom"|"never"|"onTribeTurnBegin"|"onTribeTurnEnd"|"onTurn")
</code></pre></div></div>
<p>Defines a flag for tribe data, which keeps boolean values.  This version of defineFlag allows you to add a moduleName to the flag name, which will prevent name collision between modules and code written for a specific scenario.,
for a specific scenario.</p>
<ul>
  <li>moduleName = string
    <ul>
      <li>the name of the module</li>
    </ul>
  </li>
  <li>flagName = string
    <ul>
      <li>the name of the flag</li>
    </ul>
  </li>
  <li>defaultValue = boolean | nil
    <ul>
      <li>If the underlying stored value is nil, this is the value the flag takes on.</li>
      <li>Defaults to false.</li>
    </ul>
  </li>
  <li>resetTime = “never”|“onTurn”|“onTribeTurnBegin”|“onTribeTurnEnd”|“custom”|nil
    <ul>
      <li>Gives the time when the flag’s stored value is reset to nil.</li>
      <li>Defaults to “never”.</li>
      <li>“never” means never reset automatically</li>
      <li>“onTurn” means at the very beginning of the onTurn event (before all other code)</li>
      <li>“onTribeTurnBegin” means at the very start of the onTribeTurnBegin event for the owner (before all other code)</li>
      <li>“onTribeTurnEnd” means at the very end of the onTribeTurnEnd event for the owner (after all other code)</li>
      <li>if tribe has no owner, onTribeTurnBegin and onTribeTurnEnd updates happen</li>
      <li>during the onTurn update</li>
      <li>“custom” means the update must be programmed in manually using tribeData.update</li>
    </ul>
  </li>
</ul>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">moduleName</code> — the name of the module</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">flagName</code> — the name of the flag</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">defaultValue</code> — If the underlying stored value is nil, this is the value the flag takes on. Defaults to false.</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">resetTime</code> — Gives the time when the flag’s stored value is reset to nil. Defaults to “never”.</p>

<div class="language-lua highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">resetTime</span><span class="p">:</span>
    <span class="err">\|</span> <span class="s2">"never"</span>
    <span class="err">\|</span> <span class="s2">"onTurn"</span>
    <span class="err">\|</span> <span class="s2">"onTribeTurnBegin"</span>
    <span class="err">\|</span> <span class="s2">"onTribeTurnEnd"</span>
    <span class="err">\|</span> <span class="s2">"custom"</span>
</code></pre></div></div>
<h3 id="flaggetvalue">
  
  
    <a href="#flaggetvalue">&#128279</a> flagGetValue
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function tribeData.flagGetValue(tribe: tribeObject, flagName: string, moduleName?: string)
  -&gt; The: boolean
</code></pre></div></div>
<p>Returns the value associated with the <code class="language-plaintext highlighter-rouge">tribe</code>’s flag of <code class="language-plaintext highlighter-rouge">flagName</code>.
If the value is nil, the default specified during the definition is returned.</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">flagName</code> — The name of the flag</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">moduleName</code> — The name of the module (if applicable)</p><hr />

<p>@<em>return</em> <code class="language-plaintext highlighter-rouge">The</code> — value associated with the <code class="language-plaintext highlighter-rouge">tribe</code>’s flag of <code class="language-plaintext highlighter-rouge">flagName</code>.</p>
<h3 id="flagsettrue">
  
  
    <a href="#flagsettrue">&#128279</a> flagSetTrue
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function tribeData.flagSetTrue(tribe: tribeObject, flagName: string, moduleName?: string)
</code></pre></div></div>
<p>Sets the value associated with the tribe’s flag of flagName to <code class="language-plaintext highlighter-rouge">true</code>.</p>
<h3 id="flagsetfalse">
  
  
    <a href="#flagsetfalse">&#128279</a> flagSetFalse
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function tribeData.flagSetFalse(tribe: tribeObject, flagName: string, moduleName?: string)
</code></pre></div></div>
<p>Sets the value associated with the tribe’s flag of flagName to <code class="language-plaintext highlighter-rouge">false</code></p>
<h3 id="flagisnil">
  
  
    <a href="#flagisnil">&#128279</a> flagIsNil
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function tribeData.flagIsNil(tribe: tribeObject, flagName: string, moduleName?: string)
  -&gt; boolean
</code></pre></div></div>
<p>Returns true if the underlying value of tribe’s flagName flag is nil
(including if all of the flag’s keys are nil)
and false otherwise.</p>
<h3 id="flagreset">
  
  
    <a href="#flagreset">&#128279</a> flagReset
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function tribeData.flagReset(tribe: tribeObject, flagName: string, moduleName?: string)
</code></pre></div></div>
<p>Sets the value associated with the tribe’s flag of flagName to nil
(meaning that it returns the default value set when it was defined).</p>
<h2 id="counters">
  
  
    <a href="#counters">&#128279</a> Counters
  
  
</h2>
    
<h3 id="definecounter">
  
  
    <a href="#definecounter">&#128279</a> defineCounter
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function tribeData.defineCounter(counterName: string, defaultValue?: number, minValue?: number, maxValue?: number, update?: "function"|"functionAll"|"increment"|"incrementAll"|"none"...(+3), updateTime?: "custom"|"never"|"onTribeTurnBegin"|"onTribeTurnEnd"|"onTurn", updateParameter?: number|function, nonInteger?: boolean)
</code></pre></div></div>
<p>Define a counter for tribe data, which keeps numerical values</p>
<ul>
  <li>counterName = string
    <ul>
      <li>the name of the counter</li>
    </ul>
  </li>
  <li>defaultValue = number
    <ul>
      <li>If the underlying stored value is nil, this is the value the counter takes on.</li>
      <li>Default is 0.</li>
    </ul>
  </li>
  <li>minValue = number
    <ul>
      <li>This is the smallest number the counter can be.  If anything would set the counter below this number,
  the counter is set to this number instead.</li>
      <li>Default is <code class="language-plaintext highlighter-rouge">-math.huge</code>.</li>
    </ul>
  </li>
  <li>maxValue = number
    <ul>
      <li>This is the largest number the counter can be.  If anything would set the counter above this number,
  the counter is set to this number instead</li>
      <li>Default is <code class="language-plaintext highlighter-rouge">math.huge</code>.</li>
    </ul>
  </li>
  <li>update = “none”|“increment”|“set”|“reset”|“function”| “incrementAll”|“setAll”|“functionAll”
    <ul>
      <li>This is the kind of update the counter receives each turn
        <ul>
          <li>“none” means no update</li>
          <li>“increment” means that the updateParameter is added to the current value of the counter (subject to maxValue and minValue) ,</li>
          <li>but only if the counter isn’t currently nil</li>
          <li>“incrementAll” same as increment, but is also applied to tribes with nil as the underlying value of the counter</li>
          <li>“set” means the counter is set to the updateParameter, but only applies if the counter isn’t currently nil</li>
          <li>“setAll” same as “set”, but is also applied to tribes with nil as the underlying value of the counter</li>
          <li>“reset” sets the underlying counter value to nil</li>
          <li>“function” sets the underlying counter value to the result of updateParameter(formerUnderlyingValue,tribeID) (subject to maxValue and minValue), only for underlying values which are not nil</li>
          <li>“functionAll” sets the underlying counter value to the result of updateParameter(formerUnderlyingValue,tribeID) (subject to maxValue and minValue), even for nil underlying values</li>
        </ul>
      </li>
      <li>Default is “none”.</li>
    </ul>
  </li>
  <li>updateTime = “never”|“onTurn”|“onTribeTurnBegin”|“onTribeTurnEnd”|“custom”
    <ul>
      <li>Gives the time when the counter update happens
        <ul>
          <li>“never” means no update</li>
          <li>“onTurn” means at the very beginning of the onTurn event (before all other code)</li>
          <li>“onTribeTurnBegin” means at the very start of the onTribeTurnBegin event for the owner (before all other code)</li>
          <li>“onTribeTurnEnd” means at the very end of the onTribeTurnEnd event for the owner (after all other code)</li>
          <li>if tribe has no owner, onTribeTurnBegin and onTribeTurnEnd updates happen
  during the onTurn update</li>
          <li>“custom” means the update must be programmed in manually using tribeData.update</li>
        </ul>
      </li>
      <li>Default is “never”.</li>
    </ul>
  </li>
  <li>updateParameter = number|nil|function
    <ul>
      <li>if update is “increment”,”incrementAll”, “set”, “setAll” then this must be a number</li>
      <li>if update is “none” or “reset”, this is ignored and can be nil</li>
      <li>if update is “function”, this is a function(numberOrNil,tribeID) -&gt; numberOrNil</li>
      <li>Default is nil.</li>
    </ul>
  </li>
  <li>nonInteger = bool|nil
    <ul>
      <li>if true, the counter can take on non-integer values</li>
      <li>if false, the value is rounded using math.floor(initialValue+0.5)</li>
      <li>if nil, an error is thrown when the counter is set to a non-integer value</li>
      <li>Default is nil.</li>
    </ul>
  </li>
</ul>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">counterName</code> — the name of the counter</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">defaultValue</code> — If the underlying stored value is nil, this is the value the counter takes on. Default is 0.</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">minValue</code> — This is the smallest number the counter can be.  If anything would set the counter below this number, the counter is set to this number instead. Default is <code class="language-plaintext highlighter-rouge">-math.huge</code>.</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">maxValue</code> — This is the largest number the counter can be.  If anything would set the counter above this number, the counter is set to this number instead. Default is <code class="language-plaintext highlighter-rouge">math.huge</code>.</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">update</code> — This is the kind of update the counter receives each turn. Default is “none”.</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">updateTime</code> — Gives the time when the counter update happens. Default is “never”.</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">updateParameter</code> — if update is “increment”,”incrementAll”, “set”, “setAll” then this must be a number. if update is “none” or “reset”, this is ignored and can be nil. if update is “function”, this is a function(numberOrNil,tribeID) -&gt; numberOrNil. Default is nil.</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">nonInteger</code> — if true, the counter can take on non-integer values. if false, the value is rounded using math.floor(initialValue+0.5). if nil, an error is thrown when the counter is set to a non-integer value. Default is nil.</p>

<div class="language-lua highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">update</span><span class="p">:</span>
    <span class="err">\|</span> <span class="s2">"none"</span>
    <span class="err">\|</span> <span class="s2">"increment"</span>
    <span class="err">\|</span> <span class="s2">"set"</span>
    <span class="err">\|</span> <span class="s2">"reset"</span>
    <span class="err">\|</span> <span class="s2">"function"</span>
    <span class="err">\|</span> <span class="s2">"incrementAll"</span>
    <span class="err">\|</span> <span class="s2">"setAll"</span>
    <span class="err">\|</span> <span class="s2">"functionAll"</span>

<span class="n">updateTime</span><span class="p">:</span>
    <span class="err">\|</span> <span class="s2">"never"</span>
    <span class="err">\|</span> <span class="s2">"onTurn"</span>
    <span class="err">\|</span> <span class="s2">"onTribeTurnBegin"</span>
    <span class="err">\|</span> <span class="s2">"onTribeTurnEnd"</span>
    <span class="err">\|</span> <span class="s2">"custom"</span>
</code></pre></div></div>
<h3 id="definemodulecounter">
  
  
    <a href="#definemodulecounter">&#128279</a> defineModuleCounter
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function tribeData.defineModuleCounter(moduleName: string, counterName: string, defaultValue?: number, minValue?: number, maxValue?: number, update?: "function"|"functionAll"|"increment"|"incrementAll"|"none"...(+3), updateTime?: "custom"|"never"|"onTribeTurnBegin"|"onTribeTurnEnd"|"onTurn", updateParameter?: number|function, nonInteger?: boolean)
</code></pre></div></div>
<p>Defines a counter for tribe data, which keeps numerical values.  This version of defineCounter allows you to add a moduleName to the counter,
which will prevent name collisions with counters written for other modules 
and code written for a specific scenario.</p>
<ul>
  <li>moduleName = string
    <ul>
      <li>the name of the module</li>
    </ul>
  </li>
  <li>counterName = string
    <ul>
      <li>the name of the counter</li>
    </ul>
  </li>
  <li>defaultValue = number
    <ul>
      <li>If the underlying stored value is nil, this is the value the counter takes on.</li>
      <li>Default is 0.</li>
    </ul>
  </li>
  <li>minValue = number
    <ul>
      <li>This is the smallest number the counter can be.  If anything would set the counter below this number,
  the counter is set to this number instead.</li>
      <li>Default is <code class="language-plaintext highlighter-rouge">-math.huge</code>.</li>
    </ul>
  </li>
  <li>maxValue = number
    <ul>
      <li>This is the largest number the counter can be.  If anything would set the counter above this number,
  the counter is set to this number instead</li>
      <li>Default is <code class="language-plaintext highlighter-rouge">math.huge</code>.</li>
    </ul>
  </li>
  <li>update = “none”|“increment”|“set”|“reset”|“function”| “incrementAll”|“setAll”|“functionAll”
    <ul>
      <li>This is the kind of update the counter receives each turn
        <ul>
          <li>“none” means no update</li>
          <li>“increment” means that the updateParameter is added to the current value of the counter (subject to maxValue and minValue) ,</li>
          <li>but only if the counter isn’t currently nil</li>
          <li>“incrementAll” same as increment, but is also applied to tribes with nil as the underlying value of the counter</li>
          <li>“set” means the counter is set to the updateParameter, but only applies if the counter isn’t currently nil</li>
          <li>“setAll” same as “set”, but is also applied to tribes with nil as the underlying value of the counter</li>
          <li>“reset” sets the underlying counter value to nil</li>
          <li>“function” sets the underlying counter value to the result of updateParameter(formerUnderlyingValue,tribeID) (subject to maxValue and minValue), only for underlying values which are not nil</li>
          <li>“functionAll” sets the underlying counter value to the result of updateParameter(formerUnderlyingValue,tribeID) (subject to maxValue and minValue), even for nil underlying values</li>
        </ul>
      </li>
      <li>Default is “none”.</li>
    </ul>
  </li>
  <li>updateTime = “never”|“onTurn”|“onTribeTurnBegin”|“onTribeTurnEnd”|“custom”
    <ul>
      <li>Gives the time when the counter update happens
        <ul>
          <li>“never” means no update</li>
          <li>“onTurn” means at the very beginning of the onTurn event (before all other code)</li>
          <li>“onTribeTurnBegin” means at the very start of the onTribeTurnBegin event for the owner (before all other code)</li>
          <li>“onTribeTurnEnd” means at the very end of the onTribeTurnEnd event for the owner (after all other code)</li>
          <li>if tribe has no owner, onTribeTurnBegin and onTribeTurnEnd updates happen
  during the onTurn update</li>
          <li>“custom” means the update must be programmed in manually using tribeData.update</li>
        </ul>
      </li>
      <li>Default is “never”.</li>
    </ul>
  </li>
  <li>updateParameter = number|nil|function
    <ul>
      <li>if update is “increment”,”incrementAll”, “set”, “setAll” then this must be a number</li>
      <li>if update is “none” or “reset”, this is ignored and can be nil</li>
      <li>if update is “function”, this is a function(numberOrNil,tribeID) -&gt; numberOrNil</li>
      <li>Default is nil.</li>
    </ul>
  </li>
  <li>nonInteger = boolean|nil
    <ul>
      <li>if true, the counter can take on non-integer values</li>
      <li>if false, the value is rounded using math.floor(initialValue+0.5)</li>
      <li>if nil, an error is thrown when the counter is set to a non-integer value</li>
      <li>Default is nil.</li>
    </ul>
  </li>
</ul>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">moduleName</code> — the name of the module</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">counterName</code> — the name of the counter</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">defaultValue</code> — If the underlying stored value is nil, this is the value the counter takes on. Default is 0.</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">minValue</code> — This is the smallest number the counter can be.  If anything would set the counter below this number, the counter is set to this number instead. Default is <code class="language-plaintext highlighter-rouge">-math.huge</code>.</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">maxValue</code> — This is the largest number the counter can be.  If anything would set the counter above this number, the counter is set to this number instead. Default is <code class="language-plaintext highlighter-rouge">math.huge</code>.</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">update</code> — This is the kind of update the counter receives each turn. Default is “none”.</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">updateTime</code> — Gives the time when the counter update happens. Default is “never”.</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">updateParameter</code> — if update is “increment”,”incrementAll”, “set”, “setAll” then this must be a number. if update is “none” or “reset”, this is ignored and can be nil. if update is “function”, this is a function(numberOrNil,tribeID) -&gt; numberOrNil. Default is nil.</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">nonInteger</code> — if true, the counter can take on non-integer values. if false, the value is rounded using math.floor(initialValue+0.5). if nil, an error is thrown when the counter is set to a non-integer value. Default is nil.</p>

<div class="language-lua highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">update</span><span class="p">:</span>
    <span class="err">\|</span> <span class="s2">"none"</span>
    <span class="err">\|</span> <span class="s2">"increment"</span>
    <span class="err">\|</span> <span class="s2">"set"</span>
    <span class="err">\|</span> <span class="s2">"reset"</span>
    <span class="err">\|</span> <span class="s2">"function"</span>
    <span class="err">\|</span> <span class="s2">"incrementAll"</span>
    <span class="err">\|</span> <span class="s2">"setAll"</span>
    <span class="err">\|</span> <span class="s2">"functionAll"</span>

<span class="n">updateTime</span><span class="p">:</span>
    <span class="err">\|</span> <span class="s2">"never"</span>
    <span class="err">\|</span> <span class="s2">"onTurn"</span>
    <span class="err">\|</span> <span class="s2">"onTribeTurnBegin"</span>
    <span class="err">\|</span> <span class="s2">"onTribeTurnEnd"</span>
    <span class="err">\|</span> <span class="s2">"custom"</span>
</code></pre></div></div>
<h3 id="countergetvalue">
  
  
    <a href="#countergetvalue">&#128279</a> counterGetValue
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function tribeData.counterGetValue(tribe: tribeObject, counterName: string, moduleName?: string)
  -&gt; number
</code></pre></div></div>
<p>Returns the value associated with the tribe’s counter of counterName.
If the value is nil, the default specified during the definition is returned.</p>
<h3 id="countersetvalue">
  
  
    <a href="#countersetvalue">&#128279</a> counterSetValue
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function tribeData.counterSetValue(tribe: tribeObject, counterName: string, value: number, moduleName?: string)
  -&gt; number
</code></pre></div></div>
<p>Sets the value associated with the tribe’s counter of counterName to value.
If this value is outside the counter’s defined maxValue and minValue,
those values are then applied.
Returns the value the counter was set to.</p>
<h3 id="counterisnil">
  
  
    <a href="#counterisnil">&#128279</a> counterIsNil
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function tribeData.counterIsNil(tribe: tribeObject, counterName: string, moduleName?: string)
  -&gt; boolean
</code></pre></div></div>
<p>Returns true if the underlying value of tribe’s counterName counter is nil
 and false otherwise.</p>
<h3 id="counterreset">
  
  
    <a href="#counterreset">&#128279</a> counterReset
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function tribeData.counterReset(tribe: tribeObject, counterName: string, moduleName?: string)
  -&gt; void
</code></pre></div></div>
<p>Sets the value associated with the tribe’s counterName to nil
(meaning that it returns the default value set when it was defined).</p>
<h3 id="counteradd">
  
  
    <a href="#counteradd">&#128279</a> counterAdd
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function tribeData.counterAdd(tribe: tribeObject, counterName: string, increment: number, minValue?: number, maxValue?: number, moduleName?: string)
  -&gt; number
</code></pre></div></div>
<p>Adds the increment to the tribe’s counterName current value, but substituting minValue or maxValue
if the result is out of the range.  Then, the minimum and maximum values specified
when the counter was defined are applied (i.e. the minValue and maxValue here do not
override the defined min and max values).
Returns the value the counter was set to.</p>
<h3 id="countersubtract">
  
  
    <a href="#countersubtract">&#128279</a> counterSubtract
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function tribeData.counterSubtract(tribe: tribeObject, counterName: string, increment: number, minValue?: number, maxValue?: number, moduleName?: string)
  -&gt; number
</code></pre></div></div>
<p>Subtracts the increment to the tribe’s current value, but substituting minValue or maxValue
if the result is out of the range.  Then, the minimum and maximum values specified
when the counter was defined are applied (i.e. the minValue and maxValue here do not
override the defined min and max values).
Returns the value the counter was set to.</p>
<h3 id="counterisatleast">
  
  
    <a href="#counterisatleast">&#128279</a> counterIsAtLeast
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function tribeData.counterIsAtLeast(tribe: tribeObject, counterName: string, threshold: number, moduleName?: string)
  -&gt; boolean
</code></pre></div></div>
<p>Returns true if the tribe’s counterName is at least the threshold
and false otherwise.</p>
<h3 id="counterisatmost">
  
  
    <a href="#counterisatmost">&#128279</a> counterIsAtMost
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function tribeData.counterIsAtMost(tribe: tribeObject, counterName: string, threshold: number, moduleName?: string)
  -&gt; boolean
</code></pre></div></div>
<p>Returns true if the tribe’s counterName is at most the threshold
and false otherwise.</p>
<h3 id="countersetwithin">
  
  
    <a href="#countersetwithin">&#128279</a> counterSetWithin
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function tribeData.counterSetWithin(tribe: tribeObject, counterName: string, minValue?: number, maxValue?: number, moduleName?: string)
  -&gt; number
</code></pre></div></div>
<p>Sets the counter’s current value within the minValue and maxValue specified
(This does not change the overall max and min set when defining the counter).
Returns the value the counter was set to.</p>
<h2 id="generic-data">
  
  
    <a href="#generic-data">&#128279</a> Generic Data
  
  
</h2>
    
<h3 id="definegeneric">
  
  
    <a href="#definegeneric">&#128279</a> defineGeneric
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function tribeData.defineGeneric(dataName: string, updateTime?: "custom"|"never"|"onTribeTurnBegin"|"onTribeTurnEnd"|"onTurn", updateAll?: boolean, updateFunction?: fun(value: any, tribeID: number):any)
</code></pre></div></div>
<p>Defines a generic entry for tribe data, and can keep any item that is “state savable” (since it must be saved in the state table).
An item is “state savable” if it is one of the following:
    - nil
    - a number
    - a string
    - a boolean
    - a table with keys that are numbers or strings and with values that are also state savable
“generic” data doesn’t have the same guards against misuse that the other tribeData types have, but it is more flexible.
The function <code class="language-plaintext highlighter-rouge">gen.isStateSavable(item)</code> may be useful to you.</p>
<ul>
  <li>dataName = string
    <ul>
      <li>The name of the data entry.</li>
    </ul>
  </li>
  <li>updateTime = “never”|“onTurn”|“onTribeTurnBegin”|“onTribeTurnEnd”|“custom”
    <ul>
      <li>updateTime defines when the updateFunction is executed.
        <ul>
          <li>“never” means no update</li>
          <li>“onTurn” means at the very beginning of the onTurn event (before all other code)</li>
          <li>“onTribeTurnBegin” means at the very start of the onTribeTurnBegin event for the owner (before all other code)</li>
          <li>“onTribeTurnEnd” means at the very end of the onTribeTurnEnd event for the owner (after all other code)</li>
          <li>if tribe has no owner, onTribeTurnBegin and onTribeTurnEnd updates happen
  during the onTurn update</li>
          <li>“custom” means the update must be programmed in manually using tribeData.update</li>
        </ul>
      </li>
      <li>Default is “never”.</li>
    </ul>
  </li>
  <li>updateAll = nil|boolean
    <ul>
      <li>If true, the update function is applied to all tribe, not just those with non-nil values for this generic data.</li>
      <li>Default is nil.</li>
    </ul>
  </li>
  <li>updateFunction = function(value,tribeID) –&gt; value
    <ul>
      <li>Takes the existing value for tribe’s generic data under dataName and the tribe’s ID number, and produces a new value for the generic data under dataName.</li>
      <li>Default is nil.  However, this is only valid if updateTime is “never”.</li>
    </ul>
  </li>
</ul>

<div class="language-lua highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">updateTime</span><span class="p">:</span>
    <span class="err">\|</span> <span class="s2">"never"</span>
    <span class="err">\|</span> <span class="s2">"onTurn"</span>
    <span class="err">\|</span> <span class="s2">"onTribeTurnBegin"</span>
    <span class="err">\|</span> <span class="s2">"onTribeTurnEnd"</span>
    <span class="err">\|</span> <span class="s2">"custom"</span>
</code></pre></div></div>
<h3 id="definemodulegeneric">
  
  
    <a href="#definemodulegeneric">&#128279</a> defineModuleGeneric
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function tribeData.defineModuleGeneric(moduleName: string, dataName: string, updateTime?: "custom"|"never"|"onTribeTurnBegin"|"onTribeTurnEnd"|"onTurn", updateAll?: boolean, updateFunction?: fun(value: any, tribeID: number):any)
</code></pre></div></div>
<p>Defines a generic entry for tribe data, and can keep any item that is “state savable” (since it must be saved in the state table).  This version of defineGeneric allows you 
to add a module name to the generic name, which will prevent name collisions with
generic data from other modules and code written for a specific scenario.
An item is “state savable” if it is one of the following:
    - nil
    - a number
    - a string
    - a boolean
    - a table with keys that are numbers or strings and with values that are also state savable
“generic” data doesn’t have the same guards against misuse that the other tribeData types have, but it is more flexible.
The function <code class="language-plaintext highlighter-rouge">gen.isStateSavable(item)</code> may be useful to you.</p>
<ul>
  <li>moduleName = string
    <ul>
      <li>The name of the module using this data</li>
    </ul>
  </li>
  <li>dataName = string
    <ul>
      <li>The name of the data entry.</li>
    </ul>
  </li>
  <li>updateTime = “never”|“onTurn”|“onTribeTurnBegin”|“onTribeTurnEnd”|“custom”
    <ul>
      <li>updateTime defines when the updateFunction is executed.
        <ul>
          <li>“never” means no update</li>
          <li>“onTurn” means at the very beginning of the onTurn event (before all other code)</li>
          <li>“onTribeTurnBegin” means at the very start of the onTribeTurnBegin event for the owner (before all other code)</li>
          <li>“onTribeTurnEnd” means at the very end of the onTribeTurnEnd event for the owner (after all other code)</li>
          <li>if tribe has no owner, onTribeTurnBegin and onTribeTurnEnd updates happen
  during the onTurn update</li>
          <li>“custom” means the update must be programmed in manually using tribeData.update</li>
        </ul>
      </li>
      <li>Default is “never”.</li>
    </ul>
  </li>
  <li>updateAll = nil|boolean
    <ul>
      <li>If true, the update function is applied to all tribe, not just those with non-nil values for this generic data.</li>
      <li>Default is nil.</li>
    </ul>
  </li>
  <li>updateFunction = function(value,tribeID) –&gt; value
    <ul>
      <li>Takes the existing value for tribe’s generic data under dataName and the tribe’s ID number, and produces a new value for the generic data under dataName.</li>
      <li>Default is nil.  However, this is only valid if updateTime is “never”.</li>
    </ul>
  </li>
</ul>

<div class="language-lua highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">updateTime</span><span class="p">:</span>
    <span class="err">\|</span> <span class="s2">"never"</span>
    <span class="err">\|</span> <span class="s2">"onTurn"</span>
    <span class="err">\|</span> <span class="s2">"onTribeTurnBegin"</span>
    <span class="err">\|</span> <span class="s2">"onTribeTurnEnd"</span>
    <span class="err">\|</span> <span class="s2">"custom"</span>
</code></pre></div></div>
<h3 id="genericgetvalue">
  
  
    <a href="#genericgetvalue">&#128279</a> genericGetValue
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function tribeData.genericGetValue(tribe: tribeObject, keyName: string, moduleName?: string)
  -&gt; any
</code></pre></div></div>
<p>Returns the value stored by the tribe’s keyName, or the default value if the keyName is not set.</p>
<h3 id="genericsetvalue">
  
  
    <a href="#genericsetvalue">&#128279</a> genericSetValue
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function tribeData.genericSetValue(tribe: tribeObject, keyName: string, value: any, moduleName?: string)
  -&gt; any
</code></pre></div></div>
<p>Changes the value stored by the tribe’s keyName to value.
Returns the value that was just set.</p>
<h2 id="phrases">
  
  
    <a href="#phrases">&#128279</a> Phrases
  
  
</h2>
    
<h3 id="definephrase">
  
  
    <a href="#definephrase">&#128279</a> definePhrase
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function tribeData.definePhrase(phraseName: string, defaultValue?: string, resetTime?: "custom"|"never"|"onTribeTurnBegin"|"onTribeTurnEnd"|"onTurn")
</code></pre></div></div>
<p>Defines a phrase for tribe data, which keeps string values.</p>
<ul>
  <li>phraseName = string
    <ul>
      <li>The name of the phrase.</li>
    </ul>
  </li>
  <li>defaultValue = string
    <ul>
      <li>If the underlying stored value is nil, this is the value the phrase takes on.</li>
      <li>Default value is “”.</li>
    </ul>
  </li>
  <li>resetTime = “never”|“onTurn”|“onTribeTurnBegin”|“onTribeTurnEnd”|“custom”
    <ul>
      <li>Gives the time when the phrase’s stored value is reset to nil.</li>
      <li>“never” means never reset automatically.</li>
      <li>“onTurn” means at the very beginning of the onTurn event (before all other code).</li>
      <li>“onTribeTurnBegin” means at the very start of the onTribeTurnBegin event for the owner (before all other code).</li>
      <li>“onTribeTurnEnd” means at the very end of the onTribeTurnEnd event for the owner (after all other code).</li>
      <li>If tribe has no owner, onTribeTurnBegin and onTribeTurnEnd updates happen during the onTurn update.</li>
      <li>“custom” means the update must be programmed in manually using tribeData.update.</li>
      <li>Default value is “never”.</li>
    </ul>
  </li>
</ul>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">phraseName</code> — The name of the phrase.</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">defaultValue</code> — If the underlying stored value is nil, this is the value the phrase takes on.</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">resetTime</code> — Gives the time when the phrase’s stored value is reset to nil.</p>

<div class="language-lua highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">resetTime</span><span class="p">:</span>
    <span class="err">\|</span> <span class="s2">"never"</span>
    <span class="err">\|</span> <span class="s2">"onTurn"</span>
    <span class="err">\|</span> <span class="s2">"onTribeTurnBegin"</span>
    <span class="err">\|</span> <span class="s2">"onTribeTurnEnd"</span>
    <span class="err">\|</span> <span class="s2">"custom"</span>
</code></pre></div></div>
<h3 id="definemodulephrase">
  
  
    <a href="#definemodulephrase">&#128279</a> defineModulePhrase
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function tribeData.defineModulePhrase(moduleName: string, phraseName: string, defaultValue?: string, resetTime?: "custom"|"never"|"onTribeTurnBegin"|"onTribeTurnEnd"|"onTurn")
</code></pre></div></div>
<p>Defines a phrase for tribe data, which keeps string values.   This version of defineCounter allows you to add a module name to the phrase name, which
will prevent name collisions with phrases from other modules and code
written for a specific scenario.</p>
<ul>
  <li>moduleName = string
    <ul>
      <li>The name of the module.</li>
    </ul>
  </li>
  <li>phraseName = string
    <ul>
      <li>The name of the phrase.</li>
    </ul>
  </li>
  <li>defaultValue = string
    <ul>
      <li>If the underlying stored value is nil, this is the value the phrase takes on.</li>
      <li>Default value is “”.</li>
    </ul>
  </li>
  <li>resetTime = “never”|“onTurn”|“onTribeTurnBegin”|“onTribeTurnEnd”|“custom”
    <ul>
      <li>Gives the time when the phrase’s stored value is reset to nil.</li>
      <li>“never” means never reset automatically.</li>
      <li>“onTurn” means at the very beginning of the onTurn event (before all other code).</li>
      <li>“onTribeTurnBegin” means at the very start of the onTribeTurnBegin event for the owner (before all other code).</li>
      <li>“onTribeTurnEnd” means at the very end of the onTribeTurnEnd event for the owner (after all other code).</li>
      <li>If tribe has no owner, onTribeTurnBegin and onTribeTurnEnd updates happen during the onTurn update.</li>
      <li>“custom” means the update must be programmed in manually using tribeData.update.</li>
      <li>Default value is “never”.</li>
    </ul>
  </li>
</ul>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">moduleName</code> — The name of the module.</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">phraseName</code> — The name of the phrase.</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">defaultValue</code> — If the underlying stored value is nil, this is the value the phrase takes on.</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">resetTime</code> — Gives the time when the phrase’s stored value is reset to nil.</p>

<div class="language-lua highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">resetTime</span><span class="p">:</span>
    <span class="err">\|</span> <span class="s2">"never"</span>
    <span class="err">\|</span> <span class="s2">"onTurn"</span>
    <span class="err">\|</span> <span class="s2">"onTribeTurnBegin"</span>
    <span class="err">\|</span> <span class="s2">"onTribeTurnEnd"</span>
    <span class="err">\|</span> <span class="s2">"custom"</span>
</code></pre></div></div>
<h3 id="phrasegetvalue">
  
  
    <a href="#phrasegetvalue">&#128279</a> phraseGetValue
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function tribeData.phraseGetValue(tribe: tribeObject, phraseName: string, moduleName?: string)
  -&gt; string
</code></pre></div></div>
<p>Returns the value associated with the tribe’s phrase of phraseName.
If the associated value is nil, the default specified during the definition is returned.</p>
<h3 id="phrasesetvalue">
  
  
    <a href="#phrasesetvalue">&#128279</a> phraseSetValue
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function tribeData.phraseSetValue(tribe: tribeObject, phraseName: string, value: string, moduleName?: string)
</code></pre></div></div>
<p>Sets the value associated with tribe’s phraseName to value.</p>
<h3 id="phraseisnil">
  
  
    <a href="#phraseisnil">&#128279</a> phraseIsNil
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function tribeData.phraseIsNil(tribe: tribeObject, phraseName: string, moduleName?: string)
  -&gt; boolean
</code></pre></div></div>
<p>Returns true if the underlying value of tribe’s phraseName phrase is nil, and false otherwise.</p>
<h3 id="phrasereset">
  
  
    <a href="#phrasereset">&#128279</a> phraseReset
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function tribeData.phraseReset(tribe: tribeObject, phraseName: string, moduleName?: string)
</code></pre></div></div>
<p>Sets the value associated with the tribe’s phraseName to nil.
(meaning that it returns the default value set when it was defined)</p>
<h2 id="general-tools">
  
  
    <a href="#general-tools">&#128279</a> General Tools
  
  
</h2>
    
<h3 id="deletedata">
  
  
    <a href="#deletedata">&#128279</a> deleteData
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function tribeData.deleteData(tribe: tribeObject)
</code></pre></div></div>
<p>Deletes the data associated with the tribe.</p>
<h3 id="transferdata">
  
  
    <a href="#transferdata">&#128279</a> transferData
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function tribeData.transferData(oldtribe: tribeObject, newtribe: tribeObject)
</code></pre></div></div>
<p>Associates the tribeData from the old tribe to the new one (deleting the association with the old one).
newtribe can’t be nil.</p>
<h3 id="transferordeletedata">
  
  
    <a href="#transferordeletedata">&#128279</a> transferOrDeleteData
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function tribeData.transferOrDeleteData(oldTribe: tribeObject, newTribe: tribeObject|nil)
</code></pre></div></div>
<p>If newTribe is not nil, transfers the data from the old tribe to the new one (deleting the data for the old one).  If newTribe is nil, the data is deleted for oldTribe.</p>
<h3 id="update">
  
  
    <a href="#update">&#128279</a> update
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function tribeData.update(tribe?: number, time?: "custom"|"onTribeTurnBegin"|"onTribeTurnEnd"|"onTurn", tribe: number, key?: string, moduleName?: string)
</code></pre></div></div>
<p>Updates all of tribe’s data keys that have an updateTime of time, unless
key is specified, in which case, update that key only.</p>
<ul>
  <li>time = “onTurn”|“onTribeTurnBegin”|“onTribeTurnEnd”|“custom”
    <ul>
      <li>Update the tribe’s data keys that have this updateTime.</li>
      <li>Default is “custom”.</li>
    </ul>
  </li>
  <li>tribe = nil|tribeObject
    <ul>
      <li>The tribe to consider the active tribe for onTribeTurnBegin and onTribeTurnEnd updates.</li>
      <li>Default is nil.</li>
    </ul>
  </li>
  <li>key = nil|string
    <ul>
      <li>The key to update.</li>
      <li>Default is nil, in which case all keys with the updateTime specified by time are updated.</li>
    </ul>
  </li>
  <li>moduleName = nil|string
    <ul>
      <li>The name of the module using this name, if applicable.</li>
      <li>Default is nil.</li>
    </ul>
  </li>
</ul><hr />

<div class="language-lua highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">time</span><span class="p">:</span>
    <span class="err">\|</span> <span class="s2">"onTurn"</span>
    <span class="err">\|</span> <span class="s2">"onTribeTurnBegin"</span>
    <span class="err">\|</span> <span class="s2">"onTribeTurnEnd"</span>
    <span class="err">\|</span> <span class="s2">"custom"</span>
</code></pre></div></div>
<h3 id="generalupdate">
  
  
    <a href="#generalupdate">&#128279</a> generalUpdate
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function tribeData.generalUpdate(time?: "custom"|"onTribeTurnBegin"|"onTribeTurnEnd"|"onTurn", tribe?: tribeObject)
</code></pre></div></div>
<p>Updates data keys that have an updateTime of <code class="language-plaintext highlighter-rouge">time</code> for all tribes.</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">time</code> — Default is “custom”.</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">tribe</code> — The tribe to consider the active tribe for onTribeTurnBegin and onTribeTurnEnd updates. Default is nil.</p>

<div class="language-lua highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">time</span><span class="p">:</span>
    <span class="err">\|</span> <span class="s2">"onTurn"</span>
    <span class="err">\|</span> <span class="s2">"onTribeTurnBegin"</span>
    <span class="err">\|</span> <span class="s2">"onTribeTurnEnd"</span>
    <span class="err">\|</span> <span class="s2">"custom"</span>
</code></pre></div></div>
<h3 id="validate">
  
  
    <a href="#validate">&#128279</a> validate
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function tribeData.validate(tribe: tribeObject)
</code></pre></div></div>
<p>Checks that the item is still the same tribe it was before (i.e. that the tribe hasn’t been deleted and the ID reused).  If it has, eliminate all data for that tribe.</p>
<h3 id="changevalidationinfo">
  
  
    <a href="#changevalidationinfo">&#128279</a> changeValidationInfo
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function tribeData.changeValidationInfo(tribe: tribeObject)
</code></pre></div></div>
<p>Replaces existing values of the sameItemCheck with new ones.</p>
 -->
      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/"></data>

  <div class="wrapper">

    <div class="footer-col-wrapper">
      <div class="footer-col">
<!--        <p class="feed-subscribe">
          <a href="/feed.xml">
            <svg class="svg-icon orange">
              <use xlink:href="/assets/minima-social-icons.svg#rss"></use>
            </svg><span>Subscribe</span>
          </a>
        </p>
-->
<!--
-->
      </div>
      <div class="footer-col">
        <p>Reference materials and lessons for using Lua to program events for Civilization II: Test of Time</p>
      </div>
    </div>

    <div class="social-links">
<ul class="social-media-list">
  <li><a rel="me" href="https://github.com/ProfGarfield" target="_blank" title="ProfGarfield"><svg class="svg-icon grey"><use xlink:href="/assets/minima-social-icons.svg#github"></use></svg>ProfGarfield</a></li>
  <li><a rel="me" href="https://www.youtube.com/user/ProfCiv2" target="_blank" title="YouTube"><svg class="svg-icon grey"><use xlink:href="/assets/minima-social-icons.svg#youtube"></use></svg>ProfCiv2</a></li>
  <li><a rel="me" href="https://forums.civfanatics.com/members/prof-garfield.43783/" target="_blank" title="Civfanatics Profile"><img src="/assets/civfanatics_icon.png" class="svg-icon grey"></img>Prof. Garfield</a></li>
</ul>
</div>

  </div>

</footer>
</body>

</html>

<!DOCTYPE html>

<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="/assets/css/style.css">
  <!--<link rel="icon" type="image/png" href="/assets/civfanatics_icon.png">-->
    <title>General Library</title>
    <link type="application/atom+xml" rel="alternate" href="http://localhost:4000/feed.xml" title="Lua for Civilization II" />
    <!-- Begin Jekyll SEO tag v2.8.0 -->
<title>General Library | Lua for Civilization II</title>
<meta name="generator" content="Jekyll v4.3.2" />
<meta property="og:title" content="General Library" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Reference materials and lessons for using Lua to program events for Civilization II: Test of Time" />
<meta property="og:description" content="Reference materials and lessons for using Lua to program events for Civilization II: Test of Time" />
<link rel="canonical" href="http://localhost:4000/auto_doc/gen.html" />
<meta property="og:url" content="http://localhost:4000/auto_doc/gen.html" />
<meta property="og:site_name" content="Lua for Civilization II" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="General Library" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"WebPage","description":"Reference materials and lessons for using Lua to program events for Civilization II: Test of Time","headline":"General Library","url":"http://localhost:4000/auto_doc/gen.html"}</script>
<!-- End Jekyll SEO tag -->

</head>
<body><header class="site-header">
  <div class="wrapper">
    <!--img src="/assets/logo-cfc.png" class="center"--><a class="site-title" rel="author" href="/">Lua for Civilization II</a><nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger"><a class="page-link" href="/about/">About</a><a class="page-link" href="/auto_doc/autoIndex.html">Function Docs</a><a class="page-link" href="/executionPoints.html">Execution Points</a><a class="page-link" href="/lua_lessons/lessons_toc.html">Lua Lessons</a></div>
      </nav></div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <head><title>gen.lua Documentation</title>
</head>
<article class="post">

  <header class="post-header">
    <h1 class="post-title">General Library</h1>
  </header>
  
  <div class="toc-div">
    <h2 class="toc-header">Contents</h2>
    <ul><li><a href="#generally-useful-functions">Generally Useful Functions</a><ul><li><a href="#createunit">createUnit</a></li><li><a href="#copyunitattributes">copyUnitAttributes</a></li><li><a href="#defeatunit">defeatUnit</a></li><li><a href="#killunit">killUnit</a></li><li><a href="#deleteunit">deleteUnit</a></li><li><a href="#replaceunit">replaceUnit</a></li><li><a href="#limitedexecutions">limitedExecutions</a></li><li><a href="#justonce">justOnce</a></li><li><a href="#iswonderactivefortribe">isWonderActiveForTribe</a></li><li><a href="#distance">distance</a></li><li><a href="#tiledist">tileDist</a></li><li><a href="#gamemechanicdistance">gameMechanicDistance</a></li><li><a href="#fullhealthmovementallowance">fullHealthMovementAllowance</a></li><li><a href="#maxmoves">maxMoves</a></li><li><a href="#moveremaining">moveRemaining</a></li><li><a href="#inpolygon">inPolygon</a></li><li><a href="#getrandomtileinpolygon">getRandomTileInPolygon</a></li><li><a href="#citycansupportanotherunit">cityCanSupportAnotherUnit</a></li><li><a href="#hometonearestcity">homeToNearestCity</a></li><li><a href="#unittypeontile">unitTypeOnTile</a></li><li><a href="#getadjacenttiles">getAdjacentTiles</a></li><li><a href="#moveunitadjacent">moveUnitAdjacent</a></li><li><a href="#unprotecttile">unprotectTile</a></li><li><a href="#clearairprotection">clearAirProtection</a></li><li><a href="#clearadjacentairprotection">clearAdjacentAirProtection</a></li><li><a href="#cityradiustiles">cityRadiusTiles</a></li><li><a href="#gettilesinradius">getTilesInRadius</a></li><li><a href="#playmusic">playMusic</a></li><li><a href="#issingleplayergame">isSinglePlayerGame</a></li><li><a href="#nearbyunits">nearbyUnits</a></li><li><a href="#makeallowedterrainfunction">makeAllowedTerrainFunction</a></li><li><a href="#nearbyunoccupiedtiles">nearbyUnoccupiedTiles</a></li><li><a href="#getrandomnearbyunoccupiedtile">getRandomNearbyUnoccupiedTile</a></li><li><a href="#nearbyopentilesfortribe">nearbyOpenTilesForTribe</a></li><li><a href="#getrandomnearbyopentilefortribe">getRandomNearbyOpenTileForTribe</a></li><li><a href="#gettileproduction">getTileProduction</a></li><li><a href="#computebaseproduction">computeBaseProduction</a></li><li><a href="#spendmovementpoints">spendMovementPoints</a></li><li><a href="#getbearing">getBearing</a></li><li><a href="#isinteger">isInteger</a></li><li><a href="#getmaptransportflagnumber">getMapTransportFlagNumber</a></li><li><a href="#getnumberofterraintypes">getNumberOfTerrainTypes</a></li><li><a href="#getstate">getState</a></li><li><a href="#getephemeraltable">getEphemeralTable</a></li><li><a href="#iterateunittypes">iterateUnitTypes</a></li><li><a href="#iterateimprovements">iterateImprovements</a></li><li><a href="#iteratewonders">iterateWonders</a></li><li><a href="#iteratebaseterrain">iterateBaseTerrain</a></li><li><a href="#iterateterrain">iterateTerrain</a></li><li><a href="#isroadtradebonus">isRoadTradeBonus</a></li><li><a href="#giveroadtradebonus">giveRoadTradeBonus</a></li><li><a href="#removeroadtradebonus">removeRoadTradeBonus</a></li><li><a href="#fullhealthmovementallowance-1">fullHealthMovementAllowance</a></li></ul></li><li><a href="#table-tools">Table Tools</a><ul><li><a href="#intable">inTable</a></li><li><a href="#copytable">copyTable</a></li><li><a href="#copytablewithmetatable">copyTableWithMetatable</a></li><li><a href="#isempty">isEmpty</a></li><li><a href="#mergetablevalues">mergeTableValues</a></li><li><a href="#cleargapsinarray">clearGapsInArray</a></li><li><a href="#makearrayoneton">makeArrayOneToN</a></li><li><a href="#tablewrap">tableWrap</a></li><li><a href="#errorfornilkey">errorForNilKey</a></li><li><a href="#nonewkey">noNewKey</a></li><li><a href="#isstatesavable">isStateSavable</a></li><li><a href="#tabletostring">tableToString</a></li><li><a href="#makedatatable">makeDataTable</a></li><li><a href="#forbidreplacement">forbidReplacement</a></li><li><a href="#allowreplacement">allowReplacement</a></li><li><a href="#forbidnewkeys">forbidNewKeys</a></li><li><a href="#allownewkeys">allowNewKeys</a></li><li><a href="#forbidnilvalueaccess">forbidNilValueAccess</a></li><li><a href="#allownilvalueaccess">allowNilValueAccess</a></li><li><a href="#restrictvalues">restrictValues</a></li><li><a href="#makethresholdtable">makeThresholdTable</a></li><li><a href="#persistentrandom">persistentRandom</a></li><li><a href="#clearpersistentrandom">clearPersistentRandom</a></li><li><a href="#getpersistentrandomtable">getPersistentRandomTable</a></li><li><a href="#newemptystack">newEmptyStack</a></li><li><a href="#newstack">newStack</a></li><li><a href="#isstack">isStack</a></li></ul></li><li><a href="#custom-data-types-and-validation">Custom Data Types and Validation</a><ul><li><a href="#valuesatisfiesspecification">valueSatisfiesSpecification</a></li><li><a href="#validatefunctionargument">validateFunctionArgument</a></li><li><a href="#createdatatype">createDataType</a></li><li><a href="#valuespecforcustomdata">valueSpecForCustomData</a></li><li><a href="#describeallowablevalues">describeAllowableValues</a></li><li><a href="#validatetablevalue">validateTableValue</a></li><li><a href="#tableofvaluespecification">tableOfValueSpecification</a></li><li><a href="#valuespecificationortableofvaluespecification">valueSpecificationOrTableOfValueSpecification</a></li><li><a href="#validatevaluespecificationkeys">validateValueSpecificationKeys</a></li></ul></li><li><a href="#non-standard-id-functions">Non-Standard ID Functions</a><ul><li><a href="#getbaseterrainid">getBaseTerrainID</a></li><li><a href="#getbaseterrainfromid">getBaseTerrainFromID</a></li><li><a href="#getterrainid">getTerrainID</a></li><li><a href="#getterrainfromid">getTerrainFromID</a></li><li><a href="#gettileid">getTileID</a></li><li><a href="#gettilefromid">getTileFromID</a></li></ul></li><li><a href="#marker-functions">Marker Functions</a><ul><li><a href="#placemarker">placeMarker</a></li><li><a href="#removemarker">removeMarker</a></li><li><a href="#maintaintilemarkertable">maintainTileMarkerTable</a></li><li><a href="#removeallmarkers">removeAllMarkers</a></li><li><a href="#removemarkersfromtile">removeMarkersFromTile</a></li><li><a href="#showallmarkersontile">showAllMarkersOnTile</a></li><li><a href="#showallmarkers">showAllMarkers</a></li><li><a href="#hasmarker">hasMarker</a></li><li><a href="#ismarkervisible">isMarkerVisible</a></li><li><a href="#hidemarker">hideMarker</a></li><li><a href="#hideallmarkers">hideAllMarkers</a></li><li><a href="#hideallmarkersontile">hideAllMarkersOnTile</a></li><li><a href="#showmarker">showMarker</a></li><li><a href="#showmarkeronalltiles">showMarkerOnAllTiles</a></li></ul></li><li><a href="#item-weight-functions">Item Weight Functions</a><ul><li><a href="#calculateweight">calculateWeight</a></li><li><a href="#getextremeweights">getExtremeWeights</a></li><li><a href="#getbiggestweights">getBiggestWeights</a></li><li><a href="#getsmallestweights">getSmallestWeights</a></li></ul></li><li><a href="#tile-improvement-functions">Tile Improvement Functions</a><ul><li><a href="#totile">toTile</a></li><li><a href="#hasirrigation">hasIrrigation</a></li><li><a href="#placeirrigation">placeIrrigation</a></li><li><a href="#removeirrigation">removeIrrigation</a></li><li><a href="#hasmine">hasMine</a></li><li><a href="#placemine">placeMine</a></li><li><a href="#placemineundercity">placeMineUnderCity</a></li><li><a href="#removemine">removeMine</a></li><li><a href="#removemineundercity">removeMineUnderCity</a></li><li><a href="#hasfarmland">hasFarmland</a></li><li><a href="#placefarmland">placeFarmland</a></li><li><a href="#removefarmland">removeFarmland</a></li><li><a href="#hasagriculture">hasAgriculture</a></li><li><a href="#improveagriculture">improveAgriculture</a></li><li><a href="#degradeagriculture">degradeAgriculture</a></li><li><a href="#removeagriculture">removeAgriculture</a></li><li><a href="#hasroad">hasRoad</a></li><li><a href="#placeroad">placeRoad</a></li><li><a href="#removeroad">removeRoad</a></li><li><a href="#hasrailroad">hasRailroad</a></li><li><a href="#placerailroad">placeRailroad</a></li><li><a href="#removerailroad">removeRailroad</a></li><li><a href="#hastransportation">hasTransportation</a></li><li><a href="#upgradetransportation">upgradeTransportation</a></li><li><a href="#degradetransportation">degradeTransportation</a></li><li><a href="#removetransportation">removeTransportation</a></li><li><a href="#hasfortress">hasFortress</a></li><li><a href="#placefortress">placeFortress</a></li><li><a href="#placefortressforce">placeFortressForce</a></li><li><a href="#removefortress">removeFortress</a></li><li><a href="#hasairbase">hasAirbase</a></li><li><a href="#placeairbase">placeAirbase</a></li><li><a href="#placeairbaseforce">placeAirbaseForce</a></li><li><a href="#removeairbase">removeAirbase</a></li><li><a href="#haspollution">hasPollution</a></li><li><a href="#placepollution">placePollution</a></li><li><a href="#placepollutionforce">placePollutionForce</a></li><li><a href="#removepollution">removePollution</a></li><li><a href="#hastransporter">hasTransporter</a></li><li><a href="#placetransporter">placeTransporter</a></li><li><a href="#removetransporter">removeTransporter</a></li></ul></li><li><a href="#city-attribute-functions">City Attribute Functions</a><ul><li><a href="#iscivildisorder">isCivilDisorder</a></li><li><a href="#setcivildisorder">setCivilDisorder</a></li><li><a href="#clearcivildisorder">clearCivilDisorder</a></li><li><a href="#iswelovetheking">isWeLoveTheKing</a></li><li><a href="#setwelovetheking">setWeLoveTheKing</a></li><li><a href="#clearwelovetheking">clearWeLoveTheKing</a></li><li><a href="#isimprovementsold">isImprovementSold</a></li><li><a href="#setimprovementsold">setImprovementSold</a></li><li><a href="#clearimprovementsold">clearImprovementSold</a></li><li><a href="#istechnologystolen">isTechnologyStolen</a></li><li><a href="#settechnologystolen">setTechnologyStolen</a></li><li><a href="#cleartechnologystolen">clearTechnologyStolen</a></li><li><a href="#isautobuild">isAutoBuild</a></li><li><a href="#setautobuild">setAutoBuild</a></li><li><a href="#clearautobuild">clearAutoBuild</a></li><li><a href="#isattribute6">isAttribute6</a></li><li><a href="#setattribute6">setAttribute6</a></li><li><a href="#clearattribute6">clearAttribute6</a></li><li><a href="#isattribute7">isAttribute7</a></li><li><a href="#setattribute7">setAttribute7</a></li><li><a href="#clearattribute7">clearAttribute7</a></li><li><a href="#isbuildcoastal">isBuildCoastal</a></li><li><a href="#setbuildcoastal">setBuildCoastal</a></li><li><a href="#clearbuildcoastal">clearBuildCoastal</a></li><li><a href="#isattribute9">isAttribute9</a></li><li><a href="#setattribute9">setAttribute9</a></li><li><a href="#clearattribute9">clearAttribute9</a></li><li><a href="#isattribute10">isAttribute10</a></li><li><a href="#setattribute10">setAttribute10</a></li><li><a href="#clearattribute10">clearAttribute10</a></li><li><a href="#isattribute11">isAttribute11</a></li><li><a href="#setattribute11">setAttribute11</a></li><li><a href="#clearattribute11">clearAttribute11</a></li><li><a href="#isbuildhydroplant">isBuildHydroPlant</a></li><li><a href="#setbuildhydroplant">setBuildHydroPlant</a></li><li><a href="#clearbuildhydroplant">clearBuildHydroPlant</a></li><li><a href="#isattribute13">isAttribute13</a></li><li><a href="#setattribute13">setAttribute13</a></li><li><a href="#clearattribute13">clearAttribute13</a></li><li><a href="#isattribute14">isAttribute14</a></li><li><a href="#setattribute14">setAttribute14</a></li><li><a href="#clearattribute14">clearAttribute14</a></li><li><a href="#isattribute15">isAttribute15</a></li><li><a href="#setattribute15">setAttribute15</a></li><li><a href="#clearattribute15">clearAttribute15</a></li><li><a href="#isattribute16">isAttribute16</a></li><li><a href="#setattribute16">setAttribute16</a></li><li><a href="#clearattribute16">clearAttribute16</a></li><li><a href="#isusedairport">isUsedAirport</a></li><li><a href="#setusedairport">setUsedAirport</a></li><li><a href="#clearusedairport">clearUsedAirport</a></li><li><a href="#isattribute18">isAttribute18</a></li><li><a href="#setattribute18">setAttribute18</a></li><li><a href="#clearattribute18">clearAttribute18</a></li><li><a href="#isattribute19">isAttribute19</a></li><li><a href="#setattribute19">setAttribute19</a></li><li><a href="#clearattribute19">clearAttribute19</a></li><li><a href="#isattribute20">isAttribute20</a></li><li><a href="#setattribute20">setAttribute20</a></li><li><a href="#clearattribute20">clearAttribute20</a></li><li><a href="#isattribute21">isAttribute21</a></li><li><a href="#setattribute21">setAttribute21</a></li><li><a href="#clearattribute21">clearAttribute21</a></li><li><a href="#isbuildships">isBuildShips</a></li><li><a href="#setbuildships">setBuildShips</a></li><li><a href="#clearbuildships">clearBuildShips</a></li><li><a href="#iscityinvestigated">isCityInvestigated</a></li><li><a href="#setcityinvestigated">setCityInvestigated</a></li><li><a href="#clearcityinvestigated">clearCityInvestigated</a></li><li><a href="#isattribute24">isAttribute24</a></li><li><a href="#setattribute24">setAttribute24</a></li><li><a href="#clearattribute24">clearAttribute24</a></li><li><a href="#ismilitaryautobuild">isMilitaryAutoBuild</a></li><li><a href="#setmilitaryautobuild">setMilitaryAutoBuild</a></li><li><a href="#clearmilitaryautobuild">clearMilitaryAutoBuild</a></li><li><a href="#isdomesticautobuild">isDomesticAutoBuild</a></li><li><a href="#setdomesticautobuild">setDomesticAutoBuild</a></li><li><a href="#cleardomesticautobuild">clearDomesticAutoBuild</a></li><li><a href="#isobjective">isObjective</a></li><li><a href="#setobjective">setObjective</a></li><li><a href="#clearobjective">clearObjective</a></li><li><a href="#isattribute28">isAttribute28</a></li><li><a href="#setattribute28">setAttribute28</a></li><li><a href="#clearattribute28">clearAttribute28</a></li><li><a href="#ismajorobjective">isMajorObjective</a></li><li><a href="#setmajorobjective">setMajorObjective</a></li><li><a href="#clearmajorobjective">clearMajorObjective</a></li><li><a href="#isusedtransporter">isUsedTransporter</a></li><li><a href="#setusedtransporter">setUsedTransporter</a></li><li><a href="#clearusedtransporter">clearUsedTransporter</a></li><li><a href="#isattribute31">isAttribute31</a></li><li><a href="#setattribute31">setAttribute31</a></li><li><a href="#clearattribute31">clearAttribute31</a></li><li><a href="#isattribute32">isAttribute32</a></li><li><a href="#setattribute32">setAttribute32</a></li><li><a href="#clearattribute32">clearAttribute32</a></li></ul></li><li><a href="#unit-order-functions">Unit Order Functions</a><ul><li><a href="#isfortifying">isFortifying</a></li><li><a href="#settofortifying">setToFortifying</a></li><li><a href="#isfortified">isFortified</a></li><li><a href="#settofortified">setToFortified</a></li><li><a href="#issleeping">isSleeping</a></li><li><a href="#settosleeping">setToSleeping</a></li><li><a href="#isbuildingfortress">isBuildingFortress</a></li><li><a href="#settobuildingfortress">setToBuildingFortress</a></li><li><a href="#isbuildingroad">isBuildingRoad</a></li><li><a href="#settobuildingroad">setToBuildingRoad</a></li><li><a href="#isirrigating">isIrrigating</a></li><li><a href="#settoirrigating">setToIrrigating</a></li><li><a href="#ismining">isMining</a></li><li><a href="#settomining">setToMining</a></li><li><a href="#istransformingterrain">isTransformingTerrain</a></li><li><a href="#settotransformingterrain">setToTransformingTerrain</a></li><li><a href="#isbuildingairbase">isBuildingAirbase</a></li><li><a href="#settobuildingairbase">setToBuildingAirbase</a></li><li><a href="#isbuildingtransporter">isBuildingTransporter</a></li><li><a href="#settobuildingtransporter">setToBuildingTransporter</a></li><li><a href="#iscleaningpollution">isCleaningPollution</a></li><li><a href="#settocleaningpollution">setToCleaningPollution</a></li><li><a href="#isgoingto">isGoingTo</a></li><li><a href="#settogoingto">setToGoingTo</a></li><li><a href="#isnoorder">isNoOrder</a></li><li><a href="#settonoorders">setToNoOrders</a></li><li><a href="#iswaiting">isWaiting</a></li><li><a href="#settowaiting">setToWaiting</a></li><li><a href="#clearwaiting">clearWaiting</a></li><li><a href="#isparadropped">isParadropped</a></li><li><a href="#setparadropped">setParadropped</a></li><li><a href="#clearparadropped">clearParadropped</a></li><li><a href="#ismoved">isMoved</a></li><li><a href="#setmoved">setMoved</a></li><li><a href="#clearmoved">clearMoved</a></li></ul></li><li><a href="#unit-type-flag-functions">Unit Type Flag Functions</a><ul><li><a href="#isseetwospaces">isSeeTwoSpaces</a></li><li><a href="#giveseetwospaces">giveSeeTwoSpaces</a></li><li><a href="#removeseetwospaces">removeSeeTwoSpaces</a></li><li><a href="#isignorezoc">isIgnoreZOC</a></li><li><a href="#giveignorezoc">giveIgnoreZOC</a></li><li><a href="#removeignorezoc">removeIgnoreZOC</a></li><li><a href="#isamphibious">isAmphibious</a></li><li><a href="#giveamphibious">giveAmphibious</a></li><li><a href="#removeamphibious">removeAmphibious</a></li><li><a href="#issubmarine">isSubmarine</a></li><li><a href="#givesubmarine">giveSubmarine</a></li><li><a href="#removesubmarine">removeSubmarine</a></li><li><a href="#isattackair">isAttackAir</a></li><li><a href="#giveattackair">giveAttackAir</a></li><li><a href="#removeattackair">removeAttackAir</a></li><li><a href="#iscoastal">isCoastal</a></li><li><a href="#givecoastal">giveCoastal</a></li><li><a href="#removecoastal">removeCoastal</a></li><li><a href="#isignorewalls">isIgnoreWalls</a></li><li><a href="#giveignorewalls">giveIgnoreWalls</a></li><li><a href="#removeignorewalls">removeIgnoreWalls</a></li><li><a href="#iscarryair">isCarryAir</a></li><li><a href="#givecarryair">giveCarryAir</a></li><li><a href="#removecarryair">removeCarryAir</a></li><li><a href="#isparadrop">isParadrop</a></li><li><a href="#giveparadrop">giveParadrop</a></li><li><a href="#removeparadrop">removeParadrop</a></li><li><a href="#isalpine">isAlpine</a></li><li><a href="#givealpine">giveAlpine</a></li><li><a href="#removealpine">removeAlpine</a></li><li><a href="#isbonusagainsthorse">isBonusAgainstHorse</a></li><li><a href="#givebonusagainsthorse">giveBonusAgainstHorse</a></li><li><a href="#removebonusagainsthorse">removeBonusAgainstHorse</a></li><li><a href="#isfreesupportunderfundamentalism">isFreeSupportUnderFundamentalism</a></li><li><a href="#givefreesupportunderfundamentalism">giveFreeSupportUnderFundamentalism</a></li><li><a href="#removefreesupportunderfundamentalism">removeFreeSupportUnderFundamentalism</a></li><li><a href="#isdestroyedafterattacking">isDestroyedAfterAttacking</a></li><li><a href="#givedestroyedafterattacking">giveDestroyedAfterAttacking</a></li><li><a href="#removedestroyedafterattacking">removeDestroyedAfterAttacking</a></li><li><a href="#isbonusagainstair">isBonusAgainstAir</a></li><li><a href="#givebonusagainstair">giveBonusAgainstAir</a></li><li><a href="#removebonusagainstair">removeBonusAgainstAir</a></li><li><a href="#isspotsubmarines">isSpotSubmarines</a></li><li><a href="#givespotsubmarines">giveSpotSubmarines</a></li><li><a href="#removespotsubmarines">removeSpotSubmarines</a></li><li><a href="#isinvisibleuntilattack">isInvisibleUntilAttack</a></li><li><a href="#giveinvisibleuntilattack">giveInvisibleUntilAttack</a></li><li><a href="#removeinvisibleuntilattack">removeInvisibleUntilAttack</a></li><li><a href="#isnondisbandable">isNonDisbandable</a></li><li><a href="#givenondisbandable">giveNonDisbandable</a></li><li><a href="#removenondisbandable">removeNonDisbandable</a></li><li><a href="#iszerorangeairunitdamageoverride">isZeroRangeAirUnitDamageOverride</a></li><li><a href="#givezerorangeairunitdamageoverride">giveZeroRangeAirUnitDamageOverride</a></li><li><a href="#removezerorangeairunitdamageoverride">removeZeroRangeAirUnitDamageOverride</a></li><li><a href="#iscannotbuyoffbarbarian">isCannotBuyOffBarbarian</a></li><li><a href="#givecannotbuyoffbarbarian">giveCannotBuyOffBarbarian</a></li><li><a href="#removecannotbuyoffbarbarian">removeCannotBuyOffBarbarian</a></li><li><a href="#iscancrossimpassableterrain">isCanCrossImpassableTerrain</a></li><li><a href="#givecancrossimpassableterrain">giveCanCrossImpassableTerrain</a></li><li><a href="#removecancrossimpassableterrain">removeCanCrossImpassableTerrain</a></li><li><a href="#isbarbarianwillnotexpire">isBarbarianWillNotExpire</a></li><li><a href="#givebarbarianwillnotexpire">giveBarbarianWillNotExpire</a></li><li><a href="#removebarbarianwillnotexpire">removeBarbarianWillNotExpire</a></li><li><a href="#isoverridespr">isOverrideSPR</a></li><li><a href="#giveoverridespr">giveOverrideSPR</a></li><li><a href="#removeoverridespr">removeOverrideSPR</a></li><li><a href="#isreducepopulationwhenbuilt">isReducePopulationWhenBuilt</a></li><li><a href="#givereducepopulationwhenbuilt">giveReducePopulationWhenBuilt</a></li><li><a href="#removereducepopulationwhenbuilt">removeReducePopulationWhenBuilt</a></li><li><a href="#isrequiresfoodsupport">isRequiresFoodSupport</a></li><li><a href="#giverequiresfoodsupport">giveRequiresFoodSupport</a></li><li><a href="#removerequiresfoodsupport">removeRequiresFoodSupport</a></li><li><a href="#iscanfoundcities">isCanFoundCities</a></li><li><a href="#givecanfoundcities">giveCanFoundCities</a></li><li><a href="#removecanfoundcities">removeCanFoundCities</a></li><li><a href="#iscanimprovetiles">isCanImproveTiles</a></li><li><a href="#givecanimprovetiles">giveCanImproveTiles</a></li><li><a href="#removecanimprovetiles">removeCanImproveTiles</a></li><li><a href="#isallowedonmap">isAllowedOnMap</a></li><li><a href="#giveallowedonmap">giveAllowedOnMap</a></li><li><a href="#removeallowedonmap">removeAllowedOnMap</a></li><li><a href="#isnativetransportbetweenmaps">isNativeTransportBetweenMaps</a></li><li><a href="#givenativetransportbetweenmaps">giveNativeTransportBetweenMaps</a></li><li><a href="#removenativetransportbetweenmaps">removeNativeTransportBetweenMaps</a></li><li><a href="#isbuildtransportbetweenmaps">isBuildTransportBetweenMaps</a></li><li><a href="#givebuildtransportbetweenmaps">giveBuildTransportBetweenMaps</a></li><li><a href="#removebuildtransportbetweenmaps">removeBuildTransportBetweenMaps</a></li><li><a href="#isusetransportbetweenmaps">isUseTransportBetweenMaps</a></li><li><a href="#giveusetransportbetweenmaps">giveUseTransportBetweenMaps</a></li><li><a href="#removeusetransportbetweenmaps">removeUseTransportBetweenMaps</a></li></ul></li><li><a href="#map-visibility-functions">Map Visibility Functions</a><ul><li><a href="#istilerevealed">isTileRevealed</a></li><li><a href="#revealtile">revealTile</a></li><li><a href="#covertile">coverTile</a></li><li><a href="#isunitstackvisible">isUnitStackVisible</a></li><li><a href="#hideunitstack">hideUnitStack</a></li><li><a href="#revealunitstack">revealUnitStack</a></li><li><a href="#iscitycharted">isCityCharted</a></li><li><a href="#chartcity">chartCity</a></li><li><a href="#unchartcity">unchartCity</a></li><li><a href="#isirrigationcharted">isIrrigationCharted</a></li><li><a href="#chartirrigation">chartIrrigation</a></li><li><a href="#unchartirrigation">unchartIrrigation</a></li><li><a href="#isminecharted">isMineCharted</a></li><li><a href="#chartmine">chartMine</a></li><li><a href="#unchartmine">unchartMine</a></li><li><a href="#isfarmlandcharted">isFarmlandCharted</a></li><li><a href="#chartfarmland">chartFarmland</a></li><li><a href="#unchartfarmland">unchartFarmland</a></li><li><a href="#isroadcharted">isRoadCharted</a></li><li><a href="#chartroad">chartRoad</a></li><li><a href="#unchartroad">unchartRoad</a></li><li><a href="#israilroadcharted">isRailroadCharted</a></li><li><a href="#chartrailroad">chartRailroad</a></li><li><a href="#unchartrailroad">unchartRailroad</a></li><li><a href="#uncharttransportation">unchartTransportation</a></li><li><a href="#isfortresscharted">isFortressCharted</a></li><li><a href="#chartfortress">chartFortress</a></li><li><a href="#unchartfortress">unchartFortress</a></li><li><a href="#isairbasecharted">isAirbaseCharted</a></li><li><a href="#chartairbase">chartAirbase</a></li><li><a href="#unchartairbase">unchartAirbase</a></li><li><a href="#ispollutioncharted">isPollutionCharted</a></li><li><a href="#chartpollution">chartPollution</a></li><li><a href="#unchartpollution">unchartPollution</a></li><li><a href="#istransportercharted">isTransporterCharted</a></li><li><a href="#charttransporter">chartTransporter</a></li><li><a href="#uncharttransporter">unchartTransporter</a></li><li><a href="#charttruthfully">chartTruthfully</a></li></ul></li><li><a href="#bitmask-tools">Bitmask Tools</a><ul><li><a href="#checkbits">checkBits</a></li><li><a href="#setbits">setBits</a></li><li><a href="#printbits">printBits</a></li><li><a href="#bitmasktostring">bitmaskToString</a></li><li><a href="#isbit1">isBit1</a></li><li><a href="#isbit0">isBit0</a></li><li><a href="#setbit1">setBit1</a></li><li><a href="#setbit0">setBit0</a></li><li><a href="#istransportbetweenmaps">isTransportBetweenMaps</a></li><li><a href="#givetransportbetweenmaps">giveTransportBetweenMaps</a></li><li><a href="#removetransportbetweenmaps">removeTransportBetweenMaps</a></li></ul></li><li><a href="#alternate-names">Alternate Names</a><ul><li><a href="#isattribute17">isAttribute17</a></li><li><a href="#setattribute17">setAttribute17</a></li><li><a href="#clearattribute17">clearAttribute17</a></li><li><a href="#isattribute23">isAttribute23</a></li><li><a href="#setattribute23">setAttribute23</a></li><li><a href="#clearattribute23">clearAttribute23</a></li><li><a href="#isattribute30">isAttribute30</a></li><li><a href="#setattribute30">setAttribute30</a></li><li><a href="#clearattribute30">clearAttribute30</a></li><li><a href="#describeallowabledata">describeAllowableData</a></li><li><a href="#checkvaliddatainfo">checkValidDataInfo</a></li><li><a href="#valuesatisfiesvaliddatainfo">valueSatisfiesValidDataInfo</a></li><li><a href="#tableofvdi">tableOfVDI</a></li><li><a href="#vdiortableofvdi">vDIOrTableOfVDI</a></li><li><a href="#valuespecortable">valueSpecOrTable</a></li><li><a href="#wondermodifiedmoves">wonderModifiedMoves</a></li><li><a href="#getbaseterrainfromid-1">getBaseTerrainFromId</a></li><li><a href="#getbaseterrainid-1">getBaseTerrainId</a></li><li><a href="#getterrainfromid-1">getTerrainFromId</a></li><li><a href="#getterrainid-1">getTerrainId</a></li><li><a href="#gettilefromid-1">getTileFromId</a></li><li><a href="#gettileid-1">getTileId</a></li><li><a href="#giveampibious">giveAmpibious</a></li><li><a href="#giveingorewalls">giveIngoreWalls</a></li><li><a href="#removeseetowspaces">removeSeeTowSpaces</a></li></ul></li><li><a href="#event-and-module-machinery">Event and Module Machinery</a><ul><li><a href="#rehomeunitsincapturedcity">rehomeUnitsInCapturedCity</a></li><li><a href="#linkactivationfunction">linkActivationFunction</a></li><li><a href="#getactivationfunction">getActivationFunction</a></li><li><a href="#noglobal">noGlobal</a></li><li><a href="#restoreglobal">restoreGlobal</a></li><li><a href="#linkstate">linkState</a></li><li><a href="#linkgenerallibrarystate">linkGeneralLibraryState</a></li><li><a href="#setdeathfunctions">setDeathFunctions</a></li><li><a href="#setscenariodirectory">setScenarioDirectory</a></li><li><a href="#getscenariodirectory">getScenarioDirectory</a></li><li><a href="#setoutofrangemessage">setOutOfRangeMessage</a></li><li><a href="#outofrangemessage">outOfRangeMessage</a></li><li><a href="#activaterangeforlandandsea">activateRangeForLandAndSea</a></li><li><a href="#versionfunctions">versionFunctions</a></li><li><a href="#registereventsluaversion">registerEventsLuaVersion</a></li><li><a href="#setmusicdirectory">setMusicDirectory</a></li><li><a href="#betterunitmanualwait">betterUnitManualWait</a></li><li><a href="#clearmanualwait">clearManualWait</a></li><li><a href="#selectnextactiveunit">selectNextActiveUnit</a></li><li><a href="#makeclearairprotection">makeClearAirProtection</a></li><li><a href="#mineventsluaversion">minEventsLuaVersion</a></li><li><a href="#registerauthoritativedefaultrules">registerAuthoritativeDefaultRules</a></li><li><a href="#registercustomcosmic">registerCustomCosmic</a></li><li><a href="#requireifavailable">requireIfAvailable</a></li></ul></li><li><a href="#obsolete-functions">Obsolete Functions</a><ul><li><a href="#ismapflat">isMapFlat</a></li><li><a href="#ismapround">isMapRound</a></li><li><a href="#declaremapflat">declareMapFlat</a></li><li><a href="#declaremapround">declareMapRound</a></li><li><a href="#setterraintype">setTerrainType</a></li><li><a href="#activate">activate</a></li><li><a href="#activatewithsource">activateWithSource</a></li></ul></li><li><a href="#uncategorised">Uncategorised</a><ul><li><a href="#cityproduction">cityProduction</a></li><li><a href="#complementlist">complementList</a></li><li><a href="#iteratetechs">iterateTechs</a></li><li><a href="#registercityproductionfunction">registerCityProductionFunction</a></li><li><a href="#registerupdatecityvalidationinfo">registerUpdateCityValidationInfo</a></li><li><a href="#registerupdateunitvalidationinfo">registerUpdateUnitValidationInfo</a></li><li><a href="#sorttablekeysinascendingvalueorder">sortTableKeysInAscendingValueOrder</a></li><li><a href="#sorttablekeysindescendingvalueorder">sortTableKeysInDescendingValueOrder</a></li><li><a href="#transfertilecontents">transferTileContents</a></li></ul></li></ul></div>  
  
  <div class="post-content">
    <h1 id="gen">
  
  
    gen <a href="#gen"><span class="self-link">&#128279</span></a>
  
  
</h1>
    

<p>The General Library offers a variety of tools to make it easier to build events. To access functions from the General Library, you should include the following line at the top of your file:</p>
<div class="language-lua highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">local</span> <span class="n">gen</span> <span class="o">=</span> <span class="nb">require</span><span class="p">(</span><span class="s2">"generalLibrary"</span><span class="p">)</span>
</code></pre></div></div>
<h2 id="generally-useful-functions">
  
  
    Generally Useful Functions <a href="#generally-useful-functions"><span class="self-link">&#128279</span></a>
  
  
</h2>
    

<p>These functions are generally useful for creating events.</p>
<h3 id="createunit">
  
  
    createUnit <a href="#createunit"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.createUnit(unitType: unitTypeObject, tribe: tribeObject, locations: table|table&lt;integer, table|tileObject&gt;|tileObject, options: table)
  -&gt; table
</code></pre></div></div>
<p>This is a createUnit function, meant to supersede civlua.createUnit.
Returns a table of units, indexed by integers starting at 1 (unless no units were created.</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">unitType</code> — The type of unit to create.</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">tribe</code> — The owner of the new unit or units.</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">locations</code> — locations is one of the following:<br /><br />tileObject<br />{xCoord,yCoord}<br />{xCoord,yCoord,zCoord}<br />{x=xCoord,y=yCoord}<br />{x=xCoord,y=yCoord,z=zCoord}<br />table&lt;integer,above_types&gt;</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">options</code> — options is a table with the following keys: <br /><br /> count : integer\|nil <br /> The number of units to create.  <code class="language-plaintext highlighter-rouge">nil</code> means 1.<br /><br />randomize : boolean\|nil <br /> If true, randomize the list of locations.  If false or nil, try to place at the tile with the smallest index in the table first.<br /><br />scatter : boolean\|nil <br /> If true, and if randomize is true, each unit is created on a random tile in the location table.<br /><br />inCapital : boolean\|nil <br /> If true, attempt to place in the capital before other locations.  IN case of multiple capitals, capitals are ranked with smallest city id first.  randomize/scatter applies to list of capitals if this is selected.<br /><br />veteran : boolean\|number\|nil <br /> If true, make the created units veteran.  If a fraction between 0 and 1, each unit has this probability of being veteran.  If number 1 or more, this many of the count are made veteran (take floor).  If nil or false, no veterans.<br /><br />homeCity : city\|true\|nil <br /> If city, that city is the home city.  If true, the game selects the home city (probably the way a city is chosen if you crate a unit using the cheat menu).  If nil, no home city.<br /><br />overrideCanEnter : boolean\|nil <br /> If true, the units will be placed even if unitType : canEnter(tile) returns false.  False or nil means follow the restriction.  civ.canEnter appears to check if the terrain is impassible, or if the unit can cross impassible.<br /><br />overrideDomain : boolean\|nil <br /> If true, sea units can be created on land outside cities, and land units at sea.  False or nil means units can only be created where they could travel naturally.<br /><br />overrideDefender : boolean\|nil <br /> If true, unit can be placed on tiles with enemy units or cities.  False or nil means the tile must have no enemy city, and no enemy defender.</p>
<h3 id="copyunitattributes">
  
  
    copyUnitAttributes <a href="#copyunitattributes"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.copyUnitAttributes(parent: unitObject, child: unitObject)
</code></pre></div></div>
<p>Copies the attributes of the <code class="language-plaintext highlighter-rouge">parent</code> unit to the <code class="language-plaintext highlighter-rouge">child</code> unit.
 All attributes accessible through lua are copied (except unit type,
 and unit id number)
  Useful if a unit’s type must be changed (by creating a new unit), but everything
  else should stay the same</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">parent</code> — The unit giving the attributes.</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">child</code> — The unit receiving the attributes.</p>
<h3 id="defeatunit">
  
  
    defeatUnit <a href="#defeatunit"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.defeatUnit(loser: unitObject, winner: unitObject, aggressor: unitObject, victim: unitObject, loserLocation: tileObject, winnerVetStatus: boolean, loserVetStatus: boolean)
  -&gt; survivingDemotedUnit: unitObject|nil
</code></pre></div></div>
<p>“Defeats” the loser, deletes the loser, and returns a unit if and only if the loser was demoted, otherwise nil is returned.
 Runs the events for unit defeat, death, and deletion.</p>
<h3 id="killunit">
  
  
    killUnit <a href="#killunit"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.killUnit(dyingUnit: unitObject)
</code></pre></div></div>
<p>“Kills” the dying unit, running events for ‘death’, ‘death outside combat’, and ‘deletion’.</p>
<h3 id="deleteunit">
  
  
    deleteUnit <a href="#deleteunit"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.deleteUnit(deletedUnit: unitObject, replacementUnit: unitObject|nil)
</code></pre></div></div>
<p>Deletes the deleted unit.
 I the unit is being ‘replaced’, the replacing unit must be provided.
 Runs events associated with unit deletion.</p>
<blockquote>
  <p>void</p>
</blockquote>
<h3 id="replaceunit">
  
  
    replaceUnit <a href="#replaceunit"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.replaceUnit(oldUnit: unitObject, replacementType: unitTypeObject)
  -&gt; unitObject
</code></pre></div></div>
<p>Creates a unit to replace the old unit, 
 copies the old unit’s attributes, and
 deletes the old unit (applying the deletion function).
 Returns the newly created unit.
comment</p>
<h3 id="limitedexecutions">
  
  
    limitedExecutions <a href="#limitedexecutions"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.limitedExecutions(key: string|integer, maxTimes: integer, limitedFunction: fun())
</code></pre></div></div>
<p>If the value at key is less than maxTimes, limitedFunction will execute,
 and the value at key will increment by 1.
 Otherwise, don’t execute limitedFunction.
 Note: limitedFunction()–&gt;void</p>

<p>Example: Volunteers will be created in a capital up to 3 times for a certain trigger.</p>
<div class="language-lua highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">gen</span><span class="p">.</span><span class="n">limitedExecutions</span><span class="p">(</span><span class="s2">"Tribe 1 Volunteers"</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span> <span class="k">function</span><span class="p">()</span>
    <span class="n">text</span><span class="p">.</span><span class="n">simple</span><span class="p">(</span><span class="s2">"Young men flock to Washington to fight the South."</span><span class="p">)</span>
    <span class="n">gen</span><span class="p">.</span><span class="n">createUnit</span><span class="p">(</span><span class="n">gen</span><span class="p">.</span><span class="n">original</span><span class="p">.</span><span class="n">uRiflemen</span><span class="p">,</span> <span class="n">object</span><span class="p">.</span><span class="n">pUnion</span><span class="p">,</span> <span class="n">object</span><span class="p">.</span><span class="n">lWashington</span><span class="p">,</span> <span class="p">{})</span>
<span class="k">end</span><span class="p">)</span>
</code></pre></div></div>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">key</code> — The key for this limited execution</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">maxTimes</code> — The number of times the limited function will be executed</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">limitedFunction</code> — The function to execute a maximum number of times.</p>
<h3 id="justonce">
  
  
    justOnce <a href="#justonce"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.justOnce(key: any, limitedFunction: any)
</code></pre></div></div>
<p>If justOnce has never been executed for this key before, then
 the limited function will execute.  Otherwise, it won’t.
 (Wrapper for gen.limitedExecutions with maxTimes being 1.)
 Example: Show a message once for a certain trigger</p>
<div class="language-lua highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">gen</span><span class="p">.</span><span class="n">justOnce</span><span class="p">(</span><span class="s2">"Rebel Attack"</span><span class="p">,</span> <span class="k">function</span><span class="p">()</span>
    <span class="n">text</span><span class="p">.</span><span class="n">simple</span><span class="p">(</span><span class="s2">"The Rebels have attacked Union troops.  We're now in a shooting war!"</span><span class="p">,</span><span class="s2">"Secretary of Defense"</span><span class="p">)</span>
<span class="k">end</span><span class="p">)</span>
</code></pre></div></div>
<h3 id="iswonderactivefortribe">
  
  
    isWonderActiveForTribe <a href="#iswonderactivefortribe"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.isWonderActiveForTribe(wonder: integer|wonderObject, tribe: integer|tribeObject)
  -&gt; wonderIsActive: boolean
</code></pre></div></div>
<p>Returns true if the <code class="language-plaintext highlighter-rouge">wonder</code> is owned by the <code class="language-plaintext highlighter-rouge">tribe</code> and is not expired, and false otherwise.
 Integers corresponding to wonder/tribe ids can be used as arguments instead.
 revisions by Knighttime, 2021-11-12</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">wonder</code> — the wonder (or id of wonder) in question</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">tribe</code> — the tribe (or id of tribe) in question</p>
<h3 id="distance">
  
  
    distance <a href="#distance"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.distance(itemA: table|cityObject|tileObject|unitObject, itemB: table|cityObject|tileObject|unitObject, zDist?: integer)
  -&gt; integer
</code></pre></div></div>
<p>Takes two objects and a ‘vertical distance’ (0 if absent)
 and computes the distance between them.<br />
 zDist is the number of tiles that one unit of z coordinate “distance” is equivalent to
 Computes the distance you would get by counting tiles.
 If you want the game’s approximation of “Euclidean” distance that
 is used in many game mechanics, use gen.gameMechanicDistance</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">itemA</code> — Can be:<br /><br />tileObject<br /><br />unitObject<br /><br />cityObject<br /><br />{[1]=xCoord,[2]=yCoord,[3]=zCoord}<br />Converted to civ.getTile(xCoord,yCoord,zCoord) <br /><br />{[1]=xCoord,[2]=yCoord}<br />Converted to civ.getTile(xCoord,yCoord,0)<br /><br />{x=xCoord,y=yCoord,z=zCoord}<br />Converted to civ.getTile(xCoord,yCoord,zCoord) <br /><br />{x=xCoord,y=yCoord}<br />Converted to civ.getTile(xCoord,yCoord,0)</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">itemB</code> — Can be:<br /><br />tileObject<br /><br />unitObject<br /><br />cityObject<br /><br />{[1]=xCoord,[2]=yCoord,[3]=zCoord}<br />Converted to civ.getTile(xCoord,yCoord,zCoord) <br /><br />{[1]=xCoord,[2]=yCoord}<br />Converted to civ.getTile(xCoord,yCoord,0)<br /><br />{x=xCoord,y=yCoord,z=zCoord}<br />Converted to civ.getTile(xCoord,yCoord,zCoord) <br /><br />{x=xCoord,y=yCoord}<br />Converted to civ.getTile(xCoord,yCoord,0)</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">zDist</code> — The distance between tiles with same x,y coordinates but differing in z by 1. 0 by default.</p>
<h3 id="tiledist">
  
  
    tileDist <a href="#tiledist"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.tileDist(tileA: tileObject, tileB: tileObject, zDist?: integer)
  -&gt; integer
</code></pre></div></div>
<p>Takes two tiles and a ‘vertical distance’ (0 if absent)
 and computes the distance between them.
 Doesn’t pre-process arguments like gen.distance, so might be slightly
 quicker (though this probably too trivial to ever matter).
 Computes the distance you would get by counting tiles.
 If you want the game’s approximation of “Euclidean” distance that
 is used in many game mechanics, use gen.gameMechanicDistance</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">zDist</code> — The distance between tiles with same x,y coordinates but differing in z by 1. 0 by default.</p>
<h3 id="gamemechanicdistance">
  
  
    gameMechanicDistance <a href="#gamemechanicdistance"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.gameMechanicDistance(itemA: table|cityObject|tileObject|unitObject, itemB: table|cityObject|tileObject|unitObject)
  -&gt; integer
</code></pre></div></div>
<p>gen.gameMechanicDistance(itemOnMap1,itemOnMap2)
  provides a distance measure that is believed to be used
  for internal distance calculations (such as caravan payments
  or city corruption)
  This distance is scaled to match the “Communism Palace Distance”,
  (based on the corruption work by Knighttime)
  Diagonal movement is “1” distance, corner to corner is 1.5 (rounded down)</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">itemA</code> — Can be:<br /><br />tileObject<br /><br />unitObject<br /><br />cityObject<br /><br />{[1]=xCoord,[2]=yCoord,[3]=zCoord}<br />Converted to civ.getTile(xCoord,yCoord,zCoord) <br /><br />{[1]=xCoord,[2]=yCoord}<br />Converted to civ.getTile(xCoord,yCoord,0)<br /><br />{x=xCoord,y=yCoord,z=zCoord}<br />Converted to civ.getTile(xCoord,yCoord,zCoord) <br /><br />{x=xCoord,y=yCoord}<br />Converted to civ.getTile(xCoord,yCoord,0)</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">itemB</code> — Can be:<br /><br />tileObject<br /><br />unitObject<br /><br />cityObject<br /><br />{[1]=xCoord,[2]=yCoord,[3]=zCoord}<br />Converted to civ.getTile(xCoord,yCoord,zCoord) <br /><br />{[1]=xCoord,[2]=yCoord}<br />Converted to civ.getTile(xCoord,yCoord,0)<br /><br />{x=xCoord,y=yCoord,z=zCoord}<br />Converted to civ.getTile(xCoord,yCoord,zCoord) <br /><br />{x=xCoord,y=yCoord}<br />Converted to civ.getTile(xCoord,yCoord,0)</p>
<h3 id="fullhealthmovementallowance">
  
  
    fullHealthMovementAllowance <a href="#fullhealthmovementallowance"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.fullHealthMovementAllowance(unit: unitObject)
  -&gt; atomicMovementPoints: integer
</code></pre></div></div>
<p>Returns the movement allowance of a unit after
 taking into account Nuclear Power tech, Magellan’s Expedition, and Lighthouse.
 Returns “atomic” movement points (that is, the movement recorded by <code class="language-plaintext highlighter-rouge">unit.moveSpent</code>, or “regular” movement points * <code class="language-plaintext highlighter-rouge">totpp.movementMultipliers.aggregate</code></p>
<h3 id="maxmoves">
  
  
    maxMoves <a href="#maxmoves"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.maxMoves(unit: unitObject)
  -&gt; atomicMovementPoints: integer
</code></pre></div></div>
<p>Returns movement allowance for a unit after taking damage
 into account.
 Returns “atomic” movement points (that is, the movement recorded by <code class="language-plaintext highlighter-rouge">unit.moveSpent</code>, or “regular” movement points * <code class="language-plaintext highlighter-rouge">totpp.movementMultipliers.aggregate</code></p>
<h3 id="moveremaining">
  
  
    moveRemaining <a href="#moveremaining"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.moveRemaining(unit: unitObject)
  -&gt; atomicMovementPoints: integer
</code></pre></div></div>
<p>Returns gen.maxMoves-unit.moveSpent
 bug fixed by Knighttime</p>
<h3 id="inpolygon">
  
  
    inPolygon <a href="#inpolygon"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.inPolygon(tile: tileObject, tableOfCoordinates: table)
  -&gt; tileIsInPolygon: boolean
</code></pre></div></div>
<p>The table of coordinates defines the corners of the
 polygon.  Returns true if the tile is within the
 polygon defined by the table of coordinates, and
 false otherwise.  Checking that the map is correct
 must be done separately
 The entry: <code class="language-plaintext highlighter-rouge">tableOfCoordinates.doesNotCrossThisX</code>
 sets an x coordinate that the polygon does not
 cross.  If absent, 0 is used,
 meaning the polygon shouldn’t cross the “date line”.
<br /> Press CTRL+SHIFT+F4 and select the ‘Start the Polygon Script’ option to generate polygons.</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">tile</code> — The tile to check</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">tableOfCoordinates</code> — Table of {[1]=xCoord, [2]=yCoord} without gaps in the integer keys.</p>
<h3 id="getrandomtileinpolygon">
  
  
    getRandomTileInPolygon <a href="#getrandomtileinpolygon"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.getRandomTileInPolygon(polygonTable: table, map?: integer, maxAttempts?: integer)
  -&gt; tileObject
</code></pre></div></div>
<p>Generates a random tile within the polygon defined
by the table of coordinates (same as used by gen.inPolygon
and generated by the Polygon Script found in CTRL+SHIFT+F4).
Map is the map of the tile generated (0 by default).
This code is probabalistic, so after maxAttempts, the first
polygon coordinate is returned, and a text box displayed.
The console prints the polygon that caused the issue.</p>

<p>Inspired by Pablostuka</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">polygonTable</code> — a table of coordinate pairs</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">map</code> — The map for the random tile (default 0)</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">maxAttempts</code> — the number of attempts to find an eligible square (default 100)</p>
<h3 id="citycansupportanotherunit">
  
  
    cityCanSupportAnotherUnit <a href="#citycansupportanotherunit"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.cityCanSupportAnotherUnit(city: cityObject)
  -&gt; boolean
</code></pre></div></div>
<p>Returns true if the city has enough production to support all existing units and at least one other unit.
Units that get free support under fundamentalism are still counted as
“supported”, since they still take up a free support “slot” if they are
among the first 8 units supported by the city.</p>
<h3 id="hometonearestcity">
  
  
    homeToNearestCity <a href="#hometonearestcity"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.homeToNearestCity(unit: unitObject)
</code></pre></div></div>
<p>Finds the nearest city (of the same tribe) that can support another
  unit, and sets the unit’s home city to that city.
  If there is no suitable city, the unit’s home city isn’t changed.
 <br /> Note: This counts the number of squares between the unit and the city, and ignores map differences.  This is not suitable for all applications (e.g. if maps are not “stacked”, or if you’re trying to re-create an existing game mechanic).</p>
<h3 id="unittypeontile">
  
  
    unitTypeOnTile <a href="#unittypeontile"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.unitTypeOnTile(tile: tileObject, unitTypeTable: table&lt;any, unitTypeObject&gt;|unitTypeObject, excludeFromCheck?: table&lt;any, unitObject&gt;|unitObject)
  -&gt; boolean
</code></pre></div></div>
<p>Returns true if tile has any of the unit types listed in the table,
false otherwise. A unit or units can be excluded from the check.</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">tile</code> — The tile to try to find specific unit types on.</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">unitTypeTable</code> — The unit type or types to check for.</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">excludeFromCheck</code> — These units are excluded from the check.  If they are of a matching unit type, the function still won’t return true.  (Unless a different unit has a matching type.)</p>
<h3 id="getadjacenttiles">
  
  
    getAdjacentTiles <a href="#getadjacenttiles"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.getAdjacentTiles(tile: table|tileObject)
  -&gt; tileTable: table&lt;integer, tileObject&gt;
</code></pre></div></div>
<p>Returns a table (indexed by integers) with all adjacent
 tiles to the input tile.  Note: some keys will have nil values
 if the tile is on the edge of the map.</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">tile</code> — if table, should be a coordinate pair or triple</p>

<p>@<em>return</em> <code class="language-plaintext highlighter-rouge">tileTable</code> — table of adjacent tiles</p>
<h3 id="moveunitadjacent">
  
  
    moveUnitAdjacent <a href="#moveunitadjacent"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.moveUnitAdjacent(unit: unitObject, destRankFn?: fun(unit: unitObject, tile: tileObject):integer|false)
  -&gt; destination: tileObject|false
</code></pre></div></div>
<p>Moves the unit to an adjacent tile, choosing the tile based on<br />
 <code class="language-plaintext highlighter-rouge">destRankFn(unit,tile)--&gt; integer or false</code>.
 Lower values mean preferred tiles, false means unit can’t move to tile.
 Default is prefer empty squares before squares with units on them.
 Returns the tile the unit is moved to, or false if the unit can’t be moved.</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">destRankFn</code> — If the unit can be placed on the tile, return an integer (lower being more preferred).  If it can’t, return false.</p>

<p>@<em>return</em> <code class="language-plaintext highlighter-rouge">destination</code> — The tile the unit was moved to, or false if it could not be moved.</p>

<div class="language-lua highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">-- A tile object is a data type provided by the Test of Time Patch Project Lua Interpreter. It represents a map "square" in the game, and provides a means of interacting with it.</span>
<span class="c1">-- [Lua Function Reference](https://forums.civfanatics.com/threads/totpp-lua-function-reference.557527/#tile)</span>
<span class="n">destination</span><span class="p">:</span>
    <span class="err">\|</span> <span class="kc">false</span>
</code></pre></div></div>
<h3 id="unprotecttile">
  
  
    unprotectTile <a href="#unprotecttile"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.unprotectTile(tile: tileObject, isProtectingUnit: fun(unit: unitObject):boolean, isProtectedUnit: fun(unit: unitObject):boolean, isProtectedTile: fun(tile: tileObject):boolean, destRankFn?: fun(unit: unitObject, tile: tileObject):integer|false)
</code></pre></div></div>
<p><code class="language-plaintext highlighter-rouge">isProtectingUnit(unit)--&gt;bool</code>
 if true, the unit is a ‘protecting’ unit that must be moved
 e.g. air units with range &gt;= 2 in air protected stacks
 <br /><code class="language-plaintext highlighter-rouge">isProtectedUnit(unit)--&gt;bool</code>
 if true, the unit is a ‘protected’ unit, meaning that ‘protecting’ units
 must be moved off square if one is on it
 e.g. land and sea units in air protected stacks
 <br /><code class="language-plaintext highlighter-rouge">isProtectedTile(tile)--&gt;bool</code>
 if true, the protecting unit must be moved, if not it can stay
 e.g. clear tiles are true in air protected stacks,
 cities, airbases, tiles with carriers return false for air protected stacks
 <br /><code class="language-plaintext highlighter-rouge">destRankFn(unit,tile)--&gt; integer or false</code>.
 The choice on where to move protecting units is based on this function.
 Lower values mean preferred tiles, false means unit can’t move to tile.
 Default is prefer empty squares before squares with units on them.</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">isProtectingUnit</code> — Returns true if the unit is a “protecting” unit that must be moved, false otherwise.</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">isProtectedUnit</code> — Returns true if the unit is a unit that can be “protected” by protecting units, false otherwise.</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">isProtectedTile</code> — Returns true if units can be protected on this tile, false otherwise.</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">destRankFn</code> — If the unit can be placed on the tile, return an integer (lower being more preferred).  If it can’t, return false.</p>
<h3 id="clearairprotection">
  
  
    clearAirProtection <a href="#clearairprotection"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.clearAirProtection(tile: tileObject)
</code></pre></div></div>
<p>Clears standard Civ II Air protection from the tile.  That is, moves air units off the tile if they prevent ground/sea units on the tile from being attacked</p>
<h3 id="clearadjacentairprotection">
  
  
    clearAdjacentAirProtection <a href="#clearadjacentairprotection"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.clearAdjacentAirProtection(unit: unitObject)
</code></pre></div></div>
<p>Clears air protection for tiles adjacent to the unit, as long as those tiles are not owned by the unit’s owner.
In the Lua Scenario Template, simpleSettings.lua has the following settings:</p>
<div class="language-lua highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">simpleSettings</span><span class="p">.</span><span class="n">clearAdjacentAirProtectionAI</span> <span class="o">=</span> <span class="kc">false</span>
<span class="n">simpleSettings</span><span class="p">.</span><span class="n">clearAdjacentAirProtectionHuman</span> <span class="o">=</span> <span class="kc">false</span>
</code></pre></div></div>
<h3 id="cityradiustiles">
  
  
    cityRadiusTiles <a href="#cityradiustiles"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.cityRadiusTiles(input: table|cityObject|tileObject)
  -&gt; table&lt;integer, tileObject&gt;
</code></pre></div></div>
<p>Returns a table of tiles around a center tile, the 
  size of a city ‘footprint’.  The indices are listed below
  and are based on how city.workers determines which tiles
  are worked.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  #       #       #       #       #
      #       #       #       #       #
  #       #       #       #       #
      #       20      13      #       #
  #       12      8       9       #
      19      7       1       14      #
  #       6       21      2       #
      18      5       3       15      #
  #       11      4       10      #
      #       17      16      #       #
  #       #       #       #       #
      #       #       #       #       #
</code></pre></div></div>

<p>If the center is at the edge of the map, absent tiles have nil values</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">input</code> — If table, the table must be tile coordinates.</p>
<h3 id="gettilesinradius">
  
  
    getTilesInRadius <a href="#gettilesinradius"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.getTilesInRadius(centre: table|tileObject, radius: integer, minRadius?: integer, maps?: integer|table)
  -&gt; table&lt;integer, tileObject&gt;
</code></pre></div></div>
<p>Produces a table of nearby tiles to centre.<br />
Lower index means closer tile (or, same distance),
not counting z axis if multiple maps are used.
Keys start at 1, no missing indices (if a tile doesn’t exist, there
won’t be an empty entry, the next tile will use that entry).</p>

<p>centre = a tile or table of coordinates 
    central til around which we will find tiles</p>

<p>radius = integer
    is the distance (in tiles, not coordinates) from the centre to the furthest
    tiles desired</p>

<p>minRadius = integer
    is the distance in tiles from the centre for the nearest tile to be
    included (e.g. if you don’t want centre itself, set minRadius to 1, if you
    want a ring only, set minRadius to radius)</p>

<p>maps = nil or integer in 0-3 or table of integers
    if nil, only get tiles from the map that centre is on
    if integer, only get tiles from that map
    if table of integers, tiles from all maps listed
    e.g. {1,3} means get tiles from maps 1 and 3</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">centre</code> — if table, must be a table of coordinates.</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">radius</code> — The number of tiles out you want to get.</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">minRadius</code> — 0 by default</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">maps</code> — if table, values are the maps to get the tiles from.  Same map as <code class="language-plaintext highlighter-rouge">centre</code> by default.</p>
<h3 id="playmusic">
  
  
    playMusic <a href="#playmusic"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.playMusic(fileName: any)
</code></pre></div></div>
<p>Plays music from <code class="language-plaintext highlighter-rouge">fileName</code>, found in the folder set by
 gen.setMusicDirectory (in Lua Scenario Template, this is <MainScenarioDirectory>\Sound).</MainScenarioDirectory></p>

<p>gen.playMusic stops any currently playing game music in order
 to play music, and the music won’t play if the “music” is disabled in the menu.  This is different from playing a sound with civ.playSound, which doesn’t stop any existing music.</p>
<h3 id="issingleplayergame">
  
  
    isSinglePlayerGame <a href="#issingleplayergame"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.isSinglePlayerGame()
  -&gt; boolean
</code></pre></div></div>
<p>Returns true if there is exactly one human player, false otherwise.</p>
<h3 id="nearbyunits">
  
  
    nearbyUnits <a href="#nearbyunits"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.nearbyUnits(center: table|tileObject, radius: integer, maps?: integer|table)
  -&gt; fun():unitObject
</code></pre></div></div>
<p>gen.nearbyUnits(center,radius,maps={0,1,2,3}) –&gt; iterator providing units
provides an iterator over all the units within radius
tiles of the center tile
maps = nil or integer in 0-3 or table of integers
    if integer, only get units from tiles from that map
    if table of integers, units from all maps listed
    e.g. {1,3} means get units from maps 1 and 3
    if nil, get units from all maps (this choice is for backwards compatibility)</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">center</code> — If table, must be a table of coordinates.</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">radius</code> — How far away from the center you wish to get units.</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">maps</code> — If integer, get units from that map. If table, values are the maps to get the tiles from.  Get from all maps by default (for backwards compatibility).</p>
<h3 id="makeallowedterrainfunction">
  
  
    makeAllowedTerrainFunction <a href="#makeallowedterrainfunction"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.makeAllowedTerrainFunction(allowedTilesList: table&lt;integer, integer&gt;|nil)
  -&gt; fun(tile: tileObject):boolean
</code></pre></div></div>
<p>gen.makeAllowedTerrainFunction(allowedTilesTable) –&gt; function(tile)–&gt;bool
Converts a table of integer values into a function that returns
true if tile.baseTerrain.type is a value in the table, and false otherwise.
If nil is entered, all terrain is allowed.</p>
<h3 id="nearbyunoccupiedtiles">
  
  
    nearbyUnoccupiedTiles <a href="#nearbyunoccupiedtiles"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.nearbyUnoccupiedTiles(centerTile: table|tileObject, distance: integer, allowedTiles: fun(tile: tileObject):boolean|table&lt;integer, integer&gt;)
  -&gt; table&lt;integer, tileObject&gt;
</code></pre></div></div>
<p>Returns the table of nearby unoccupied tiles.
Indices start at 1 without gaps, but tiles are in no particular order.
<code class="language-plaintext highlighter-rouge">centerTile</code> is the tile that you want to find other tiles near to (on same map).
<code class="language-plaintext highlighter-rouge">distance</code> is the number of squares away that you can search.
<code class="language-plaintext highlighter-rouge">allowedTiles</code> is either a table of integers such that a tile is acceptable if
<code class="language-plaintext highlighter-rouge">possibleTile.baseTerrain.type</code> appears as a value in the table
or a function <code class="language-plaintext highlighter-rouge">allowedTiles(possibleTile)--&gt;bool</code>
that returns true if the tile is allowed, and false if not.
If <code class="language-plaintext highlighter-rouge">nil</code> is entered, all terrain is allowed.</p>
<h3 id="getrandomnearbyunoccupiedtile">
  
  
    getRandomNearbyUnoccupiedTile <a href="#getrandomnearbyunoccupiedtile"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.getRandomNearbyUnoccupiedTile(centerTile: table|tileObject, distance: integer, allowedTiles: fun(tile: tileObject):boolean|table&lt;integer, integer&gt;)
  -&gt; tileObject|nil
</code></pre></div></div>
<p>Returns a random unoccupied square near tile, on the same map.  Returns nil if there is no such tile.
<code class="language-plaintext highlighter-rouge">centerTile</code> is the tile that you want to find other tiles near to (on same map).
<code class="language-plaintext highlighter-rouge">distance</code> is the number of squares away that you can search.
<code class="language-plaintext highlighter-rouge">allowedTiles</code> is either a table of integers such that a tile is acceptable if
<code class="language-plaintext highlighter-rouge">possibleTile.baseTerrain.type</code> appears as a value in the table
or a function <code class="language-plaintext highlighter-rouge">allowedTiles(possibleTile)--&gt;bool</code>
that returns true if the tile is allowed, and false if not.
If <code class="language-plaintext highlighter-rouge">nil</code> is entered, all terrain is allowed.</p>
<h3 id="nearbyopentilesfortribe">
  
  
    nearbyOpenTilesForTribe <a href="#nearbyopentilesfortribe"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.nearbyOpenTilesForTribe(centerTile: table|tileObject, distance: integer, allowedTiles: fun(tile: tileObject):boolean|table&lt;integer, integer&gt;, tribe: tribeObject)
  -&gt; table&lt;integer, tileObject&gt;
</code></pre></div></div>
<p>gen.nearbyOpenTilesForTribe(centerTile,distance,allowedTiles,tribe)
Returns a table of nearby tiles, on the same map, that are either unoccupied or only has units/city of the <code class="language-plaintext highlighter-rouge">tribe</code>
Indices start at 1 without gaps, but tiles are in no particular order.
<code class="language-plaintext highlighter-rouge">centerTile</code> is the tile that you want to find other tiles near to (on same map).
<code class="language-plaintext highlighter-rouge">distance</code> is the number of squares away that you can search.
<code class="language-plaintext highlighter-rouge">allowedTiles</code> is either a table of integers such that a tile is acceptable if
<code class="language-plaintext highlighter-rouge">possibleTile.baseTerrain.type</code> appears as a value in the table
or a function <code class="language-plaintext highlighter-rouge">allowedTiles(possibleTile)--&gt;bool</code>
that returns true if the tile is allowed, and false if not.
If <code class="language-plaintext highlighter-rouge">nil</code> is entered, all terrain is allowed.
<code class="language-plaintext highlighter-rouge">tribe</code> the tribe that is searching for open tiles.</p>
<h3 id="getrandomnearbyopentilefortribe">
  
  
    getRandomNearbyOpenTileForTribe <a href="#getrandomnearbyopentilefortribe"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.getRandomNearbyOpenTileForTribe(centerTile: table|tileObject, distance: integer, allowedTiles: fun(tile: tileObject):boolean|table&lt;integer, integer&gt;, tribe: tribeObject)
  -&gt; tileObject|nil
</code></pre></div></div>
<p>Returns a random square near tile, on the same map, that is either empty or only has units/city of the same tribe.  Returns nil if there is no such tile.
<code class="language-plaintext highlighter-rouge">centerTile</code> is the tile that you want to find other tiles near to (on same map).
<code class="language-plaintext highlighter-rouge">distance</code> is the number of squares away that you can search.
<code class="language-plaintext highlighter-rouge">allowedTiles</code> is either a table of integers such that a tile is acceptable if
<code class="language-plaintext highlighter-rouge">possibleTile.baseTerrain.type</code> appears as a value in the table
or a function <code class="language-plaintext highlighter-rouge">allowedTiles(possibleTile)--&gt;bool</code>
that returns true if the tile is allowed, and false if not.
If <code class="language-plaintext highlighter-rouge">nil</code> is entered, all terrain is allowed.
<code class="language-plaintext highlighter-rouge">tribe</code> the tribe that is searching for open tiles.</p>
<h3 id="gettileproduction">
  
  
    getTileProduction <a href="#gettileproduction"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.getTileProduction(tile: table|tileObject, city: cityObject, ignoreCustomCosmic?: boolean)
  -&gt; foodProduction: integer
  2. shieldProduction: integer
  3. tradeProduction: integer
</code></pre></div></div>
<p>gen.getTileProduction(tile,city) –&gt; integer (food), integer(shields), integer(trade)
 Returns the tile production values, presuming that the city
 given is the one working the tile.
 That is to say, returns the values that would be seen on the tile in the city window.
 Doesn’t check if that city is actually working the tile.</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">ignoreCustomCosmic</code> — If true, do not use the customCosmic city customisation to get production, refer to the current settings of terrain, baseTerrain and roadTrade.  If false or nil, refer to customCosmic module if it is available (otherwise, refer to current settings of terrain, baseTerrain and roadTrade).</p>
<h3 id="computebaseproduction">
  
  
    computeBaseProduction <a href="#computebaseproduction"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.computeBaseProduction(city: cityObject, ignoreCustomCosmic?: boolean)
  -&gt; foodProduction: integer
  2. shieldProduction: integer
  3. tradeProduction: integer
</code></pre></div></div>
<p>Computes the resources harvested by the city from the terrain.
 Includes superhighway/supermarket/railroad bonus, but not factories/power plants.</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">ignoreCustomCosmic</code> — If true, do not use the customCosmic city customisation to get production, refer to the current settings of terrain, baseTerrain and roadTrade.  If false or nil, refer to customCosmic module if it is available (otherwise, refer to current settings of terrain, baseTerrain and roadTrade).</p>
<h3 id="spendmovementpoints">
  
  
    spendMovementPoints <a href="#spendmovementpoints"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.spendMovementPoints(unit: unitObject, points: number, multiplier?: integer, maxSpent?: integer, minSpent?: integer)
</code></pre></div></div>
<p>Increases the expended movement of the <code class="language-plaintext highlighter-rouge">unit</code> by <code class="language-plaintext highlighter-rouge">points</code>.
 If the unit has a range (either natural or through <code class="language-plaintext highlighter-rouge">gen.activateRangeForLandAndSea</code>) and
 uses up all its movement for the current turn, its domainSpec is incremented by 1
 and the unit is killed if it is out of range.
 (Exceptions: if the unit is the currently active unit and is a land or sea unit
 with range, it won’t increment domainSpec, since that is caught immediately
 afterward with onFinalOrderGiven. A unit that has already spent its full movement allowance before the modifier is applied also won’t increment)
 By default, ‘full’ unit movement points are used, but a different <code class="language-plaintext highlighter-rouge">multiplier</code> can be specified 
 e.g. 1 if you want to spend atomic movement points.
 If points is negative, movement is restored to the unit.
 If points is not an integer, math.floor(points*multiplier) is used.
 Final move spent is bound between maxSpent and minSpent, which are by default
 255 and 0 respectively.</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">maxSpent</code> — default is 255</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">minSpent</code> — default is 0</p>
<h3 id="getbearing">
  
  
    getBearing <a href="#getbearing"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.getBearing(compassPoint: table|cityObject|tileObject|unitObject, compassCentre: table|cityObject|tileObject|unitObject)
  -&gt; bearing: ""|"E"|"N"|"NE"|"NW"...(+4)
</code></pre></div></div>
<p>Returns one of “N”,”S”,”E”,”W”,”NW”,”NE”,”SW”,”SE”,”” based on the locations
 of the compassPoint and compassCentre.  “” is returned if compassPoint and compassCentre are the same tile.<br /><br />
 e.g. <code class="language-plaintext highlighter-rouge">gen.getBearing(Madrid,Paris) --&gt; SW</code>
      Madrid is South-West of Paris
      We’re finding the location of Madrid relative to Paris, hence
      Paris is at the compass centre and we’re looking for the
      bearing of the compass point in the direction of Madrid
      gen.getBearing(Paris,Madrid) –&gt; NE
      Paris is North-East of Madrid
 compassPoint and compassCentre can be units, cities, or tiles
 <br /><br />Inspired by Pablostuka</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">compassPoint</code> — Can be:<br /><br />tileObject<br /><br />unitObject<br /><br />cityObject<br /><br />{[1]=xCoord,[2]=yCoord,[3]=zCoord}<br />Converted to civ.getTile(xCoord,yCoord,zCoord) <br /><br />{[1]=xCoord,[2]=yCoord}<br />Converted to civ.getTile(xCoord,yCoord,0)<br /><br />{x=xCoord,y=yCoord,z=zCoord}<br />Converted to civ.getTile(xCoord,yCoord,zCoord) <br /><br />{x=xCoord,y=yCoord}<br />Converted to civ.getTile(xCoord,yCoord,0)</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">compassCentre</code> — Can be:<br /><br />tileObject<br /><br />unitObject<br /><br />cityObject<br /><br />{[1]=xCoord,[2]=yCoord,[3]=zCoord}<br />Converted to civ.getTile(xCoord,yCoord,zCoord) <br /><br />{[1]=xCoord,[2]=yCoord}<br />Converted to civ.getTile(xCoord,yCoord,0)<br /><br />{x=xCoord,y=yCoord,z=zCoord}<br />Converted to civ.getTile(xCoord,yCoord,zCoord) <br /><br />{x=xCoord,y=yCoord}<br />Converted to civ.getTile(xCoord,yCoord,0)</p>

<div class="language-lua highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">bearing</span><span class="p">:</span>
    <span class="err">\|</span> <span class="s2">"N"</span>
    <span class="err">\|</span> <span class="s2">"S"</span>
    <span class="err">\|</span> <span class="s2">"E"</span>
    <span class="err">\|</span> <span class="s2">"W"</span>
    <span class="err">\|</span> <span class="s2">"NW"</span>
    <span class="err">\|</span> <span class="s2">"NE"</span>
    <span class="err">\|</span> <span class="s2">"SW"</span>
    <span class="err">\|</span> <span class="s2">"SE"</span>
    <span class="err">\|</span> <span class="s2">""</span>
</code></pre></div></div>
<h3 id="isinteger">
  
  
    isInteger <a href="#isinteger"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.isInteger(item: any)
  -&gt; boolean
</code></pre></div></div>
<p>Returns true if the item is an integer, and false otherwise.</p>
<h3 id="getmaptransportflagnumber">
  
  
    getMapTransportFlagNumber <a href="#getmaptransportflagnumber"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.getMapTransportFlagNumber(map1: integer|mapObject, map2: integer|mapObject, all?: boolean, functionName?: string)
  -&gt; boolean|integer|table
</code></pre></div></div>
<p>Finds the number of a map transporter relationship 
 (or a table of all relationships, if <code class="language-plaintext highlighter-rouge">all</code> is true) which allows
 transporter travel between <code class="language-plaintext highlighter-rouge">map1</code> and <code class="language-plaintext highlighter-rouge">map2</code>, with the first
 relationship in @MAP_TRANSPORT_RELATIONSHIPS being represented
 by 1.  If <code class="language-plaintext highlighter-rouge">map1</code> and <code class="language-plaintext highlighter-rouge">map2</code> are the same map, return <code class="language-plaintext highlighter-rouge">true</code>, even
 if there is a relationship for that.  If there is no transport
 relationship between the two maps, false is returned.</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">all</code> — If true, return a table of all eligible relationship numbers (unless maps are the same, or there are none).</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">functionName</code> — If present, passes along a functionName to be displayed in case of error (particularly if changeRules.lua module is not found)</p>
<h3 id="getnumberofterraintypes">
  
  
    getNumberOfTerrainTypes <a href="#getnumberofterraintypes"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.getNumberOfTerrainTypes(map: any)
  -&gt; unknown
</code></pre></div></div>
<h3 id="getstate">
  
  
    getState <a href="#getstate"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.getState()
  -&gt; boolean|string|number|table&lt;string|number, boolean|string|number|table&gt;
</code></pre></div></div>
<p>Returns the state table submitted to <code class="language-plaintext highlighter-rouge">gen.linkState</code>.
 If you’re writing a module intended for use by others,
 it is recommended that you use a linkState system with a 
 sub table, so that table keys don’t accidentally conflict</p>
<h3 id="getephemeraltable">
  
  
    getEphemeralTable <a href="#getephemeraltable"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.getEphemeralTable()
  -&gt; table
</code></pre></div></div>
<p>The ephemeralTable is a table for shared data.
 Since it is not saved, it doesn’t have to be serializeable,
 so you don’t have to worry about making keys and
 values text or numbers.
 However, the information will not be preserved after a save and load.</p>
<h3 id="iterateunittypes">
  
  
    iterateUnitTypes <a href="#iterateunittypes"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.iterateUnitTypes()
  -&gt; fun():unitTypeObject
</code></pre></div></div>
<p>Returns an iterator for all unitType objects.</p>
<h3 id="iterateimprovements">
  
  
    iterateImprovements <a href="#iterateimprovements"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.iterateImprovements()
  -&gt; fun():improvementObject
</code></pre></div></div>
<p>Returns an iterator for all improvement objects.</p>
<h3 id="iteratewonders">
  
  
    iterateWonders <a href="#iteratewonders"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.iterateWonders()
  -&gt; fun():wonderObject
</code></pre></div></div>
<p>Returns an iterator for all wonder objects.</p>
<h3 id="iteratebaseterrain">
  
  
    iterateBaseTerrain <a href="#iteratebaseterrain"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.iterateBaseTerrain()
  -&gt; fun():baseTerrainObject
</code></pre></div></div>
<p>Returns an iterator for all baseTerrain objects (for maps that are
in the game).</p>
<h3 id="iterateterrain">
  
  
    iterateTerrain <a href="#iterateterrain"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.iterateTerrain()
  -&gt; fun():terrainObject
</code></pre></div></div>
<p>Returns an iterator for all terrain objects (for maps that
are in the game).</p>
<h3 id="isroadtradebonus">
  
  
    isRoadTradeBonus <a href="#isroadtradebonus"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.isRoadTradeBonus(baseTerrain: baseTerrainObject)
  -&gt; boolean
</code></pre></div></div>
<p>Checks if the <code class="language-plaintext highlighter-rouge">baseTerrain</code> gets +1 trade production from a road.</p>
<h3 id="giveroadtradebonus">
  
  
    giveRoadTradeBonus <a href="#giveroadtradebonus"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.giveRoadTradeBonus(baseTerrain: baseTerrainObject)
</code></pre></div></div>
<p>Gives the <code class="language-plaintext highlighter-rouge">baseTerrain</code> +1 trade production from a road.</p>
<h3 id="removeroadtradebonus">
  
  
    removeRoadTradeBonus <a href="#removeroadtradebonus"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.removeRoadTradeBonus(baseTerrain: baseTerrainObject)
</code></pre></div></div>
<p>Removes the +1 trade production from a road for <code class="language-plaintext highlighter-rouge">baseTerrain</code>.</p>
<h3 id="fullhealthmovementallowance-1">
  
  
    fullHealthMovementAllowance <a href="#fullhealthmovementallowance-1"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.fullHealthMovementAllowance(unit: unitObject)
  -&gt; atomicMovementPoints: integer
</code></pre></div></div>
<p>Returns the movement allowance of a unit after
 taking into account Nuclear Power tech, Magellan’s Expedition, and Lighthouse.
 Returns “atomic” movement points (that is, the movement recorded by <code class="language-plaintext highlighter-rouge">unit.moveSpent</code>, or “regular” movement points * <code class="language-plaintext highlighter-rouge">totpp.movementMultipliers.aggregate</code></p>
<h2 id="table-tools">
  
  
    Table Tools <a href="#table-tools"><span class="self-link">&#128279</span></a>
  
  
</h2>
    

<p>These functions can be helpful when working with tables.</p>
<h3 id="intable">
  
  
    inTable <a href="#intable"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.inTable(object: any, table: table)
  -&gt; boolean
</code></pre></div></div>
<p>Returns <code class="language-plaintext highlighter-rouge">true</code> if the <code class="language-plaintext highlighter-rouge">object</code> is a value in the <code class="language-plaintext highlighter-rouge">table</code>, <code class="language-plaintext highlighter-rouge">false</code> otherwise
comment</p>
<h3 id="copytable">
  
  
    copyTable <a href="#copytable"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>gen.copyTable --&gt; function
</code></pre></div></div>
<h3 id="copytablewithmetatable">
  
  
    copyTableWithMetatable <a href="#copytablewithmetatable"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.copyTableWithMetatable(table: any)
  -&gt; any
</code></pre></div></div>
<p>Constructs (and returns) a new table with the same keys as the input, 
 as well as the same metatables. (The metatable is not copied, so that
 customData is still recognised as the correct data.)
 Tables within the table are also copied (along with their metatables).
 Note: although this is meant for copying tables, 
 the way the function is constructed, any value can be input and
 returned.</p>
<h3 id="isempty">
  
  
    isEmpty <a href="#isempty"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.isEmpty(table: table)
  -&gt; boolean
</code></pre></div></div>
<p>Returns true if the table has no entries, and false otherwise.
(I got this idea from stackoverflow, https://stackoverflow.com/questions/1252539/most-efficient-way-to-determine-if-a-lua-table-is-empty-contains-no-entries )
comment</p>
<h3 id="mergetablevalues">
  
  
    mergeTableValues <a href="#mergetablevalues"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.mergeTableValues(...table)
  -&gt; table
</code></pre></div></div>
<p>Accepts an arbitrary number of tables as
  arguments and returns a table with all
  the values from all the tables.
  Table keys are lost, and replaced by
  integers starting at 1.
  Duplicate values will appear multiple times.</p>
<h3 id="cleargapsinarray">
  
  
    clearGapsInArray <a href="#cleargapsinarray"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.clearGapsInArray(table: table, lowestValue?: integer)
</code></pre></div></div>
<p>Re-indexes all integer keys and values
 in a table, so that there are no gaps.
 Starts at lowestValue (1 by default), and maintains order
 of integer keys
 Non integer keys (including other numbers)
 and integers below lowestValue are left unchanged</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">lowestValue</code> — default is 1</p>
<h3 id="makearrayoneton">
  
  
    makeArrayOneToN <a href="#makearrayoneton"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.makeArrayOneToN(table: table)
</code></pre></div></div>
<p>All integer values in the table are re-indexed so that they 
 start at 1 and proceed without gaps.
 All other keys are ignored.</p>
<h3 id="tablewrap">
  
  
    tableWrap <a href="#tablewrap"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.tableWrap(item: any, needsWrapFn: fun(item: any):boolean)
  -&gt; table
</code></pre></div></div>
<p>gen.tableWrap(item)–&gt;table
 If item is a table, return the table
 otherwise, return a table with the item as element 1.
 This is useful so that functions can accept either a single
 element or a table of such elements.
  <code class="language-plaintext highlighter-rouge">needsWrapFn(item)--&gt;boolean</code>
  If true, item needs a wrapping table, if not, it doesn’t
  useful if you can distinguish between tables that represent other
  data structures, and tables of such data structures.
  By default, returns true if the item isn’t a table, and false if it is.</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">needsWrapFn</code> — Default: returns true if item is not a table, and false if it is.</p>
<h3 id="errorfornilkey">
  
  
    errorForNilKey <a href="#errorfornilkey"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.errorForNilKey(table: table, tableName: string)
</code></pre></div></div>
<p>Changes a table’s metatable, so that an error is 
 generated when a key with a nil
 value is accessed from the table.
 Useful for debugging in certain circumstances.</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">tableName</code> — the name for the table you want to be used in error displays.</p>
<h3 id="nonewkey">
  
  
    noNewKey <a href="#nonewkey"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.noNewKey(table: table, tableName: string)
</code></pre></div></div>
<p>Changes a table’s metatable, so that an error is 
 generated when assigning a value to a key 
 which doesn’t already exist in that table.
 Useful for debugging in certain circumstances.</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">tableName</code> — the name for the table you want to be used in error displays.</p>
<h3 id="isstatesavable">
  
  
    isStateSavable <a href="#isstatesavable"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.isStateSavable(item: any)
  -&gt; boolean
</code></pre></div></div>
<p>Determines if an item is “state savable” , which is to say that
 it can be added to the state table (the table containing the data that persists
 after saving and loading) in its current state.
  An item is “state savable” if it is either
  <br />nil
  <br />a number
  <br />a string
  <br />a boolean, or
  <br />a table with keys that are numbers or strings
    and with values that are also state savable
  Note: table can’t have a metatable
comment</p>
<h3 id="tabletostring">
  
  
    tableToString <a href="#tabletostring"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.tableToString(table: any)
  -&gt; string
</code></pre></div></div>
<p>gen.tableToString(table)
 Returns a string showing values in a table.</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">table</code> — Although this is meant to be used on a table, any kind of value can be provided.  For non-table values, the <code class="language-plaintext highlighter-rouge">tostring</code> command is used.</p>

<p>@<em>return</em> — A representation of the table.</p>
<h3 id="makedatatable">
  
  
    makeDataTable <a href="#makedatatable"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.makeDataTable(inputTable?: table, tableName?: string)
  -&gt; dataTable
</code></pre></div></div>
<p>Makes a ‘dataTable’, which functions as a table, but with the ability to disable
  overwriting values for existing keys,
  adding new keys, and
  requesting nil values (values for keys that don’t exist).
  (This functionality is achieved with a metatable.)
  The <code class="language-plaintext highlighter-rouge">tableName</code> is a name for the table when an error is generated.</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">inputTable</code> — The table to be made into a data table.  The table actually transformed, but it is also returned, if that is convenient.  Default is an empty table.</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">tableName</code> — Default is ‘unnamed data table’</p>
<h3 id="forbidreplacement">
  
  
    forbidReplacement <a href="#forbidreplacement"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.forbidReplacement(dataTable: dataTable)
</code></pre></div></div>
<p>Changes the <code class="language-plaintext highlighter-rouge">dataTable</code> so that non-nil values can not be changed.</p>
<h3 id="allowreplacement">
  
  
    allowReplacement <a href="#allowreplacement"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.allowReplacement(dataTable: dataTable)
</code></pre></div></div>
<p>Changes the <code class="language-plaintext highlighter-rouge">dataTable</code> so that non-nil values can be changed.</p>
<h3 id="forbidnewkeys">
  
  
    forbidNewKeys <a href="#forbidnewkeys"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.forbidNewKeys(dataTable: dataTable)
</code></pre></div></div>
<p>Changes the <code class="language-plaintext highlighter-rouge">dataTable</code> so that values can’t be assigned to keys which currently have a nil value.</p>
<h3 id="allownewkeys">
  
  
    allowNewKeys <a href="#allownewkeys"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.allowNewKeys(dataTable: dataTable)
</code></pre></div></div>
<p>Changes the <code class="language-plaintext highlighter-rouge">dataTable</code> so that values can once again be assigned to keys which currently have a nil value.</p>
<h3 id="forbidnilvalueaccess">
  
  
    forbidNilValueAccess <a href="#forbidnilvalueaccess"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.forbidNilValueAccess(dataTable: dataTable)
</code></pre></div></div>
<p>Changes the <code class="language-plaintext highlighter-rouge">dataTable</code> so that an error is generated if the program tries to access a key which currently has a nil value.</p>
<h3 id="allownilvalueaccess">
  
  
    allowNilValueAccess <a href="#allownilvalueaccess"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.allowNilValueAccess(dataTable: dataTable)
</code></pre></div></div>
<p>Changes the <code class="language-plaintext highlighter-rouge">dataTable</code> so that an error is not generated if the program tries to access a key which currently has a nil value.</p>
<h3 id="restrictvalues">
  
  
    restrictValues <a href="#restrictvalues"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.restrictValues(dataTable: dataTable, isValidValueFunction: fun(value: any):boolean, makeValidValueFunction: fun(value: any):any)
</code></pre></div></div>
<p>Changes the <code class="language-plaintext highlighter-rouge">dataTable</code> so that only ‘valid’ values can be assigned to the dataTable.  If <code class="language-plaintext highlighter-rouge">isValidValueFunction(value)</code> returns true for a <code class="language-plaintext highlighter-rouge">value</code> assigned to the table, that value is added to the table.  Otherwise, <code class="language-plaintext highlighter-rouge">makeValidValueFunction(value)</code> is assigned to the dataTable (unless an error is generated).</p>
<h3 id="makethresholdtable">
  
  
    makeThresholdTable <a href="#makethresholdtable"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.makeThresholdTable(inputTable: table|nil)
  -&gt; thresholdTable
</code></pre></div></div>
<p>A threshold table is a table where if a numerical key is indexed, and that
 numerical key doesn’t correspond to an index, the value of the largest
 numerical index less than the key is used.
 If there is no numerical index smaller than the key, false is returned.
 (nil is returned for non-numerical keys not in table)
 Use an index -math.huge to provide values for arbitrarily small numerical keys.
 Example:</p>
<div class="language-lua highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">myTable</span> <span class="o">=</span> <span class="n">gen</span><span class="p">.</span><span class="n">makeThresholdTable</span><span class="p">({[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">=-</span><span class="mi">1</span><span class="p">,[</span><span class="mi">0</span><span class="p">]</span><span class="o">=</span><span class="mi">0</span><span class="p">,[</span><span class="mi">1</span><span class="p">]</span><span class="o">=</span><span class="mi">1</span><span class="p">,})</span>
<span class="n">myTable</span><span class="p">[</span><span class="o">-</span><span class="mi">2</span><span class="p">]</span> <span class="c1">--&gt; false</span>
<span class="n">myTable</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="c1">--&gt; -1</span>
<span class="n">myTable</span><span class="p">[</span><span class="o">-</span><span class="mi">0</span><span class="p">.</span><span class="mi">6</span><span class="p">]</span> <span class="c1">--&gt; -1</span>
<span class="n">myTable</span><span class="p">[</span><span class="mi">3</span><span class="p">.</span><span class="mi">5</span><span class="p">]</span><span class="c1">--&gt;1</span>
<span class="n">myTable</span><span class="p">[</span><span class="s2">"three"</span><span class="p">]</span> <span class="c1">--&gt; nil</span>
<span class="n">myTable</span><span class="p">[</span><span class="mi">0</span><span class="p">.</span><span class="mi">5</span><span class="p">]</span><span class="c1">--&gt;0</span>
</code></pre></div></div>
<p>makes an input a threshold table or creates an empty thresholdTable
 Also returns the table value</p>
<h3 id="persistentrandom">
  
  
    persistentRandom <a href="#persistentrandom"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.persistentRandom(key: string)
  -&gt; number
</code></pre></div></div>
<p>gen.persistentRandom(key) –&gt; number between 0 and 1
 Checks the persistentRandom table (within the state table)
 for a value associated with key. If it exits, the value is
 returned.  If it does not exist, a random number between
 0 and 1 is generated, stored in the table under the key,
 and also returned.<br /></p>

<p>Example of use: WWII scenario with seasons
 You may want to have some games where the 1941 spring starts
 in April, and other games where it starts in May.  When
 determining whether to load winter or summer terrain stats during
 1941, you would use gen.persistentRandom(“EarlySpring1941”) &lt; 0.5
 as part of the season check in April, and load summer if the value is less than 0.5
 and winter otherwise.  This way, each when each player starts their
 game that month, they will all either get winter or summer terrain.</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">key</code> — Key for the persistent random value.</p>

<p>@<em>return</em> — number between 0 and 1</p>
<h3 id="clearpersistentrandom">
  
  
    clearPersistentRandom <a href="#clearpersistentrandom"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.clearPersistentRandom(key: string)
</code></pre></div></div>
<p>gen.clearPersistentRandom(key) –&gt; void
 Sets the value associated with the key in the
 persistentRandom table to nil.  This could either be for reuse of the key,
 or to prevent the key from staying in the state table indefinitely.</p>
<h3 id="getpersistentrandomtable">
  
  
    getPersistentRandomTable <a href="#getpersistentrandomtable"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.getPersistentRandomTable()
  -&gt; table&lt;string, number&gt;
</code></pre></div></div>
<p>gen.getPersistentRandomTable() –&gt; table
 Returns the persistentRandom table.</p>
<h3 id="newemptystack">
  
  
    newEmptyStack <a href="#newemptystack"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.newEmptyStack()
  -&gt; stack
</code></pre></div></div>
<p>Creates a stack with no values.</p>
<h3 id="newstack">
  
  
    newStack <a href="#newstack"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.newStack(table?: any)
  -&gt; stack
</code></pre></div></div>
<p>generates a new stack, with integer
values in the table pushed onto the stack
starting from the smallest integer value
(smallest value will be at the bottom of the stack).
All other keys (including non-integer keys) and values are ignored.</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">table</code> — Default is an empty table.</p>
<h3 id="isstack">
  
  
    isStack <a href="#isstack"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.isStack(item: any)
  -&gt; boolean
</code></pre></div></div>
<p>Returns <code class="language-plaintext highlighter-rouge">true</code> if the item is a stack (created by gen.newStack/newEmptyStack)
and <code class="language-plaintext highlighter-rouge">false</code> otherwise.</p>
<h2 id="custom-data-types-and-validation">
  
  
    Custom Data Types and Validation <a href="#custom-data-types-and-validation"><span class="self-link">&#128279</span></a>
  
  
</h2>
    

<p>The functions in this section can be used to check that functions 
have received valid data as arguments, or to create tables
which can only have values assigned to particular keys, and
only specific kinds of values.  These tools can aid development
by causing invalid data to be detected at its source rather than
when it actually breaks the program.<br />
These functions are built on a data structure called the <code class="language-plaintext highlighter-rouge">valueSpecification</code>.  It is a table with the following keys and values:<br /><br />[“nil”] = true or nil<br />If this key is true, the specified value can be nil.<br /><br />[“boolean”] = true, “true”, “false”, or nil<br />If this key is true (boolean value), the specified value can be a boolean.<br />If this key is “true” (string), then the specified value can be true, but not false.<br />If this key is “false” (string), then the specified value can be false, but not true.<br />If this key is nil, the specified value can’t be a boolean.<br /><br />[“function”] = true, string, or nil<br />if this key is true or string, the specified value can be a function.<br />If string, the string describes the function, e.g. <code class="language-plaintext highlighter-rouge">function(unit)--&gt;number</code>.  Value specification checks do not check if the function actually matches the description, only that it is a function.<br />If this key is nil, the specified value can’t be a function.<br /><br />[“number”] = true or nil or {minVal=number/nil, maxVal=number/nil, integer=true/nil}<br />If true, the specified value can be any number.  If nil, the specified value can’t be a number.<br />If table, any number must also be larger than the <code class="language-plaintext highlighter-rouge">minVal</code> (if specified) and smaller than the <code class="language-plaintext highlighter-rouge">maxVal</code> (if specified).  If the <code class="language-plaintext highlighter-rouge">integer</code> key is true, the value must also be an integer.<br /><br />[“string”] = true or {[validString] = truthy} or nil<br />If this key is true, any string is allowed.<br />If it is a table, any string value must be a key in that table, with a truthy (anything other than false/nil) associated value.<br />If nil, the value can’t be a string.<br /><br />[“table”]=string, true, nil, or {[1]=function(table)-&gt;true or string, [2]=string}<br />If the key is a string, any table is accepted, and the string describes the kind of table needed.<br />If true, any table is accepted, and a generated description will be ‘table’.<br />If the key is a table, the table’s value for <code class="language-plaintext highlighter-rouge">1</code> is a function, which returns true if specified value is an acceptable table, and a string describing the problem if it is not.  The value for <code class="language-plaintext highlighter-rouge">2</code> is a string describing the required table, for generated descriptions/errors.<br />If nil, the specified value can’t be a table.<br /><br />[“userdata”] = {[dataTypeName]=isDataTypeFn} or nil<br />The keys to this table are strings that describe acceptable userdata, and the values are functions which return true if the specified value matches the type, and false otherwise.<br />E.g.<br /><code class="language-plaintext highlighter-rouge">{["unitTypeObject"] = civ.isUnitType, ["cityObject"] = civ.isCity}</code><br />Allows unitTypeObjects and cityObjects, but not other kinds of userdata.</p>
<h3 id="valuesatisfiesspecification">
  
  
    valueSatisfiesSpecification <a href="#valuesatisfiesspecification"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.valueSatisfiesSpecification(value: any, valueSpecification: table)
  -&gt; boolean
</code></pre></div></div>
<p>Returns true if value satisfies the valueSpecification, false otherwise.</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">valueSpecification</code> — A valueSpecification is a table with the following keys and values:<br /><br />[“nil”] = true or nil<br />If this key is true, the specified value can be nil.<br /><br />[“boolean”] = true, “true”, “false”, or nil<br />If this key is true (boolean value), the specified value can be a boolean.<br />If this key is “true” (string), then the specified value can be true, but not false.<br />If this key is “false” (string), then the specified value can be false, but not true.<br />If this key is nil, the specified value can’t be a boolean.<br /><br />[“function”] = true, string, or nil<br />if this key is true or string, the specified value can be a function.<br />If string, the string describes the function, e.g. <code class="language-plaintext highlighter-rouge">function(unit)--&gt;number</code>.  Value specification checks do not check if the function actually matches the description, only that it is a function.<br />If this key is nil, the specified value can’t be a function.<br /><br />[“number”] = true or nil or {minVal=number/nil, maxVal=number/nil, integer=true/nil}<br />If true, the specified value can be any number.  If nil, the specified value can’t be a number.<br />If table, any number must also be larger than the <code class="language-plaintext highlighter-rouge">minVal</code> (if specified) and smaller than the <code class="language-plaintext highlighter-rouge">maxVal</code> (if specified).  If the <code class="language-plaintext highlighter-rouge">integer</code> key is true, the value must also be an integer.<br /><br />[“string”] = true or {[validString] = truthy} or nil<br />If this key is true, any string is allowed.<br />If it is a table, any string value must be a key in that table, with a truthy (anything other than false/nil) associated value.<br />If nil, the value can’t be a string.<br /><br />[“table”]=string, true, nil, or {[1]=function(table)-&gt;true or string, [2]=string}<br />If the key is a string, any table is accepted, and the string describes the kind of table needed.<br />If true, any table is accepted, and a generated description will be ‘table’.<br />If the key is a table, the table’s value for <code class="language-plaintext highlighter-rouge">1</code> is a function, which returns true if specified value is an acceptable table, and a string describing the problem if it is not.  The value for <code class="language-plaintext highlighter-rouge">2</code> is a string describing the required table, for generated descriptions/errors.<br />If nil, the specified value can’t be a table.<br /><br />[“userdata”] = {[dataTypeName]=isDataTypeFn} or nil<br />The keys to this table are strings that describe acceptable userdata, and the values are functions which return true if the specified value matches the type, and false otherwise.<br />E.g.<br /><code class="language-plaintext highlighter-rouge">{["unitTypeObject"] = civ.isUnitType, ["cityObject"] = civ.isCity}</code><br />Allows unitTypeObjects and cityObjects, but not other kinds of userdata.</p>
<h3 id="validatefunctionargument">
  
  
    validateFunctionArgument <a href="#validatefunctionargument"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.validateFunctionArgument(value: any, moduleName: string, functionName: string, argumentNumber: integer, argumentName: string, valueSpecification: table, extraInfo?: string)
</code></pre></div></div>
<p>This validates a function’s argument, and provides an error if a bad value is supplied.</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">value</code> — The argument passed to the function.</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">moduleName</code> — The name of the module the function is in (so generated errors are more informative).</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">functionName</code> — The name of the function this function is validating values for (so generated errors are more informative).</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">argumentNumber</code> — The argument which is being validated (so generated errors are more informative).</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">argumentName</code> — The name of the argument which is being validated (so generated errors are more informative).</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">extraInfo</code> — Any extra information that might help in debugging, should an error occur.</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">valueSpecification</code> — A valueSpecification is a table with the following keys and values:<br /><br />[“nil”] = true or nil<br />If this key is true, the specified value can be nil.<br /><br />[“boolean”] = true, “true”, “false”, or nil<br />If this key is true (boolean value), the specified value can be a boolean.<br />If this key is “true” (string), then the specified value can be true, but not false.<br />If this key is “false” (string), then the specified value can be false, but not true.<br />If this key is nil, the specified value can’t be a boolean.<br /><br />[“function”] = true, string, or nil<br />if this key is true or string, the specified value can be a function.<br />If string, the string describes the function, e.g. <code class="language-plaintext highlighter-rouge">function(unit)--&gt;number</code>.  Value specification checks do not check if the function actually matches the description, only that it is a function.<br />If this key is nil, the specified value can’t be a function.<br /><br />[“number”] = true or nil or {minVal=number/nil, maxVal=number/nil, integer=true/nil}<br />If true, the specified value can be any number.  If nil, the specified value can’t be a number.<br />If table, any number must also be larger than the <code class="language-plaintext highlighter-rouge">minVal</code> (if specified) and smaller than the <code class="language-plaintext highlighter-rouge">maxVal</code> (if specified).  If the <code class="language-plaintext highlighter-rouge">integer</code> key is true, the value must also be an integer.<br /><br />[“string”] = true or {[validString] = truthy} or nil<br />If this key is true, any string is allowed.<br />If it is a table, any string value must be a key in that table, with a truthy (anything other than false/nil) associated value.<br />If nil, the value can’t be a string.<br /><br />[“table”]=string, true, nil, or {[1]=function(table)-&gt;true or string, [2]=string}<br />If the key is a string, any table is accepted, and the string describes the kind of table needed.<br />If true, any table is accepted, and a generated description will be ‘table’.<br />If the key is a table, the table’s value for <code class="language-plaintext highlighter-rouge">1</code> is a function, which returns true if specified value is an acceptable table, and a string describing the problem if it is not.  The value for <code class="language-plaintext highlighter-rouge">2</code> is a string describing the required table, for generated descriptions/errors.<br />If nil, the specified value can’t be a table.<br /><br />[“userdata”] = {[dataTypeName]=isDataTypeFn} or nil<br />The keys to this table are strings that describe acceptable userdata, and the values are functions which return true if the specified value matches the type, and false otherwise.<br />E.g.<br /><code class="language-plaintext highlighter-rouge">{["unitTypeObject"] = civ.isUnitType, ["cityObject"] = civ.isCity}</code><br />Allows unitTypeObjects and cityObjects, but not other kinds of userdata.</p>
<h3 id="createdatatype">
  
  
    createDataType <a href="#createdatatype"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.createDataType(dataName: string, specificKeyTable: table&lt;any, table&gt;, generalKeyTable: table&lt;fun(possibleKey: any):boolean, table&gt;, defaultValueTable: table, fixedKeyTable: table&lt;any, true&gt;, aliasKeyTable?: fun(aliasKey: any):any|table&lt;any, any&gt;)
  -&gt; fun(table: table):&lt;newDataType&gt;
  2. fun(item: any):boolean
  3. table
</code></pre></div></div>
<p>Returns functions necessary to create a basic custom data type.  Such a data type
is a table, but uses a metatable to restrict the keys that are allowed to be used,
and the values that can be assigned to those keys.  This way, errors can be
generated when incorrect key-value pairs are assigned to the data type, rather
than when later code receives unexpected values.
<br />Several parameters are defined with “valueSpecification” tables.
A valueSpecification is a table with the following keys and values:<br /><br />[“nil”] = true or nil<br />If this key is true, the specified value can be nil.<br /><br />[“boolean”] = true, “true”, “false”, or nil<br />If this key is true (boolean value), the specified value can be a boolean.<br />If this key is “true” (string), then the specified value can be true, but not false.<br />If this key is “false” (string), then the specified value can be false, but not true.<br />If this key is nil, the specified value can’t be a boolean.<br /><br />[“function”] = true, string, or nil<br />if this key is true or string, the specified value can be a function.<br />If string, the string describes the function, e.g. <code class="language-plaintext highlighter-rouge">function(unit)--&gt;number</code>.  Value specification checks do not check if the function actually matches the description, only that it is a function.<br />If this key is nil, the specified value can’t be a function.<br /><br />[“number”] = true or nil or {minVal=number/nil, maxVal=number/nil, integer=true/nil}<br />If true, the specified value can be any number.  If nil, the specified value can’t be a number.<br />If table, any number must also be larger than the <code class="language-plaintext highlighter-rouge">minVal</code> (if specified) and smaller than the <code class="language-plaintext highlighter-rouge">maxVal</code> (if specified).  If the <code class="language-plaintext highlighter-rouge">integer</code> key is true, the value must also be an integer.<br /><br />[“string”] = true or {[validString] = truthy} or nil<br />If this key is true, any string is allowed.<br />If it is a table, any string value must be a key in that table, with a truthy (anything other than false/nil) associated value.<br />If nil, the value can’t be a string.<br /><br />[“table”]=string, true, nil, or {[1]=function(table)-&gt;true or string, [2]=string}<br />If the key is a string, any table is accepted, and the string describes the kind of table needed.<br />If true, any table is accepted, and a generated description will be ‘table’.<br />If the key is a table, the table’s value for <code class="language-plaintext highlighter-rouge">1</code> is a function, which returns true if specified value is an acceptable table, and a string describing the problem if it is not.  The value for <code class="language-plaintext highlighter-rouge">2</code> is a string describing the required table, for generated descriptions/errors.<br />If nil, the specified value can’t be a table.<br /><br />[“userdata”] = {[dataTypeName]=isDataTypeFn} or nil<br />The keys to this table are strings that describe acceptable userdata, and the values are functions which return true if the specified value matches the type, and false otherwise.<br />E.g.<br /><code class="language-plaintext highlighter-rouge">{["unitTypeObject"] = civ.isUnitType, ["cityObject"] = civ.isCity}</code><br />Allows unitTypeObjects and cityObjects, but not other kinds of userdata.</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">dataName</code> — <br />string<br /><br /> The name of the new data type.</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">specificKeyTable</code> — <br />specificKeyTable={[key]=valueSpecification}<br /><br />Each <code class="language-plaintext highlighter-rouge">key</code> is a key that is allowed in the <code class="language-plaintext highlighter-rouge">dataName</code> data type, and values assigned to the <code class="language-plaintext highlighter-rouge">key</code> must satisfy the corresponding <code class="language-plaintext highlighter-rouge">valueSpecification</code>.</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">generalKeyTable</code> — <br />generalKeyTable = {[function(possibleKey)–&gt;boolean] = valueSpecification} <br /><br /> This table allows for keys of a general form to be used in the data type.  For a <code class="language-plaintext highlighter-rouge">possibleKey</code>, if any <code class="language-plaintext highlighter-rouge">function(possibleKey)</code> returns true, a value can be assigned to <code class="language-plaintext highlighter-rouge">possibleKey</code> as long as it satisfies the valueSpecification.</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">defaultValueTable</code> — <br />defaultValueTable = {[key]=value}<br /><br />When a new <code class="language-plaintext highlighter-rouge">dataName</code> is created, if <code class="language-plaintext highlighter-rouge">key</code> is not specified, assign the corresponding <code class="language-plaintext highlighter-rouge">value</code> to it.</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">fixedKeyTable</code> — <br />fixedKeyTable = {[key]=true}<br /><br /> If <code class="language-plaintext highlighter-rouge">key</code> is in this table, the new <code class="language-plaintext highlighter-rouge">dataName</code> can’t change the value of the key after it is created.</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">aliasKeyTable</code> — <br />aliasKeyTable = {[aliasKey] = key} or<br />fun(aliasKey)-&gt;key<br /><br />If table, and the aliasKey is a key in the aliasKeyTable, then the associated key is used for indexing or assigning instead.<br />If function, all keys have the function applied to them, and the returned value is used as a key instead.</p>

<p>@<em>return</em> — Creates a new instance of the <code class="language-plaintext highlighter-rouge">dataName</code> data type, assigning to it all the table key-value pairs in the <code class="language-plaintext highlighter-rouge">table</code>.<br />Generates an error if any key-value pairs are invalid.</p>

<p>@<em>return</em> — Checks if <code class="language-plaintext highlighter-rouge">item</code> is an instance of the <code class="language-plaintext highlighter-rouge">dataName</code> data type, returns true if it is, and false otherwise.</p>

<p>@<em>return</em> — The <a href="https://www.tutorialspoint.com/lua/lua_metatables.htm">metatable</a> for the <code class="language-plaintext highlighter-rouge">dataName</code> data type.  This is available in case you want to make more customizations to the data type.</p>
<h3 id="valuespecforcustomdata">
  
  
    valueSpecForCustomData <a href="#valuespecforcustomdata"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.valueSpecForCustomData(isItemFn: fun(item: any):boolean, failureDescription: string, itemDescription: string)
  -&gt; table
</code></pre></div></div>
<p>Creates a value specification for custom data created by <code class="language-plaintext highlighter-rouge">gen.createDataType</code> (or any other data type that uses a table as the base).</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">isItemFn</code> — A function that returns true if the item is the appropriate data type, and false otherwise.</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">failureDescription</code> — A message explaining that the item is not the appropriate data type.</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">itemDescription</code> — A description of the data type.</p>
<h3 id="describeallowablevalues">
  
  
    describeAllowableValues <a href="#describeallowablevalues"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.describeAllowableValues(valueSpecification: table)
  -&gt; string
</code></pre></div></div>
<p>Takes a valueSpecification, and returns a string describing the valid values.</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">valueSpecification</code> — A valueSpecification is a table with the following keys and values:<br /><br />[“nil”] = true or nil<br />If this key is true, the specified value can be nil.<br /><br />[“boolean”] = true, “true”, “false”, or nil<br />If this key is true (boolean value), the specified value can be a boolean.<br />If this key is “true” (string), then the specified value can be true, but not false.<br />If this key is “false” (string), then the specified value can be false, but not true.<br />If this key is nil, the specified value can’t be a boolean.<br /><br />[“function”] = true, string, or nil<br />if this key is true or string, the specified value can be a function.<br />If string, the string describes the function, e.g. <code class="language-plaintext highlighter-rouge">function(unit)--&gt;number</code>.  Value specification checks do not check if the function actually matches the description, only that it is a function.<br />If this key is nil, the specified value can’t be a function.<br /><br />[“number”] = true or nil or {minVal=number/nil, maxVal=number/nil, integer=true/nil}<br />If true, the specified value can be any number.  If nil, the specified value can’t be a number.<br />If table, any number must also be larger than the <code class="language-plaintext highlighter-rouge">minVal</code> (if specified) and smaller than the <code class="language-plaintext highlighter-rouge">maxVal</code> (if specified).  If the <code class="language-plaintext highlighter-rouge">integer</code> key is true, the value must also be an integer.<br /><br />[“string”] = true or {[validString] = truthy} or nil<br />If this key is true, any string is allowed.<br />If it is a table, any string value must be a key in that table, with a truthy (anything other than false/nil) associated value.<br />If nil, the value can’t be a string.<br /><br />[“table”]=string, true, nil, or {[1]=function(table)-&gt;true or string, [2]=string}<br />If the key is a string, any table is accepted, and the string describes the kind of table needed.<br />If true, any table is accepted, and a generated description will be ‘table’.<br />If the key is a table, the table’s value for <code class="language-plaintext highlighter-rouge">1</code> is a function, which returns true if specified value is an acceptable table, and a string describing the problem if it is not.  The value for <code class="language-plaintext highlighter-rouge">2</code> is a string describing the required table, for generated descriptions/errors.<br />If nil, the specified value can’t be a table.<br /><br />[“userdata”] = {[dataTypeName]=isDataTypeFn} or nil<br />The keys to this table are strings that describe acceptable userdata, and the values are functions which return true if the specified value matches the type, and false otherwise.<br />E.g.<br /><code class="language-plaintext highlighter-rouge">{["unitTypeObject"] = civ.isUnitType, ["cityObject"] = civ.isCity}</code><br />Allows unitTypeObjects and cityObjects, but not other kinds of userdata.</p>
<h3 id="validatetablevalue">
  
  
    validateTableValue <a href="#validatetablevalue"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.validateTableValue(tableDescription: string, key: any, value: any, valueSpec: table, extraInfo?: string)
</code></pre></div></div>
<p>Generates an error if the <code class="language-plaintext highlighter-rouge">value</code> doesn’t satisfy the <code class="language-plaintext highlighter-rouge">valueSpec</code>.  This is a “building block” function, so you probably don’t want to use it.</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">tableDescription</code> — A description of the table.</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">key</code> — The key being evaluated.</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">value</code> — The value being evaluated.</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">extraInfo</code> — Extra information that might be useful when debugging.</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">valueSpec</code> — A valueSpecification is a table with the following keys and values:<br /><br />[“nil”] = true or nil<br />If this key is true, the specified value can be nil.<br /><br />[“boolean”] = true, “true”, “false”, or nil<br />If this key is true (boolean value), the specified value can be a boolean.<br />If this key is “true” (string), then the specified value can be true, but not false.<br />If this key is “false” (string), then the specified value can be false, but not true.<br />If this key is nil, the specified value can’t be a boolean.<br /><br />[“function”] = true, string, or nil<br />if this key is true or string, the specified value can be a function.<br />If string, the string describes the function, e.g. <code class="language-plaintext highlighter-rouge">function(unit)--&gt;number</code>.  Value specification checks do not check if the function actually matches the description, only that it is a function.<br />If this key is nil, the specified value can’t be a function.<br /><br />[“number”] = true or nil or {minVal=number/nil, maxVal=number/nil, integer=true/nil}<br />If true, the specified value can be any number.  If nil, the specified value can’t be a number.<br />If table, any number must also be larger than the <code class="language-plaintext highlighter-rouge">minVal</code> (if specified) and smaller than the <code class="language-plaintext highlighter-rouge">maxVal</code> (if specified).  If the <code class="language-plaintext highlighter-rouge">integer</code> key is true, the value must also be an integer.<br /><br />[“string”] = true or {[validString] = truthy} or nil<br />If this key is true, any string is allowed.<br />If it is a table, any string value must be a key in that table, with a truthy (anything other than false/nil) associated value.<br />If nil, the value can’t be a string.<br /><br />[“table”]=string, true, nil, or {[1]=function(table)-&gt;true or string, [2]=string}<br />If the key is a string, any table is accepted, and the string describes the kind of table needed.<br />If true, any table is accepted, and a generated description will be ‘table’.<br />If the key is a table, the table’s value for <code class="language-plaintext highlighter-rouge">1</code> is a function, which returns true if specified value is an acceptable table, and a string describing the problem if it is not.  The value for <code class="language-plaintext highlighter-rouge">2</code> is a string describing the required table, for generated descriptions/errors.<br />If nil, the specified value can’t be a table.<br /><br />[“userdata”] = {[dataTypeName]=isDataTypeFn} or nil<br />The keys to this table are strings that describe acceptable userdata, and the values are functions which return true if the specified value matches the type, and false otherwise.<br />E.g.<br /><code class="language-plaintext highlighter-rouge">{["unitTypeObject"] = civ.isUnitType, ["cityObject"] = civ.isCity}</code><br />Allows unitTypeObjects and cityObjects, but not other kinds of userdata.</p>
<h3 id="tableofvaluespecification">
  
  
    tableOfValueSpecification <a href="#tableofvaluespecification"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.tableOfValueSpecification(valueSpecification: table)
  -&gt; valueSpecification: table
</code></pre></div></div>
<p>Takes a valueSpecification, and returns a valueSpecification where
  the valid data is a table where all values are of the
  submitted valueSpecification.</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">valueSpecification</code> — A valueSpecification is a table with the following keys and values:<br /><br />[“nil”] = true or nil<br />If this key is true, the specified value can be nil.<br /><br />[“boolean”] = true, “true”, “false”, or nil<br />If this key is true (boolean value), the specified value can be a boolean.<br />If this key is “true” (string), then the specified value can be true, but not false.<br />If this key is “false” (string), then the specified value can be false, but not true.<br />If this key is nil, the specified value can’t be a boolean.<br /><br />[“function”] = true, string, or nil<br />if this key is true or string, the specified value can be a function.<br />If string, the string describes the function, e.g. <code class="language-plaintext highlighter-rouge">function(unit)--&gt;number</code>.  Value specification checks do not check if the function actually matches the description, only that it is a function.<br />If this key is nil, the specified value can’t be a function.<br /><br />[“number”] = true or nil or {minVal=number/nil, maxVal=number/nil, integer=true/nil}<br />If true, the specified value can be any number.  If nil, the specified value can’t be a number.<br />If table, any number must also be larger than the <code class="language-plaintext highlighter-rouge">minVal</code> (if specified) and smaller than the <code class="language-plaintext highlighter-rouge">maxVal</code> (if specified).  If the <code class="language-plaintext highlighter-rouge">integer</code> key is true, the value must also be an integer.<br /><br />[“string”] = true or {[validString] = truthy} or nil<br />If this key is true, any string is allowed.<br />If it is a table, any string value must be a key in that table, with a truthy (anything other than false/nil) associated value.<br />If nil, the value can’t be a string.<br /><br />[“table”]=string, true, nil, or {[1]=function(table)-&gt;true or string, [2]=string}<br />If the key is a string, any table is accepted, and the string describes the kind of table needed.<br />If true, any table is accepted, and a generated description will be ‘table’.<br />If the key is a table, the table’s value for <code class="language-plaintext highlighter-rouge">1</code> is a function, which returns true if specified value is an acceptable table, and a string describing the problem if it is not.  The value for <code class="language-plaintext highlighter-rouge">2</code> is a string describing the required table, for generated descriptions/errors.<br />If nil, the specified value can’t be a table.<br /><br />[“userdata”] = {[dataTypeName]=isDataTypeFn} or nil<br />The keys to this table are strings that describe acceptable userdata, and the values are functions which return true if the specified value matches the type, and false otherwise.<br />E.g.<br /><code class="language-plaintext highlighter-rouge">{["unitTypeObject"] = civ.isUnitType, ["cityObject"] = civ.isCity}</code><br />Allows unitTypeObjects and cityObjects, but not other kinds of userdata.</p>
<h3 id="valuespecificationortableofvaluespecification">
  
  
    valueSpecificationOrTableOfValueSpecification <a href="#valuespecificationortableofvaluespecification"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.valueSpecificationOrTableOfValueSpecification(valueSpecification: table)
  -&gt; newValueSpecification: table
</code></pre></div></div>
<p>Takes a valueSpecification, and returns a newValueSpecification.
  The newValueSpecification allow both the original valueSpecification
  and tables where values are the original valueSpecification.<br /><br />
  Limiation: the valueSpecification can’t have a any tables as valid value types.  If you need that, consider <code class="language-plaintext highlighter-rouge">gen.tableOfValueSpecification</code> or writing a custom valueSpecification.</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">valueSpecification</code> — A valueSpecification is a table with the following keys and values:<br /><br />[“nil”] = true or nil<br />If this key is true, the specified value can be nil.<br /><br />[“boolean”] = true, “true”, “false”, or nil<br />If this key is true (boolean value), the specified value can be a boolean.<br />If this key is “true” (string), then the specified value can be true, but not false.<br />If this key is “false” (string), then the specified value can be false, but not true.<br />If this key is nil, the specified value can’t be a boolean.<br /><br />[“function”] = true, string, or nil<br />if this key is true or string, the specified value can be a function.<br />If string, the string describes the function, e.g. <code class="language-plaintext highlighter-rouge">function(unit)--&gt;number</code>.  Value specification checks do not check if the function actually matches the description, only that it is a function.<br />If this key is nil, the specified value can’t be a function.<br /><br />[“number”] = true or nil or {minVal=number/nil, maxVal=number/nil, integer=true/nil}<br />If true, the specified value can be any number.  If nil, the specified value can’t be a number.<br />If table, any number must also be larger than the <code class="language-plaintext highlighter-rouge">minVal</code> (if specified) and smaller than the <code class="language-plaintext highlighter-rouge">maxVal</code> (if specified).  If the <code class="language-plaintext highlighter-rouge">integer</code> key is true, the value must also be an integer.<br /><br />[“string”] = true or {[validString] = truthy} or nil<br />If this key is true, any string is allowed.<br />If it is a table, any string value must be a key in that table, with a truthy (anything other than false/nil) associated value.<br />If nil, the value can’t be a string.<br /><br />[“table”]=string, true, nil, or {[1]=function(table)-&gt;true or string, [2]=string}<br />If the key is a string, any table is accepted, and the string describes the kind of table needed.<br />If true, any table is accepted, and a generated description will be ‘table’.<br />If the key is a table, the table’s value for <code class="language-plaintext highlighter-rouge">1</code> is a function, which returns true if specified value is an acceptable table, and a string describing the problem if it is not.  The value for <code class="language-plaintext highlighter-rouge">2</code> is a string describing the required table, for generated descriptions/errors.<br />If nil, the specified value can’t be a table.<br /><br />[“userdata”] = {[dataTypeName]=isDataTypeFn} or nil<br />The keys to this table are strings that describe acceptable userdata, and the values are functions which return true if the specified value matches the type, and false otherwise.<br />E.g.<br /><code class="language-plaintext highlighter-rouge">{["unitTypeObject"] = civ.isUnitType, ["cityObject"] = civ.isCity}</code><br />Allows unitTypeObjects and cityObjects, but not other kinds of userdata.</p>
<h3 id="validatevaluespecificationkeys">
  
  
    validateValueSpecificationKeys <a href="#validatevaluespecificationkeys"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.validateValueSpecificationKeys(validDataInfo: any)
</code></pre></div></div>
<p>Value Specification
  valueSpecification = {
      [“nil”] = true or nil
          if this key is true, the data can be nil
      [“boolean”] = true, “true”, “false”, or nil
          if this key is true, the data can be a boolean
          if this key is “true”, only true is allowed (false is not)
          if this key is “false”, only false is allowed (true is not)
      [“function”] = true, string or nil
          if this key is true or string, the data can be a function
          the string describes the function e.g. function(unit) –&gt; number
          (the function is not tested)
      [“number”] = {minVal=numberNil, maxVal = numberNil, integer=trueNil} or true
          if this key is true, the data can be a number
          the keys in the table specify minimum and maximum values, and whether
          the number must be an integer
          note: math.huge and -math.huge are considered both numbers and integer here
      [“string”] = true or {[validString] = truthy}
          if true, the data can be any string
          if table, the data must be one of the keys in the table
      [“table”] = string or true or {[1]=function(table)–&gt;true or string,[2]=string}
          if string, any table is accepted, and the string describes the kind of table needed
          if true, any table is accepted, and the description is a table
          if table, [1] is a function returns that true if the table is accepted,
          and the problem with the table if it is not
          [2] is the description of the table required
      [“userdata”] = {[dataTypeName]=isDataTypeFn}
          this table is a table of each of the allowable data types, with the
          key being the name, and the function checking if it is that type
          being the value
  }</p>
<h2 id="non-standard-id-functions">
  
  
    Non-Standard ID Functions <a href="#non-standard-id-functions"><span class="self-link">&#128279</span></a>
  
  
</h2>
    

<p>These functions map Lua objects without an <code class="language-plaintext highlighter-rouge">id</code> field to suitable integers, or provide a way to go from the integer back to the original object.</p>
<h3 id="getbaseterrainid">
  
  
    getBaseTerrainID <a href="#getbaseterrainid"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.getBaseTerrainID(baseTerrain: baseTerrainObject)
  -&gt; integer
</code></pre></div></div>
<p>Returns an id number for the <code class="language-plaintext highlighter-rouge">baseTerrain</code> object.  This is different from <code class="language-plaintext highlighter-rouge">baseTerrain.type</code>, since <code class="language-plaintext highlighter-rouge">baseTerrain.type</code> is 0-15 for all maps, while this id changes for larger maps.</p>
<h3 id="getbaseterrainfromid">
  
  
    getBaseTerrainFromID <a href="#getbaseterrainfromid"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.getBaseTerrainFromID(id: integer)
  -&gt; baseTerrainObject|nil
</code></pre></div></div>
<p>Given an baseTerrain id, returns the corresponding baseTerrain object.</p>
<h3 id="getterrainid">
  
  
    getTerrainID <a href="#getterrainid"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.getTerrainID(terrain: terrainObject)
  -&gt; integer
</code></pre></div></div>
<p>Returns an id number for the <code class="language-plaintext highlighter-rouge">terrain</code> object.  This is different from <code class="language-plaintext highlighter-rouge">terrain.type</code>, since <code class="language-plaintext highlighter-rouge">terrain.type</code> is 0-15, based on the underlying baseTerrain type.  This id number is different for each terrain type on each map.</p>
<h3 id="getterrainfromid">
  
  
    getTerrainFromID <a href="#getterrainfromid"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.getTerrainFromID(id: integer)
  -&gt; terrainObject|nil
</code></pre></div></div>
<p>Returns a terrainObject from the corresponding id number created by gen.getTerrainID.</p>
<h3 id="gettileid">
  
  
    getTileID <a href="#gettileid"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.getTileID(tileORX: integer|table|tileObject, y?: integer, z?: integer)
  -&gt; nil
</code></pre></div></div>
<p>Returns a single-value numeric key that uniquely identifies a tile on any map.
by Knighttime, modified by Prof. Garfield</p>
<h3 id="gettilefromid">
  
  
    getTileFromID <a href="#gettilefromid"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.getTileFromID(tileID: integer)
  -&gt; tileObject|nil
</code></pre></div></div>
<p>Takes an integer generated by <code class="language-plaintext highlighter-rouge">gen.getTileID</code>, and returns the corresponding tile (or nil, if the key doesn’t correspond to a real tile).</p>
<h2 id="marker-functions">
  
  
    Marker Functions <a href="#marker-functions"><span class="self-link">&#128279</span></a>
  
  
</h2>
    

<p>Placing a marker on a tile changes the visible improvements for that tile, so that the tribe can now see the <code class="language-plaintext highlighter-rouge">markerOption</code> (“irrigation”, “pollution”, etc) on the tile.  However, information about the marker is stored in the state table (along with the originally visible improvements), so that the marker can be displayed again if it stops being visible, and removed if that is desired.</p>

<p>The valid options for markers are: “irrigation”, “mine”, “farmland”, “road”, “railroad”, “fortress”, “airbase”, “pollution”, “transporter”.  (Note: although the code works for using transporter markers, they may not be visible in practice.)</p>
<h3 id="placemarker">
  
  
    placeMarker <a href="#placemarker"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.placeMarker(tile: tileObject, tribe: tribeObject, markerOption: markerOptions)
</code></pre></div></div>
<p>Places a “marker” on <code class="language-plaintext highlighter-rouge">tile</code> for <code class="language-plaintext highlighter-rouge">tribe</code>.</p>

<p>Placing a marker on a tile changes the visible improvements for that tile, so that the tribe can now see the <code class="language-plaintext highlighter-rouge">markerOption</code> (“irrigation”, “pollution”, etc.– see below for the full list) on the tile.  However, information about the marker is stored in the state table (along with the originally visible improvements), so that the marker can be displayed again if it stops being visible.</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">tile</code> — The tile on which a “marker” will be placed.</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">tribe</code> — The tribe for whom the “marker” is visible.</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">markerOption</code> — Valid marker options are “irrigation”, “mine”, “farmland”, “road”, “railroad”, “fortress”, “airbase”, “pollution”, “transporter”.</p>
<h3 id="removemarker">
  
  
    removeMarker <a href="#removemarker"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.removeMarker(tile: tileObject, tribe: tribeObject, markerOption: markerOptions)
</code></pre></div></div>
<p>Removes the <code class="language-plaintext highlighter-rouge">markerOption</code> marker for <code class="language-plaintext highlighter-rouge">tribe</code> from <code class="language-plaintext highlighter-rouge">tile</code>, if it exist.</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">tile</code> — The tile on which a “marker” will be removed.</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">tribe</code> — The tribe for whom the “marker” is no longer visible.</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">markerOption</code> — Valid marker options are “irrigation”, “mine”, “farmland”, “road”, “railroad”, “fortress”, “airbase”, “pollution”, “transporter”.</p>
<h3 id="maintaintilemarkertable">
  
  
    maintainTileMarkerTable <a href="#maintaintilemarkertable"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.maintainTileMarkerTable()
</code></pre></div></div>
<p>Checks the marker table for any marker data that can be removed
 and remove it.</p>
<h3 id="removeallmarkers">
  
  
    removeAllMarkers <a href="#removeallmarkers"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.removeAllMarkers(tribe: tribeObject|nil, markerType: markerOptions|nil)
</code></pre></div></div>
<p>Removes all markers of <code class="language-plaintext highlighter-rouge">markerType</code> for tribe.
 If tribe not specified, removes all markerType markers for all tribes.
 If markerType not specified, removes all markers for tribe.
 If neither specified, removes all markers for all tribes.</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">markerType</code> — Valid marker options are “irrigation”, “mine”, “farmland”, “road”, “railroad”, “fortress”, “airbase”, “pollution”, “transporter”.</p>
<h3 id="removemarkersfromtile">
  
  
    removeMarkersFromTile <a href="#removemarkersfromtile"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.removeMarkersFromTile(tile: tileObject, tribe?: tribeObject)
</code></pre></div></div>
<p>Removes all markers on tile for the tribe, if tribe is omitted, removes markers for all tribes.</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">tile</code> — The tile for which all markers will be removed.</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">tribe</code> — The tribe for which the markers will be removed.  If nil, markers for all tribes are removed.</p>
<h3 id="showallmarkersontile">
  
  
    showAllMarkersOnTile <a href="#showallmarkersontile"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.showAllMarkersOnTile(tile: tileObject, topMarkerType: markerOptions|nil, secondMarkerType: markerOptions|nil)
</code></pre></div></div>
<p>Reapplies the charting functions for all markers
 on the tile for all players.  If topMarkerType isnt
 nil, that marker type is applied again last, in case
 there are conflicting markers.
 The secondMarkerType is applied just before the top marker type.</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">topMarkerType</code> — Valid marker options are “irrigation”, “mine”, “farmland”, “road”, “railroad”, “fortress”, “airbase”, “pollution”, “transporter”.</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">secondMarkerType</code> — Valid marker options are “irrigation”, “mine”, “farmland”, “road”, “railroad”, “fortress”, “airbase”, “pollution”, “transporter”.</p>
<h3 id="showallmarkers">
  
  
    showAllMarkers <a href="#showallmarkers"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.showAllMarkers(topMarkerType: markerOptions|nil, secondMarkerType: markerOptions|nil)
</code></pre></div></div>
<p>Reapplies the charting functions for all markers
 on all tiles for all players.  If topMarkerType isn’t nil,
 that marker type is applied last again, in case there
 are conflicting markers.
 The secondMarkerType is applied just before the top marker type.</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">topMarkerType</code> — Valid marker options are “irrigation”, “mine”, “farmland”, “road”, “railroad”, “fortress”, “airbase”, “pollution”, “transporter”.</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">secondMarkerType</code> — Valid marker options are “irrigation”, “mine”, “farmland”, “road”, “railroad”, “fortress”, “airbase”, “pollution”, “transporter”.</p>
<h3 id="hasmarker">
  
  
    hasMarker <a href="#hasmarker"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.hasMarker(tile: tileObject, tribe: tribeObject, markerType: markerOptions)
  -&gt; boolean
</code></pre></div></div>
<p>Returns true if <code class="language-plaintext highlighter-rouge">tile</code> has a marker of <code class="language-plaintext highlighter-rouge">markerType</code> for <code class="language-plaintext highlighter-rouge">tribe</code>.</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">markerType</code> — Valid marker options are “irrigation”, “mine”, “farmland”, “road”, “railroad”, “fortress”, “airbase”, “pollution”, “transporter”.</p>
<h3 id="ismarkervisible">
  
  
    isMarkerVisible <a href="#ismarkervisible"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.isMarkerVisible(tile: tileObject, tribe: tribeObject, markerType: markerOptions)
  -&gt; false
</code></pre></div></div>
<p>Returns true if the <code class="language-plaintext highlighter-rouge">tile</code> has the <code class="language-plaintext highlighter-rouge">markerType</code> and the <code class="language-plaintext highlighter-rouge">markerType</code> is charted, false otherwise.</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">markerType</code> — Valid marker options are “irrigation”, “mine”, “farmland”, “road”, “railroad”, “fortress”, “airbase”, “pollution”, “transporter”.</p>
<h3 id="hidemarker">
  
  
    hideMarker <a href="#hidemarker"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.hideMarker(tile: tileObject, tribe: tribeObject, markerType: markerOptions)
</code></pre></div></div>
<p>Uncharts the <code class="language-plaintext highlighter-rouge">markerType</code> marker for the <code class="language-plaintext highlighter-rouge">tribe</code>, but does not remove the marker.
 Does nothing if the tribe doesn’t have that marker
 or if the marker is already hidden.</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">markerType</code> — Valid marker options are “irrigation”, “mine”, “farmland”, “road”, “railroad”, “fortress”, “airbase”, “pollution”, “transporter”.</p>
<h3 id="hideallmarkers">
  
  
    hideAllMarkers <a href="#hideallmarkers"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.hideAllMarkers(tribeOrNil: tribeObject|nil, markerTypeOrNil: markerOptions|nil)
</code></pre></div></div>
<p>gen.hideAllMarkers(tribeOrNil,markerTypeOrNil)
 Hides all markers of the given type for that tribe.
 If tribe not specified, hides all markers of given type for
 all tribes.
 If markerType not specified, hides markers of all types.
comment</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">markerTypeOrNil</code> — Valid marker options are “irrigation”, “mine”, “farmland”, “road”, “railroad”, “fortress”, “airbase”, “pollution”, “transporter”.</p>
<h3 id="hideallmarkersontile">
  
  
    hideAllMarkersOnTile <a href="#hideallmarkersontile"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.hideAllMarkersOnTile(tile: tileObject, tribe: tribeObject)
</code></pre></div></div>
<p>Hides all markers on a given tile for the given tribe.</p>
<h3 id="showmarker">
  
  
    showMarker <a href="#showmarker"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.showMarker(tile: tileObject, tribe: tribeObject, markerType: markerOptions)
</code></pre></div></div>
<p>Shows the <code class="language-plaintext highlighter-rouge">markerType</code> for the <code class="language-plaintext highlighter-rouge">tribe</code> on the <code class="language-plaintext highlighter-rouge">tile</code>, if the marker is on the <code class="language-plaintext highlighter-rouge">tile</code>.</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">markerType</code> — Valid marker options are “irrigation”, “mine”, “farmland”, “road”, “railroad”, “fortress”, “airbase”, “pollution”, “transporter”.</p>
<h3 id="showmarkeronalltiles">
  
  
    showMarkerOnAllTiles <a href="#showmarkeronalltiles"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.showMarkerOnAllTiles(tribe: tribeObject, markerType: markerOptions)
</code></pre></div></div>
<p>Shows the <code class="language-plaintext highlighter-rouge">markerType</code> to <code class="language-plaintext highlighter-rouge">tribe</code> on all tiles where it exists.</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">markerType</code> — Valid marker options are “irrigation”, “mine”, “farmland”, “road”, “railroad”, “fortress”, “airbase”, “pollution”, “transporter”.</p>
<h2 id="item-weight-functions">
  
  
    Item Weight Functions <a href="#item-weight-functions"><span class="self-link">&#128279</span></a>
  
  
</h2>
    

<p>These functions provide a way to assign “weights” to items, based on a standard set
of criteria. Choosing item(s) with large (or small) weights can be a convenient way
for a program to choose between different options.</p>
<h3 id="calculateweight">
  
  
    calculateWeight <a href="#calculateweight"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.calculateWeight(item: &lt;weightItem&gt;, weightTable: table&lt;fun(item: &lt;weightItem&gt;, extraArgument: &lt;extraArg&gt;):boolean, boolean|number|fun(item: &lt;weightItem&gt;, extraArgument: &lt;extraArg&gt;):number|false&gt;, extraArgument?: &lt;extraArg&gt;)
  -&gt; boolean|number
</code></pre></div></div>
<p>This function calculates the “weight” of the <code class="language-plaintext highlighter-rouge">item</code>, taking into account the <code class="language-plaintext highlighter-rouge">extraArgument</code>, and uses the <code class="language-plaintext highlighter-rouge">weightTable</code>.  Calculating weights can be a simple way to choose between various options (with a return of <code class="language-plaintext highlighter-rouge">false</code> meaning not to choose this option).</p>

<p>In practice, you will probably not use this function itself.  There are several functions that use this function to make choices:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>gen.getExtremeWeights
gen.getBiggestWeights
gen.getSmallestWeights
</code></pre></div></div>

<p>weightTable has functions as keys, and numbers or false as values</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>{[keyFunc(item,extraArgument)-&gt;boolean] = number or boolean or string or function(item,extraArgument) -&gt; number\\|false}

for each key in the weight table, apply keyFunc to the item and extraArgument

if keyFunc(item,extraArgument) then
    if the value is a number, add the number to the weight
    if the value is a string add item[value] to the weight
    if the value is a function, add value(item,extraArgument) to the weight
    if the value is false, return 'false' as the weight
    if the value is true, do nothing
else
    if the value is a number, do nothing
    if the value is false, do nothing
    if the value is a string, do nothing
    if the value is true, return 'false' as the weight

That is, false means that keyFunc must not apply to the item
while true means that keyFunc must apply to the item

default weight is 0
</code></pre></div></div>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">extraArgument</code> — Default is nil.</p>

<p>@<em>return</em> — If number, the item has this weight.  False means the item was not given a weight.</p>
<h3 id="getextremeweights">
  
  
    getExtremeWeights <a href="#getextremeweights"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.getExtremeWeights(listOrIterator: table|iterator, weightTableOrWeightFunction: table|fun(item: &lt;itemToWeigh&gt;, extraArgument: &lt;extraArg&gt;):number|false, getTopX: integer|nil, changeOrder: fun(weight1: number|false|nil, weight2: number|false):boolean, functionName: string, extraArgument: &lt;extraArg&gt;)
  -&gt; &lt;itemToWeigh&gt;|table&lt;integer, &lt;itemToWeigh&gt;&gt;
  2. number|table&lt;integer, number&gt;
</code></pre></div></div>
<p>This function is wrapped to construct <code class="language-plaintext highlighter-rouge">gen.getBiggestWeight</code> and <code class="language-plaintext highlighter-rouge">gen.getSmallestWeight</code>.  You probably want to use one of them.</p>

<p>listOrIterator
    if iterator, returns the items for consideration
    if table, each item is a value in the table, and the table consists only of those values
weightTableOrWeightFunction
    if weightTable, use gen.calculateWeight(item,weightTable,extraArgument) as the weight function
    a weightFunction(item,extraArgument) must return either a number or false.  When false is returned,
    the item is not considered at all
getTopX
    if absent, the item with the largest weight is returned, or nil if no valid item is found
    if integer, a table with that number of items is returned, with index 1 associated with the
    item of the largest weight, 2 the next highest weight and so on.  If there are fewer valid
    items, the corresponding values are nil
changeOrder function
    if changeOrder(weight1,weight2) is true,
    weight2 should be before weight1
    changeOrder(nil,weight2) should always be true
functionName string
    name of the function being created (since this is designed to be wrapped by another function), for error purposes.</p>

<p>@<em>return</em> — best item, or table of the best items, starting at 1 with the best item.</p>

<p>@<em>return</em> — Weight of best item, or table of weights of the best items, starting at 1 with the best weight</p>
<h3 id="getbiggestweights">
  
  
    getBiggestWeights <a href="#getbiggestweights"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.getBiggestWeights(listOrIterator: iterator|table&lt;any, &lt;itemToWeigh&gt;&gt;, weightTableOrWeightFunction: table|fun(item: &lt;itemToWeigh&gt;, extraArgument: &lt;extraArg&gt;):number|false, getTopX: integer|nil, extraArgument: &lt;extraArg&gt;|nil)
  -&gt; &lt;itemToWeigh&gt;|table&lt;integer, &lt;itemToWeigh&gt;&gt;
  2. number|table&lt;integer, number&gt;
</code></pre></div></div>
<p>Finds the <code class="language-plaintext highlighter-rouge">getTopX</code> number items in <code class="language-plaintext highlighter-rouge">listOrIterator</code> with the highest weights.<br />
If <code class="language-plaintext highlighter-rouge">getTopX</code> is nil, the item with the largest weight, and its weight, are returned as two values.  If <code class="language-plaintext highlighter-rouge">getTopX</code> is not nil, two tables are returned instead, with items 1 being the largest value, and its weight, 2 the second largest value and its weight, and so on.</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">listOrIterator</code> — <br />If iterator, returns the items for consideration.<br /><br />If table, each item is a value in the table, and all the table values are items for consideration.</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">weightTableOrWeightFunction</code> — <br />If a table is provided, <code class="language-plaintext highlighter-rouge">gen.calculateWeight(item,weightTable,extraArgument)</code> is used to calculate the weight.<br /><br />If a function is provided, it is used to calculate the weights.</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">getTopX</code> — <br /> If absent/nil, the item with the largest weight is returned, and the second return value returns its weight. <br /><br /> If integer, a table (indexed with integers starting at 1) with this many values is returned, with the item having the largest weight being at key 1, the second best item at key 2, and so on.  If there are not <code class="language-plaintext highlighter-rouge">getTopX</code> valid items, then nil is the value in the table for the relevant keys.  The second return value is a table of the weights of the <code class="language-plaintext highlighter-rouge">getTopX</code> items.</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">extraArgument</code> — <br /> This is an extra piece of data for computing the weights.</p>
<h3 id="getsmallestweights">
  
  
    getSmallestWeights <a href="#getsmallestweights"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.getSmallestWeights(listOrIterator: iterator|table&lt;any, &lt;itemToWeigh&gt;&gt;, weightTableOrWeightFunction: table|fun(item: &lt;itemToWeigh&gt;, extraArgument: &lt;extraArg&gt;):number|false, getTopX: integer|nil, extraArgument: &lt;extraArg&gt;|nil)
  -&gt; &lt;itemToWeigh&gt;|table&lt;integer, &lt;itemToWeigh&gt;&gt;
  2. number|table&lt;integer, number&gt;
</code></pre></div></div>
<p>Finds the <code class="language-plaintext highlighter-rouge">getTopX</code> number items in <code class="language-plaintext highlighter-rouge">listOrIterator</code> with the smallest weights.<br />
If <code class="language-plaintext highlighter-rouge">getTopX</code> is nil, the item with the smallest weight, and its weight, are returned as two values.  If <code class="language-plaintext highlighter-rouge">getTopX</code> is not nil, two tables are returned instead, with items 1 being the item with the smallest weight, and its weight, 2 the second largest value and its weight, and so on.</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">listOrIterator</code> — <br />If iterator, returns the items for consideration.<br /><br />If table, each item is a value in the table, and all the table values are items for consideration.</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">weightTableOrWeightFunction</code> — <br />If a table is provided, <code class="language-plaintext highlighter-rouge">gen.calculateWeight(item,weightTable,extraArgument)</code> is used to calculate the weight.<br /><br />If a function is provided, it is used to calculate the weights.</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">getTopX</code> — <br /> If absent/nil, the item with the smallest weight is returned, and the second return value returns its weight. <br /><br /> If integer, a table (indexed with integers starting at 1) with this many values is returned, with the item having the smallest weight being at key 1, the second best item at key 2, and so on.  If there are not <code class="language-plaintext highlighter-rouge">getTopX</code> valid items, then nil is the value in the table for the relevant keys.  The second return value is a table of the weights of the <code class="language-plaintext highlighter-rouge">getTopX</code> items.</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">extraArgument</code> — <br /> This is an extra piece of data for computing the weights.</p>
<h2 id="tile-improvement-functions">
  
  
    Tile Improvement Functions <a href="#tile-improvement-functions"><span class="self-link">&#128279</span></a>
  
  
</h2>
    

<p>These functions interact with tile improvements.</p>
<h3 id="totile">
  
  
    toTile <a href="#totile"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.toTile(tileAnalog: table|tileObject)
  -&gt; tileObject
</code></pre></div></div>
<p>If given a tile object, returns the tile.
 If given coordinates for a tile, returns the tile.
 Causes error otherwise</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">tileAnalog</code> — Can be:<br /><br />tileObject<br /><br />{[1]=xCoord,[2]=yCoord,[3]=zCoord}<br />Converted to civ.getTile(xCoord,yCoord,zCoord) <br /><br />{[1]=xCoord,[2]=yCoord}<br />Converted to civ.getTile(xCoord,yCoord,0)<br /><br />{x=xCoord,y=yCoord,z=zCoord}<br />Converted to civ.getTile(xCoord,yCoord,zCoord) <br /><br />{x=xCoord,y=yCoord}<br />Converted to civ.getTile(xCoord,yCoord,0)</p>
<h3 id="hasirrigation">
  
  
    hasIrrigation <a href="#hasirrigation"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.hasIrrigation(tile: table|tileObject)
  -&gt; boolean
</code></pre></div></div>
<p>Returns true if tile has irrigation but no farm.
 Returns false otherwise.
 If you need to know if a tile has irrigation or farmland,
 use gen.hasAgriculture(tile)</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">tile</code> — Can be:<br /><br />tileObject<br /><br />{[1]=xCoord,[2]=yCoord,[3]=zCoord}<br />Converted to civ.getTile(xCoord,yCoord,zCoord) <br /><br />{[1]=xCoord,[2]=yCoord}<br />Converted to civ.getTile(xCoord,yCoord,0)<br /><br />{x=xCoord,y=yCoord,z=zCoord}<br />Converted to civ.getTile(xCoord,yCoord,zCoord) <br /><br />{x=xCoord,y=yCoord}<br />Converted to civ.getTile(xCoord,yCoord,0)</p>
<h3 id="placeirrigation">
  
  
    placeIrrigation <a href="#placeirrigation"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.placeIrrigation(tile: table|tileObject)
</code></pre></div></div>
<p>places irrigation on the tile provided
 removes mines and farmland if present
 does nothing if tile has a city</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">tile</code> — Can be:<br /><br />tileObject<br /><br />{[1]=xCoord,[2]=yCoord,[3]=zCoord}<br />Converted to civ.getTile(xCoord,yCoord,zCoord) <br /><br />{[1]=xCoord,[2]=yCoord}<br />Converted to civ.getTile(xCoord,yCoord,0)<br /><br />{x=xCoord,y=yCoord,z=zCoord}<br />Converted to civ.getTile(xCoord,yCoord,zCoord) <br /><br />{x=xCoord,y=yCoord}<br />Converted to civ.getTile(xCoord,yCoord,0)</p>
<h3 id="removeirrigation">
  
  
    removeIrrigation <a href="#removeirrigation"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.removeIrrigation(tile: table|tileObject)
</code></pre></div></div>
<p>If tile has irrigation but no farmland, removes the irrigation
 Does nothing to farmland
 Does nothing if tile has a city</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">tile</code> — Can be:<br /><br />tileObject<br /><br />{[1]=xCoord,[2]=yCoord,[3]=zCoord}<br />Converted to civ.getTile(xCoord,yCoord,zCoord) <br /><br />{[1]=xCoord,[2]=yCoord}<br />Converted to civ.getTile(xCoord,yCoord,0)<br /><br />{x=xCoord,y=yCoord,z=zCoord}<br />Converted to civ.getTile(xCoord,yCoord,zCoord) <br /><br />{x=xCoord,y=yCoord}<br />Converted to civ.getTile(xCoord,yCoord,0)</p>
<h3 id="hasmine">
  
  
    hasMine <a href="#hasmine"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.hasMine(tile: table|tileObject)
  -&gt; boolean
</code></pre></div></div>
<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">tile</code> — Can be:<br /><br />tileObject<br /><br />{[1]=xCoord,[2]=yCoord,[3]=zCoord}<br />Converted to civ.getTile(xCoord,yCoord,zCoord) <br /><br />{[1]=xCoord,[2]=yCoord}<br />Converted to civ.getTile(xCoord,yCoord,0)<br /><br />{x=xCoord,y=yCoord,z=zCoord}<br />Converted to civ.getTile(xCoord,yCoord,zCoord) <br /><br />{x=xCoord,y=yCoord}<br />Converted to civ.getTile(xCoord,yCoord,0)</p>
<h3 id="placemine">
  
  
    placeMine <a href="#placemine"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.placeMine(tile: table|tileObject)
</code></pre></div></div>
<p>places mines on the tile provided
 removes irrigation and farmland if present
 does nothing if tile has city</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">tile</code> — Can be:<br /><br />tileObject<br /><br />{[1]=xCoord,[2]=yCoord,[3]=zCoord}<br />Converted to civ.getTile(xCoord,yCoord,zCoord) <br /><br />{[1]=xCoord,[2]=yCoord}<br />Converted to civ.getTile(xCoord,yCoord,0)<br /><br />{x=xCoord,y=yCoord,z=zCoord}<br />Converted to civ.getTile(xCoord,yCoord,zCoord) <br /><br />{x=xCoord,y=yCoord}<br />Converted to civ.getTile(xCoord,yCoord,0)</p>
<h3 id="placemineundercity">
  
  
    placeMineUnderCity <a href="#placemineundercity"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.placeMineUnderCity(tile: table|tileObject)
</code></pre></div></div>
<p>places mine on a tile, even if a city is present
 removes irrigation and farmland if present</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">tile</code> — Can be:<br /><br />tileObject<br /><br />{[1]=xCoord,[2]=yCoord,[3]=zCoord}<br />Converted to civ.getTile(xCoord,yCoord,zCoord) <br /><br />{[1]=xCoord,[2]=yCoord}<br />Converted to civ.getTile(xCoord,yCoord,0)<br /><br />{x=xCoord,y=yCoord,z=zCoord}<br />Converted to civ.getTile(xCoord,yCoord,zCoord) <br /><br />{x=xCoord,y=yCoord}<br />Converted to civ.getTile(xCoord,yCoord,0)</p>
<h3 id="removemine">
  
  
    removeMine <a href="#removemine"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.removeMine(tile: table|tileObject)
</code></pre></div></div>
<p>if tile has mining but no farmland, removes mines
 does nothing to farmland
 does nothing if tile has a city</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">tile</code> — Can be:<br /><br />tileObject<br /><br />{[1]=xCoord,[2]=yCoord,[3]=zCoord}<br />Converted to civ.getTile(xCoord,yCoord,zCoord) <br /><br />{[1]=xCoord,[2]=yCoord}<br />Converted to civ.getTile(xCoord,yCoord,0)<br /><br />{x=xCoord,y=yCoord,z=zCoord}<br />Converted to civ.getTile(xCoord,yCoord,zCoord) <br /><br />{x=xCoord,y=yCoord}<br />Converted to civ.getTile(xCoord,yCoord,0)</p>
<h3 id="removemineundercity">
  
  
    removeMineUnderCity <a href="#removemineundercity"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.removeMineUnderCity(tile: table|tileObject)
</code></pre></div></div>
<p>if tile has mining but no farmland, removes mines
 does nothing to farmland</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">tile</code> — Can be:<br /><br />tileObject<br /><br />{[1]=xCoord,[2]=yCoord,[3]=zCoord}<br />Converted to civ.getTile(xCoord,yCoord,zCoord) <br /><br />{[1]=xCoord,[2]=yCoord}<br />Converted to civ.getTile(xCoord,yCoord,0)<br /><br />{x=xCoord,y=yCoord,z=zCoord}<br />Converted to civ.getTile(xCoord,yCoord,zCoord) <br /><br />{x=xCoord,y=yCoord}<br />Converted to civ.getTile(xCoord,yCoord,0)</p>
<h3 id="hasfarmland">
  
  
    hasFarmland <a href="#hasfarmland"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.hasFarmland(tile: table|tileObject)
  -&gt; boolean
</code></pre></div></div>
<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">tile</code> — Can be:<br /><br />tileObject<br /><br />{[1]=xCoord,[2]=yCoord,[3]=zCoord}<br />Converted to civ.getTile(xCoord,yCoord,zCoord) <br /><br />{[1]=xCoord,[2]=yCoord}<br />Converted to civ.getTile(xCoord,yCoord,0)<br /><br />{x=xCoord,y=yCoord,z=zCoord}<br />Converted to civ.getTile(xCoord,yCoord,zCoord) <br /><br />{x=xCoord,y=yCoord}<br />Converted to civ.getTile(xCoord,yCoord,0)</p>
<h3 id="placefarmland">
  
  
    placeFarmland <a href="#placefarmland"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.placeFarmland(tile: table|tileObject)
</code></pre></div></div>
<p>places farmland on a tile (removing mining)
 does nothing if a city is present</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">tile</code> — Can be:<br /><br />tileObject<br /><br />{[1]=xCoord,[2]=yCoord,[3]=zCoord}<br />Converted to civ.getTile(xCoord,yCoord,zCoord) <br /><br />{[1]=xCoord,[2]=yCoord}<br />Converted to civ.getTile(xCoord,yCoord,0)<br /><br />{x=xCoord,y=yCoord,z=zCoord}<br />Converted to civ.getTile(xCoord,yCoord,zCoord) <br /><br />{x=xCoord,y=yCoord}<br />Converted to civ.getTile(xCoord,yCoord,0)</p>
<h3 id="removefarmland">
  
  
    removeFarmland <a href="#removefarmland"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.removeFarmland(tile: table|tileObject)
</code></pre></div></div>
<p>removes farmland if present
 does nothing to irrigation or mining
 does nothing if city present</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">tile</code> — Can be:<br /><br />tileObject<br /><br />{[1]=xCoord,[2]=yCoord,[3]=zCoord}<br />Converted to civ.getTile(xCoord,yCoord,zCoord) <br /><br />{[1]=xCoord,[2]=yCoord}<br />Converted to civ.getTile(xCoord,yCoord,0)<br /><br />{x=xCoord,y=yCoord,z=zCoord}<br />Converted to civ.getTile(xCoord,yCoord,zCoord) <br /><br />{x=xCoord,y=yCoord}<br />Converted to civ.getTile(xCoord,yCoord,0)</p>
<h3 id="hasagriculture">
  
  
    hasAgriculture <a href="#hasagriculture"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.hasAgriculture(tile: table|tileObject)
  -&gt; boolean
</code></pre></div></div>
<p>returns true if tile has irrigation or farmland</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">tile</code> — Can be:<br /><br />tileObject<br /><br />{[1]=xCoord,[2]=yCoord,[3]=zCoord}<br />Converted to civ.getTile(xCoord,yCoord,zCoord) <br /><br />{[1]=xCoord,[2]=yCoord}<br />Converted to civ.getTile(xCoord,yCoord,0)<br /><br />{x=xCoord,y=yCoord,z=zCoord}<br />Converted to civ.getTile(xCoord,yCoord,zCoord) <br /><br />{x=xCoord,y=yCoord}<br />Converted to civ.getTile(xCoord,yCoord,0)</p>
<h3 id="improveagriculture">
  
  
    improveAgriculture <a href="#improveagriculture"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.improveAgriculture(tile: table|tileObject)
</code></pre></div></div>
<p>if tile has no irrigation, place irrigation (even if mining present)
 if tile has irrigation, place farmland
 if city do nothing</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">tile</code> — Can be:<br /><br />tileObject<br /><br />{[1]=xCoord,[2]=yCoord,[3]=zCoord}<br />Converted to civ.getTile(xCoord,yCoord,zCoord) <br /><br />{[1]=xCoord,[2]=yCoord}<br />Converted to civ.getTile(xCoord,yCoord,0)<br /><br />{x=xCoord,y=yCoord,z=zCoord}<br />Converted to civ.getTile(xCoord,yCoord,zCoord) <br /><br />{x=xCoord,y=yCoord}<br />Converted to civ.getTile(xCoord,yCoord,0)</p>
<h3 id="degradeagriculture">
  
  
    degradeAgriculture <a href="#degradeagriculture"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.degradeAgriculture(tile: table|tileObject)
</code></pre></div></div>
<p>if tile has farmland, reduce to irrigation
 if tile has irrigation, remove
 does nothing if city present</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">tile</code> — Can be:<br /><br />tileObject<br /><br />{[1]=xCoord,[2]=yCoord,[3]=zCoord}<br />Converted to civ.getTile(xCoord,yCoord,zCoord) <br /><br />{[1]=xCoord,[2]=yCoord}<br />Converted to civ.getTile(xCoord,yCoord,0)<br /><br />{x=xCoord,y=yCoord,z=zCoord}<br />Converted to civ.getTile(xCoord,yCoord,zCoord) <br /><br />{x=xCoord,y=yCoord}<br />Converted to civ.getTile(xCoord,yCoord,0)</p>
<h3 id="removeagriculture">
  
  
    removeAgriculture <a href="#removeagriculture"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.removeAgriculture(tile: table|tileObject)
</code></pre></div></div>
<p>remove farmland and irrigation if present
 do nothing to mining
 do nothing if city present</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">tile</code> — Can be:<br /><br />tileObject<br /><br />{[1]=xCoord,[2]=yCoord,[3]=zCoord}<br />Converted to civ.getTile(xCoord,yCoord,zCoord) <br /><br />{[1]=xCoord,[2]=yCoord}<br />Converted to civ.getTile(xCoord,yCoord,0)<br /><br />{x=xCoord,y=yCoord,z=zCoord}<br />Converted to civ.getTile(xCoord,yCoord,zCoord) <br /><br />{x=xCoord,y=yCoord}<br />Converted to civ.getTile(xCoord,yCoord,0)</p>
<h3 id="hasroad">
  
  
    hasRoad <a href="#hasroad"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.hasRoad(tile: table|tileObject)
  -&gt; boolean
</code></pre></div></div>
<p>returns true if tile has a road</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">tile</code> — Can be:<br /><br />tileObject<br /><br />{[1]=xCoord,[2]=yCoord,[3]=zCoord}<br />Converted to civ.getTile(xCoord,yCoord,zCoord) <br /><br />{[1]=xCoord,[2]=yCoord}<br />Converted to civ.getTile(xCoord,yCoord,0)<br /><br />{x=xCoord,y=yCoord,z=zCoord}<br />Converted to civ.getTile(xCoord,yCoord,zCoord) <br /><br />{x=xCoord,y=yCoord}<br />Converted to civ.getTile(xCoord,yCoord,0)</p>
<h3 id="placeroad">
  
  
    placeRoad <a href="#placeroad"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.placeRoad(tile: table|tileObject)
</code></pre></div></div>
<p>places a road on the tile
 does nothing if city present</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">tile</code> — Can be:<br /><br />tileObject<br /><br />{[1]=xCoord,[2]=yCoord,[3]=zCoord}<br />Converted to civ.getTile(xCoord,yCoord,zCoord) <br /><br />{[1]=xCoord,[2]=yCoord}<br />Converted to civ.getTile(xCoord,yCoord,0)<br /><br />{x=xCoord,y=yCoord,z=zCoord}<br />Converted to civ.getTile(xCoord,yCoord,zCoord) <br /><br />{x=xCoord,y=yCoord}<br />Converted to civ.getTile(xCoord,yCoord,0)</p>
<h3 id="removeroad">
  
  
    removeRoad <a href="#removeroad"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.removeRoad(tile: table|tileObject)
</code></pre></div></div>
<p>removes a road if there is a road but no rail
 doesn’t touch rail or cities</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">tile</code> — Can be:<br /><br />tileObject<br /><br />{[1]=xCoord,[2]=yCoord,[3]=zCoord}<br />Converted to civ.getTile(xCoord,yCoord,zCoord) <br /><br />{[1]=xCoord,[2]=yCoord}<br />Converted to civ.getTile(xCoord,yCoord,0)<br /><br />{x=xCoord,y=yCoord,z=zCoord}<br />Converted to civ.getTile(xCoord,yCoord,zCoord) <br /><br />{x=xCoord,y=yCoord}<br />Converted to civ.getTile(xCoord,yCoord,0)</p>
<h3 id="hasrailroad">
  
  
    hasRailroad <a href="#hasrailroad"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.hasRailroad(tile: table|tileObject)
  -&gt; boolean
</code></pre></div></div>
<p>returns true if a tile has a railroad (and road)</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">tile</code> — Can be:<br /><br />tileObject<br /><br />{[1]=xCoord,[2]=yCoord,[3]=zCoord}<br />Converted to civ.getTile(xCoord,yCoord,zCoord) <br /><br />{[1]=xCoord,[2]=yCoord}<br />Converted to civ.getTile(xCoord,yCoord,0)<br /><br />{x=xCoord,y=yCoord,z=zCoord}<br />Converted to civ.getTile(xCoord,yCoord,zCoord) <br /><br />{x=xCoord,y=yCoord}<br />Converted to civ.getTile(xCoord,yCoord,0)</p>
<h3 id="placerailroad">
  
  
    placeRailroad <a href="#placerailroad"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.placeRailroad(tile: table|tileObject)
</code></pre></div></div>
<p>places a railroad (and road) on a tile
 does nothing if city is present</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">tile</code> — Can be:<br /><br />tileObject<br /><br />{[1]=xCoord,[2]=yCoord,[3]=zCoord}<br />Converted to civ.getTile(xCoord,yCoord,zCoord) <br /><br />{[1]=xCoord,[2]=yCoord}<br />Converted to civ.getTile(xCoord,yCoord,0)<br /><br />{x=xCoord,y=yCoord,z=zCoord}<br />Converted to civ.getTile(xCoord,yCoord,zCoord) <br /><br />{x=xCoord,y=yCoord}<br />Converted to civ.getTile(xCoord,yCoord,0)</p>
<h3 id="removerailroad">
  
  
    removeRailroad <a href="#removerailroad"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.removeRailroad(tile: table|tileObject)
</code></pre></div></div>
<p>removes railroad from a tile if it exits,
 leaving road intact (if there is already road there)
 does nothing if a city is present</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">tile</code> — Can be:<br /><br />tileObject<br /><br />{[1]=xCoord,[2]=yCoord,[3]=zCoord}<br />Converted to civ.getTile(xCoord,yCoord,zCoord) <br /><br />{[1]=xCoord,[2]=yCoord}<br />Converted to civ.getTile(xCoord,yCoord,0)<br /><br />{x=xCoord,y=yCoord,z=zCoord}<br />Converted to civ.getTile(xCoord,yCoord,zCoord) <br /><br />{x=xCoord,y=yCoord}<br />Converted to civ.getTile(xCoord,yCoord,0)</p>
<h3 id="hastransportation">
  
  
    hasTransportation <a href="#hastransportation"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.hasTransportation(tile: table|tileObject)
  -&gt; boolean
</code></pre></div></div>
<p>returns true if tile has road or rail 
 (but not if city, unless an event has placed a road)</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">tile</code> — Can be:<br /><br />tileObject<br /><br />{[1]=xCoord,[2]=yCoord,[3]=zCoord}<br />Converted to civ.getTile(xCoord,yCoord,zCoord) <br /><br />{[1]=xCoord,[2]=yCoord}<br />Converted to civ.getTile(xCoord,yCoord,0)<br /><br />{x=xCoord,y=yCoord,z=zCoord}<br />Converted to civ.getTile(xCoord,yCoord,zCoord) <br /><br />{x=xCoord,y=yCoord}<br />Converted to civ.getTile(xCoord,yCoord,0)</p>
<h3 id="upgradetransportation">
  
  
    upgradeTransportation <a href="#upgradetransportation"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.upgradeTransportation(tile: table|tileObject)
</code></pre></div></div>
<p>places railroad if road exists, otherwise places road
 does nothing if city present</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">tile</code> — Can be:<br /><br />tileObject<br /><br />{[1]=xCoord,[2]=yCoord,[3]=zCoord}<br />Converted to civ.getTile(xCoord,yCoord,zCoord) <br /><br />{[1]=xCoord,[2]=yCoord}<br />Converted to civ.getTile(xCoord,yCoord,0)<br /><br />{x=xCoord,y=yCoord,z=zCoord}<br />Converted to civ.getTile(xCoord,yCoord,zCoord) <br /><br />{x=xCoord,y=yCoord}<br />Converted to civ.getTile(xCoord,yCoord,0)</p>
<h3 id="degradetransportation">
  
  
    degradeTransportation <a href="#degradetransportation"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.degradeTransportation(tile: table|tileObject)
</code></pre></div></div>
<p>reduces railroad to road, if rail exists
 if no rail but road, removes road
 if no transportation, does nothing
 if city does nothing</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">tile</code> — Can be:<br /><br />tileObject<br /><br />{[1]=xCoord,[2]=yCoord,[3]=zCoord}<br />Converted to civ.getTile(xCoord,yCoord,zCoord) <br /><br />{[1]=xCoord,[2]=yCoord}<br />Converted to civ.getTile(xCoord,yCoord,0)<br /><br />{x=xCoord,y=yCoord,z=zCoord}<br />Converted to civ.getTile(xCoord,yCoord,zCoord) <br /><br />{x=xCoord,y=yCoord}<br />Converted to civ.getTile(xCoord,yCoord,0)</p>
<h3 id="removetransportation">
  
  
    removeTransportation <a href="#removetransportation"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.removeTransportation(tile: table|tileObject)
</code></pre></div></div>
<p>removes road and rail, if it exists
 does nothing if city present</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">tile</code> — Can be:<br /><br />tileObject<br /><br />{[1]=xCoord,[2]=yCoord,[3]=zCoord}<br />Converted to civ.getTile(xCoord,yCoord,zCoord) <br /><br />{[1]=xCoord,[2]=yCoord}<br />Converted to civ.getTile(xCoord,yCoord,0)<br /><br />{x=xCoord,y=yCoord,z=zCoord}<br />Converted to civ.getTile(xCoord,yCoord,zCoord) <br /><br />{x=xCoord,y=yCoord}<br />Converted to civ.getTile(xCoord,yCoord,0)</p>
<h3 id="hasfortress">
  
  
    hasFortress <a href="#hasfortress"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.hasFortress(tile: table|tileObject)
  -&gt; boolean
</code></pre></div></div>
<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">tile</code> — Can be:<br /><br />tileObject<br /><br />{[1]=xCoord,[2]=yCoord,[3]=zCoord}<br />Converted to civ.getTile(xCoord,yCoord,zCoord) <br /><br />{[1]=xCoord,[2]=yCoord}<br />Converted to civ.getTile(xCoord,yCoord,0)<br /><br />{x=xCoord,y=yCoord,z=zCoord}<br />Converted to civ.getTile(xCoord,yCoord,zCoord) <br /><br />{x=xCoord,y=yCoord}<br />Converted to civ.getTile(xCoord,yCoord,0)</p>
<h3 id="placefortress">
  
  
    placeFortress <a href="#placefortress"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.placeFortress(tile: table|tileObject)
</code></pre></div></div>
<p>places a fortress on a square, unless
 there is already a city, transporter, or airbase on the tile</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">tile</code> — Can be:<br /><br />tileObject<br /><br />{[1]=xCoord,[2]=yCoord,[3]=zCoord}<br />Converted to civ.getTile(xCoord,yCoord,zCoord) <br /><br />{[1]=xCoord,[2]=yCoord}<br />Converted to civ.getTile(xCoord,yCoord,0)<br /><br />{x=xCoord,y=yCoord,z=zCoord}<br />Converted to civ.getTile(xCoord,yCoord,zCoord) <br /><br />{x=xCoord,y=yCoord}<br />Converted to civ.getTile(xCoord,yCoord,0)</p>
<h3 id="placefortressforce">
  
  
    placeFortressForce <a href="#placefortressforce"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.placeFortressForce(tile: table|tileObject)
</code></pre></div></div>
<p>places fortress (replacing airbase/transporter if necessary)
 If city on tile, nothing happens</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">tile</code> — Can be:<br /><br />tileObject<br /><br />{[1]=xCoord,[2]=yCoord,[3]=zCoord}<br />Converted to civ.getTile(xCoord,yCoord,zCoord) <br /><br />{[1]=xCoord,[2]=yCoord}<br />Converted to civ.getTile(xCoord,yCoord,0)<br /><br />{x=xCoord,y=yCoord,z=zCoord}<br />Converted to civ.getTile(xCoord,yCoord,zCoord) <br /><br />{x=xCoord,y=yCoord}<br />Converted to civ.getTile(xCoord,yCoord,0)</p>
<h3 id="removefortress">
  
  
    removeFortress <a href="#removefortress"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.removeFortress(tile: table|tileObject)
</code></pre></div></div>
<p>Checks that a fortress is in place (so as not to change
 other terrain improvements), and if so, removes the fortress</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">tile</code> — Can be:<br /><br />tileObject<br /><br />{[1]=xCoord,[2]=yCoord,[3]=zCoord}<br />Converted to civ.getTile(xCoord,yCoord,zCoord) <br /><br />{[1]=xCoord,[2]=yCoord}<br />Converted to civ.getTile(xCoord,yCoord,0)<br /><br />{x=xCoord,y=yCoord,z=zCoord}<br />Converted to civ.getTile(xCoord,yCoord,zCoord) <br /><br />{x=xCoord,y=yCoord}<br />Converted to civ.getTile(xCoord,yCoord,0)</p>
<h3 id="hasairbase">
  
  
    hasAirbase <a href="#hasairbase"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.hasAirbase(tile: table|tileObject)
  -&gt; boolean
</code></pre></div></div>
<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">tile</code> — Can be:<br /><br />tileObject<br /><br />{[1]=xCoord,[2]=yCoord,[3]=zCoord}<br />Converted to civ.getTile(xCoord,yCoord,zCoord) <br /><br />{[1]=xCoord,[2]=yCoord}<br />Converted to civ.getTile(xCoord,yCoord,0)<br /><br />{x=xCoord,y=yCoord,z=zCoord}<br />Converted to civ.getTile(xCoord,yCoord,zCoord) <br /><br />{x=xCoord,y=yCoord}<br />Converted to civ.getTile(xCoord,yCoord,0)</p>
<h3 id="placeairbase">
  
  
    placeAirbase <a href="#placeairbase"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.placeAirbase(tile: table|tileObject)
</code></pre></div></div>
<p>places an airbase on a tile as long as there is not already
 pollution, fortress, or transporter on the tile
 does nothing if city present</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">tile</code> — Can be:<br /><br />tileObject<br /><br />{[1]=xCoord,[2]=yCoord,[3]=zCoord}<br />Converted to civ.getTile(xCoord,yCoord,zCoord) <br /><br />{[1]=xCoord,[2]=yCoord}<br />Converted to civ.getTile(xCoord,yCoord,0)<br /><br />{x=xCoord,y=yCoord,z=zCoord}<br />Converted to civ.getTile(xCoord,yCoord,zCoord) <br /><br />{x=xCoord,y=yCoord}<br />Converted to civ.getTile(xCoord,yCoord,0)</p>
<h3 id="placeairbaseforce">
  
  
    placeAirbaseForce <a href="#placeairbaseforce"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.placeAirbaseForce(tile: table|tileObject)
</code></pre></div></div>
<p>places airbase, removing fortress/transporter/pollution if necessary
 if city on tile, nothing happens</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">tile</code> — Can be:<br /><br />tileObject<br /><br />{[1]=xCoord,[2]=yCoord,[3]=zCoord}<br />Converted to civ.getTile(xCoord,yCoord,zCoord) <br /><br />{[1]=xCoord,[2]=yCoord}<br />Converted to civ.getTile(xCoord,yCoord,0)<br /><br />{x=xCoord,y=yCoord,z=zCoord}<br />Converted to civ.getTile(xCoord,yCoord,zCoord) <br /><br />{x=xCoord,y=yCoord}<br />Converted to civ.getTile(xCoord,yCoord,0)</p>
<h3 id="removeairbase">
  
  
    removeAirbase <a href="#removeairbase"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.removeAirbase(tile: table|tileObject)
</code></pre></div></div>
<p>removes airbase, if one is on tile
 (so that something else doesn’t get removed)
 nothing happens if tile is a city</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">tile</code> — Can be:<br /><br />tileObject<br /><br />{[1]=xCoord,[2]=yCoord,[3]=zCoord}<br />Converted to civ.getTile(xCoord,yCoord,zCoord) <br /><br />{[1]=xCoord,[2]=yCoord}<br />Converted to civ.getTile(xCoord,yCoord,0)<br /><br />{x=xCoord,y=yCoord,z=zCoord}<br />Converted to civ.getTile(xCoord,yCoord,zCoord) <br /><br />{x=xCoord,y=yCoord}<br />Converted to civ.getTile(xCoord,yCoord,0)</p>
<h3 id="haspollution">
  
  
    hasPollution <a href="#haspollution"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.hasPollution(tile: table|tileObject)
  -&gt; boolean
</code></pre></div></div>
<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">tile</code> — Can be:<br /><br />tileObject<br /><br />{[1]=xCoord,[2]=yCoord,[3]=zCoord}<br />Converted to civ.getTile(xCoord,yCoord,zCoord) <br /><br />{[1]=xCoord,[2]=yCoord}<br />Converted to civ.getTile(xCoord,yCoord,0)<br /><br />{x=xCoord,y=yCoord,z=zCoord}<br />Converted to civ.getTile(xCoord,yCoord,zCoord) <br /><br />{x=xCoord,y=yCoord}<br />Converted to civ.getTile(xCoord,yCoord,0)</p>
<h3 id="placepollution">
  
  
    placePollution <a href="#placepollution"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.placePollution(tile: table|tileObject)
</code></pre></div></div>
<p>places pollution, unless the tile has a city, airbase
 or transporter already on the tile</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">tile</code> — Can be:<br /><br />tileObject<br /><br />{[1]=xCoord,[2]=yCoord,[3]=zCoord}<br />Converted to civ.getTile(xCoord,yCoord,zCoord) <br /><br />{[1]=xCoord,[2]=yCoord}<br />Converted to civ.getTile(xCoord,yCoord,0)<br /><br />{x=xCoord,y=yCoord,z=zCoord}<br />Converted to civ.getTile(xCoord,yCoord,zCoord) <br /><br />{x=xCoord,y=yCoord}<br />Converted to civ.getTile(xCoord,yCoord,0)</p>
<h3 id="placepollutionforce">
  
  
    placePollutionForce <a href="#placepollutionforce"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.placePollutionForce(tile: table|tileObject)
</code></pre></div></div>
<p>places pollution, unless the tile has a city, 
 transporters and airbases are removed</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">tile</code> — Can be:<br /><br />tileObject<br /><br />{[1]=xCoord,[2]=yCoord,[3]=zCoord}<br />Converted to civ.getTile(xCoord,yCoord,zCoord) <br /><br />{[1]=xCoord,[2]=yCoord}<br />Converted to civ.getTile(xCoord,yCoord,0)<br /><br />{x=xCoord,y=yCoord,z=zCoord}<br />Converted to civ.getTile(xCoord,yCoord,zCoord) <br /><br />{x=xCoord,y=yCoord}<br />Converted to civ.getTile(xCoord,yCoord,0)</p>
<h3 id="removepollution">
  
  
    removePollution <a href="#removepollution"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.removePollution(tile: table|tileObject)
</code></pre></div></div>
<p>checks if tile has pollution, and if so, removes it</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">tile</code> — Can be:<br /><br />tileObject<br /><br />{[1]=xCoord,[2]=yCoord,[3]=zCoord}<br />Converted to civ.getTile(xCoord,yCoord,zCoord) <br /><br />{[1]=xCoord,[2]=yCoord}<br />Converted to civ.getTile(xCoord,yCoord,0)<br /><br />{x=xCoord,y=yCoord,z=zCoord}<br />Converted to civ.getTile(xCoord,yCoord,zCoord) <br /><br />{x=xCoord,y=yCoord}<br />Converted to civ.getTile(xCoord,yCoord,0)</p>
<h3 id="hastransporter">
  
  
    hasTransporter <a href="#hastransporter"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.hasTransporter(tile: table|tileObject)
  -&gt; boolean
</code></pre></div></div>
<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">tile</code> — Can be:<br /><br />tileObject<br /><br />{[1]=xCoord,[2]=yCoord,[3]=zCoord}<br />Converted to civ.getTile(xCoord,yCoord,zCoord) <br /><br />{[1]=xCoord,[2]=yCoord}<br />Converted to civ.getTile(xCoord,yCoord,0)<br /><br />{x=xCoord,y=yCoord,z=zCoord}<br />Converted to civ.getTile(xCoord,yCoord,zCoord) <br /><br />{x=xCoord,y=yCoord}<br />Converted to civ.getTile(xCoord,yCoord,0)</p>
<h3 id="placetransporter">
  
  
    placeTransporter <a href="#placetransporter"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.placeTransporter(tile: any)
</code></pre></div></div>
<p>Placing transporters doesn’t work.
 This function simply produces an error.
 (This function exists mainly to show this functionality wasn’t overlooked.)</p>
<h3 id="removetransporter">
  
  
    removeTransporter <a href="#removetransporter"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.removeTransporter(tile: table|tileObject)
</code></pre></div></div>
<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">tile</code> — Can be:<br /><br />tileObject<br /><br />{[1]=xCoord,[2]=yCoord,[3]=zCoord}<br />Converted to civ.getTile(xCoord,yCoord,zCoord) <br /><br />{[1]=xCoord,[2]=yCoord}<br />Converted to civ.getTile(xCoord,yCoord,0)<br /><br />{x=xCoord,y=yCoord,z=zCoord}<br />Converted to civ.getTile(xCoord,yCoord,zCoord) <br /><br />{x=xCoord,y=yCoord}<br />Converted to civ.getTile(xCoord,yCoord,0)</p>
<h2 id="city-attribute-functions">
  
  
    City Attribute Functions <a href="#city-attribute-functions"><span class="self-link">&#128279</span></a>
  
  
</h2>
    

<p>These functions change the attribute flags of cities.  Many of these flags have unknown effects.</p>
<h3 id="iscivildisorder">
  
  
    isCivilDisorder <a href="#iscivildisorder"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.isCivilDisorder(city: cityObject)
  -&gt; boolean
</code></pre></div></div>
<h3 id="setcivildisorder">
  
  
    setCivilDisorder <a href="#setcivildisorder"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.setCivilDisorder(city: cityObject)
</code></pre></div></div>
<h3 id="clearcivildisorder">
  
  
    clearCivilDisorder <a href="#clearcivildisorder"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.clearCivilDisorder(city: cityObject)
</code></pre></div></div>
<h3 id="iswelovetheking">
  
  
    isWeLoveTheKing <a href="#iswelovetheking"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.isWeLoveTheKing(city: cityObject)
  -&gt; boolean
</code></pre></div></div>
<h3 id="setwelovetheking">
  
  
    setWeLoveTheKing <a href="#setwelovetheking"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.setWeLoveTheKing(city: cityObject)
</code></pre></div></div>
<h3 id="clearwelovetheking">
  
  
    clearWeLoveTheKing <a href="#clearwelovetheking"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.clearWeLoveTheKing(city: cityObject)
</code></pre></div></div>
<h3 id="isimprovementsold">
  
  
    isImprovementSold <a href="#isimprovementsold"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.isImprovementSold(city: cityObject)
  -&gt; boolean
</code></pre></div></div>
<h3 id="setimprovementsold">
  
  
    setImprovementSold <a href="#setimprovementsold"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.setImprovementSold(city: cityObject)
</code></pre></div></div>
<h3 id="clearimprovementsold">
  
  
    clearImprovementSold <a href="#clearimprovementsold"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.clearImprovementSold(city: cityObject)
</code></pre></div></div>
<h3 id="istechnologystolen">
  
  
    isTechnologyStolen <a href="#istechnologystolen"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.isTechnologyStolen(city: cityObject)
  -&gt; boolean
</code></pre></div></div>
<h3 id="settechnologystolen">
  
  
    setTechnologyStolen <a href="#settechnologystolen"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.setTechnologyStolen(city: cityObject)
</code></pre></div></div>
<h3 id="cleartechnologystolen">
  
  
    clearTechnologyStolen <a href="#cleartechnologystolen"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.clearTechnologyStolen(city: cityObject)
</code></pre></div></div>
<h3 id="isautobuild">
  
  
    isAutoBuild <a href="#isautobuild"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.isAutoBuild(city: cityObject)
  -&gt; boolean
</code></pre></div></div>
<h3 id="setautobuild">
  
  
    setAutoBuild <a href="#setautobuild"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.setAutoBuild(city: cityObject)
</code></pre></div></div>
<h3 id="clearautobuild">
  
  
    clearAutoBuild <a href="#clearautobuild"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.clearAutoBuild(city: cityObject)
</code></pre></div></div>
<h3 id="isattribute6">
  
  
    isAttribute6 <a href="#isattribute6"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.isAttribute6(city: cityObject)
  -&gt; boolean
</code></pre></div></div>
<p>The function of this byte in <code class="language-plaintext highlighter-rouge">city.attributes</code> is currently unknown.  If you discover it, please inform the Scenario League at Civfanatics.</p>
<h3 id="setattribute6">
  
  
    setAttribute6 <a href="#setattribute6"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.setAttribute6(city: cityObject)
</code></pre></div></div>
<p>The function of this byte in <code class="language-plaintext highlighter-rouge">city.attributes</code> is currently unknown.  If you discover it, please inform the Scenario League at Civfanatics.</p>
<h3 id="clearattribute6">
  
  
    clearAttribute6 <a href="#clearattribute6"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.clearAttribute6(city: cityObject)
</code></pre></div></div>
<p>The function of this byte in <code class="language-plaintext highlighter-rouge">city.attributes</code> is currently unknown.  If you discover it, please inform the Scenario League at Civfanatics.</p>
<h3 id="isattribute7">
  
  
    isAttribute7 <a href="#isattribute7"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.isAttribute7(city: cityObject)
  -&gt; boolean
</code></pre></div></div>
<p>The function of this byte in <code class="language-plaintext highlighter-rouge">city.attributes</code> is currently unknown.  If you discover it, please inform the Scenario League at Civfanatics.</p>
<h3 id="setattribute7">
  
  
    setAttribute7 <a href="#setattribute7"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.setAttribute7(city: cityObject)
</code></pre></div></div>
<p>The function of this byte in <code class="language-plaintext highlighter-rouge">city.attributes</code> is currently unknown.  If you discover it, please inform the Scenario League at Civfanatics.</p>
<h3 id="clearattribute7">
  
  
    clearAttribute7 <a href="#clearattribute7"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.clearAttribute7(city: cityObject)
</code></pre></div></div>
<p>The function of this byte in <code class="language-plaintext highlighter-rouge">city.attributes</code> is currently unknown.  If you discover it, please inform the Scenario League at Civfanatics.</p>
<h3 id="isbuildcoastal">
  
  
    isBuildCoastal <a href="#isbuildcoastal"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.isBuildCoastal(city: cityObject)
  -&gt; boolean
</code></pre></div></div>
<h3 id="setbuildcoastal">
  
  
    setBuildCoastal <a href="#setbuildcoastal"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.setBuildCoastal(city: cityObject)
</code></pre></div></div>
<h3 id="clearbuildcoastal">
  
  
    clearBuildCoastal <a href="#clearbuildcoastal"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.clearBuildCoastal(city: cityObject)
</code></pre></div></div>
<h3 id="isattribute9">
  
  
    isAttribute9 <a href="#isattribute9"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.isAttribute9(city: cityObject)
  -&gt; boolean
</code></pre></div></div>
<p>The function of this byte in <code class="language-plaintext highlighter-rouge">city.attributes</code> is currently unknown.  If you discover it, please inform the Scenario League at Civfanatics.</p>
<h3 id="setattribute9">
  
  
    setAttribute9 <a href="#setattribute9"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.setAttribute9(city: cityObject)
</code></pre></div></div>
<p>The function of this byte in <code class="language-plaintext highlighter-rouge">city.attributes</code> is currently unknown.  If you discover it, please inform the Scenario League at Civfanatics.</p>
<h3 id="clearattribute9">
  
  
    clearAttribute9 <a href="#clearattribute9"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.clearAttribute9(city: cityObject)
</code></pre></div></div>
<p>The function of this byte in <code class="language-plaintext highlighter-rouge">city.attributes</code> is currently unknown.  If you discover it, please inform the Scenario League at Civfanatics.</p>
<h3 id="isattribute10">
  
  
    isAttribute10 <a href="#isattribute10"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.isAttribute10(city: cityObject)
  -&gt; boolean
</code></pre></div></div>
<p>The function of this byte in <code class="language-plaintext highlighter-rouge">city.attributes</code> is currently unknown.  If you discover it, please inform the Scenario League at Civfanatics.</p>
<h3 id="setattribute10">
  
  
    setAttribute10 <a href="#setattribute10"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.setAttribute10(city: cityObject)
</code></pre></div></div>
<p>The function of this byte in <code class="language-plaintext highlighter-rouge">city.attributes</code> is currently unknown.  If you discover it, please inform the Scenario League at Civfanatics.</p>
<h3 id="clearattribute10">
  
  
    clearAttribute10 <a href="#clearattribute10"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.clearAttribute10(city: cityObject)
</code></pre></div></div>
<p>The function of this byte in <code class="language-plaintext highlighter-rouge">city.attributes</code> is currently unknown.  If you discover it, please inform the Scenario League at Civfanatics.</p>
<h3 id="isattribute11">
  
  
    isAttribute11 <a href="#isattribute11"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.isAttribute11(city: cityObject)
  -&gt; boolean
</code></pre></div></div>
<p>The function of this byte in <code class="language-plaintext highlighter-rouge">city.attributes</code> is currently unknown.  If you discover it, please inform the Scenario League at Civfanatics.</p>
<h3 id="setattribute11">
  
  
    setAttribute11 <a href="#setattribute11"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.setAttribute11(city: cityObject)
</code></pre></div></div>
<p>The function of this byte in <code class="language-plaintext highlighter-rouge">city.attributes</code> is currently unknown.  If you discover it, please inform the Scenario League at Civfanatics.</p>
<h3 id="clearattribute11">
  
  
    clearAttribute11 <a href="#clearattribute11"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.clearAttribute11(city: cityObject)
</code></pre></div></div>
<p>The function of this byte in <code class="language-plaintext highlighter-rouge">city.attributes</code> is currently unknown.  If you discover it, please inform the Scenario League at Civfanatics.</p>
<h3 id="isbuildhydroplant">
  
  
    isBuildHydroPlant <a href="#isbuildhydroplant"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.isBuildHydroPlant(city: cityObject)
  -&gt; boolean
</code></pre></div></div>
<h3 id="setbuildhydroplant">
  
  
    setBuildHydroPlant <a href="#setbuildhydroplant"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.setBuildHydroPlant(city: cityObject)
</code></pre></div></div>
<h3 id="clearbuildhydroplant">
  
  
    clearBuildHydroPlant <a href="#clearbuildhydroplant"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.clearBuildHydroPlant(city: cityObject)
</code></pre></div></div>
<h3 id="isattribute13">
  
  
    isAttribute13 <a href="#isattribute13"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.isAttribute13(city: cityObject)
  -&gt; boolean
</code></pre></div></div>
<p>The function of this byte in <code class="language-plaintext highlighter-rouge">city.attributes</code> is currently unknown.  If you discover it, please inform the Scenario League at Civfanatics.</p>
<h3 id="setattribute13">
  
  
    setAttribute13 <a href="#setattribute13"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.setAttribute13(city: cityObject)
</code></pre></div></div>
<p>The function of this byte in <code class="language-plaintext highlighter-rouge">city.attributes</code> is currently unknown.  If you discover it, please inform the Scenario League at Civfanatics.</p>
<h3 id="clearattribute13">
  
  
    clearAttribute13 <a href="#clearattribute13"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.clearAttribute13(city: cityObject)
</code></pre></div></div>
<p>The function of this byte in <code class="language-plaintext highlighter-rouge">city.attributes</code> is currently unknown.  If you discover it, please inform the Scenario League at Civfanatics.</p>
<h3 id="isattribute14">
  
  
    isAttribute14 <a href="#isattribute14"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.isAttribute14(city: cityObject)
  -&gt; boolean
</code></pre></div></div>
<p>The function of this byte in <code class="language-plaintext highlighter-rouge">city.attributes</code> is currently unknown.  If you discover it, please inform the Scenario League at Civfanatics.</p>
<h3 id="setattribute14">
  
  
    setAttribute14 <a href="#setattribute14"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.setAttribute14(city: cityObject)
</code></pre></div></div>
<p>The function of this byte in <code class="language-plaintext highlighter-rouge">city.attributes</code> is currently unknown.  If you discover it, please inform the Scenario League at Civfanatics.</p>
<h3 id="clearattribute14">
  
  
    clearAttribute14 <a href="#clearattribute14"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.clearAttribute14(city: cityObject)
</code></pre></div></div>
<p>The function of this byte in <code class="language-plaintext highlighter-rouge">city.attributes</code> is currently unknown.  If you discover it, please inform the Scenario League at Civfanatics.</p>
<h3 id="isattribute15">
  
  
    isAttribute15 <a href="#isattribute15"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.isAttribute15(city: cityObject)
  -&gt; boolean
</code></pre></div></div>
<p>The function of this byte in <code class="language-plaintext highlighter-rouge">city.attributes</code> is currently unknown.  If you discover it, please inform the Scenario League at Civfanatics.</p>
<h3 id="setattribute15">
  
  
    setAttribute15 <a href="#setattribute15"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.setAttribute15(city: cityObject)
</code></pre></div></div>
<p>The function of this byte in <code class="language-plaintext highlighter-rouge">city.attributes</code> is currently unknown.  If you discover it, please inform the Scenario League at Civfanatics.</p>
<h3 id="clearattribute15">
  
  
    clearAttribute15 <a href="#clearattribute15"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.clearAttribute15(city: cityObject)
</code></pre></div></div>
<p>The function of this byte in <code class="language-plaintext highlighter-rouge">city.attributes</code> is currently unknown.  If you discover it, please inform the Scenario League at Civfanatics.</p>
<h3 id="isattribute16">
  
  
    isAttribute16 <a href="#isattribute16"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.isAttribute16(city: cityObject)
  -&gt; boolean
</code></pre></div></div>
<p>The function of this byte in <code class="language-plaintext highlighter-rouge">city.attributes</code> is currently unknown.  If you discover it, please inform the Scenario League at Civfanatics.</p>
<h3 id="setattribute16">
  
  
    setAttribute16 <a href="#setattribute16"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.setAttribute16(city: cityObject)
</code></pre></div></div>
<p>The function of this byte in <code class="language-plaintext highlighter-rouge">city.attributes</code> is currently unknown.  If you discover it, please inform the Scenario League at Civfanatics.</p>
<h3 id="clearattribute16">
  
  
    clearAttribute16 <a href="#clearattribute16"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.clearAttribute16(city: cityObject)
</code></pre></div></div>
<p>The function of this byte in <code class="language-plaintext highlighter-rouge">city.attributes</code> is currently unknown.  If you discover it, please inform the Scenario League at Civfanatics.</p>
<h3 id="isusedairport">
  
  
    isUsedAirport <a href="#isusedairport"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.isUsedAirport(city: cityObject)
  -&gt; boolean
</code></pre></div></div>
<h3 id="setusedairport">
  
  
    setUsedAirport <a href="#setusedairport"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.setUsedAirport(city: cityObject)
</code></pre></div></div>
<h3 id="clearusedairport">
  
  
    clearUsedAirport <a href="#clearusedairport"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.clearUsedAirport(city: cityObject)
</code></pre></div></div>
<h3 id="isattribute18">
  
  
    isAttribute18 <a href="#isattribute18"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.isAttribute18(city: cityObject)
  -&gt; boolean
</code></pre></div></div>
<p>The function of this byte in <code class="language-plaintext highlighter-rouge">city.attributes</code> is currently unknown.  If you discover it, please inform the Scenario League at Civfanatics.</p>
<h3 id="setattribute18">
  
  
    setAttribute18 <a href="#setattribute18"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.setAttribute18(city: cityObject)
</code></pre></div></div>
<p>The function of this byte in <code class="language-plaintext highlighter-rouge">city.attributes</code> is currently unknown.  If you discover it, please inform the Scenario League at Civfanatics.</p>
<h3 id="clearattribute18">
  
  
    clearAttribute18 <a href="#clearattribute18"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.clearAttribute18(city: cityObject)
</code></pre></div></div>
<p>The function of this byte in <code class="language-plaintext highlighter-rouge">city.attributes</code> is currently unknown.  If you discover it, please inform the Scenario League at Civfanatics.</p>
<h3 id="isattribute19">
  
  
    isAttribute19 <a href="#isattribute19"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.isAttribute19(city: cityObject)
  -&gt; boolean
</code></pre></div></div>
<p>The function of this byte in <code class="language-plaintext highlighter-rouge">city.attributes</code> is currently unknown.  If you discover it, please inform the Scenario League at Civfanatics.</p>
<h3 id="setattribute19">
  
  
    setAttribute19 <a href="#setattribute19"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.setAttribute19(city: cityObject)
</code></pre></div></div>
<p>The function of this byte in <code class="language-plaintext highlighter-rouge">city.attributes</code> is currently unknown.  If you discover it, please inform the Scenario League at Civfanatics.</p>
<h3 id="clearattribute19">
  
  
    clearAttribute19 <a href="#clearattribute19"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.clearAttribute19(city: cityObject)
</code></pre></div></div>
<p>The function of this byte in <code class="language-plaintext highlighter-rouge">city.attributes</code> is currently unknown.  If you discover it, please inform the Scenario League at Civfanatics.</p>
<h3 id="isattribute20">
  
  
    isAttribute20 <a href="#isattribute20"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.isAttribute20(city: cityObject)
  -&gt; boolean
</code></pre></div></div>
<p>The function of this byte in <code class="language-plaintext highlighter-rouge">city.attributes</code> is currently unknown.  If you discover it, please inform the Scenario League at Civfanatics.</p>
<h3 id="setattribute20">
  
  
    setAttribute20 <a href="#setattribute20"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.setAttribute20(city: cityObject)
</code></pre></div></div>
<p>The function of this byte in <code class="language-plaintext highlighter-rouge">city.attributes</code> is currently unknown.  If you discover it, please inform the Scenario League at Civfanatics.</p>
<h3 id="clearattribute20">
  
  
    clearAttribute20 <a href="#clearattribute20"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.clearAttribute20(city: cityObject)
</code></pre></div></div>
<p>The function of this byte in <code class="language-plaintext highlighter-rouge">city.attributes</code> is currently unknown.  If you discover it, please inform the Scenario League at Civfanatics.</p>
<h3 id="isattribute21">
  
  
    isAttribute21 <a href="#isattribute21"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.isAttribute21(city: cityObject)
  -&gt; boolean
</code></pre></div></div>
<p>The function of this byte in <code class="language-plaintext highlighter-rouge">city.attributes</code> is currently unknown.  If you discover it, please inform the Scenario League at Civfanatics.</p>
<h3 id="setattribute21">
  
  
    setAttribute21 <a href="#setattribute21"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.setAttribute21(city: cityObject)
</code></pre></div></div>
<p>The function of this byte in <code class="language-plaintext highlighter-rouge">city.attributes</code> is currently unknown.  If you discover it, please inform the Scenario League at Civfanatics.</p>
<h3 id="clearattribute21">
  
  
    clearAttribute21 <a href="#clearattribute21"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.clearAttribute21(city: cityObject)
</code></pre></div></div>
<p>The function of this byte in <code class="language-plaintext highlighter-rouge">city.attributes</code> is currently unknown.  If you discover it, please inform the Scenario League at Civfanatics.</p>
<h3 id="isbuildships">
  
  
    isBuildShips <a href="#isbuildships"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.isBuildShips(city: cityObject)
  -&gt; boolean
</code></pre></div></div>
<h3 id="setbuildships">
  
  
    setBuildShips <a href="#setbuildships"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.setBuildShips(city: cityObject)
</code></pre></div></div>
<h3 id="clearbuildships">
  
  
    clearBuildShips <a href="#clearbuildships"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.clearBuildShips(city: cityObject)
</code></pre></div></div>
<h3 id="iscityinvestigated">
  
  
    isCityInvestigated <a href="#iscityinvestigated"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.isCityInvestigated(city: cityObject)
  -&gt; boolean
</code></pre></div></div>
<h3 id="setcityinvestigated">
  
  
    setCityInvestigated <a href="#setcityinvestigated"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.setCityInvestigated(city: cityObject)
</code></pre></div></div>
<h3 id="clearcityinvestigated">
  
  
    clearCityInvestigated <a href="#clearcityinvestigated"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.clearCityInvestigated(city: cityObject)
</code></pre></div></div>
<h3 id="isattribute24">
  
  
    isAttribute24 <a href="#isattribute24"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.isAttribute24(city: cityObject)
  -&gt; boolean
</code></pre></div></div>
<p>The function of this byte in <code class="language-plaintext highlighter-rouge">city.attributes</code> is currently unknown.  If you discover it, please inform the Scenario League at Civfanatics.</p>
<h3 id="setattribute24">
  
  
    setAttribute24 <a href="#setattribute24"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.setAttribute24(city: cityObject)
</code></pre></div></div>
<p>The function of this byte in <code class="language-plaintext highlighter-rouge">city.attributes</code> is currently unknown.  If you discover it, please inform the Scenario League at Civfanatics.</p>
<h3 id="clearattribute24">
  
  
    clearAttribute24 <a href="#clearattribute24"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.clearAttribute24(city: cityObject)
</code></pre></div></div>
<p>The function of this byte in <code class="language-plaintext highlighter-rouge">city.attributes</code> is currently unknown.  If you discover it, please inform the Scenario League at Civfanatics.</p>
<h3 id="ismilitaryautobuild">
  
  
    isMilitaryAutoBuild <a href="#ismilitaryautobuild"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.isMilitaryAutoBuild(city: cityObject)
  -&gt; boolean
</code></pre></div></div>
<h3 id="setmilitaryautobuild">
  
  
    setMilitaryAutoBuild <a href="#setmilitaryautobuild"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.setMilitaryAutoBuild(city: cityObject)
</code></pre></div></div>
<h3 id="clearmilitaryautobuild">
  
  
    clearMilitaryAutoBuild <a href="#clearmilitaryautobuild"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.clearMilitaryAutoBuild(city: cityObject)
</code></pre></div></div>
<h3 id="isdomesticautobuild">
  
  
    isDomesticAutoBuild <a href="#isdomesticautobuild"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.isDomesticAutoBuild(city: cityObject)
  -&gt; boolean
</code></pre></div></div>
<h3 id="setdomesticautobuild">
  
  
    setDomesticAutoBuild <a href="#setdomesticautobuild"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.setDomesticAutoBuild(city: cityObject)
</code></pre></div></div>
<h3 id="cleardomesticautobuild">
  
  
    clearDomesticAutoBuild <a href="#cleardomesticautobuild"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.clearDomesticAutoBuild(city: cityObject)
</code></pre></div></div>
<h3 id="isobjective">
  
  
    isObjective <a href="#isobjective"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.isObjective(city: cityObject)
  -&gt; boolean
</code></pre></div></div>
<h3 id="setobjective">
  
  
    setObjective <a href="#setobjective"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.setObjective(city: cityObject)
</code></pre></div></div>
<h3 id="clearobjective">
  
  
    clearObjective <a href="#clearobjective"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.clearObjective(city: cityObject)
</code></pre></div></div>
<h3 id="isattribute28">
  
  
    isAttribute28 <a href="#isattribute28"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.isAttribute28(city: cityObject)
  -&gt; boolean
</code></pre></div></div>
<p>The function of this byte in <code class="language-plaintext highlighter-rouge">city.attributes</code> is currently unknown.  If you discover it, please inform the Scenario League at Civfanatics.</p>
<h3 id="setattribute28">
  
  
    setAttribute28 <a href="#setattribute28"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.setAttribute28(city: cityObject)
</code></pre></div></div>
<p>The function of this byte in <code class="language-plaintext highlighter-rouge">city.attributes</code> is currently unknown.  If you discover it, please inform the Scenario League at Civfanatics.</p>
<h3 id="clearattribute28">
  
  
    clearAttribute28 <a href="#clearattribute28"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.clearAttribute28(city: cityObject)
</code></pre></div></div>
<p>The function of this byte in <code class="language-plaintext highlighter-rouge">city.attributes</code> is currently unknown.  If you discover it, please inform the Scenario League at Civfanatics.</p>
<h3 id="ismajorobjective">
  
  
    isMajorObjective <a href="#ismajorobjective"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.isMajorObjective(city: cityObject)
  -&gt; boolean
</code></pre></div></div>
<h3 id="setmajorobjective">
  
  
    setMajorObjective <a href="#setmajorobjective"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.setMajorObjective(city: cityObject)
</code></pre></div></div>
<h3 id="clearmajorobjective">
  
  
    clearMajorObjective <a href="#clearmajorobjective"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.clearMajorObjective(city: cityObject)
</code></pre></div></div>
<h3 id="isusedtransporter">
  
  
    isUsedTransporter <a href="#isusedtransporter"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.isUsedTransporter(city: cityObject)
  -&gt; boolean
</code></pre></div></div>
<h3 id="setusedtransporter">
  
  
    setUsedTransporter <a href="#setusedtransporter"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.setUsedTransporter(city: cityObject)
</code></pre></div></div>
<h3 id="clearusedtransporter">
  
  
    clearUsedTransporter <a href="#clearusedtransporter"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.clearUsedTransporter(city: cityObject)
</code></pre></div></div>
<h3 id="isattribute31">
  
  
    isAttribute31 <a href="#isattribute31"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.isAttribute31(city: cityObject)
  -&gt; boolean
</code></pre></div></div>
<p>The function of this byte in <code class="language-plaintext highlighter-rouge">city.attributes</code> is currently unknown.  If you discover it, please inform the Scenario League at Civfanatics.</p>
<h3 id="setattribute31">
  
  
    setAttribute31 <a href="#setattribute31"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.setAttribute31(city: cityObject)
</code></pre></div></div>
<p>The function of this byte in <code class="language-plaintext highlighter-rouge">city.attributes</code> is currently unknown.  If you discover it, please inform the Scenario League at Civfanatics.</p>
<h3 id="clearattribute31">
  
  
    clearAttribute31 <a href="#clearattribute31"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.clearAttribute31(city: cityObject)
</code></pre></div></div>
<p>The function of this byte in <code class="language-plaintext highlighter-rouge">city.attributes</code> is currently unknown.  If you discover it, please inform the Scenario League at Civfanatics.</p>
<h3 id="isattribute32">
  
  
    isAttribute32 <a href="#isattribute32"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.isAttribute32(city: cityObject)
  -&gt; boolean
</code></pre></div></div>
<p>The function of this byte in <code class="language-plaintext highlighter-rouge">city.attributes</code> is currently unknown.  If you discover it, please inform the Scenario League at Civfanatics.</p>
<h3 id="setattribute32">
  
  
    setAttribute32 <a href="#setattribute32"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.setAttribute32(city: cityObject)
</code></pre></div></div>
<p>The function of this byte in <code class="language-plaintext highlighter-rouge">city.attributes</code> is currently unknown.  If you discover it, please inform the Scenario League at Civfanatics.</p>
<h3 id="clearattribute32">
  
  
    clearAttribute32 <a href="#clearattribute32"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.clearAttribute32(city: cityObject)
</code></pre></div></div>
<p>The function of this byte in <code class="language-plaintext highlighter-rouge">city.attributes</code> is currently unknown.  If you discover it, please inform the Scenario League at Civfanatics.</p>
<h2 id="unit-order-functions">
  
  
    Unit Order Functions <a href="#unit-order-functions"><span class="self-link">&#128279</span></a>
  
  
</h2>
    

<p>These functions interact with the orders given to units.</p>
<h3 id="isfortifying">
  
  
    isFortifying <a href="#isfortifying"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.isFortifying(unit: unitObject)
  -&gt; boolean
</code></pre></div></div>
<h3 id="settofortifying">
  
  
    setToFortifying <a href="#settofortifying"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.setToFortifying(unit: unitObject)
</code></pre></div></div>
<h3 id="isfortified">
  
  
    isFortified <a href="#isfortified"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.isFortified(unit: unitObject)
  -&gt; boolean
</code></pre></div></div>
<h3 id="settofortified">
  
  
    setToFortified <a href="#settofortified"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.setToFortified(unit: unitObject)
</code></pre></div></div>
<h3 id="issleeping">
  
  
    isSleeping <a href="#issleeping"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.isSleeping(unit: unitObject)
  -&gt; boolean
</code></pre></div></div>
<h3 id="settosleeping">
  
  
    setToSleeping <a href="#settosleeping"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.setToSleeping(unit: unitObject)
</code></pre></div></div>
<h3 id="isbuildingfortress">
  
  
    isBuildingFortress <a href="#isbuildingfortress"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.isBuildingFortress(unit: unitObject)
  -&gt; boolean
</code></pre></div></div>
<h3 id="settobuildingfortress">
  
  
    setToBuildingFortress <a href="#settobuildingfortress"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.setToBuildingFortress(unit: unitObject)
</code></pre></div></div>
<h3 id="isbuildingroad">
  
  
    isBuildingRoad <a href="#isbuildingroad"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.isBuildingRoad(unit: unitObject)
  -&gt; boolean
</code></pre></div></div>
<h3 id="settobuildingroad">
  
  
    setToBuildingRoad <a href="#settobuildingroad"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.setToBuildingRoad(unit: unitObject)
</code></pre></div></div>
<h3 id="isirrigating">
  
  
    isIrrigating <a href="#isirrigating"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.isIrrigating(unit: unitObject)
  -&gt; boolean
</code></pre></div></div>
<h3 id="settoirrigating">
  
  
    setToIrrigating <a href="#settoirrigating"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.setToIrrigating(unit: unitObject)
</code></pre></div></div>
<h3 id="ismining">
  
  
    isMining <a href="#ismining"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.isMining(unit: unitObject)
  -&gt; boolean
</code></pre></div></div>
<h3 id="settomining">
  
  
    setToMining <a href="#settomining"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.setToMining(unit: unitObject)
</code></pre></div></div>
<h3 id="istransformingterrain">
  
  
    isTransformingTerrain <a href="#istransformingterrain"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.isTransformingTerrain(unit: unitObject)
  -&gt; boolean
</code></pre></div></div>
<h3 id="settotransformingterrain">
  
  
    setToTransformingTerrain <a href="#settotransformingterrain"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.setToTransformingTerrain(unit: unitObject)
</code></pre></div></div>
<h3 id="isbuildingairbase">
  
  
    isBuildingAirbase <a href="#isbuildingairbase"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.isBuildingAirbase(unit: unitObject)
  -&gt; boolean
</code></pre></div></div>
<h3 id="settobuildingairbase">
  
  
    setToBuildingAirbase <a href="#settobuildingairbase"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.setToBuildingAirbase(unit: unitObject)
</code></pre></div></div>
<h3 id="isbuildingtransporter">
  
  
    isBuildingTransporter <a href="#isbuildingtransporter"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.isBuildingTransporter(unit: unitObject)
  -&gt; boolean
</code></pre></div></div>
<h3 id="settobuildingtransporter">
  
  
    setToBuildingTransporter <a href="#settobuildingtransporter"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.setToBuildingTransporter(unit: unitObject)
</code></pre></div></div>
<h3 id="iscleaningpollution">
  
  
    isCleaningPollution <a href="#iscleaningpollution"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.isCleaningPollution(unit: unitObject)
  -&gt; boolean
</code></pre></div></div>
<h3 id="settocleaningpollution">
  
  
    setToCleaningPollution <a href="#settocleaningpollution"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.setToCleaningPollution(unit: unitObject)
</code></pre></div></div>
<h3 id="isgoingto">
  
  
    isGoingTo <a href="#isgoingto"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.isGoingTo(unit: unitObject)
  -&gt; boolean
</code></pre></div></div>
<p>Returns true if the unit has a goto order, and false otherwise.</p>
<h3 id="settogoingto">
  
  
    setToGoingTo <a href="#settogoingto"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.setToGoingTo(unit: unitObject, tile: table|tileObject|nil)
</code></pre></div></div>
<p>gives the unit a goto order for the tile
 if nil is submitted, and the unit already
 has a goto order, the unit will be changed to no orders
 (unit.gotoTile=nil results in an error)
 if the unit has some other order, it will keep that order
 note: this also accepts a table of coordinates as a tile
 (just as all other tile functions do here)</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">tile</code> — if table, the table must be a tile of coordinates</p>
<h3 id="isnoorder">
  
  
    isNoOrder <a href="#isnoorder"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.isNoOrder(unit: unitObject)
  -&gt; boolean
</code></pre></div></div>
<h3 id="settonoorders">
  
  
    setToNoOrders <a href="#settonoorders"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.setToNoOrders(unit: unitObject)
</code></pre></div></div>
<h3 id="iswaiting">
  
  
    isWaiting <a href="#iswaiting"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.isWaiting(unit: unitObject)
  -&gt; boolean
</code></pre></div></div>
<h3 id="settowaiting">
  
  
    setToWaiting <a href="#settowaiting"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.setToWaiting(unit: unitObject)
</code></pre></div></div>
<h3 id="clearwaiting">
  
  
    clearWaiting <a href="#clearwaiting"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.clearWaiting(unit: unitObject)
</code></pre></div></div>
<h3 id="isparadropped">
  
  
    isParadropped <a href="#isparadropped"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.isParadropped(unit: unitObject)
  -&gt; boolean
</code></pre></div></div>
<h3 id="setparadropped">
  
  
    setParadropped <a href="#setparadropped"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.setParadropped(unit: unitObject)
</code></pre></div></div>
<h3 id="clearparadropped">
  
  
    clearParadropped <a href="#clearparadropped"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.clearParadropped(unit: unitObject)
</code></pre></div></div>
<h3 id="ismoved">
  
  
    isMoved <a href="#ismoved"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.isMoved(unit: unitObject)
  -&gt; boolean
</code></pre></div></div>
<p>The game sets this flag when a unit moves (even if no movement points are spent).  The Unit won’t heal on next turn if this flag is set.</p>
<h3 id="setmoved">
  
  
    setMoved <a href="#setmoved"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.setMoved(unit: unitObject)
</code></pre></div></div>
<p>The game sets this flag when a unit moves (even if no movement points are spent).  The Unit won’t heal on next turn if this flag is set.</p>
<h3 id="clearmoved">
  
  
    clearMoved <a href="#clearmoved"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.clearMoved(unit: unitObject)
</code></pre></div></div>
<p>The game sets this flag when a unit moves (even if no movement points are spent).  The Unit won’t heal on next turn if this flag is set.</p>
<h2 id="unit-type-flag-functions">
  
  
    Unit Type Flag Functions <a href="#unit-type-flag-functions"><span class="self-link">&#128279</span></a>
  
  
</h2>
    

<p>These functions interact with the unit special ability flags.</p>
<h3 id="isseetwospaces">
  
  
    isSeeTwoSpaces <a href="#isseetwospaces"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.isSeeTwoSpaces(unitType: unitTypeObject)
  -&gt; boolean
</code></pre></div></div>
<h3 id="giveseetwospaces">
  
  
    giveSeeTwoSpaces <a href="#giveseetwospaces"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.giveSeeTwoSpaces(unitType: unitTypeObject)
</code></pre></div></div>
<h3 id="removeseetwospaces">
  
  
    removeSeeTwoSpaces <a href="#removeseetwospaces"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.removeSeeTwoSpaces(unitType: unitTypeObject)
</code></pre></div></div>
<h3 id="isignorezoc">
  
  
    isIgnoreZOC <a href="#isignorezoc"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.isIgnoreZOC(unitType: unitTypeObject)
  -&gt; boolean
</code></pre></div></div>
<h3 id="giveignorezoc">
  
  
    giveIgnoreZOC <a href="#giveignorezoc"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.giveIgnoreZOC(unitType: unitTypeObject)
</code></pre></div></div>
<h3 id="removeignorezoc">
  
  
    removeIgnoreZOC <a href="#removeignorezoc"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.removeIgnoreZOC(unitType: unitTypeObject)
</code></pre></div></div>
<h3 id="isamphibious">
  
  
    isAmphibious <a href="#isamphibious"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.isAmphibious(unitType: unitTypeObject)
  -&gt; boolean
</code></pre></div></div>
<h3 id="giveamphibious">
  
  
    giveAmphibious <a href="#giveamphibious"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.giveAmphibious(unitType: unitTypeObject)
</code></pre></div></div>
<h3 id="removeamphibious">
  
  
    removeAmphibious <a href="#removeamphibious"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.removeAmphibious(unitType: unitTypeObject)
</code></pre></div></div>
<h3 id="issubmarine">
  
  
    isSubmarine <a href="#issubmarine"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.isSubmarine(unitType: unitTypeObject)
  -&gt; boolean
</code></pre></div></div>
<h3 id="givesubmarine">
  
  
    giveSubmarine <a href="#givesubmarine"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.giveSubmarine(unitType: unitTypeObject)
</code></pre></div></div>
<h3 id="removesubmarine">
  
  
    removeSubmarine <a href="#removesubmarine"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.removeSubmarine(unitType: unitTypeObject)
</code></pre></div></div>
<h3 id="isattackair">
  
  
    isAttackAir <a href="#isattackair"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.isAttackAir(unitType: unitTypeObject)
  -&gt; boolean
</code></pre></div></div>
<h3 id="giveattackair">
  
  
    giveAttackAir <a href="#giveattackair"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.giveAttackAir(unitType: unitTypeObject)
</code></pre></div></div>
<h3 id="removeattackair">
  
  
    removeAttackAir <a href="#removeattackair"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.removeAttackAir(unitType: unitTypeObject)
</code></pre></div></div>
<h3 id="iscoastal">
  
  
    isCoastal <a href="#iscoastal"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.isCoastal(unitType: unitTypeObject)
  -&gt; boolean
</code></pre></div></div>
<h3 id="givecoastal">
  
  
    giveCoastal <a href="#givecoastal"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.giveCoastal(unitType: unitTypeObject)
</code></pre></div></div>
<h3 id="removecoastal">
  
  
    removeCoastal <a href="#removecoastal"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.removeCoastal(unitType: unitTypeObject)
</code></pre></div></div>
<h3 id="isignorewalls">
  
  
    isIgnoreWalls <a href="#isignorewalls"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.isIgnoreWalls(unitType: unitTypeObject)
  -&gt; boolean
</code></pre></div></div>
<h3 id="giveignorewalls">
  
  
    giveIgnoreWalls <a href="#giveignorewalls"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.giveIgnoreWalls(unitType: unitTypeObject)
</code></pre></div></div>
<h3 id="removeignorewalls">
  
  
    removeIgnoreWalls <a href="#removeignorewalls"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.removeIgnoreWalls(unitType: unitTypeObject)
</code></pre></div></div>
<h3 id="iscarryair">
  
  
    isCarryAir <a href="#iscarryair"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.isCarryAir(unitType: unitTypeObject)
  -&gt; boolean
</code></pre></div></div>
<h3 id="givecarryair">
  
  
    giveCarryAir <a href="#givecarryair"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.giveCarryAir(unitType: unitTypeObject)
</code></pre></div></div>
<h3 id="removecarryair">
  
  
    removeCarryAir <a href="#removecarryair"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.removeCarryAir(unitType: unitTypeObject)
</code></pre></div></div>
<h3 id="isparadrop">
  
  
    isParadrop <a href="#isparadrop"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.isParadrop(unitType: unitTypeObject)
  -&gt; boolean
</code></pre></div></div>
<h3 id="giveparadrop">
  
  
    giveParadrop <a href="#giveparadrop"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.giveParadrop(unitType: unitTypeObject)
</code></pre></div></div>
<h3 id="removeparadrop">
  
  
    removeParadrop <a href="#removeparadrop"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.removeParadrop(unitType: unitTypeObject)
</code></pre></div></div>
<h3 id="isalpine">
  
  
    isAlpine <a href="#isalpine"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.isAlpine(unitType: unitTypeObject)
  -&gt; boolean
</code></pre></div></div>
<h3 id="givealpine">
  
  
    giveAlpine <a href="#givealpine"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.giveAlpine(unitType: unitTypeObject)
</code></pre></div></div>
<h3 id="removealpine">
  
  
    removeAlpine <a href="#removealpine"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.removeAlpine(unitType: unitTypeObject)
</code></pre></div></div>
<h3 id="isbonusagainsthorse">
  
  
    isBonusAgainstHorse <a href="#isbonusagainsthorse"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.isBonusAgainstHorse(unitType: unitTypeObject)
  -&gt; boolean
</code></pre></div></div>
<h3 id="givebonusagainsthorse">
  
  
    giveBonusAgainstHorse <a href="#givebonusagainsthorse"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.giveBonusAgainstHorse(unitType: unitTypeObject)
</code></pre></div></div>
<h3 id="removebonusagainsthorse">
  
  
    removeBonusAgainstHorse <a href="#removebonusagainsthorse"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.removeBonusAgainstHorse(unitType: unitTypeObject)
</code></pre></div></div>
<h3 id="isfreesupportunderfundamentalism">
  
  
    isFreeSupportUnderFundamentalism <a href="#isfreesupportunderfundamentalism"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.isFreeSupportUnderFundamentalism(unitType: unitTypeObject)
  -&gt; boolean
</code></pre></div></div>
<h3 id="givefreesupportunderfundamentalism">
  
  
    giveFreeSupportUnderFundamentalism <a href="#givefreesupportunderfundamentalism"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.giveFreeSupportUnderFundamentalism(unitType: unitTypeObject)
</code></pre></div></div>
<h3 id="removefreesupportunderfundamentalism">
  
  
    removeFreeSupportUnderFundamentalism <a href="#removefreesupportunderfundamentalism"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.removeFreeSupportUnderFundamentalism(unitType: unitTypeObject)
</code></pre></div></div>
<h3 id="isdestroyedafterattacking">
  
  
    isDestroyedAfterAttacking <a href="#isdestroyedafterattacking"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.isDestroyedAfterAttacking(unitType: unitTypeObject)
  -&gt; boolean
</code></pre></div></div>
<h3 id="givedestroyedafterattacking">
  
  
    giveDestroyedAfterAttacking <a href="#givedestroyedafterattacking"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.giveDestroyedAfterAttacking(unitType: unitTypeObject)
</code></pre></div></div>
<h3 id="removedestroyedafterattacking">
  
  
    removeDestroyedAfterAttacking <a href="#removedestroyedafterattacking"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.removeDestroyedAfterAttacking(unitType: unitTypeObject)
</code></pre></div></div>
<h3 id="isbonusagainstair">
  
  
    isBonusAgainstAir <a href="#isbonusagainstair"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.isBonusAgainstAir(unitType: unitTypeObject)
  -&gt; boolean
</code></pre></div></div>
<h3 id="givebonusagainstair">
  
  
    giveBonusAgainstAir <a href="#givebonusagainstair"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.giveBonusAgainstAir(unitType: unitTypeObject)
</code></pre></div></div>
<h3 id="removebonusagainstair">
  
  
    removeBonusAgainstAir <a href="#removebonusagainstair"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.removeBonusAgainstAir(unitType: unitTypeObject)
</code></pre></div></div>
<h3 id="isspotsubmarines">
  
  
    isSpotSubmarines <a href="#isspotsubmarines"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.isSpotSubmarines(unitType: unitTypeObject)
  -&gt; boolean
</code></pre></div></div>
<h3 id="givespotsubmarines">
  
  
    giveSpotSubmarines <a href="#givespotsubmarines"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.giveSpotSubmarines(unitType: unitTypeObject)
</code></pre></div></div>
<h3 id="removespotsubmarines">
  
  
    removeSpotSubmarines <a href="#removespotsubmarines"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.removeSpotSubmarines(unitType: unitTypeObject)
</code></pre></div></div>
<h3 id="isinvisibleuntilattack">
  
  
    isInvisibleUntilAttack <a href="#isinvisibleuntilattack"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.isInvisibleUntilAttack(unitType: unitTypeObject)
  -&gt; boolean
</code></pre></div></div>
<h3 id="giveinvisibleuntilattack">
  
  
    giveInvisibleUntilAttack <a href="#giveinvisibleuntilattack"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.giveInvisibleUntilAttack(unitType: unitTypeObject)
</code></pre></div></div>
<h3 id="removeinvisibleuntilattack">
  
  
    removeInvisibleUntilAttack <a href="#removeinvisibleuntilattack"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.removeInvisibleUntilAttack(unitType: unitTypeObject)
</code></pre></div></div>
<h3 id="isnondisbandable">
  
  
    isNonDisbandable <a href="#isnondisbandable"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.isNonDisbandable(unitType: unitTypeObject)
  -&gt; boolean
</code></pre></div></div>
<h3 id="givenondisbandable">
  
  
    giveNonDisbandable <a href="#givenondisbandable"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.giveNonDisbandable(unitType: unitTypeObject)
</code></pre></div></div>
<h3 id="removenondisbandable">
  
  
    removeNonDisbandable <a href="#removenondisbandable"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.removeNonDisbandable(unitType: unitTypeObject)
</code></pre></div></div>
<h3 id="iszerorangeairunitdamageoverride">
  
  
    isZeroRangeAirUnitDamageOverride <a href="#iszerorangeairunitdamageoverride"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.isZeroRangeAirUnitDamageOverride(unitType: unitTypeObject)
  -&gt; boolean
</code></pre></div></div>
<h3 id="givezerorangeairunitdamageoverride">
  
  
    giveZeroRangeAirUnitDamageOverride <a href="#givezerorangeairunitdamageoverride"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.giveZeroRangeAirUnitDamageOverride(unitType: unitTypeObject)
</code></pre></div></div>
<h3 id="removezerorangeairunitdamageoverride">
  
  
    removeZeroRangeAirUnitDamageOverride <a href="#removezerorangeairunitdamageoverride"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.removeZeroRangeAirUnitDamageOverride(unitType: unitTypeObject)
</code></pre></div></div>
<h3 id="iscannotbuyoffbarbarian">
  
  
    isCannotBuyOffBarbarian <a href="#iscannotbuyoffbarbarian"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.isCannotBuyOffBarbarian(unitType: unitTypeObject)
  -&gt; boolean
</code></pre></div></div>
<h3 id="givecannotbuyoffbarbarian">
  
  
    giveCannotBuyOffBarbarian <a href="#givecannotbuyoffbarbarian"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.giveCannotBuyOffBarbarian(unitType: unitTypeObject)
</code></pre></div></div>
<h3 id="removecannotbuyoffbarbarian">
  
  
    removeCannotBuyOffBarbarian <a href="#removecannotbuyoffbarbarian"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.removeCannotBuyOffBarbarian(unitType: unitTypeObject)
</code></pre></div></div>
<h3 id="iscancrossimpassableterrain">
  
  
    isCanCrossImpassableTerrain <a href="#iscancrossimpassableterrain"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.isCanCrossImpassableTerrain(unitType: unitTypeObject)
  -&gt; boolean
</code></pre></div></div>
<h3 id="givecancrossimpassableterrain">
  
  
    giveCanCrossImpassableTerrain <a href="#givecancrossimpassableterrain"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.giveCanCrossImpassableTerrain(unitType: unitTypeObject)
</code></pre></div></div>
<h3 id="removecancrossimpassableterrain">
  
  
    removeCanCrossImpassableTerrain <a href="#removecancrossimpassableterrain"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.removeCanCrossImpassableTerrain(unitType: unitTypeObject)
</code></pre></div></div>
<h3 id="isbarbarianwillnotexpire">
  
  
    isBarbarianWillNotExpire <a href="#isbarbarianwillnotexpire"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.isBarbarianWillNotExpire(unitType: unitTypeObject)
  -&gt; boolean
</code></pre></div></div>
<h3 id="givebarbarianwillnotexpire">
  
  
    giveBarbarianWillNotExpire <a href="#givebarbarianwillnotexpire"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.giveBarbarianWillNotExpire(unitType: unitTypeObject)
</code></pre></div></div>
<h3 id="removebarbarianwillnotexpire">
  
  
    removeBarbarianWillNotExpire <a href="#removebarbarianwillnotexpire"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.removeBarbarianWillNotExpire(unitType: unitTypeObject)
</code></pre></div></div>
<h3 id="isoverridespr">
  
  
    isOverrideSPR <a href="#isoverridespr"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.isOverrideSPR(unitType: unitTypeObject)
  -&gt; boolean
</code></pre></div></div>
<h3 id="giveoverridespr">
  
  
    giveOverrideSPR <a href="#giveoverridespr"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.giveOverrideSPR(unitType: unitTypeObject)
</code></pre></div></div>
<h3 id="removeoverridespr">
  
  
    removeOverrideSPR <a href="#removeoverridespr"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.removeOverrideSPR(unitType: unitTypeObject)
</code></pre></div></div>
<h3 id="isreducepopulationwhenbuilt">
  
  
    isReducePopulationWhenBuilt <a href="#isreducepopulationwhenbuilt"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.isReducePopulationWhenBuilt(unitType: unitTypeObject)
  -&gt; boolean
</code></pre></div></div>
<h3 id="givereducepopulationwhenbuilt">
  
  
    giveReducePopulationWhenBuilt <a href="#givereducepopulationwhenbuilt"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.giveReducePopulationWhenBuilt(unitType: unitTypeObject)
</code></pre></div></div>
<h3 id="removereducepopulationwhenbuilt">
  
  
    removeReducePopulationWhenBuilt <a href="#removereducepopulationwhenbuilt"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.removeReducePopulationWhenBuilt(unitType: unitTypeObject)
</code></pre></div></div>
<h3 id="isrequiresfoodsupport">
  
  
    isRequiresFoodSupport <a href="#isrequiresfoodsupport"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.isRequiresFoodSupport(unitType: unitTypeObject)
  -&gt; boolean
</code></pre></div></div>
<h3 id="giverequiresfoodsupport">
  
  
    giveRequiresFoodSupport <a href="#giverequiresfoodsupport"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.giveRequiresFoodSupport(unitType: unitTypeObject)
</code></pre></div></div>
<h3 id="removerequiresfoodsupport">
  
  
    removeRequiresFoodSupport <a href="#removerequiresfoodsupport"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.removeRequiresFoodSupport(unitType: unitTypeObject)
</code></pre></div></div>
<h3 id="iscanfoundcities">
  
  
    isCanFoundCities <a href="#iscanfoundcities"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.isCanFoundCities(unitType: unitTypeObject)
  -&gt; boolean
</code></pre></div></div>
<h3 id="givecanfoundcities">
  
  
    giveCanFoundCities <a href="#givecanfoundcities"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.giveCanFoundCities(unitType: unitTypeObject)
</code></pre></div></div>
<h3 id="removecanfoundcities">
  
  
    removeCanFoundCities <a href="#removecanfoundcities"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.removeCanFoundCities(unitType: unitTypeObject)
</code></pre></div></div>
<h3 id="iscanimprovetiles">
  
  
    isCanImproveTiles <a href="#iscanimprovetiles"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.isCanImproveTiles(unitType: unitTypeObject)
  -&gt; boolean
</code></pre></div></div>
<h3 id="givecanimprovetiles">
  
  
    giveCanImproveTiles <a href="#givecanimprovetiles"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.giveCanImproveTiles(unitType: unitTypeObject, ignoreError?: boolean)
</code></pre></div></div>
<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">ignoreError</code> — Default is false</p>

<p>Bestows the ability to improve tiles to units with settler role.
 Units without settler role produce an error, unless ignoreError
 is set to true.</p>
<h3 id="removecanimprovetiles">
  
  
    removeCanImproveTiles <a href="#removecanimprovetiles"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.removeCanImproveTiles(unitType: unitTypeObject, ignoreError?: boolean)
</code></pre></div></div>
<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">ignoreError</code> — Default is false</p>

<p>Removes the ability to improve tiles from units with settler role.
 Units without settler role produce an error, unless ignoreError
 is set to true.</p>
<h3 id="isallowedonmap">
  
  
    isAllowedOnMap <a href="#isallowedonmap"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.isAllowedOnMap(unitType: unitTypeObject, map: integer|mapObject)
  -&gt; boolean
</code></pre></div></div>
<p>Returns true if the <code class="language-plaintext highlighter-rouge">unitType</code> is allowed on <code class="language-plaintext highlighter-rouge">map</code>, and false otherwise.</p>
<h3 id="giveallowedonmap">
  
  
    giveAllowedOnMap <a href="#giveallowedonmap"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.giveAllowedOnMap(unitType: unitTypeObject, map: integer|mapObject)
</code></pre></div></div>
<p>Allows the <code class="language-plaintext highlighter-rouge">unitType</code> to be on <code class="language-plaintext highlighter-rouge">map</code></p>
<h3 id="removeallowedonmap">
  
  
    removeAllowedOnMap <a href="#removeallowedonmap"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.removeAllowedOnMap(unitType: unitTypeObject, map: integer|mapObject)
</code></pre></div></div>
<p>Forbids the <code class="language-plaintext highlighter-rouge">unitType</code> to be on <code class="language-plaintext highlighter-rouge">map</code></p>
<h3 id="isnativetransportbetweenmaps">
  
  
    isNativeTransportBetweenMaps <a href="#isnativetransportbetweenmaps"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.isNativeTransportBetweenMaps(unitType: unitTypeObject, map1: integer|mapObject, map2: integer|mapObject)
  -&gt; boolean
</code></pre></div></div>
<p>Returns true if <code class="language-plaintext highlighter-rouge">unitType</code> can natively teleport between <code class="language-plaintext highlighter-rouge">map1</code> and <code class="language-plaintext highlighter-rouge">map2</code>, and false otherwise.
Always returns true if <code class="language-plaintext highlighter-rouge">map1</code> and <code class="language-plaintext highlighter-rouge">map2</code> are the same.</p>
<h3 id="givenativetransportbetweenmaps">
  
  
    giveNativeTransportBetweenMaps <a href="#givenativetransportbetweenmaps"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.giveNativeTransportBetweenMaps(unitType: unitTypeObject, map1: integer|mapObject, map2: integer|mapObject, suppressFailureError?: boolean)
</code></pre></div></div>
<p>Changes the <code class="language-plaintext highlighter-rouge">unitType</code>’s nativeTransport field so that the
 unit can teleport between <code class="language-plaintext highlighter-rouge">map1</code> and <code class="language-plaintext highlighter-rouge">map2</code>.
 (If there are multiple map relationships
 between <code class="language-plaintext highlighter-rouge">map1</code> and <code class="language-plaintext highlighter-rouge">map2</code>, there is no guarantee which one will
 be enabled, and, in fact, one may be enabled even if another one
 already grants the relationship.  If such details are important,
 write a function manually.)
 If the maps are the same, or there is no possible transportation
 between them, an error is thrown, unless <code class="language-plaintext highlighter-rouge">suppressFailureError</code>
 is <code class="language-plaintext highlighter-rouge">true</code>, in which case the nativeTransport field is unchanged.</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">suppressFailureError</code> — if true, invalid map combinations do nothing instead of causing an error.</p>
<h3 id="removenativetransportbetweenmaps">
  
  
    removeNativeTransportBetweenMaps <a href="#removenativetransportbetweenmaps"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.removeNativeTransportBetweenMaps(unitType: unitTypeObject, map1: integer|mapObject, map2: integer|mapObject, suppressFailureError?: boolean)
</code></pre></div></div>
<p>Changes the <code class="language-plaintext highlighter-rouge">unitType</code>’s nativeTransport field so that the
 unit can’t teleport between <code class="language-plaintext highlighter-rouge">map1</code> and <code class="language-plaintext highlighter-rouge">map2</code>.
 (If there are multiple map relationships
 between <code class="language-plaintext highlighter-rouge">map1</code> and <code class="language-plaintext highlighter-rouge">map2</code>, all will be removed.)
 If the maps are the same, or there is no possible transportation
 between them, an error is thrown, unless <code class="language-plaintext highlighter-rouge">suppressFailureError</code>
 is <code class="language-plaintext highlighter-rouge">true</code>, in which case the nativeTransport field is unchanged.</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">suppressFailureError</code> — if true, invalid map combinations do nothing instead of causing an error.</p>
<h3 id="isbuildtransportbetweenmaps">
  
  
    isBuildTransportBetweenMaps <a href="#isbuildtransportbetweenmaps"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.isBuildTransportBetweenMaps(unitType: unitTypeObject, map1: integer|mapObject, map2: integer|mapObject)
  -&gt; boolean
</code></pre></div></div>
<p>Returns true if <code class="language-plaintext highlighter-rouge">unitType</code> can build transporters between <code class="language-plaintext highlighter-rouge">map1</code> and <code class="language-plaintext highlighter-rouge">map2</code>, and false otherwise.
Always returns true if <code class="language-plaintext highlighter-rouge">map1</code> and <code class="language-plaintext highlighter-rouge">map2</code> are the same.</p>
<h3 id="givebuildtransportbetweenmaps">
  
  
    giveBuildTransportBetweenMaps <a href="#givebuildtransportbetweenmaps"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.giveBuildTransportBetweenMaps(unitType: unitTypeObject, map1: integer|mapObject, map2: integer|mapObject, suppressFailureError?: boolean)
</code></pre></div></div>
<p>Changes the <code class="language-plaintext highlighter-rouge">unitType</code>’s buildTransport field so that the
 unit can build teleporters between <code class="language-plaintext highlighter-rouge">map1</code> and <code class="language-plaintext highlighter-rouge">map2</code>.
 (If there are multiple map relationships
 between <code class="language-plaintext highlighter-rouge">map1</code> and <code class="language-plaintext highlighter-rouge">map2</code>, there is no guarantee which one will
 be enabled, and, in fact, one may be enabled even if another one
 already grants the relationship.  If such details are important,
 write a function manually.)
 If the maps are the same, or there is no possible transportation
 between them, an error is thrown, unless <code class="language-plaintext highlighter-rouge">suppressFailureError</code>
 is <code class="language-plaintext highlighter-rouge">true</code>, in which case the buildTransport field is unchanged.</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">suppressFailureError</code> — if true, invalid map combinations do nothing instead of causing an error.</p>
<h3 id="removebuildtransportbetweenmaps">
  
  
    removeBuildTransportBetweenMaps <a href="#removebuildtransportbetweenmaps"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.removeBuildTransportBetweenMaps(unitType: unitTypeObject, map1: integer|mapObject, map2: integer|mapObject, suppressFailureError?: boolean)
</code></pre></div></div>
<p>Changes the <code class="language-plaintext highlighter-rouge">unitType</code>’s buildTransport field so that the
 unit can’t build teleporters between <code class="language-plaintext highlighter-rouge">map1</code> and <code class="language-plaintext highlighter-rouge">map2</code>.
 (If there are multiple map relationships
 between <code class="language-plaintext highlighter-rouge">map1</code> and <code class="language-plaintext highlighter-rouge">map2</code>, all will be set to 0.)
 If the maps are the same, or there is no possible transportation
 between them, an error is thrown, unless <code class="language-plaintext highlighter-rouge">suppressFailureError</code>
 is <code class="language-plaintext highlighter-rouge">true</code>, in which case the buildTransport field is unchanged.</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">suppressFailureError</code> — if true, invalid map combinations do nothing instead of causing an error.</p>
<h3 id="isusetransportbetweenmaps">
  
  
    isUseTransportBetweenMaps <a href="#isusetransportbetweenmaps"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.isUseTransportBetweenMaps(unitType: unitTypeObject, map1: integer|mapObject, map2: integer|mapObject)
  -&gt; boolean
</code></pre></div></div>
<p>Returns true if <code class="language-plaintext highlighter-rouge">unitType</code> can build transporters between <code class="language-plaintext highlighter-rouge">map1</code> and <code class="language-plaintext highlighter-rouge">map2</code>, and false otherwise.
Always returns true if <code class="language-plaintext highlighter-rouge">map1</code> and <code class="language-plaintext highlighter-rouge">map2</code> are the same.</p>
<h3 id="giveusetransportbetweenmaps">
  
  
    giveUseTransportBetweenMaps <a href="#giveusetransportbetweenmaps"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.giveUseTransportBetweenMaps(unitType: unitTypeObject, map1: integer|mapObject, map2: integer|mapObject, suppressFailureError?: boolean)
</code></pre></div></div>
<p>Changes the <code class="language-plaintext highlighter-rouge">unitType</code>’s useTransport field so that the
 unit can use teleporters between <code class="language-plaintext highlighter-rouge">map1</code> and <code class="language-plaintext highlighter-rouge">map2</code>.
 (If there are multiple map relationships
 between <code class="language-plaintext highlighter-rouge">map1</code> and <code class="language-plaintext highlighter-rouge">map2</code>, there is no guarantee which one will
 be enabled, and, in fact, one may be enabled even if another one
 already grants the relationship.  If such details are important,
 write a function manually.)
 If the maps are the same, or there is no possible transportation
 between them, an error is thrown, unless <code class="language-plaintext highlighter-rouge">suppressFailureError</code>
 is <code class="language-plaintext highlighter-rouge">true</code>, in which case the useTransport field is unchanged.</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">suppressFailureError</code> — if true, invalid map combinations do nothing instead of causing an error.</p>
<h3 id="removeusetransportbetweenmaps">
  
  
    removeUseTransportBetweenMaps <a href="#removeusetransportbetweenmaps"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.removeUseTransportBetweenMaps(unitType: unitTypeObject, map1: integer|mapObject, map2: integer|mapObject, suppressFailureError?: boolean)
</code></pre></div></div>
<p>Changes the <code class="language-plaintext highlighter-rouge">unitType</code>’s useTransport field so that the
 unit can’t use teleporters between <code class="language-plaintext highlighter-rouge">map1</code> and <code class="language-plaintext highlighter-rouge">map2</code>.
 (If there are multiple map relationships
 between <code class="language-plaintext highlighter-rouge">map1</code> and <code class="language-plaintext highlighter-rouge">map2</code>, all will be set to 0)
 If the maps are the same, or there is no possible transportation
 between them, an error is thrown, unless <code class="language-plaintext highlighter-rouge">suppressFailureError</code>
 is <code class="language-plaintext highlighter-rouge">true</code>, in which case the useTransport field is unchanged.</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">suppressFailureError</code> — if true, invalid map combinations do nothing instead of causing an error.</p>
<h2 id="map-visibility-functions">
  
  
    Map Visibility Functions <a href="#map-visibility-functions"><span class="self-link">&#128279</span></a>
  
  
</h2>
    

<p>These functions control what is shown to individual tribes on the map.</p>
<h3 id="istilerevealed">
  
  
    isTileRevealed <a href="#istilerevealed"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.isTileRevealed(tile: table|tileObject, tribe: tribeObject)
  -&gt; boolean
</code></pre></div></div>
<p>Returns true if <code class="language-plaintext highlighter-rouge">tile</code> is revealed to <code class="language-plaintext highlighter-rouge">tribe</code>, false otherwise.</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">tile</code> — Can be:<br /><br />tileObject<br /><br />{[1]=xCoord,[2]=yCoord,[3]=zCoord}<br />Converted to civ.getTile(xCoord,yCoord,zCoord) <br /><br />{[1]=xCoord,[2]=yCoord}<br />Converted to civ.getTile(xCoord,yCoord,0)<br /><br />{x=xCoord,y=yCoord,z=zCoord}<br />Converted to civ.getTile(xCoord,yCoord,zCoord) <br /><br />{x=xCoord,y=yCoord}<br />Converted to civ.getTile(xCoord,yCoord,0)</p>
<h3 id="revealtile">
  
  
    revealTile <a href="#revealtile"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.revealTile(tile: table|tileObject, tribe: tribeObject)
</code></pre></div></div>
<p>gen.revealTile(tile,tribe) -&gt; void
 makes <code class="language-plaintext highlighter-rouge">tile</code> visible to <code class="language-plaintext highlighter-rouge">tribe</code></p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">tile</code> — Can be:<br /><br />tileObject<br /><br />{[1]=xCoord,[2]=yCoord,[3]=zCoord}<br />Converted to civ.getTile(xCoord,yCoord,zCoord) <br /><br />{[1]=xCoord,[2]=yCoord}<br />Converted to civ.getTile(xCoord,yCoord,0)<br /><br />{x=xCoord,y=yCoord,z=zCoord}<br />Converted to civ.getTile(xCoord,yCoord,zCoord) <br /><br />{x=xCoord,y=yCoord}<br />Converted to civ.getTile(xCoord,yCoord,0)</p>
<h3 id="covertile">
  
  
    coverTile <a href="#covertile"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.coverTile(tile: table|tileObject, tribe: tribeObject)
</code></pre></div></div>
<p>gen.coverTile(tile,tribe) -&gt; void
 covers a tile so it isn’t visible to tribe (if it ever was)</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">tile</code> — Can be:<br /><br />tileObject<br /><br />{[1]=xCoord,[2]=yCoord,[3]=zCoord}<br />Converted to civ.getTile(xCoord,yCoord,zCoord) <br /><br />{[1]=xCoord,[2]=yCoord}<br />Converted to civ.getTile(xCoord,yCoord,0)<br /><br />{x=xCoord,y=yCoord,z=zCoord}<br />Converted to civ.getTile(xCoord,yCoord,zCoord) <br /><br />{x=xCoord,y=yCoord}<br />Converted to civ.getTile(xCoord,yCoord,0)</p>
<h3 id="isunitstackvisible">
  
  
    isUnitStackVisible <a href="#isunitstackvisible"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.isUnitStackVisible(unitOrTile: tileObject|unitObject, tribe: tribeObject, emptyTileReturnValue: &lt;emptyTileReturnValue&gt;)
  -&gt; boolean|&lt;emptyTileReturnValue&gt;
</code></pre></div></div>
<p>If a unit is provided, returns true if that unit is visible to tribe, and false if not.
 Note: a tribe’s own units are visible to it (even though unit.visibility doesn’t show this).
 If a tile is provided, returns true if there are units on the tile and the tribe can see them,
 false if units are on the tile and the tribe can’t see them, and
 returns emptyTileReturnValue (default nil) if there are no units on the tile.</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">emptyTileReturnValue</code> — Default value is nil.</p>
<h3 id="hideunitstack">
  
  
    hideUnitStack <a href="#hideunitstack"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.hideUnitStack(unitOrTile: table|tileObject|unitObject, tribe: tribeObject)
</code></pre></div></div>
<p>If a unit is provided, hides the unit and all other units on the tile from tribe
 If a tile is provided, hides all units on the tile (if any are present)</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">unitOrTile</code> — Can be:<br /><br />tileObject<br /><br />unitObject<br /><br />{[1]=xCoord,[2]=yCoord,[3]=zCoord}<br />Converted to civ.getTile(xCoord,yCoord,zCoord) <br /><br />{[1]=xCoord,[2]=yCoord}<br />Converted to civ.getTile(xCoord,yCoord,0)<br /><br />{x=xCoord,y=yCoord,z=zCoord}<br />Converted to civ.getTile(xCoord,yCoord,zCoord) <br /><br />{x=xCoord,y=yCoord}<br />Converted to civ.getTile(xCoord,yCoord,0)</p>
<h3 id="revealunitstack">
  
  
    revealUnitStack <a href="#revealunitstack"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.revealUnitStack(unitOrTile: table|tileObject|unitObject, tribe: tribeObject)
</code></pre></div></div>
<p>If a unit is provided, reveals that unit and all other units on the tile
 to the tribe.
 If a tile is provided, reveals all units on the tile to the tribe (if any are present).</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">unitOrTile</code> — Can be:<br /><br />tileObject<br /><br />unitObject<br /><br />{[1]=xCoord,[2]=yCoord,[3]=zCoord}<br />Converted to civ.getTile(xCoord,yCoord,zCoord) <br /><br />{[1]=xCoord,[2]=yCoord}<br />Converted to civ.getTile(xCoord,yCoord,0)<br /><br />{x=xCoord,y=yCoord,z=zCoord}<br />Converted to civ.getTile(xCoord,yCoord,zCoord) <br /><br />{x=xCoord,y=yCoord}<br />Converted to civ.getTile(xCoord,yCoord,0)</p>
<h3 id="iscitycharted">
  
  
    isCityCharted <a href="#iscitycharted"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.isCityCharted(city: cityObject, tribe: tribeObject)
  -&gt; boolean
</code></pre></div></div>
<p>Returns true if city is “knownTo” tribe (that is,
 will appear on the map if the tile is visible), false otherwise.</p>
<h3 id="chartcity">
  
  
    chartCity <a href="#chartcity"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.chartCity(city: cityObject, tribe: tribeObject, visibleSize?: integer)
</code></pre></div></div>
<p>Makes city visible to tribe on the map, setting it to visibleSize if provided.
 If city.sizeForTribe[tribe] == 0 (the default value) after this, it is set to 1
 since a city does not appear if city.sizeForTribe[tribe] == 0
 does not change the visibility of the tile.</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">visibleSize</code> — 1 by default.</p>
<h3 id="unchartcity">
  
  
    unchartCity <a href="#unchartcity"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.unchartCity(city: any, tribe: any)
</code></pre></div></div>
<p>Makes a <code class="language-plaintext highlighter-rouge">city</code> invisible to <code class="language-plaintext highlighter-rouge">tribe</code> (but doesn’t cover the tile in black)
 by changing the knownTo field.</p>
<h3 id="isirrigationcharted">
  
  
    isIrrigationCharted <a href="#isirrigationcharted"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.isIrrigationCharted(tile: tileObject, tribe: tribeObject)
  -&gt; boolean
</code></pre></div></div>
<p>Returns true if tribe sees Irrigation on the tile, and false otherwise.
 Does not consider if tile is revealed to the tribe.</p>
<h3 id="chartirrigation">
  
  
    chartIrrigation <a href="#chartirrigation"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.chartIrrigation(tile: tileObject, tribe: tribeObject)
</code></pre></div></div>
<p>Charts Irrigation on the tribe’s map of tile, uncharting any conflicting improvements.</p>
<h3 id="unchartirrigation">
  
  
    unchartIrrigation <a href="#unchartirrigation"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.unchartIrrigation(tile: tileObject, tribe: tribeObject)
</code></pre></div></div>
<p>Uncharts Irrigation on the tribe’s map of tile, if Irrigation has been charted.
 If Irrigation is not charted, the chart remains unchanged.</p>
<h3 id="isminecharted">
  
  
    isMineCharted <a href="#isminecharted"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.isMineCharted(tile: tileObject, tribe: tribeObject)
  -&gt; boolean
</code></pre></div></div>
<p>Returns true if tribe sees Mine on the tile, and false otherwise.
 Does not consider if tile is revealed to the tribe.</p>
<h3 id="chartmine">
  
  
    chartMine <a href="#chartmine"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.chartMine(tile: tileObject, tribe: tribeObject)
</code></pre></div></div>
<p>Charts Mine on the tribe’s map of tile, uncharting any conflicting improvements.</p>
<h3 id="unchartmine">
  
  
    unchartMine <a href="#unchartmine"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.unchartMine(tile: tileObject, tribe: tribeObject)
</code></pre></div></div>
<p>Uncharts Mine on the tribe’s map of tile, if Mine has been charted.
 If Mine is not charted, the chart remains unchanged.</p>
<h3 id="isfarmlandcharted">
  
  
    isFarmlandCharted <a href="#isfarmlandcharted"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.isFarmlandCharted(tile: tileObject, tribe: tribeObject)
  -&gt; boolean
</code></pre></div></div>
<p>Returns true if tribe sees Farmland on the tile, and false otherwise.
 Does not consider if tile is revealed to the tribe.</p>
<h3 id="chartfarmland">
  
  
    chartFarmland <a href="#chartfarmland"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.chartFarmland(tile: tileObject, tribe: tribeObject)
</code></pre></div></div>
<p>Charts Farmland on the tribe’s map of tile, uncharting any conflicting improvements.</p>
<h3 id="unchartfarmland">
  
  
    unchartFarmland <a href="#unchartfarmland"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.unchartFarmland(tile: tileObject, tribe: tribeObject)
  -&gt; boolean
</code></pre></div></div>
<p>Uncharts Farmland on the tribe’s map of tile, if Farmland has been charted.
 If Farmland is not charted, the chart remains unchanged.</p>
<h3 id="isroadcharted">
  
  
    isRoadCharted <a href="#isroadcharted"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.isRoadCharted(tile: tileObject, tribe: tribeObject)
  -&gt; boolean
</code></pre></div></div>
<p>Returns true if tribe sees Road on the tile, and false otherwise.
 Does not consider if tile is revealed to the tribe.</p>
<h3 id="chartroad">
  
  
    chartRoad <a href="#chartroad"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.chartRoad(tile: tileObject, tribe: tribeObject)
</code></pre></div></div>
<p>Charts Road on the tribe’s map of tile, uncharting any conflicting improvements.</p>
<h3 id="unchartroad">
  
  
    unchartRoad <a href="#unchartroad"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.unchartRoad(tile: tileObject, tribe: tribeObject)
</code></pre></div></div>
<p>Uncharts Road on the tribe’s map of tile, if Road has been charted.
 If Road is not charted, the chart remains unchanged.</p>
<h3 id="israilroadcharted">
  
  
    isRailroadCharted <a href="#israilroadcharted"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.isRailroadCharted(tile: tileObject, tribe: tribeObject)
  -&gt; boolean
</code></pre></div></div>
<p>Returns true if tribe sees Railroad on the tile, and false otherwise.
 Does not consider if tile is revealed to the tribe.</p>
<h3 id="chartrailroad">
  
  
    chartRailroad <a href="#chartrailroad"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.chartRailroad(tile: tileObject, tribe: tribeObject)
</code></pre></div></div>
<p>Charts Railroad on the tribe’s map of tile, uncharting any conflicting improvements.</p>
<h3 id="unchartrailroad">
  
  
    unchartRailroad <a href="#unchartrailroad"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.unchartRailroad(tile: tileObject, tribe: tribeObject)
</code></pre></div></div>
<p>Uncharts Railroad on the tribe’s map of tile, if Railroad has been charted.
 If Railroad is not charted, the chart remains unchanged.</p>
<h3 id="uncharttransportation">
  
  
    unchartTransportation <a href="#uncharttransportation"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.unchartTransportation(tile: tileObject, tribe: tribeObject)
</code></pre></div></div>
<p>gen.unchartTransportation(tile,tribe) –&gt; void
 Uncharts road and railroad on the tribe’s map of tile.</p>
<h3 id="isfortresscharted">
  
  
    isFortressCharted <a href="#isfortresscharted"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.isFortressCharted(tile: tileObject, tribe: tribeObject)
  -&gt; boolean
</code></pre></div></div>
<p>Returns true if tribe sees Fortress on the tile, and false otherwise.
 Does not consider if tile is revealed to the tribe.</p>
<h3 id="chartfortress">
  
  
    chartFortress <a href="#chartfortress"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.chartFortress(tile: tileObject, tribe: tribeObject)
</code></pre></div></div>
<p>Charts Fortress on the tribe’s map of tile, uncharting any conflicting improvements.</p>
<h3 id="unchartfortress">
  
  
    unchartFortress <a href="#unchartfortress"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.unchartFortress(tile: tileObject, tribe: tribeObject)
</code></pre></div></div>
<p>Uncharts Fortress on the tribe’s map of tile, if Fortress has been charted.
 If Fortress is not charted, the chart remains unchanged.</p>
<h3 id="isairbasecharted">
  
  
    isAirbaseCharted <a href="#isairbasecharted"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.isAirbaseCharted(tile: tileObject, tribe: tribeObject)
  -&gt; boolean
</code></pre></div></div>
<p>Returns true if tribe sees Airbase on the tile, and false otherwise.
 Does not consider if tile is revealed to the tribe.</p>
<h3 id="chartairbase">
  
  
    chartAirbase <a href="#chartairbase"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.chartAirbase(tile: tileObject, tribe: tribeObject)
</code></pre></div></div>
<p>Charts Airbase on the tribe’s map of tile, uncharting any conflicting improvements.</p>
<h3 id="unchartairbase">
  
  
    unchartAirbase <a href="#unchartairbase"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.unchartAirbase(tile: tileObject, tribe: tribeObject)
</code></pre></div></div>
<p>Uncharts Airbase on the tribe’s map of tile, if Airbase has been charted.
 If Airbase is not charted, the chart remains unchanged.</p>
<h3 id="ispollutioncharted">
  
  
    isPollutionCharted <a href="#ispollutioncharted"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.isPollutionCharted(tile: tileObject, tribe: tribeObject)
  -&gt; boolean
</code></pre></div></div>
<p>gen.isPollutionCharted(tile,tribe) –&gt; bool
 Returns true if tribe sees Pollution on the tile, and false otherwise.
 Does not consider if tile is revealed to the tribe.</p>
<h3 id="chartpollution">
  
  
    chartPollution <a href="#chartpollution"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.chartPollution(tile: tileObject, tribe: tribeObject)
</code></pre></div></div>
<p>Charts Pollution on the tribe’s map of tile, uncharting any conflicting improvements.</p>
<h3 id="unchartpollution">
  
  
    unchartPollution <a href="#unchartpollution"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.unchartPollution(tile: tileObject, tribe: tribeObject)
</code></pre></div></div>
<p>Uncharts Pollution on the tribe’s map of tile, if Pollution has been charted.
 If Pollution is not charted, the chart remains unchanged.</p>
<h3 id="istransportercharted">
  
  
    isTransporterCharted <a href="#istransportercharted"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.isTransporterCharted(tile: tileObject, tribe: tribeObject)
  -&gt; boolean
</code></pre></div></div>
<p>Returns true if tribe sees Transporter on the tile, and false otherwise.
 Does not consider if tile is revealed to the tribe.</p>
<h3 id="charttransporter">
  
  
    chartTransporter <a href="#charttransporter"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.chartTransporter(tile: tileObject, tribe: tribeObject)
</code></pre></div></div>
<p>Charts Transporter on the tribe’s map of tile, uncharting any conflicting improvements.</p>
<h3 id="uncharttransporter">
  
  
    unchartTransporter <a href="#uncharttransporter"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.unchartTransporter(tile: tileObject, tribe: tribeObject)
</code></pre></div></div>
<p>Uncharts Transporter on the tribe’s map of tile, if Transporter has been charted.
 If Transporter is not charted, the chart remains unchanged.</p>
<h3 id="charttruthfully">
  
  
    chartTruthfully <a href="#charttruthfully"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.chartTruthfully(tile: tileObject, tribe: tribeObject)
</code></pre></div></div>
<p>gen.chartTruthfully(tile,tribe) –&gt; void
 Reveals <code class="language-plaintext highlighter-rouge">tile</code> to <code class="language-plaintext highlighter-rouge">tribe</code>, and makes visible the tile improvements that actually exist.</p>
<h2 id="bitmask-tools">
  
  
    Bitmask Tools <a href="#bitmask-tools"><span class="self-link">&#128279</span></a>
  
  
</h2>
    

<p>These tools can be helpful if you have a reason to perform bitwise operations.  Note, however, that the General Library might already have a function which can achieve your objective.</p>
<h3 id="checkbits">
  
  
    checkBits <a href="#checkbits"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.checkBits(bitmask: integer|bitmask, bitString: string)
  -&gt; bitsMatch: boolean
</code></pre></div></div>
<p>Compares the binary representation of an integer with
 a string.  If the string has a 1 in a given place,
 the binary representation of the integer should also
 have a 1.  If the string has a 0 in a given place, the
 binary representation should also have a 0. Any other
 character in the string means the integer can have a
 0 or a 1.  If the integer representation is longer than
 the string, the string is aligned with the smallest
 part of the integer.</p>
<div class="language-lua highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">gen</span><span class="p">.</span><span class="n">checkBits</span><span class="p">(</span><span class="mi">0</span><span class="n">b10101011</span><span class="p">,</span><span class="s2">"xx10xwqp"</span><span class="p">)</span><span class="c1">--&gt;true</span>
<span class="n">gen</span><span class="p">.</span><span class="n">checkBits</span><span class="p">(</span><span class="mi">0</span><span class="n">b10101011</span><span class="p">,</span><span class="s2">"xx11xwqp"</span><span class="p">)</span><span class="c1">--&gt;false</span>
<span class="n">gen</span><span class="p">.</span><span class="n">checkBits</span><span class="p">(</span><span class="mi">0</span><span class="n">b011110101011</span><span class="p">,</span><span class="s2">"xx10xwqp"</span><span class="p">)</span><span class="c1">--&gt;true</span>
<span class="n">gen</span><span class="p">.</span><span class="n">checkBits</span><span class="p">(</span><span class="mi">0</span><span class="n">b011110101011</span><span class="p">,</span><span class="s2">"xx10xwqp"</span><span class="p">)</span><span class="c1">--&gt;true</span>
</code></pre></div></div>
<p>note: lua does not actually accept integers specified in binary 
 (though it does for hexidecimal)</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">bitmask</code> — the number/bitmask to be checked</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">bitString</code> — specification of bits that should be checked</p>
<h3 id="setbits">
  
  
    setBits <a href="#setbits"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.setBits(bitmask: integer|bitmask, bitString: string)
  -&gt; bitmask: bitmask
</code></pre></div></div>
<p>Sets binary bits in an integer/bitmask to 1 or 0 based on
 the information provided by a string.  Characters that 
 are not 1 or 0 leave the corresponding bit unchanged
 Last character of the string corresponds to the 1’s bit
 in the integer (string lines up to the least significant
 part of the number).</p>
<div class="language-lua highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">gen</span><span class="p">.</span><span class="n">setBits</span><span class="p">(</span><span class="mi">0</span><span class="n">b00000000</span><span class="p">,</span><span class="s2">"xx10xxxx"</span><span class="p">)</span><span class="c1">--&gt;0b00100000</span>
<span class="n">gen</span><span class="p">.</span><span class="n">setBits</span><span class="p">(</span><span class="mi">0</span><span class="n">b00000000</span><span class="p">,</span><span class="s2">"xx10xx"</span><span class="p">)</span><span class="c1">--&gt;0b00001000</span>
<span class="n">gen</span><span class="p">.</span><span class="n">setBits</span><span class="p">(</span><span class="mi">0</span><span class="n">b11111100</span><span class="p">,</span><span class="s2">"xx0011xx"</span><span class="p">)</span><span class="c1">--&gt;0b11001100</span>
<span class="n">gen</span><span class="p">.</span><span class="n">setBits</span><span class="p">(</span><span class="mi">0</span><span class="n">b10101011</span><span class="p">,</span><span class="s2">"xx10xwqp"</span><span class="p">)</span><span class="c1">--&gt;0b10101011</span>
<span class="n">gen</span><span class="p">.</span><span class="n">setBits</span><span class="p">(</span><span class="mi">0</span><span class="n">b10101011</span><span class="p">,</span><span class="s2">"xx11xwqp"</span><span class="p">)</span><span class="c1">--&gt;0b10111011</span>
</code></pre></div></div>
<p>note: lua does not actually accept integers specified in binary (though it does for hexidecimal)</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">bitmask</code> — the bitmask to change</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">bitString</code> — specification of bits to set</p>

<p>@<em>return</em> <code class="language-plaintext highlighter-rouge">bitmask</code> — The integer/bitmask after the bits have been set</p>
<h3 id="printbits">
  
  
    printBits <a href="#printbits"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>gen.printBits --&gt; function
</code></pre></div></div>
<h3 id="bitmasktostring">
  
  
    bitmaskToString <a href="#bitmasktostring"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.bitmaskToString(bitmask: bitmask, numOfBits?: integer)
  -&gt; binaryRepresentation: string
</code></pre></div></div>
<p>creates the binary representation of integer/bitmask,
 including the numOfBits least significant bits
 if numOfBits is nil, it defaults to 32</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">bitmask</code> — the bits to print</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">numOfBits</code> — the number of bits to show (default 32)</p>
<h3 id="isbit1">
  
  
    isBit1 <a href="#isbit1"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.isBit1(bitmask: integer, bitNumber: integer)
  -&gt; boolean
</code></pre></div></div>
<p>tells if bitNumber bit of integer/bitmask is 1 
 (1st bit is the bit for the ones position)</p>
<div class="language-lua highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">gen</span><span class="p">.</span><span class="n">isBit1</span><span class="p">(</span><span class="mi">0</span><span class="n">b00000010</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span> <span class="c1">--&gt;true</span>
<span class="n">gen</span><span class="p">.</span><span class="n">isBit1</span><span class="p">(</span><span class="mi">0</span><span class="n">b11111110</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span> <span class="c1">--&gt;false</span>
</code></pre></div></div>
<p>note: lua does not actually accept integers specified in binary (though it does accept hexidecimal)</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">bitmask</code> — bitmask</p>
<h3 id="isbit0">
  
  
    isBit0 <a href="#isbit0"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.isBit0(bitmask: integer|bitmask, bitNumber: integer)
  -&gt; boolean
</code></pre></div></div>
<p>tells if bitNumber bit of integer is 0 
 (1st bit is the bit for the ones position)</p>
<div class="language-lua highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">gen</span><span class="p">.</span><span class="n">isBit0</span><span class="p">(</span><span class="mi">0</span><span class="n">b00000010</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span> <span class="c1">--&gt;false</span>
<span class="n">gen</span><span class="p">.</span><span class="n">isBit0</span><span class="p">(</span><span class="mi">0</span><span class="n">b11111110</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span> <span class="c1">--&gt;true</span>
</code></pre></div></div>
<p>note: lua does not actually accept integers specified in binary (though it does accept hexidecimal)</p>
<h3 id="setbit1">
  
  
    setBit1 <a href="#setbit1"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.setBit1(bitmask: integer|bitmask, bitNumber: integer)
  -&gt; bitmask
</code></pre></div></div>
<p>sets bitNumber bit of the integer/bitmask to 1
 (1st bit is the bit for the ones position)</p>
<div class="language-lua highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">gen</span><span class="p">.</span><span class="n">setBit1</span><span class="p">(</span><span class="mi">0</span><span class="n">b00000000</span><span class="p">,</span><span class="mi">3</span><span class="p">)</span> <span class="c1">--&gt; 0b00000100</span>
</code></pre></div></div>
<p>note: lua does not actually accept integers specified in binary (though it does accept hexidecimal)</p>
<h3 id="setbit0">
  
  
    setBit0 <a href="#setbit0"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.setBit0(bitmask: integer|bitmask, bitNumber: integer)
  -&gt; bitmask
</code></pre></div></div>
<p>sets bitNumber bit of the integer/bitmask to 0
 (1st bit is the bit for the ones position)</p>
<div class="language-lua highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">gen</span><span class="p">.</span><span class="n">setBit0</span><span class="p">(</span><span class="mi">0</span><span class="n">b11111111</span><span class="p">,</span><span class="mi">3</span><span class="p">)</span> <span class="c1">--&gt; 0b11111011</span>
</code></pre></div></div>
<p>note: lua does not actually accept integers specified in binary (though it does accept hexidecimal)</p>
<h3 id="istransportbetweenmaps">
  
  
    isTransportBetweenMaps <a href="#istransportbetweenmaps"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.isTransportBetweenMaps(map1: integer|mapObject, map2: integer|mapObject, transportBitmask: bitmask, functionName?: string)
  -&gt; boolean
</code></pre></div></div>
<p>Returns true if the supplied bitmask indicates that transportation
 can take place between <code class="language-plaintext highlighter-rouge">map1</code> and <code class="language-plaintext highlighter-rouge">map2</code> (or if they are the same map),
 and false otherwise.</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">functionName</code> — Carries through the function name for the error if changeRules.lua is not available.</p>
<h3 id="givetransportbetweenmaps">
  
  
    giveTransportBetweenMaps <a href="#givetransportbetweenmaps"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.giveTransportBetweenMaps(map1: integer|mapObject, map2: integer|mapObject, transportBitmask: bitmask, suppressFailureError?: boolean, functionName?: string)
  -&gt; bitmask
</code></pre></div></div>
<p>Takes the <code class="language-plaintext highlighter-rouge">transportBitmask</code> for nativeTransport, buildTransport, useTransport,
 and changes an appropriate bit to 1 so that transport exists
 between the maps.  (If there are multiple map relationships
 between <code class="language-plaintext highlighter-rouge">map1</code> and <code class="language-plaintext highlighter-rouge">map2</code>, there is no guarantee which one will
 be enabled, and, in fact, one may be enabled even if another one
 already grants the relationship.  If such details are important,
 write a function manually.)
 Returns the new bitmask.
 If the maps are the same, or there is no possible transportation
 between them, an error is thrown, unless <code class="language-plaintext highlighter-rouge">suppressFailureError</code>
 is <code class="language-plaintext highlighter-rouge">true</code>, in which case the original bitmask is returned.</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">suppressFailureError</code> — set to true so that invalid map pairs do nothing instead of causing errors.</p>
<h3 id="removetransportbetweenmaps">
  
  
    removeTransportBetweenMaps <a href="#removetransportbetweenmaps"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.removeTransportBetweenMaps(map1: integer|mapObject, map2: integer|mapObject, transportBitmask: bitmask, suppressFailureError?: boolean, functionName?: string)
  -&gt; bitmask
</code></pre></div></div>
<p>Takes the <code class="language-plaintext highlighter-rouge">transportBitmask</code> for nativeTransport, buildTransport, useTransport,
 and changes all appropriate bit to 0 so that transport no longer exists
 between the maps.<br />
 Returns the new bitmask.
 If the maps are the same, or there is no possible transportation
 between them, an error is thrown, unless <code class="language-plaintext highlighter-rouge">suppressFailureError</code>
 is <code class="language-plaintext highlighter-rouge">true</code>, in which case the original bitmask is returned.</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">suppressFailureError</code> — set to true so that invalid map pairs do nothing instead of causing errors.</p>
<h2 id="alternate-names">
  
  
    Alternate Names <a href="#alternate-names"><span class="self-link">&#128279</span></a>
  
  
</h2>
    

<p>This section contains entries with alternate names for functions.  This is often because the function’s primary name was changed, but the original name is kept available for backwards compatibility.  Sometimes, the alternate name is simply shorter.</p>
<h3 id="isattribute17">
  
  
    isAttribute17 <a href="#isattribute17"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>gen.isAttribute17 --&gt; function
</code></pre></div></div>

<p>Alternate name for <a href="#isusedairport">gen.isUsedAirport</a>.</p>
<h3 id="setattribute17">
  
  
    setAttribute17 <a href="#setattribute17"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>gen.setAttribute17 --&gt; function
</code></pre></div></div>

<p>Alternate name for <a href="#setusedairport">gen.setUsedAirport</a>.</p>
<h3 id="clearattribute17">
  
  
    clearAttribute17 <a href="#clearattribute17"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>gen.clearAttribute17 --&gt; function
</code></pre></div></div>

<p>Alternate name for <a href="#clearusedairport">gen.clearUsedAirport</a>.</p>
<h3 id="isattribute23">
  
  
    isAttribute23 <a href="#isattribute23"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>gen.isAttribute23 --&gt; function
</code></pre></div></div>

<p>Alternate name for <a href="#iscityinvestigated">gen.isCityInvestigated</a>.</p>
<h3 id="setattribute23">
  
  
    setAttribute23 <a href="#setattribute23"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>gen.setAttribute23 --&gt; function
</code></pre></div></div>

<p>Alternate name for <a href="#setcityinvestigated">gen.setCityInvestigated</a>.</p>
<h3 id="clearattribute23">
  
  
    clearAttribute23 <a href="#clearattribute23"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>gen.clearAttribute23 --&gt; function
</code></pre></div></div>

<p>Alternate name for <a href="#clearcityinvestigated">gen.clearCityInvestigated</a>.</p>
<h3 id="isattribute30">
  
  
    isAttribute30 <a href="#isattribute30"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>gen.isAttribute30 --&gt; function
</code></pre></div></div>

<p>Alternate name for <a href="#isusedtransporter">gen.isUsedTransporter</a>.</p>
<h3 id="setattribute30">
  
  
    setAttribute30 <a href="#setattribute30"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>gen.setAttribute30 --&gt; function
</code></pre></div></div>

<p>Alternate name for <a href="#setusedtransporter">gen.setUsedTransporter</a>.</p>
<h3 id="clearattribute30">
  
  
    clearAttribute30 <a href="#clearattribute30"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>gen.clearAttribute30 --&gt; function
</code></pre></div></div>

<p>Alternate name for <a href="#clearusedtransporter">gen.clearUsedTransporter</a>.</p>
<h3 id="describeallowabledata">
  
  
    describeAllowableData <a href="#describeallowabledata"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>gen.describeAllowableData --&gt; function
</code></pre></div></div>

<p>Alternate name for <a href="#describeallowablevalues">gen.describeAllowableValues</a>.</p>
<h3 id="checkvaliddatainfo">
  
  
    checkValidDataInfo <a href="#checkvaliddatainfo"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>gen.checkValidDataInfo --&gt; function
</code></pre></div></div>

<p>Alternate name for <a href="#validatevaluespecificationkeys">gen.validateValueSpecificationKeys</a>.</p>
<h3 id="valuesatisfiesvaliddatainfo">
  
  
    valueSatisfiesValidDataInfo <a href="#valuesatisfiesvaliddatainfo"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>gen.valueSatisfiesValidDataInfo --&gt; function
</code></pre></div></div>

<p>Alternate name for <a href="#validatevaluespecificationkeys">gen.validateValueSpecificationKeys</a>.</p>
<h3 id="tableofvdi">
  
  
    tableOfVDI <a href="#tableofvdi"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>gen.tableOfVDI --&gt; function
</code></pre></div></div>

<p>Alternate name for <a href="#tableofvaluespecification">gen.tableOfValueSpecification</a>.</p>
<h3 id="vdiortableofvdi">
  
  
    vDIOrTableOfVDI <a href="#vdiortableofvdi"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>gen.vDIOrTableOfVDI --&gt; function
</code></pre></div></div>

<p>Alternate name for <a href="#valuespecificationortableofvaluespecification">gen.valueSpecificationOrTableOfValueSpecification</a>.</p>
<h3 id="valuespecortable">
  
  
    valueSpecOrTable <a href="#valuespecortable"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>gen.valueSpecOrTable --&gt; function
</code></pre></div></div>

<p>Alternate name for <a href="#valuespecificationortableofvaluespecification">gen.valueSpecificationOrTableOfValueSpecification</a>.</p>
<h3 id="wondermodifiedmoves">
  
  
    wonderModifiedMoves <a href="#wondermodifiedmoves"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>gen.wonderModifiedMoves --&gt; function
</code></pre></div></div>

<p>Alternate name for <a href="#fullhealthmovementallowance">gen.fullHealthMovementAllowance</a>.</p>
<h3 id="getbaseterrainfromid-1">
  
  
    getBaseTerrainFromId <a href="#getbaseterrainfromid-1"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>gen.getBaseTerrainFromId --&gt; function
</code></pre></div></div>

<p>Alternate name for <a href="#getbaseterrainfromid">gen.getBaseTerrainFromID</a>.</p>
<h3 id="getbaseterrainid-1">
  
  
    getBaseTerrainId <a href="#getbaseterrainid-1"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>gen.getBaseTerrainId --&gt; function
</code></pre></div></div>

<p>Alternate name for <a href="#getbaseterrainid">gen.getBaseTerrainID</a>.</p>
<h3 id="getterrainfromid-1">
  
  
    getTerrainFromId <a href="#getterrainfromid-1"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>gen.getTerrainFromId --&gt; function
</code></pre></div></div>

<p>Alternate name for <a href="#getterrainfromid">gen.getTerrainFromID</a>.</p>
<h3 id="getterrainid-1">
  
  
    getTerrainId <a href="#getterrainid-1"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>gen.getTerrainId --&gt; function
</code></pre></div></div>

<p>Alternate name for <a href="#getterrainid">gen.getTerrainID</a>.</p>
<h3 id="gettilefromid-1">
  
  
    getTileFromId <a href="#gettilefromid-1"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>gen.getTileFromId --&gt; function
</code></pre></div></div>

<p>Alternate name for <a href="#gettilefromid">gen.getTileFromID</a>.</p>
<h3 id="gettileid-1">
  
  
    getTileId <a href="#gettileid-1"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>gen.getTileId --&gt; function
</code></pre></div></div>

<p>Alternate name for <a href="#gettileid">gen.getTileID</a>.</p>
<h3 id="giveampibious">
  
  
    giveAmpibious <a href="#giveampibious"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>gen.giveAmpibious --&gt; function
</code></pre></div></div>
<p>backwards compatibility typo</p>

<p>Alternate name for <a href="#giveamphibious">gen.giveAmphibious</a>.</p>
<h3 id="giveingorewalls">
  
  
    giveIngoreWalls <a href="#giveingorewalls"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>gen.giveIngoreWalls --&gt; function
</code></pre></div></div>

<p>Alternate name for <a href="#giveignorewalls">gen.giveIgnoreWalls</a>.</p>
<h3 id="removeseetowspaces">
  
  
    removeSeeTowSpaces <a href="#removeseetowspaces"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>gen.removeSeeTowSpaces --&gt; function
</code></pre></div></div>
<p>Note: The typo is preserved, on the off chance that
 someone used it</p>

<p>Alternate name for <a href="#removeseetwospace">gen.removeSeeTwoSpace</a>.</p>
<h2 id="event-and-module-machinery">
  
  
    Event and Module Machinery <a href="#event-and-module-machinery"><span class="self-link">&#128279</span></a>
  
  
</h2>
    

<p>These functions help modules work, or are used to provide functionality
which was not substantial enough to merit a separate module.</p>
<h3 id="rehomeunitsincapturedcity">
  
  
    rehomeUnitsInCapturedCity <a href="#rehomeunitsincapturedcity"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.rehomeUnitsInCapturedCity(city: cityObject, defender: tribeObject)
</code></pre></div></div>
<p>Re-homes units in a captured city to other cities owned by
 the same tribe, so that they are not disbanded.
 <br />If you are using the Lua Scenario Template, you can enable this feature in simpleSettings.lua.</p>
<h3 id="linkactivationfunction">
  
  
    linkActivationFunction <a href="#linkactivationfunction"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.linkActivationFunction(activationFn: fun(unit: unitObject, source: boolean))
</code></pre></div></div>
<p>#gen.linkActivationFunction(function(unit,source)–&gt;void)–&gt;void
 If you are using the Lua Scenario Template, there is no need to worry about this function.
 use to specify the code that should be run when a unit is
 activated by gen.activate or gen.activateWtihSource</p>
<h3 id="getactivationfunction">
  
  
    getActivationFunction <a href="#getactivationfunction"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.getActivationFunction()
  -&gt; fun(unit: unitObject, source: boolean)
</code></pre></div></div>
<p>gen.getActivationFunction()–&gt;function(unit,source)
provides the unit activation function linked to the general library</p>
<h3 id="noglobal">
  
  
    noGlobal <a href="#noglobal"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.noGlobal()
</code></pre></div></div>
<p>gen.noGlobal()
 after gen.noGlobal is run, errors will be generated when trying to create a new
 global variable, or when accessing a global variable that doesn’t already exist
 if you want to have a ‘console’ table to access certain functions from the console,
 you should declare it (but you don’t have to fill it) before running this function
 In the Lua Scenario Template, this is run near the top of events.lua</p>
<h3 id="restoreglobal">
  
  
    restoreGlobal <a href="#restoreglobal"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.restoreGlobal()
</code></pre></div></div>
<p>Allows Global variables to be used, if they have been disabled by
 <code class="language-plaintext highlighter-rouge">gen.noGlobal</code></p>
<h3 id="linkstate">
  
  
    linkState <a href="#linkstate"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.linkState(stateTable: boolean|string|number|table&lt;string|number, boolean|string|number|table&gt;)
</code></pre></div></div>
<p>Links the state table to the General Library
 provides access to the state table so that
 gen.getState() can provide it.</p>
<h3 id="linkgenerallibrarystate">
  
  
    linkGeneralLibraryState <a href="#linkgenerallibrarystate"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.linkGeneralLibraryState(stateTable: boolean|string|number|table&lt;string|number, boolean|string|number|table&gt;)
</code></pre></div></div>
<p>Links a sub table of the state table for the purposes of
 providing a table for functions in the General Library
 this is distinct from getState, which provides a 
 ‘visible’ state table to the end user</p>
<h3 id="setdeathfunctions">
  
  
    setDeathFunctions <a href="#setdeathfunctions"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.setDeathFunctions(defeatFn: fun(loser: unitObject, winner: unitObject, aggressor: unitObject, victim: unitObject, loserLocation: tileObject, winnerVetStatus: boolean, loserVetStatus: boolean):unitObject|nil, deathFn: fun(dyingUnit: unitObject), deletionFn: fun(deletedUnit: unitObject, replacingUnit: unitObject|nil), deathNoCombatFn: fun(dyingUnit: unitObject))
</code></pre></div></div>
<p>gen.setDeathFunctions(defeatFunction,deathFunction,deletionFunction) –&gt; void
 Registers event functions for when units are killed/deleted.
 If you are using the Lua Scenario Template, this is already
 run in events.lua, and you do not need to use this function.
      defeatFunction(loser,winner,aggressor,victim,loserLocation,winnerVetStatus,loserVetStatus)–&gt; nil or unit
          function for when a unit is defeated either in game combat or in an event representing combat
          if a unit is returned, that is a replacement unit for demotion
      deathFunction(dyingUnit) –&gt; void
          for when a unit ‘dies’, either in standard or event combat, or through some other event ‘kill’
      deletionFunction(deletedUnit,replacingUnit=nil) –&gt; void
          maintenance for when a unit is deleted, either because of combat, death, replacement or some other ‘administrative’ situation.  If no replacing unit, the replacingUnit argument is nil
  registers functions to be performed when a unit is defeated (either in game combat or events)
  or deleted by events in some other way
      deathNoCombatFn(dyingUnit) –&gt; void
          for when a unit dies, but not in combat or through the gen.defeatUnit function</p>
<h3 id="setscenariodirectory">
  
  
    setScenarioDirectory <a href="#setscenariodirectory"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.setScenarioDirectory(directory: string)
</code></pre></div></div>
<p>Registers <code class="language-plaintext highlighter-rouge">directory</code> as the path to the current scenario’s main directory.  This value is returned by <code class="language-plaintext highlighter-rouge">gen.getScenarioDirectory()</code>.  If you are using the Lua Scenario Template, this is handled in events.lua, and you do not need to worry about it.</p>
<h3 id="getscenariodirectory">
  
  
    getScenarioDirectory <a href="#getscenariodirectory"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.getScenarioDirectory()
  -&gt; scenarioMainDirectory: string
</code></pre></div></div>
<p>Returns the scenario’s main directory.</p>
<h3 id="setoutofrangemessage">
  
  
    setOutOfRangeMessage <a href="#setoutofrangemessage"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.setOutOfRangeMessage(textOrFunction: string|fun(unit: unitObject), title?: string)
</code></pre></div></div>
<p>This function registers what happens when Lua code causes a
 unit to be destroyed because it is ‘out of range/fuel’.  This could be
 because events expended the last movement points of an aircraft,
 or because land/sea units have been given a range using Lua.<br />
 (No code is run when the standard game detects an aircraft to be
 out of range)<br /><br />
 If <code class="language-plaintext highlighter-rouge">textOrFunction</code> is a string, the text is shown when a unit is 
 lost due to being out of range, with %STRING1 substitutes for the unit type’s name.  <code class="language-plaintext highlighter-rouge">title</code> provides the title for the box.</p>

<p>If <code class="language-plaintext highlighter-rouge">textOrFunction</code> is a <code class="language-plaintext highlighter-rouge">function(unit) -&gt; void</code>, the
 function is exectued, and is trusted to generate the 
 the function is trusted to generate a suitable message.
 <br /><br /> In the Lua Scenario Template, this function is called in <code class="language-plaintext highlighter-rouge">parameters.lua</code></p>
<h3 id="outofrangemessage">
  
  
    outOfRangeMessage <a href="#outofrangemessage"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.outOfRangeMessage(unit: unitObject)
</code></pre></div></div>
<p>Shows the ‘out of range’ message for <code class="language-plaintext highlighter-rouge">unit</code>.
 The message is registered by <code class="language-plaintext highlighter-rouge">gen.setOutOfRangeMessage</code>.</p>
<h3 id="activaterangeforlandandsea">
  
  
    activateRangeForLandAndSea <a href="#activaterangeforlandandsea"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.activateRangeForLandAndSea(restoreRangeFn?: fun(unit: unitObject):boolean, applyToAI?: boolean)
</code></pre></div></div>
<p>This function makes land and sea units obey the range field in the rules.txt (if they are not 0),
the same way that air units do.  If <code class="language-plaintext highlighter-rouge">applyToAI</code> is set to true, the AI will lose units as well, but the AI isn’t programmed to respect these limitations.
<br /><br />
In the Lua Scenario Template, this function is ready to use in simpleSettings.lua.
If you’re not using the Template, then this function only works if you’ve set up the discrete events.</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">restoreRangeFn</code> — <br />This function governs when a unit’s range is restored.  It is checked when the unit enters a tile and also after the unit has been given its last order for the turn (i.e. when the unit has all movement expended and the next unit is activated, or at the end of the turn if it still has movement points e.g. if sleeping).  <br />If true, range is restored, if false range is not restored.<br />By default, range is restored in city squares and on airbases.<br />If you want to clear movement points (like for air units) do it in this function.</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">applyToAI</code> — If true, the AI’s units are lost if they go beyond their range.</p>
<h3 id="versionfunctions">
  
  
    versionFunctions <a href="#versionfunctions"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.versionFunctions(moduleTable: table, vNum: number, fileMod: boolean, moduleFileName: string)
</code></pre></div></div>
<p>Provides module with these methods<br />
<code class="language-plaintext highlighter-rouge">module:minVersion(vNumber)</code><br />
Causes an error if the module’s versionNumber is below vNumber.<br />
<code class="language-plaintext highlighter-rouge">module:recommendedVersion(vNumber)</code><br />
Prints a warning to the console if the module’s versionNumber is below vNumber.
<br />
Note: Using these methods will stop Lua Language Server from recognizing a require function.  To avoid this, use —@module “fileName” on the line above:</p>
<div class="language-lua highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">---@module "someModuleName"</span>
<span class="kd">local</span> <span class="n">someModule</span> <span class="o">=</span> <span class="nb">require</span><span class="p">(</span><span class="s2">"someModuleName"</span><span class="p">):</span><span class="n">minVersion</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
</code></pre></div></div>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">moduleTable</code> — The table that has the module functions.</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">vNum</code> — the module’s current version number</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">fileMod</code> — A boolean telling if the file has been modified by the scenario designer.  This way, the error can warn the designer that upgrading may remove some work they did.</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">moduleFileName</code> — The module’s file name.</p>
<h3 id="registereventsluaversion">
  
  
    registerEventsLuaVersion <a href="#registereventsluaversion"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.registerEventsLuaVersion(vNum: number, fileMod: boolean, regressionNumber: number)
</code></pre></div></div>
<p>In the Lua Scenario Template, this is called in events.lua, so you do not need to worry about it.
  Registers version information for the events.lua file.<br />
  versionNumber is the events.lua verison number<br />
  fileMod is a boolean that should be true if events.lua has been modified by the scenario designer<br />
  regressionNumber is incremented if events.lua has functionality removed<br /></p>
<h3 id="setmusicdirectory">
  
  
    setMusicDirectory <a href="#setmusicdirectory"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.setMusicDirectory(path: string)
</code></pre></div></div>
<p>Tells gen.playMusic to look in this directory for music files.
 In the Lua Scenario Template, the directory is <MainScenarioDirectory>\Sound</MainScenarioDirectory></p>
<h3 id="betterunitmanualwait">
  
  
    betterUnitManualWait <a href="#betterunitmanualwait"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.betterUnitManualWait()
</code></pre></div></div>
<p>Part of custom unit selection (In the Lua Scenario Template, this can be activated in simpleSettings.lua – enableCustomUnitSelection
If you’re not using the Template, add this code to the onKeyPress event:</p>
<div class="language-lua highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="k">if</span> <span class="n">civ</span><span class="p">.</span><span class="n">getActiveUnit</span><span class="p">()</span> <span class="ow">and</span> <span class="n">keyID</span> <span class="o">==</span> <span class="mi">87</span> <span class="k">then</span>
        <span class="n">gen</span><span class="p">.</span><span class="n">betterUnitManualWait</span><span class="p">()</span>
    <span class="k">end</span>
</code></pre></div></div>
<h3 id="clearmanualwait">
  
  
    clearManualWait <a href="#clearmanualwait"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.clearManualWait()
</code></pre></div></div>
<p>this empties the waitingUnits table, so that units
 will appear according to the weight function</p>
<h3 id="selectnextactiveunit">
  
  
    selectNextActiveUnit <a href="#selectnextactiveunit"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.selectNextActiveUnit(activeUnit: unitObject, source: boolean, customWeightFn: fun(unit: unitObject, activeUnit: unitObject):integer)
</code></pre></div></div>
<p>Part of custom unit selection (In the Lua Scenario Template, this can be activated in simpleSettings.lua – enableCustomUnitSelection
If you’re not using the Template, use as the first line inside the function given to <code class="language-plaintext highlighter-rouge">civ.scen.onActivateUnit(function(unit,source)--&gt;void)</code>.
The line should be
<code class="language-plaintext highlighter-rouge">gen.selectNextActiveUnit(unit,source,customWeightFn)</code>
(note: if the arguments to function(unit,source)
aren’t called ‘unit’ and ‘source’, use the actual name)</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">customWeightFn</code> — returns the “weight” of each possible unit, and selects the lowest weight to be active next</p>
<h3 id="makeclearairprotection">
  
  
    makeClearAirProtection <a href="#makeclearairprotection"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.makeClearAirProtection()
  -&gt; function
</code></pre></div></div>
<p>#gen.clearAirProtection(tile)–&gt;void
 A basic function to move air units protecting stacks
 from a tile.  See <code class="language-plaintext highlighter-rouge">gen.clearAirProtection</code> and <code class="language-plaintext highlighter-rouge">gen.clearAdjacentAirProtection</code>
 for functions to actually use.</p>
<h3 id="mineventsluaversion">
  
  
    minEventsLuaVersion <a href="#mineventsluaversion"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.minEventsLuaVersion(minVersion: number, regNum: number, fileName: string)
</code></pre></div></div>
<p>Checks that the events.lua file is up to date, so all of the module’s tie ins to the rest of the code base work properly.</p>
<h3 id="registerauthoritativedefaultrules">
  
  
    registerAuthoritativeDefaultRules <a href="#registerauthoritativedefaultrules"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.registerAuthoritativeDefaultRules(aDRTable: table)
</code></pre></div></div>
<p>This function is used to register the authoritativeDefaultRules
table from changeRules.lua to be used in the General Library.
All functions in the General Library will function appropriately
even if the authoritativeDefaultRules are never registered.</p>
<h3 id="registercustomcosmic">
  
  
    registerCustomCosmic <a href="#registercustomcosmic"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.registerCustomCosmic(cc: table)
</code></pre></div></div>
<p>This function is used to register the customCosmic functions,
so that some generalLibrary functions can use the information
registered by the customCosmic module.</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">cc</code> — The table for the customCosmic module.</p>
<h3 id="requireifavailable">
  
  
    requireIfAvailable <a href="#requireifavailable"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.requireIfAvailable(fileName: string)
  -&gt; fileFound: boolean
  2. modulePrefix: table|nil
</code></pre></div></div>
<p>Attempts to require the module called fileName
returns true, modulePrefix if the module is found
returns false, nil if no module is found
makes an error if there is a problem loading the module</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">fileName</code> — The name of the file to require</p>

<p>@<em>return</em> <code class="language-plaintext highlighter-rouge">fileFound</code> — true if the module was found, false otherwise</p>

<p>@<em>return</em> <code class="language-plaintext highlighter-rouge">modulePrefix</code> — returns the module table if it was found, or nil if not</p>
<h2 id="obsolete-functions">
  
  
    Obsolete Functions <a href="#obsolete-functions"><span class="self-link">&#128279</span></a>
  
  
</h2>
    

<p>These functions exist for backwards compatibility, but they’re no longer the preferred (or required) way of doing things.</p>
<h3 id="ismapflat">
  
  
    isMapFlat <a href="#ismapflat"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.isMapFlat()
  -&gt; mapIsFlat: boolean
</code></pre></div></div>
<p>gen.isMapFlat()–&gt;boolean
Returns true if the game map is flat, and false if it is round.</p>
<h3 id="ismapround">
  
  
    isMapRound <a href="#ismapround"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.isMapRound()
  -&gt; mapIsRound: boolean
</code></pre></div></div>
<p>gen.isMapRound()–&gt;boolean
Returns true if the game map is round, and false if it is flat.</p>
<h3 id="declaremapflat">
  
  
    declareMapFlat <a href="#declaremapflat"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.declareMapFlat()
</code></pre></div></div>
<p>gen.declareMapFlat()–&gt;void
 tells this module that the map should be considered flat
 for things like distances and adjacent squares
 no longer has practical effect, since above
 functions access world shape directly with TOTPP v16</p>
<h3 id="declaremapround">
  
  
    declareMapRound <a href="#declaremapround"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.declareMapRound()
</code></pre></div></div>
<p>gen.declareMapRound()–&gt;void</p>
<h3 id="setterraintype">
  
  
    setTerrainType <a href="#setterraintype"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.setTerrainType(tile: table|tileObject, terrainID: integer)
</code></pre></div></div>
<p>changes the terrain type of tile to terrainID
 have this function, so that if
 terrainType key functionality is changed, this
 function can change instead of all code everywhere</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">tile</code> — Can be:<br /><br />tileObject<br /><br />{[1]=xCoord,[2]=yCoord,[3]=zCoord}<br />Converted to civ.getTile(xCoord,yCoord,zCoord) <br /><br />{[1]=xCoord,[2]=yCoord}<br />Converted to civ.getTile(xCoord,yCoord,0)<br /><br />{x=xCoord,y=yCoord,z=zCoord}<br />Converted to civ.getTile(xCoord,yCoord,zCoord) <br /><br />{x=xCoord,y=yCoord}<br />Converted to civ.getTile(xCoord,yCoord,0)</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">terrainID</code> — the id (0-15) of the new baseTerrain type</p>
<h3 id="activate">
  
  
    activate <a href="#activate"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.activate(unit: any)
</code></pre></div></div>
<p>Deprecated.  This was written when unit:activate() did not run the civ.scen.onActivateUnit event.
 use to activate a unit.  This assumes that the ‘source’ of the activation is true
 (i.e. human generated).  Use gen.activateWithSource if false is needed (either sometimes or always)</p>
<h3 id="activatewithsource">
  
  
    activateWithSource <a href="#activatewithsource"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.activateWithSource(unit: any, source: any)
</code></pre></div></div>
<p>Deprecated.  This was written when unit:activate() did not run the civ.scen.onActivateUnit event.
 use to activate a unit and specify the source of the activation</p>
<h2 id="uncategorised">
  
  
    Uncategorised <a href="#uncategorised"><span class="self-link">&#128279</span></a>
  
  
</h2>
    

<p>These functions have not been assigned to a section.  Some might be new functions which have been automatically documented, but not yet assigned to a section of this page.</p>
<h3 id="cityproduction">
  
  
    cityProduction <a href="#cityproduction"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.cityProduction(city: cityObject, item: improvementObject|unitTypeObject|wonderObject)
</code></pre></div></div>
<p>Makes the <code class="language-plaintext highlighter-rouge">city</code> immediately produce the <code class="language-plaintext highlighter-rouge">item</code>.
That is, the city is given the supplied city improvement or wonder,
or a unit with the type specified.  The function registered to civ.scen.onCityProduction is also called.</p>

<p>No check is made if the production order is legal.  An item without
appropriate pre-requisites can be created, or a wonder can be moved.</p>
<h3 id="complementlist">
  
  
    complementList <a href="#complementlist"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.complementList(list: table&lt;any, any&gt;, itemIterator: fun():any)
  -&gt; table&lt;integer, any&gt;
</code></pre></div></div>
<p>Takes a table of items, and an iterator or table of all possible
 items, and returns a list of all items that are not values
 in the table.  If the iterator is a table, only the
 values in the table are considered.
 These functions might be useful:
 <code class="language-plaintext highlighter-rouge">gen.iterateUnitTypes()</code>
 <code class="language-plaintext highlighter-rouge">gen.iterateImprovements()</code>
 <code class="language-plaintext highlighter-rouge">gen.iterateWonders()</code>
 <code class="language-plaintext highlighter-rouge">gen.iterateBaseTerrain()</code>
 <code class="language-plaintext highlighter-rouge">gen.iterateTerrain()</code></p>
<h3 id="iteratetechs">
  
  
    iterateTechs <a href="#iteratetechs"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.iterateTechs()
  -&gt; fun():techObject
</code></pre></div></div>
<p>Returns an iterator for all tech objects.</p>
<h3 id="registercityproductionfunction">
  
  
    registerCityProductionFunction <a href="#registercityproductionfunction"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.registerCityProductionFunction(cityProductionFunction: fun(city: cityObject, prod: improvementObject|unitObject|wonderObject))
</code></pre></div></div>
<p>Registers the function that is called when a city produces something</p>
<h3 id="registerupdatecityvalidationinfo">
  
  
    registerUpdateCityValidationInfo <a href="#registerupdatecityvalidationinfo"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.registerUpdateCityValidationInfo(changeValidationInfo: fun(city: cityObject))
</code></pre></div></div>
<p>Registers a function that updates the validation information
for a city, to be called when a city’s owner is changed.
(This is called in cityData.lua, and will probably not be used
directly by a scenario creator.)</p>
<h3 id="registerupdateunitvalidationinfo">
  
  
    registerUpdateUnitValidationInfo <a href="#registerupdateunitvalidationinfo"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.registerUpdateUnitValidationInfo(changeValidationInfo: fun(unit: unitObject))
</code></pre></div></div>
<p>Registers a function that updates the validation information
for a unit, to be called when a unit’s owner is changed.
(This is called in unitData.lua, and will probably not be used
directly by a scenario creator.)</p>
<h3 id="sorttablekeysinascendingvalueorder">
  
  
    sortTableKeysInAscendingValueOrder <a href="#sorttablekeysinascendingvalueorder"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.sortTableKeysInAscendingValueOrder(table: table)
  -&gt; table&lt;integer, any&gt;
</code></pre></div></div>
<p>Returns an array of all the keys in the table with number values,
in increasing order, starting with the smallest value at index 1.</p>

<p>If there are multiple keys with the same value, the order of those
keys is not guaranteed.</p>

<p>Keys with non-number values are ignored.  If no key has a number value,
an empty table is returned.</p>
<h3 id="sorttablekeysindescendingvalueorder">
  
  
    sortTableKeysInDescendingValueOrder <a href="#sorttablekeysindescendingvalueorder"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.sortTableKeysInDescendingValueOrder(table: table)
  -&gt; table&lt;integer, any&gt;
</code></pre></div></div>
<p>Returns an array of all the keys in the table with number values,
in descending order, starting with the largest value at index 1.</p>

<p>If there are multiple keys with the same value, the order of those
keys is not guaranteed.</p>

<p>Keys with non-number values are ignored.  If no key has a number value,
an empty table is returned.</p>
<h3 id="transfertilecontents">
  
  
    transferTileContents <a href="#transfertilecontents"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.transferTileContents(tile: tileObject, newOwner: tribeObject)
</code></pre></div></div>
<p>Changes the owner of the city and or units on the tile
to newOwner from the current owner.</p>

  </div>
</article>
<!--
    <h1 id="gen">
  
  
    <a href="#gen">&#128279</a> gen
  
  
</h1>
    

<p>The General Library offers a variety of tools to make it easier to build events. To access functions from the General Library, you should include the following line at the top of your file:</p>
<div class="language-lua highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">local</span> <span class="n">gen</span> <span class="o">=</span> <span class="nb">require</span><span class="p">(</span><span class="s2">"generalLibrary"</span><span class="p">)</span>
</code></pre></div></div>
<h2 id="generally-useful-functions">
  
  
    <a href="#generally-useful-functions">&#128279</a> Generally Useful Functions
  
  
</h2>
    

<p>These functions are generally useful for creating events.</p>
<h3 id="createunit">
  
  
    <a href="#createunit">&#128279</a> createUnit
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.createUnit(unitType: unitTypeObject, tribe: tribeObject, locations: table|table&lt;integer, table|tileObject&gt;|tileObject, options: table)
  -&gt; table
</code></pre></div></div>
<p>This is a createUnit function, meant to supersede civlua.createUnit.
Returns a table of units, indexed by integers starting at 1 (unless no units were created.</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">unitType</code> — The type of unit to create.</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">tribe</code> — The owner of the new unit or units.</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">locations</code> — locations is one of the following:<br /><br />tileObject<br />{xCoord,yCoord}<br />{xCoord,yCoord,zCoord}<br />{x=xCoord,y=yCoord}<br />{x=xCoord,y=yCoord,z=zCoord}<br />table&lt;integer,above_types&gt;</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">options</code> — options is a table with the following keys: <br /><br /> count : integer\|nil <br /> The number of units to create.  <code class="language-plaintext highlighter-rouge">nil</code> means 1.<br /><br />randomize : boolean\|nil <br /> If true, randomize the list of locations.  If false or nil, try to place at the tile with the smallest index in the table first.<br /><br />scatter : boolean\|nil <br /> If true, and if randomize is true, each unit is created on a random tile in the location table.<br /><br />inCapital : boolean\|nil <br /> If true, attempt to place in the capital before other locations.  IN case of multiple capitals, capitals are ranked with smallest city id first.  randomize/scatter applies to list of capitals if this is selected.<br /><br />veteran : boolean\|number\|nil <br /> If true, make the created units veteran.  If a fraction between 0 and 1, each unit has this probability of being veteran.  If number 1 or more, this many of the count are made veteran (take floor).  If nil or false, no veterans.<br /><br />homeCity : city\|true\|nil <br /> If city, that city is the home city.  If true, the game selects the home city (probably the way a city is chosen if you crate a unit using the cheat menu).  If nil, no home city.<br /><br />overrideCanEnter : boolean\|nil <br /> If true, the units will be placed even if unitType : canEnter(tile) returns false.  False or nil means follow the restriction.  civ.canEnter appears to check if the terrain is impassible, or if the unit can cross impassible.<br /><br />overrideDomain : boolean\|nil <br /> If true, sea units can be created on land outside cities, and land units at sea.  False or nil means units can only be created where they could travel naturally.<br /><br />overrideDefender : boolean\|nil <br /> If true, unit can be placed on tiles with enemy units or cities.  False or nil means the tile must have no enemy city, and no enemy defender.</p>
<h3 id="copyunitattributes">
  
  
    <a href="#copyunitattributes">&#128279</a> copyUnitAttributes
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.copyUnitAttributes(parent: unitObject, child: unitObject)
</code></pre></div></div>
<p>Copies the attributes of the <code class="language-plaintext highlighter-rouge">parent</code> unit to the <code class="language-plaintext highlighter-rouge">child</code> unit.
 All attributes accessible through lua are copied (except unit type,
 and unit id number)
  Useful if a unit’s type must be changed (by creating a new unit), but everything
  else should stay the same</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">parent</code> — The unit giving the attributes.</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">child</code> — The unit receiving the attributes.</p>
<h3 id="defeatunit">
  
  
    <a href="#defeatunit">&#128279</a> defeatUnit
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.defeatUnit(loser: unitObject, winner: unitObject, aggressor: unitObject, victim: unitObject, loserLocation: tileObject, winnerVetStatus: boolean, loserVetStatus: boolean)
  -&gt; survivingDemotedUnit: unitObject|nil
</code></pre></div></div>
<p>“Defeats” the loser, deletes the loser, and returns a unit if and only if the loser was demoted, otherwise nil is returned.
 Runs the events for unit defeat, death, and deletion.</p>
<h3 id="killunit">
  
  
    <a href="#killunit">&#128279</a> killUnit
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.killUnit(dyingUnit: unitObject)
</code></pre></div></div>
<p>“Kills” the dying unit, running events for ‘death’, ‘death outside combat’, and ‘deletion’.</p>
<h3 id="deleteunit">
  
  
    <a href="#deleteunit">&#128279</a> deleteUnit
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.deleteUnit(deletedUnit: unitObject, replacementUnit: unitObject|nil)
</code></pre></div></div>
<p>Deletes the deleted unit.
 I the unit is being ‘replaced’, the replacing unit must be provided.
 Runs events associated with unit deletion.</p>
<blockquote>
  <p>void</p>
</blockquote>
<h3 id="replaceunit">
  
  
    <a href="#replaceunit">&#128279</a> replaceUnit
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.replaceUnit(oldUnit: unitObject, replacementType: unitTypeObject)
  -&gt; unitObject
</code></pre></div></div>
<p>Creates a unit to replace the old unit, 
 copies the old unit’s attributes, and
 deletes the old unit (applying the deletion function).
 Returns the newly created unit.
comment</p>
<h3 id="limitedexecutions">
  
  
    <a href="#limitedexecutions">&#128279</a> limitedExecutions
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.limitedExecutions(key: string|integer, maxTimes: integer, limitedFunction: fun())
</code></pre></div></div>
<p>If the value at key is less than maxTimes, limitedFunction will execute,
 and the value at key will increment by 1.
 Otherwise, don’t execute limitedFunction.
 Note: limitedFunction()–&gt;void</p>

<p>Example: Volunteers will be created in a capital up to 3 times for a certain trigger.</p>
<div class="language-lua highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">gen</span><span class="p">.</span><span class="n">limitedExecutions</span><span class="p">(</span><span class="s2">"Tribe 1 Volunteers"</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span> <span class="k">function</span><span class="p">()</span>
    <span class="n">text</span><span class="p">.</span><span class="n">simple</span><span class="p">(</span><span class="s2">"Young men flock to Washington to fight the South."</span><span class="p">)</span>
    <span class="n">gen</span><span class="p">.</span><span class="n">createUnit</span><span class="p">(</span><span class="n">gen</span><span class="p">.</span><span class="n">original</span><span class="p">.</span><span class="n">uRiflemen</span><span class="p">,</span> <span class="n">object</span><span class="p">.</span><span class="n">pUnion</span><span class="p">,</span> <span class="n">object</span><span class="p">.</span><span class="n">lWashington</span><span class="p">,</span> <span class="p">{})</span>
<span class="k">end</span><span class="p">)</span>
</code></pre></div></div>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">key</code> — The key for this limited execution</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">maxTimes</code> — The number of times the limited function will be executed</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">limitedFunction</code> — The function to execute a maximum number of times.</p>
<h3 id="justonce">
  
  
    <a href="#justonce">&#128279</a> justOnce
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.justOnce(key: any, limitedFunction: any)
</code></pre></div></div>
<p>If justOnce has never been executed for this key before, then
 the limited function will execute.  Otherwise, it won’t.
 (Wrapper for gen.limitedExecutions with maxTimes being 1.)
 Example: Show a message once for a certain trigger</p>
<div class="language-lua highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">gen</span><span class="p">.</span><span class="n">justOnce</span><span class="p">(</span><span class="s2">"Rebel Attack"</span><span class="p">,</span> <span class="k">function</span><span class="p">()</span>
    <span class="n">text</span><span class="p">.</span><span class="n">simple</span><span class="p">(</span><span class="s2">"The Rebels have attacked Union troops.  We're now in a shooting war!"</span><span class="p">,</span><span class="s2">"Secretary of Defense"</span><span class="p">)</span>
<span class="k">end</span><span class="p">)</span>
</code></pre></div></div>
<h3 id="iswonderactivefortribe">
  
  
    <a href="#iswonderactivefortribe">&#128279</a> isWonderActiveForTribe
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.isWonderActiveForTribe(wonder: integer|wonderObject, tribe: integer|tribeObject)
  -&gt; wonderIsActive: boolean
</code></pre></div></div>
<p>Returns true if the <code class="language-plaintext highlighter-rouge">wonder</code> is owned by the <code class="language-plaintext highlighter-rouge">tribe</code> and is not expired, and false otherwise.
 Integers corresponding to wonder/tribe ids can be used as arguments instead.
 revisions by Knighttime, 2021-11-12</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">wonder</code> — the wonder (or id of wonder) in question</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">tribe</code> — the tribe (or id of tribe) in question</p>
<h3 id="distance">
  
  
    <a href="#distance">&#128279</a> distance
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.distance(itemA: table|cityObject|tileObject|unitObject, itemB: table|cityObject|tileObject|unitObject, zDist?: integer)
  -&gt; integer
</code></pre></div></div>
<p>Takes two objects and a ‘vertical distance’ (0 if absent)
 and computes the distance between them.<br />
 zDist is the number of tiles that one unit of z coordinate “distance” is equivalent to
 Computes the distance you would get by counting tiles.
 If you want the game’s approximation of “Euclidean” distance that
 is used in many game mechanics, use gen.gameMechanicDistance</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">itemA</code> — Can be:<br /><br />tileObject<br /><br />unitObject<br /><br />cityObject<br /><br />{[1]=xCoord,[2]=yCoord,[3]=zCoord}<br />Converted to civ.getTile(xCoord,yCoord,zCoord) <br /><br />{[1]=xCoord,[2]=yCoord}<br />Converted to civ.getTile(xCoord,yCoord,0)<br /><br />{x=xCoord,y=yCoord,z=zCoord}<br />Converted to civ.getTile(xCoord,yCoord,zCoord) <br /><br />{x=xCoord,y=yCoord}<br />Converted to civ.getTile(xCoord,yCoord,0)</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">itemB</code> — Can be:<br /><br />tileObject<br /><br />unitObject<br /><br />cityObject<br /><br />{[1]=xCoord,[2]=yCoord,[3]=zCoord}<br />Converted to civ.getTile(xCoord,yCoord,zCoord) <br /><br />{[1]=xCoord,[2]=yCoord}<br />Converted to civ.getTile(xCoord,yCoord,0)<br /><br />{x=xCoord,y=yCoord,z=zCoord}<br />Converted to civ.getTile(xCoord,yCoord,zCoord) <br /><br />{x=xCoord,y=yCoord}<br />Converted to civ.getTile(xCoord,yCoord,0)</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">zDist</code> — The distance between tiles with same x,y coordinates but differing in z by 1. 0 by default.</p>
<h3 id="tiledist">
  
  
    <a href="#tiledist">&#128279</a> tileDist
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.tileDist(tileA: tileObject, tileB: tileObject, zDist?: integer)
  -&gt; integer
</code></pre></div></div>
<p>Takes two tiles and a ‘vertical distance’ (0 if absent)
 and computes the distance between them.
 Doesn’t pre-process arguments like gen.distance, so might be slightly
 quicker (though this probably too trivial to ever matter).
 Computes the distance you would get by counting tiles.
 If you want the game’s approximation of “Euclidean” distance that
 is used in many game mechanics, use gen.gameMechanicDistance</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">zDist</code> — The distance between tiles with same x,y coordinates but differing in z by 1. 0 by default.</p>
<h3 id="gamemechanicdistance">
  
  
    <a href="#gamemechanicdistance">&#128279</a> gameMechanicDistance
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.gameMechanicDistance(itemA: table|cityObject|tileObject|unitObject, itemB: table|cityObject|tileObject|unitObject)
  -&gt; integer
</code></pre></div></div>
<p>gen.gameMechanicDistance(itemOnMap1,itemOnMap2)
  provides a distance measure that is believed to be used
  for internal distance calculations (such as caravan payments
  or city corruption)
  This distance is scaled to match the “Communism Palace Distance”,
  (based on the corruption work by Knighttime)
  Diagonal movement is “1” distance, corner to corner is 1.5 (rounded down)</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">itemA</code> — Can be:<br /><br />tileObject<br /><br />unitObject<br /><br />cityObject<br /><br />{[1]=xCoord,[2]=yCoord,[3]=zCoord}<br />Converted to civ.getTile(xCoord,yCoord,zCoord) <br /><br />{[1]=xCoord,[2]=yCoord}<br />Converted to civ.getTile(xCoord,yCoord,0)<br /><br />{x=xCoord,y=yCoord,z=zCoord}<br />Converted to civ.getTile(xCoord,yCoord,zCoord) <br /><br />{x=xCoord,y=yCoord}<br />Converted to civ.getTile(xCoord,yCoord,0)</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">itemB</code> — Can be:<br /><br />tileObject<br /><br />unitObject<br /><br />cityObject<br /><br />{[1]=xCoord,[2]=yCoord,[3]=zCoord}<br />Converted to civ.getTile(xCoord,yCoord,zCoord) <br /><br />{[1]=xCoord,[2]=yCoord}<br />Converted to civ.getTile(xCoord,yCoord,0)<br /><br />{x=xCoord,y=yCoord,z=zCoord}<br />Converted to civ.getTile(xCoord,yCoord,zCoord) <br /><br />{x=xCoord,y=yCoord}<br />Converted to civ.getTile(xCoord,yCoord,0)</p>
<h3 id="fullhealthmovementallowance">
  
  
    <a href="#fullhealthmovementallowance">&#128279</a> fullHealthMovementAllowance
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.fullHealthMovementAllowance(unit: unitObject)
  -&gt; atomicMovementPoints: integer
</code></pre></div></div>
<p>Returns the movement allowance of a unit after
 taking into account Nuclear Power tech, Magellan’s Expedition, and Lighthouse.
 Returns “atomic” movement points (that is, the movement recorded by <code class="language-plaintext highlighter-rouge">unit.moveSpent</code>, or “regular” movement points * <code class="language-plaintext highlighter-rouge">totpp.movementMultipliers.aggregate</code></p>
<h3 id="maxmoves">
  
  
    <a href="#maxmoves">&#128279</a> maxMoves
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.maxMoves(unit: unitObject)
  -&gt; atomicMovementPoints: integer
</code></pre></div></div>
<p>Returns movement allowance for a unit after taking damage
 into account.
 Returns “atomic” movement points (that is, the movement recorded by <code class="language-plaintext highlighter-rouge">unit.moveSpent</code>, or “regular” movement points * <code class="language-plaintext highlighter-rouge">totpp.movementMultipliers.aggregate</code></p>
<h3 id="moveremaining">
  
  
    <a href="#moveremaining">&#128279</a> moveRemaining
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.moveRemaining(unit: unitObject)
  -&gt; atomicMovementPoints: integer
</code></pre></div></div>
<p>Returns gen.maxMoves-unit.moveSpent
 bug fixed by Knighttime</p>
<h3 id="inpolygon">
  
  
    <a href="#inpolygon">&#128279</a> inPolygon
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.inPolygon(tile: tileObject, tableOfCoordinates: table)
  -&gt; tileIsInPolygon: boolean
</code></pre></div></div>
<p>The table of coordinates defines the corners of the
 polygon.  Returns true if the tile is within the
 polygon defined by the table of coordinates, and
 false otherwise.  Checking that the map is correct
 must be done separately
 The entry: <code class="language-plaintext highlighter-rouge">tableOfCoordinates.doesNotCrossThisX</code>
 sets an x coordinate that the polygon does not
 cross.  If absent, 0 is used,
 meaning the polygon shouldn’t cross the “date line”.
<br /> Press CTRL+SHIFT+F4 and select the ‘Start the Polygon Script’ option to generate polygons.</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">tile</code> — The tile to check</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">tableOfCoordinates</code> — Table of {[1]=xCoord, [2]=yCoord} without gaps in the integer keys.</p>
<h3 id="getrandomtileinpolygon">
  
  
    <a href="#getrandomtileinpolygon">&#128279</a> getRandomTileInPolygon
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.getRandomTileInPolygon(polygonTable: table, map?: integer, maxAttempts?: integer)
  -&gt; tileObject
</code></pre></div></div>
<p>Generates a random tile within the polygon defined
by the table of coordinates (same as used by gen.inPolygon
and generated by the Polygon Script found in CTRL+SHIFT+F4).
Map is the map of the tile generated (0 by default).
This code is probabalistic, so after maxAttempts, the first
polygon coordinate is returned, and a text box displayed.
The console prints the polygon that caused the issue.</p>

<p>Inspired by Pablostuka</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">polygonTable</code> — a table of coordinate pairs</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">map</code> — The map for the random tile (default 0)</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">maxAttempts</code> — the number of attempts to find an eligible square (default 100)</p>
<h3 id="citycansupportanotherunit">
  
  
    <a href="#citycansupportanotherunit">&#128279</a> cityCanSupportAnotherUnit
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.cityCanSupportAnotherUnit(city: cityObject)
  -&gt; boolean
</code></pre></div></div>
<p>Returns true if the city has enough production to support all existing units and at least one other unit.
Units that get free support under fundamentalism are still counted as
“supported”, since they still take up a free support “slot” if they are
among the first 8 units supported by the city.</p>
<h3 id="hometonearestcity">
  
  
    <a href="#hometonearestcity">&#128279</a> homeToNearestCity
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.homeToNearestCity(unit: unitObject)
</code></pre></div></div>
<p>Finds the nearest city (of the same tribe) that can support another
  unit, and sets the unit’s home city to that city.
  If there is no suitable city, the unit’s home city isn’t changed.
 <br /> Note: This counts the number of squares between the unit and the city, and ignores map differences.  This is not suitable for all applications (e.g. if maps are not “stacked”, or if you’re trying to re-create an existing game mechanic).</p>
<h3 id="unittypeontile">
  
  
    <a href="#unittypeontile">&#128279</a> unitTypeOnTile
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.unitTypeOnTile(tile: tileObject, unitTypeTable: table&lt;any, unitTypeObject&gt;|unitTypeObject, excludeFromCheck?: table&lt;any, unitObject&gt;|unitObject)
  -&gt; boolean
</code></pre></div></div>
<p>Returns true if tile has any of the unit types listed in the table,
false otherwise. A unit or units can be excluded from the check.</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">tile</code> — The tile to try to find specific unit types on.</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">unitTypeTable</code> — The unit type or types to check for.</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">excludeFromCheck</code> — These units are excluded from the check.  If they are of a matching unit type, the function still won’t return true.  (Unless a different unit has a matching type.)</p>
<h3 id="getadjacenttiles">
  
  
    <a href="#getadjacenttiles">&#128279</a> getAdjacentTiles
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.getAdjacentTiles(tile: table|tileObject)
  -&gt; tileTable: table&lt;integer, tileObject&gt;
</code></pre></div></div>
<p>Returns a table (indexed by integers) with all adjacent
 tiles to the input tile.  Note: some keys will have nil values
 if the tile is on the edge of the map.</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">tile</code> — if table, should be a coordinate pair or triple</p>

<p>@<em>return</em> <code class="language-plaintext highlighter-rouge">tileTable</code> — table of adjacent tiles</p>
<h3 id="moveunitadjacent">
  
  
    <a href="#moveunitadjacent">&#128279</a> moveUnitAdjacent
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.moveUnitAdjacent(unit: unitObject, destRankFn?: fun(unit: unitObject, tile: tileObject):integer|false)
  -&gt; destination: tileObject|false
</code></pre></div></div>
<p>Moves the unit to an adjacent tile, choosing the tile based on<br />
 <code class="language-plaintext highlighter-rouge">destRankFn(unit,tile)--&gt; integer or false</code>.
 Lower values mean preferred tiles, false means unit can’t move to tile.
 Default is prefer empty squares before squares with units on them.
 Returns the tile the unit is moved to, or false if the unit can’t be moved.</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">destRankFn</code> — If the unit can be placed on the tile, return an integer (lower being more preferred).  If it can’t, return false.</p>

<p>@<em>return</em> <code class="language-plaintext highlighter-rouge">destination</code> — The tile the unit was moved to, or false if it could not be moved.</p>

<div class="language-lua highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">-- A tile object is a data type provided by the Test of Time Patch Project Lua Interpreter. It represents a map "square" in the game, and provides a means of interacting with it.</span>
<span class="c1">-- [Lua Function Reference](https://forums.civfanatics.com/threads/totpp-lua-function-reference.557527/#tile)</span>
<span class="n">destination</span><span class="p">:</span>
    <span class="err">\|</span> <span class="kc">false</span>
</code></pre></div></div>
<h3 id="unprotecttile">
  
  
    <a href="#unprotecttile">&#128279</a> unprotectTile
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.unprotectTile(tile: tileObject, isProtectingUnit: fun(unit: unitObject):boolean, isProtectedUnit: fun(unit: unitObject):boolean, isProtectedTile: fun(tile: tileObject):boolean, destRankFn?: fun(unit: unitObject, tile: tileObject):integer|false)
</code></pre></div></div>
<p><code class="language-plaintext highlighter-rouge">isProtectingUnit(unit)--&gt;bool</code>
 if true, the unit is a ‘protecting’ unit that must be moved
 e.g. air units with range &gt;= 2 in air protected stacks
 <br /><code class="language-plaintext highlighter-rouge">isProtectedUnit(unit)--&gt;bool</code>
 if true, the unit is a ‘protected’ unit, meaning that ‘protecting’ units
 must be moved off square if one is on it
 e.g. land and sea units in air protected stacks
 <br /><code class="language-plaintext highlighter-rouge">isProtectedTile(tile)--&gt;bool</code>
 if true, the protecting unit must be moved, if not it can stay
 e.g. clear tiles are true in air protected stacks,
 cities, airbases, tiles with carriers return false for air protected stacks
 <br /><code class="language-plaintext highlighter-rouge">destRankFn(unit,tile)--&gt; integer or false</code>.
 The choice on where to move protecting units is based on this function.
 Lower values mean preferred tiles, false means unit can’t move to tile.
 Default is prefer empty squares before squares with units on them.</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">isProtectingUnit</code> — Returns true if the unit is a “protecting” unit that must be moved, false otherwise.</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">isProtectedUnit</code> — Returns true if the unit is a unit that can be “protected” by protecting units, false otherwise.</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">isProtectedTile</code> — Returns true if units can be protected on this tile, false otherwise.</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">destRankFn</code> — If the unit can be placed on the tile, return an integer (lower being more preferred).  If it can’t, return false.</p>
<h3 id="clearairprotection">
  
  
    <a href="#clearairprotection">&#128279</a> clearAirProtection
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.clearAirProtection(tile: tileObject)
</code></pre></div></div>
<p>Clears standard Civ II Air protection from the tile.  That is, moves air units off the tile if they prevent ground/sea units on the tile from being attacked</p>
<h3 id="clearadjacentairprotection">
  
  
    <a href="#clearadjacentairprotection">&#128279</a> clearAdjacentAirProtection
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.clearAdjacentAirProtection(unit: unitObject)
</code></pre></div></div>
<p>Clears air protection for tiles adjacent to the unit, as long as those tiles are not owned by the unit’s owner.
In the Lua Scenario Template, simpleSettings.lua has the following settings:</p>
<div class="language-lua highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">simpleSettings</span><span class="p">.</span><span class="n">clearAdjacentAirProtectionAI</span> <span class="o">=</span> <span class="kc">false</span>
<span class="n">simpleSettings</span><span class="p">.</span><span class="n">clearAdjacentAirProtectionHuman</span> <span class="o">=</span> <span class="kc">false</span>
</code></pre></div></div>
<h3 id="cityradiustiles">
  
  
    <a href="#cityradiustiles">&#128279</a> cityRadiusTiles
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.cityRadiusTiles(input: table|cityObject|tileObject)
  -&gt; table&lt;integer, tileObject&gt;
</code></pre></div></div>
<p>Returns a table of tiles around a center tile, the 
  size of a city ‘footprint’.  The indices are listed below
  and are based on how city.workers determines which tiles
  are worked.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  #       #       #       #       #
      #       #       #       #       #
  #       #       #       #       #
      #       20      13      #       #
  #       12      8       9       #
      19      7       1       14      #
  #       6       21      2       #
      18      5       3       15      #
  #       11      4       10      #
      #       17      16      #       #
  #       #       #       #       #
      #       #       #       #       #
</code></pre></div></div>

<p>If the center is at the edge of the map, absent tiles have nil values</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">input</code> — If table, the table must be tile coordinates.</p>
<h3 id="gettilesinradius">
  
  
    <a href="#gettilesinradius">&#128279</a> getTilesInRadius
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.getTilesInRadius(centre: table|tileObject, radius: integer, minRadius?: integer, maps?: integer|table)
  -&gt; table&lt;integer, tileObject&gt;
</code></pre></div></div>
<p>Produces a table of nearby tiles to centre.<br />
Lower index means closer tile (or, same distance),
not counting z axis if multiple maps are used.
Keys start at 1, no missing indices (if a tile doesn’t exist, there
won’t be an empty entry, the next tile will use that entry).</p>

<p>centre = a tile or table of coordinates 
    central til around which we will find tiles</p>

<p>radius = integer
    is the distance (in tiles, not coordinates) from the centre to the furthest
    tiles desired</p>

<p>minRadius = integer
    is the distance in tiles from the centre for the nearest tile to be
    included (e.g. if you don’t want centre itself, set minRadius to 1, if you
    want a ring only, set minRadius to radius)</p>

<p>maps = nil or integer in 0-3 or table of integers
    if nil, only get tiles from the map that centre is on
    if integer, only get tiles from that map
    if table of integers, tiles from all maps listed
    e.g. {1,3} means get tiles from maps 1 and 3</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">centre</code> — if table, must be a table of coordinates.</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">radius</code> — The number of tiles out you want to get.</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">minRadius</code> — 0 by default</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">maps</code> — if table, values are the maps to get the tiles from.  Same map as <code class="language-plaintext highlighter-rouge">centre</code> by default.</p>
<h3 id="playmusic">
  
  
    <a href="#playmusic">&#128279</a> playMusic
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.playMusic(fileName: any)
</code></pre></div></div>
<p>Plays music from <code class="language-plaintext highlighter-rouge">fileName</code>, found in the folder set by
 gen.setMusicDirectory (in Lua Scenario Template, this is <MainScenarioDirectory>\Sound).</MainScenarioDirectory></p>

<p>gen.playMusic stops any currently playing game music in order
 to play music, and the music won’t play if the “music” is disabled in the menu.  This is different from playing a sound with civ.playSound, which doesn’t stop any existing music.</p>
<h3 id="issingleplayergame">
  
  
    <a href="#issingleplayergame">&#128279</a> isSinglePlayerGame
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.isSinglePlayerGame()
  -&gt; boolean
</code></pre></div></div>
<p>Returns true if there is exactly one human player, false otherwise.</p>
<h3 id="nearbyunits">
  
  
    <a href="#nearbyunits">&#128279</a> nearbyUnits
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.nearbyUnits(center: table|tileObject, radius: integer, maps?: integer|table)
  -&gt; fun():unitObject
</code></pre></div></div>
<p>gen.nearbyUnits(center,radius,maps={0,1,2,3}) –&gt; iterator providing units
provides an iterator over all the units within radius
tiles of the center tile
maps = nil or integer in 0-3 or table of integers
    if integer, only get units from tiles from that map
    if table of integers, units from all maps listed
    e.g. {1,3} means get units from maps 1 and 3
    if nil, get units from all maps (this choice is for backwards compatibility)</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">center</code> — If table, must be a table of coordinates.</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">radius</code> — How far away from the center you wish to get units.</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">maps</code> — If integer, get units from that map. If table, values are the maps to get the tiles from.  Get from all maps by default (for backwards compatibility).</p>
<h3 id="makeallowedterrainfunction">
  
  
    <a href="#makeallowedterrainfunction">&#128279</a> makeAllowedTerrainFunction
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.makeAllowedTerrainFunction(allowedTilesList: table&lt;integer, integer&gt;|nil)
  -&gt; fun(tile: tileObject):boolean
</code></pre></div></div>
<p>gen.makeAllowedTerrainFunction(allowedTilesTable) –&gt; function(tile)–&gt;bool
Converts a table of integer values into a function that returns
true if tile.baseTerrain.type is a value in the table, and false otherwise.
If nil is entered, all terrain is allowed.</p>
<h3 id="nearbyunoccupiedtiles">
  
  
    <a href="#nearbyunoccupiedtiles">&#128279</a> nearbyUnoccupiedTiles
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.nearbyUnoccupiedTiles(centerTile: table|tileObject, distance: integer, allowedTiles: fun(tile: tileObject):boolean|table&lt;integer, integer&gt;)
  -&gt; table&lt;integer, tileObject&gt;
</code></pre></div></div>
<p>Returns the table of nearby unoccupied tiles.
Indices start at 1 without gaps, but tiles are in no particular order.
<code class="language-plaintext highlighter-rouge">centerTile</code> is the tile that you want to find other tiles near to (on same map).
<code class="language-plaintext highlighter-rouge">distance</code> is the number of squares away that you can search.
<code class="language-plaintext highlighter-rouge">allowedTiles</code> is either a table of integers such that a tile is acceptable if
<code class="language-plaintext highlighter-rouge">possibleTile.baseTerrain.type</code> appears as a value in the table
or a function <code class="language-plaintext highlighter-rouge">allowedTiles(possibleTile)--&gt;bool</code>
that returns true if the tile is allowed, and false if not.
If <code class="language-plaintext highlighter-rouge">nil</code> is entered, all terrain is allowed.</p>
<h3 id="getrandomnearbyunoccupiedtile">
  
  
    <a href="#getrandomnearbyunoccupiedtile">&#128279</a> getRandomNearbyUnoccupiedTile
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.getRandomNearbyUnoccupiedTile(centerTile: table|tileObject, distance: integer, allowedTiles: fun(tile: tileObject):boolean|table&lt;integer, integer&gt;)
  -&gt; tileObject|nil
</code></pre></div></div>
<p>Returns a random unoccupied square near tile, on the same map.  Returns nil if there is no such tile.
<code class="language-plaintext highlighter-rouge">centerTile</code> is the tile that you want to find other tiles near to (on same map).
<code class="language-plaintext highlighter-rouge">distance</code> is the number of squares away that you can search.
<code class="language-plaintext highlighter-rouge">allowedTiles</code> is either a table of integers such that a tile is acceptable if
<code class="language-plaintext highlighter-rouge">possibleTile.baseTerrain.type</code> appears as a value in the table
or a function <code class="language-plaintext highlighter-rouge">allowedTiles(possibleTile)--&gt;bool</code>
that returns true if the tile is allowed, and false if not.
If <code class="language-plaintext highlighter-rouge">nil</code> is entered, all terrain is allowed.</p>
<h3 id="nearbyopentilesfortribe">
  
  
    <a href="#nearbyopentilesfortribe">&#128279</a> nearbyOpenTilesForTribe
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.nearbyOpenTilesForTribe(centerTile: table|tileObject, distance: integer, allowedTiles: fun(tile: tileObject):boolean|table&lt;integer, integer&gt;, tribe: tribeObject)
  -&gt; table&lt;integer, tileObject&gt;
</code></pre></div></div>
<p>gen.nearbyOpenTilesForTribe(centerTile,distance,allowedTiles,tribe)
Returns a table of nearby tiles, on the same map, that are either unoccupied or only has units/city of the <code class="language-plaintext highlighter-rouge">tribe</code>
Indices start at 1 without gaps, but tiles are in no particular order.
<code class="language-plaintext highlighter-rouge">centerTile</code> is the tile that you want to find other tiles near to (on same map).
<code class="language-plaintext highlighter-rouge">distance</code> is the number of squares away that you can search.
<code class="language-plaintext highlighter-rouge">allowedTiles</code> is either a table of integers such that a tile is acceptable if
<code class="language-plaintext highlighter-rouge">possibleTile.baseTerrain.type</code> appears as a value in the table
or a function <code class="language-plaintext highlighter-rouge">allowedTiles(possibleTile)--&gt;bool</code>
that returns true if the tile is allowed, and false if not.
If <code class="language-plaintext highlighter-rouge">nil</code> is entered, all terrain is allowed.
<code class="language-plaintext highlighter-rouge">tribe</code> the tribe that is searching for open tiles.</p>
<h3 id="getrandomnearbyopentilefortribe">
  
  
    <a href="#getrandomnearbyopentilefortribe">&#128279</a> getRandomNearbyOpenTileForTribe
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.getRandomNearbyOpenTileForTribe(centerTile: table|tileObject, distance: integer, allowedTiles: fun(tile: tileObject):boolean|table&lt;integer, integer&gt;, tribe: tribeObject)
  -&gt; tileObject|nil
</code></pre></div></div>
<p>Returns a random square near tile, on the same map, that is either empty or only has units/city of the same tribe.  Returns nil if there is no such tile.
<code class="language-plaintext highlighter-rouge">centerTile</code> is the tile that you want to find other tiles near to (on same map).
<code class="language-plaintext highlighter-rouge">distance</code> is the number of squares away that you can search.
<code class="language-plaintext highlighter-rouge">allowedTiles</code> is either a table of integers such that a tile is acceptable if
<code class="language-plaintext highlighter-rouge">possibleTile.baseTerrain.type</code> appears as a value in the table
or a function <code class="language-plaintext highlighter-rouge">allowedTiles(possibleTile)--&gt;bool</code>
that returns true if the tile is allowed, and false if not.
If <code class="language-plaintext highlighter-rouge">nil</code> is entered, all terrain is allowed.
<code class="language-plaintext highlighter-rouge">tribe</code> the tribe that is searching for open tiles.</p>
<h3 id="gettileproduction">
  
  
    <a href="#gettileproduction">&#128279</a> getTileProduction
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.getTileProduction(tile: table|tileObject, city: cityObject, ignoreCustomCosmic?: boolean)
  -&gt; foodProduction: integer
  2. shieldProduction: integer
  3. tradeProduction: integer
</code></pre></div></div>
<p>gen.getTileProduction(tile,city) –&gt; integer (food), integer(shields), integer(trade)
 Returns the tile production values, presuming that the city
 given is the one working the tile.
 That is to say, returns the values that would be seen on the tile in the city window.
 Doesn’t check if that city is actually working the tile.</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">ignoreCustomCosmic</code> — If true, do not use the customCosmic city customisation to get production, refer to the current settings of terrain, baseTerrain and roadTrade.  If false or nil, refer to customCosmic module if it is available (otherwise, refer to current settings of terrain, baseTerrain and roadTrade).</p>
<h3 id="computebaseproduction">
  
  
    <a href="#computebaseproduction">&#128279</a> computeBaseProduction
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.computeBaseProduction(city: cityObject, ignoreCustomCosmic?: boolean)
  -&gt; foodProduction: integer
  2. shieldProduction: integer
  3. tradeProduction: integer
</code></pre></div></div>
<p>Computes the resources harvested by the city from the terrain.
 Includes superhighway/supermarket/railroad bonus, but not factories/power plants.</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">ignoreCustomCosmic</code> — If true, do not use the customCosmic city customisation to get production, refer to the current settings of terrain, baseTerrain and roadTrade.  If false or nil, refer to customCosmic module if it is available (otherwise, refer to current settings of terrain, baseTerrain and roadTrade).</p>
<h3 id="spendmovementpoints">
  
  
    <a href="#spendmovementpoints">&#128279</a> spendMovementPoints
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.spendMovementPoints(unit: unitObject, points: number, multiplier?: integer, maxSpent?: integer, minSpent?: integer)
</code></pre></div></div>
<p>Increases the expended movement of the <code class="language-plaintext highlighter-rouge">unit</code> by <code class="language-plaintext highlighter-rouge">points</code>.
 If the unit has a range (either natural or through <code class="language-plaintext highlighter-rouge">gen.activateRangeForLandAndSea</code>) and
 uses up all its movement for the current turn, its domainSpec is incremented by 1
 and the unit is killed if it is out of range.
 (Exceptions: if the unit is the currently active unit and is a land or sea unit
 with range, it won’t increment domainSpec, since that is caught immediately
 afterward with onFinalOrderGiven. A unit that has already spent its full movement allowance before the modifier is applied also won’t increment)
 By default, ‘full’ unit movement points are used, but a different <code class="language-plaintext highlighter-rouge">multiplier</code> can be specified 
 e.g. 1 if you want to spend atomic movement points.
 If points is negative, movement is restored to the unit.
 If points is not an integer, math.floor(points*multiplier) is used.
 Final move spent is bound between maxSpent and minSpent, which are by default
 255 and 0 respectively.</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">maxSpent</code> — default is 255</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">minSpent</code> — default is 0</p>
<h3 id="getbearing">
  
  
    <a href="#getbearing">&#128279</a> getBearing
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.getBearing(compassPoint: table|cityObject|tileObject|unitObject, compassCentre: table|cityObject|tileObject|unitObject)
  -&gt; bearing: ""|"E"|"N"|"NE"|"NW"...(+4)
</code></pre></div></div>
<p>Returns one of “N”,”S”,”E”,”W”,”NW”,”NE”,”SW”,”SE”,”” based on the locations
 of the compassPoint and compassCentre.  “” is returned if compassPoint and compassCentre are the same tile.<br /><br />
 e.g. <code class="language-plaintext highlighter-rouge">gen.getBearing(Madrid,Paris) --&gt; SW</code>
      Madrid is South-West of Paris
      We’re finding the location of Madrid relative to Paris, hence
      Paris is at the compass centre and we’re looking for the
      bearing of the compass point in the direction of Madrid
      gen.getBearing(Paris,Madrid) –&gt; NE
      Paris is North-East of Madrid
 compassPoint and compassCentre can be units, cities, or tiles
 <br /><br />Inspired by Pablostuka</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">compassPoint</code> — Can be:<br /><br />tileObject<br /><br />unitObject<br /><br />cityObject<br /><br />{[1]=xCoord,[2]=yCoord,[3]=zCoord}<br />Converted to civ.getTile(xCoord,yCoord,zCoord) <br /><br />{[1]=xCoord,[2]=yCoord}<br />Converted to civ.getTile(xCoord,yCoord,0)<br /><br />{x=xCoord,y=yCoord,z=zCoord}<br />Converted to civ.getTile(xCoord,yCoord,zCoord) <br /><br />{x=xCoord,y=yCoord}<br />Converted to civ.getTile(xCoord,yCoord,0)</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">compassCentre</code> — Can be:<br /><br />tileObject<br /><br />unitObject<br /><br />cityObject<br /><br />{[1]=xCoord,[2]=yCoord,[3]=zCoord}<br />Converted to civ.getTile(xCoord,yCoord,zCoord) <br /><br />{[1]=xCoord,[2]=yCoord}<br />Converted to civ.getTile(xCoord,yCoord,0)<br /><br />{x=xCoord,y=yCoord,z=zCoord}<br />Converted to civ.getTile(xCoord,yCoord,zCoord) <br /><br />{x=xCoord,y=yCoord}<br />Converted to civ.getTile(xCoord,yCoord,0)</p>

<div class="language-lua highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">bearing</span><span class="p">:</span>
    <span class="err">\|</span> <span class="s2">"N"</span>
    <span class="err">\|</span> <span class="s2">"S"</span>
    <span class="err">\|</span> <span class="s2">"E"</span>
    <span class="err">\|</span> <span class="s2">"W"</span>
    <span class="err">\|</span> <span class="s2">"NW"</span>
    <span class="err">\|</span> <span class="s2">"NE"</span>
    <span class="err">\|</span> <span class="s2">"SW"</span>
    <span class="err">\|</span> <span class="s2">"SE"</span>
    <span class="err">\|</span> <span class="s2">""</span>
</code></pre></div></div>
<h3 id="isinteger">
  
  
    <a href="#isinteger">&#128279</a> isInteger
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.isInteger(item: any)
  -&gt; boolean
</code></pre></div></div>
<p>Returns true if the item is an integer, and false otherwise.</p>
<h3 id="getmaptransportflagnumber">
  
  
    <a href="#getmaptransportflagnumber">&#128279</a> getMapTransportFlagNumber
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.getMapTransportFlagNumber(map1: integer|mapObject, map2: integer|mapObject, all?: boolean, functionName?: string)
  -&gt; boolean|integer|table
</code></pre></div></div>
<p>Finds the number of a map transporter relationship 
 (or a table of all relationships, if <code class="language-plaintext highlighter-rouge">all</code> is true) which allows
 transporter travel between <code class="language-plaintext highlighter-rouge">map1</code> and <code class="language-plaintext highlighter-rouge">map2</code>, with the first
 relationship in @MAP_TRANSPORT_RELATIONSHIPS being represented
 by 1.  If <code class="language-plaintext highlighter-rouge">map1</code> and <code class="language-plaintext highlighter-rouge">map2</code> are the same map, return <code class="language-plaintext highlighter-rouge">true</code>, even
 if there is a relationship for that.  If there is no transport
 relationship between the two maps, false is returned.</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">all</code> — If true, return a table of all eligible relationship numbers (unless maps are the same, or there are none).</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">functionName</code> — If present, passes along a functionName to be displayed in case of error (particularly if changeRules.lua module is not found)</p>
<h3 id="getnumberofterraintypes">
  
  
    <a href="#getnumberofterraintypes">&#128279</a> getNumberOfTerrainTypes
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.getNumberOfTerrainTypes(map: any)
  -&gt; unknown
</code></pre></div></div>
<h3 id="getstate">
  
  
    <a href="#getstate">&#128279</a> getState
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.getState()
  -&gt; boolean|string|number|table&lt;string|number, boolean|string|number|table&gt;
</code></pre></div></div>
<p>Returns the state table submitted to <code class="language-plaintext highlighter-rouge">gen.linkState</code>.
 If you’re writing a module intended for use by others,
 it is recommended that you use a linkState system with a 
 sub table, so that table keys don’t accidentally conflict</p>
<h3 id="getephemeraltable">
  
  
    <a href="#getephemeraltable">&#128279</a> getEphemeralTable
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.getEphemeralTable()
  -&gt; table
</code></pre></div></div>
<p>The ephemeralTable is a table for shared data.
 Since it is not saved, it doesn’t have to be serializeable,
 so you don’t have to worry about making keys and
 values text or numbers.
 However, the information will not be preserved after a save and load.</p>
<h3 id="iterateunittypes">
  
  
    <a href="#iterateunittypes">&#128279</a> iterateUnitTypes
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.iterateUnitTypes()
  -&gt; fun():unitTypeObject
</code></pre></div></div>
<p>Returns an iterator for all unitType objects.</p>
<h3 id="iterateimprovements">
  
  
    <a href="#iterateimprovements">&#128279</a> iterateImprovements
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.iterateImprovements()
  -&gt; fun():improvementObject
</code></pre></div></div>
<p>Returns an iterator for all improvement objects.</p>
<h3 id="iteratewonders">
  
  
    <a href="#iteratewonders">&#128279</a> iterateWonders
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.iterateWonders()
  -&gt; fun():wonderObject
</code></pre></div></div>
<p>Returns an iterator for all wonder objects.</p>
<h3 id="iteratebaseterrain">
  
  
    <a href="#iteratebaseterrain">&#128279</a> iterateBaseTerrain
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.iterateBaseTerrain()
  -&gt; fun():baseTerrainObject
</code></pre></div></div>
<p>Returns an iterator for all baseTerrain objects (for maps that are
in the game).</p>
<h3 id="iterateterrain">
  
  
    <a href="#iterateterrain">&#128279</a> iterateTerrain
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.iterateTerrain()
  -&gt; fun():terrainObject
</code></pre></div></div>
<p>Returns an iterator for all terrain objects (for maps that
are in the game).</p>
<h3 id="isroadtradebonus">
  
  
    <a href="#isroadtradebonus">&#128279</a> isRoadTradeBonus
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.isRoadTradeBonus(baseTerrain: baseTerrainObject)
  -&gt; boolean
</code></pre></div></div>
<p>Checks if the <code class="language-plaintext highlighter-rouge">baseTerrain</code> gets +1 trade production from a road.</p>
<h3 id="giveroadtradebonus">
  
  
    <a href="#giveroadtradebonus">&#128279</a> giveRoadTradeBonus
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.giveRoadTradeBonus(baseTerrain: baseTerrainObject)
</code></pre></div></div>
<p>Gives the <code class="language-plaintext highlighter-rouge">baseTerrain</code> +1 trade production from a road.</p>
<h3 id="removeroadtradebonus">
  
  
    <a href="#removeroadtradebonus">&#128279</a> removeRoadTradeBonus
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.removeRoadTradeBonus(baseTerrain: baseTerrainObject)
</code></pre></div></div>
<p>Removes the +1 trade production from a road for <code class="language-plaintext highlighter-rouge">baseTerrain</code>.</p>
<h3 id="fullhealthmovementallowance-1">
  
  
    <a href="#fullhealthmovementallowance-1">&#128279</a> fullHealthMovementAllowance
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.fullHealthMovementAllowance(unit: unitObject)
  -&gt; atomicMovementPoints: integer
</code></pre></div></div>
<p>Returns the movement allowance of a unit after
 taking into account Nuclear Power tech, Magellan’s Expedition, and Lighthouse.
 Returns “atomic” movement points (that is, the movement recorded by <code class="language-plaintext highlighter-rouge">unit.moveSpent</code>, or “regular” movement points * <code class="language-plaintext highlighter-rouge">totpp.movementMultipliers.aggregate</code></p>
<h2 id="table-tools">
  
  
    <a href="#table-tools">&#128279</a> Table Tools
  
  
</h2>
    

<p>These functions can be helpful when working with tables.</p>
<h3 id="intable">
  
  
    <a href="#intable">&#128279</a> inTable
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.inTable(object: any, table: table)
  -&gt; boolean
</code></pre></div></div>
<p>Returns <code class="language-plaintext highlighter-rouge">true</code> if the <code class="language-plaintext highlighter-rouge">object</code> is a value in the <code class="language-plaintext highlighter-rouge">table</code>, <code class="language-plaintext highlighter-rouge">false</code> otherwise
comment</p>
<h3 id="copytable">
  
  
    <a href="#copytable">&#128279</a> copyTable
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>gen.copyTable --&gt; function
</code></pre></div></div>
<h3 id="copytablewithmetatable">
  
  
    <a href="#copytablewithmetatable">&#128279</a> copyTableWithMetatable
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.copyTableWithMetatable(table: any)
  -&gt; any
</code></pre></div></div>
<p>Constructs (and returns) a new table with the same keys as the input, 
 as well as the same metatables. (The metatable is not copied, so that
 customData is still recognised as the correct data.)
 Tables within the table are also copied (along with their metatables).
 Note: although this is meant for copying tables, 
 the way the function is constructed, any value can be input and
 returned.</p>
<h3 id="isempty">
  
  
    <a href="#isempty">&#128279</a> isEmpty
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.isEmpty(table: table)
  -&gt; boolean
</code></pre></div></div>
<p>Returns true if the table has no entries, and false otherwise.
(I got this idea from stackoverflow, https://stackoverflow.com/questions/1252539/most-efficient-way-to-determine-if-a-lua-table-is-empty-contains-no-entries )
comment</p>
<h3 id="mergetablevalues">
  
  
    <a href="#mergetablevalues">&#128279</a> mergeTableValues
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.mergeTableValues(...table)
  -&gt; table
</code></pre></div></div>
<p>Accepts an arbitrary number of tables as
  arguments and returns a table with all
  the values from all the tables.
  Table keys are lost, and replaced by
  integers starting at 1.
  Duplicate values will appear multiple times.</p>
<h3 id="cleargapsinarray">
  
  
    <a href="#cleargapsinarray">&#128279</a> clearGapsInArray
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.clearGapsInArray(table: table, lowestValue?: integer)
</code></pre></div></div>
<p>Re-indexes all integer keys and values
 in a table, so that there are no gaps.
 Starts at lowestValue (1 by default), and maintains order
 of integer keys
 Non integer keys (including other numbers)
 and integers below lowestValue are left unchanged</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">lowestValue</code> — default is 1</p>
<h3 id="makearrayoneton">
  
  
    <a href="#makearrayoneton">&#128279</a> makeArrayOneToN
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.makeArrayOneToN(table: table)
</code></pre></div></div>
<p>All integer values in the table are re-indexed so that they 
 start at 1 and proceed without gaps.
 All other keys are ignored.</p>
<h3 id="tablewrap">
  
  
    <a href="#tablewrap">&#128279</a> tableWrap
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.tableWrap(item: any, needsWrapFn: fun(item: any):boolean)
  -&gt; table
</code></pre></div></div>
<p>gen.tableWrap(item)–&gt;table
 If item is a table, return the table
 otherwise, return a table with the item as element 1.
 This is useful so that functions can accept either a single
 element or a table of such elements.
  <code class="language-plaintext highlighter-rouge">needsWrapFn(item)--&gt;boolean</code>
  If true, item needs a wrapping table, if not, it doesn’t
  useful if you can distinguish between tables that represent other
  data structures, and tables of such data structures.
  By default, returns true if the item isn’t a table, and false if it is.</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">needsWrapFn</code> — Default: returns true if item is not a table, and false if it is.</p>
<h3 id="errorfornilkey">
  
  
    <a href="#errorfornilkey">&#128279</a> errorForNilKey
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.errorForNilKey(table: table, tableName: string)
</code></pre></div></div>
<p>Changes a table’s metatable, so that an error is 
 generated when a key with a nil
 value is accessed from the table.
 Useful for debugging in certain circumstances.</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">tableName</code> — the name for the table you want to be used in error displays.</p>
<h3 id="nonewkey">
  
  
    <a href="#nonewkey">&#128279</a> noNewKey
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.noNewKey(table: table, tableName: string)
</code></pre></div></div>
<p>Changes a table’s metatable, so that an error is 
 generated when assigning a value to a key 
 which doesn’t already exist in that table.
 Useful for debugging in certain circumstances.</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">tableName</code> — the name for the table you want to be used in error displays.</p>
<h3 id="isstatesavable">
  
  
    <a href="#isstatesavable">&#128279</a> isStateSavable
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.isStateSavable(item: any)
  -&gt; boolean
</code></pre></div></div>
<p>Determines if an item is “state savable” , which is to say that
 it can be added to the state table (the table containing the data that persists
 after saving and loading) in its current state.
  An item is “state savable” if it is either
  <br />nil
  <br />a number
  <br />a string
  <br />a boolean, or
  <br />a table with keys that are numbers or strings
    and with values that are also state savable
  Note: table can’t have a metatable
comment</p>
<h3 id="tabletostring">
  
  
    <a href="#tabletostring">&#128279</a> tableToString
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.tableToString(table: any)
  -&gt; string
</code></pre></div></div>
<p>gen.tableToString(table)
 Returns a string showing values in a table.</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">table</code> — Although this is meant to be used on a table, any kind of value can be provided.  For non-table values, the <code class="language-plaintext highlighter-rouge">tostring</code> command is used.</p>

<p>@<em>return</em> — A representation of the table.</p>
<h3 id="makedatatable">
  
  
    <a href="#makedatatable">&#128279</a> makeDataTable
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.makeDataTable(inputTable?: table, tableName?: string)
  -&gt; dataTable
</code></pre></div></div>
<p>Makes a ‘dataTable’, which functions as a table, but with the ability to disable
  overwriting values for existing keys,
  adding new keys, and
  requesting nil values (values for keys that don’t exist).
  (This functionality is achieved with a metatable.)
  The <code class="language-plaintext highlighter-rouge">tableName</code> is a name for the table when an error is generated.</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">inputTable</code> — The table to be made into a data table.  The table actually transformed, but it is also returned, if that is convenient.  Default is an empty table.</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">tableName</code> — Default is ‘unnamed data table’</p>
<h3 id="forbidreplacement">
  
  
    <a href="#forbidreplacement">&#128279</a> forbidReplacement
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.forbidReplacement(dataTable: dataTable)
</code></pre></div></div>
<p>Changes the <code class="language-plaintext highlighter-rouge">dataTable</code> so that non-nil values can not be changed.</p>
<h3 id="allowreplacement">
  
  
    <a href="#allowreplacement">&#128279</a> allowReplacement
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.allowReplacement(dataTable: dataTable)
</code></pre></div></div>
<p>Changes the <code class="language-plaintext highlighter-rouge">dataTable</code> so that non-nil values can be changed.</p>
<h3 id="forbidnewkeys">
  
  
    <a href="#forbidnewkeys">&#128279</a> forbidNewKeys
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.forbidNewKeys(dataTable: dataTable)
</code></pre></div></div>
<p>Changes the <code class="language-plaintext highlighter-rouge">dataTable</code> so that values can’t be assigned to keys which currently have a nil value.</p>
<h3 id="allownewkeys">
  
  
    <a href="#allownewkeys">&#128279</a> allowNewKeys
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.allowNewKeys(dataTable: dataTable)
</code></pre></div></div>
<p>Changes the <code class="language-plaintext highlighter-rouge">dataTable</code> so that values can once again be assigned to keys which currently have a nil value.</p>
<h3 id="forbidnilvalueaccess">
  
  
    <a href="#forbidnilvalueaccess">&#128279</a> forbidNilValueAccess
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.forbidNilValueAccess(dataTable: dataTable)
</code></pre></div></div>
<p>Changes the <code class="language-plaintext highlighter-rouge">dataTable</code> so that an error is generated if the program tries to access a key which currently has a nil value.</p>
<h3 id="allownilvalueaccess">
  
  
    <a href="#allownilvalueaccess">&#128279</a> allowNilValueAccess
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.allowNilValueAccess(dataTable: dataTable)
</code></pre></div></div>
<p>Changes the <code class="language-plaintext highlighter-rouge">dataTable</code> so that an error is not generated if the program tries to access a key which currently has a nil value.</p>
<h3 id="restrictvalues">
  
  
    <a href="#restrictvalues">&#128279</a> restrictValues
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.restrictValues(dataTable: dataTable, isValidValueFunction: fun(value: any):boolean, makeValidValueFunction: fun(value: any):any)
</code></pre></div></div>
<p>Changes the <code class="language-plaintext highlighter-rouge">dataTable</code> so that only ‘valid’ values can be assigned to the dataTable.  If <code class="language-plaintext highlighter-rouge">isValidValueFunction(value)</code> returns true for a <code class="language-plaintext highlighter-rouge">value</code> assigned to the table, that value is added to the table.  Otherwise, <code class="language-plaintext highlighter-rouge">makeValidValueFunction(value)</code> is assigned to the dataTable (unless an error is generated).</p>
<h3 id="makethresholdtable">
  
  
    <a href="#makethresholdtable">&#128279</a> makeThresholdTable
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.makeThresholdTable(inputTable: table|nil)
  -&gt; thresholdTable
</code></pre></div></div>
<p>A threshold table is a table where if a numerical key is indexed, and that
 numerical key doesn’t correspond to an index, the value of the largest
 numerical index less than the key is used.
 If there is no numerical index smaller than the key, false is returned.
 (nil is returned for non-numerical keys not in table)
 Use an index -math.huge to provide values for arbitrarily small numerical keys.
 Example:</p>
<div class="language-lua highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">myTable</span> <span class="o">=</span> <span class="n">gen</span><span class="p">.</span><span class="n">makeThresholdTable</span><span class="p">({[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">=-</span><span class="mi">1</span><span class="p">,[</span><span class="mi">0</span><span class="p">]</span><span class="o">=</span><span class="mi">0</span><span class="p">,[</span><span class="mi">1</span><span class="p">]</span><span class="o">=</span><span class="mi">1</span><span class="p">,})</span>
<span class="n">myTable</span><span class="p">[</span><span class="o">-</span><span class="mi">2</span><span class="p">]</span> <span class="c1">--&gt; false</span>
<span class="n">myTable</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="c1">--&gt; -1</span>
<span class="n">myTable</span><span class="p">[</span><span class="o">-</span><span class="mi">0</span><span class="p">.</span><span class="mi">6</span><span class="p">]</span> <span class="c1">--&gt; -1</span>
<span class="n">myTable</span><span class="p">[</span><span class="mi">3</span><span class="p">.</span><span class="mi">5</span><span class="p">]</span><span class="c1">--&gt;1</span>
<span class="n">myTable</span><span class="p">[</span><span class="s2">"three"</span><span class="p">]</span> <span class="c1">--&gt; nil</span>
<span class="n">myTable</span><span class="p">[</span><span class="mi">0</span><span class="p">.</span><span class="mi">5</span><span class="p">]</span><span class="c1">--&gt;0</span>
</code></pre></div></div>
<p>makes an input a threshold table or creates an empty thresholdTable
 Also returns the table value</p>
<h3 id="persistentrandom">
  
  
    <a href="#persistentrandom">&#128279</a> persistentRandom
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.persistentRandom(key: string)
  -&gt; number
</code></pre></div></div>
<p>gen.persistentRandom(key) –&gt; number between 0 and 1
 Checks the persistentRandom table (within the state table)
 for a value associated with key. If it exits, the value is
 returned.  If it does not exist, a random number between
 0 and 1 is generated, stored in the table under the key,
 and also returned.<br /></p>

<p>Example of use: WWII scenario with seasons
 You may want to have some games where the 1941 spring starts
 in April, and other games where it starts in May.  When
 determining whether to load winter or summer terrain stats during
 1941, you would use gen.persistentRandom(“EarlySpring1941”) &lt; 0.5
 as part of the season check in April, and load summer if the value is less than 0.5
 and winter otherwise.  This way, each when each player starts their
 game that month, they will all either get winter or summer terrain.</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">key</code> — Key for the persistent random value.</p>

<p>@<em>return</em> — number between 0 and 1</p>
<h3 id="clearpersistentrandom">
  
  
    <a href="#clearpersistentrandom">&#128279</a> clearPersistentRandom
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.clearPersistentRandom(key: string)
</code></pre></div></div>
<p>gen.clearPersistentRandom(key) –&gt; void
 Sets the value associated with the key in the
 persistentRandom table to nil.  This could either be for reuse of the key,
 or to prevent the key from staying in the state table indefinitely.</p>
<h3 id="getpersistentrandomtable">
  
  
    <a href="#getpersistentrandomtable">&#128279</a> getPersistentRandomTable
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.getPersistentRandomTable()
  -&gt; table&lt;string, number&gt;
</code></pre></div></div>
<p>gen.getPersistentRandomTable() –&gt; table
 Returns the persistentRandom table.</p>
<h3 id="newemptystack">
  
  
    <a href="#newemptystack">&#128279</a> newEmptyStack
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.newEmptyStack()
  -&gt; stack
</code></pre></div></div>
<p>Creates a stack with no values.</p>
<h3 id="newstack">
  
  
    <a href="#newstack">&#128279</a> newStack
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.newStack(table?: any)
  -&gt; stack
</code></pre></div></div>
<p>generates a new stack, with integer
values in the table pushed onto the stack
starting from the smallest integer value
(smallest value will be at the bottom of the stack).
All other keys (including non-integer keys) and values are ignored.</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">table</code> — Default is an empty table.</p>
<h3 id="isstack">
  
  
    <a href="#isstack">&#128279</a> isStack
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.isStack(item: any)
  -&gt; boolean
</code></pre></div></div>
<p>Returns <code class="language-plaintext highlighter-rouge">true</code> if the item is a stack (created by gen.newStack/newEmptyStack)
and <code class="language-plaintext highlighter-rouge">false</code> otherwise.</p>
<h2 id="custom-data-types-and-validation">
  
  
    <a href="#custom-data-types-and-validation">&#128279</a> Custom Data Types and Validation
  
  
</h2>
    

<p>The functions in this section can be used to check that functions 
have received valid data as arguments, or to create tables
which can only have values assigned to particular keys, and
only specific kinds of values.  These tools can aid development
by causing invalid data to be detected at its source rather than
when it actually breaks the program.<br />
These functions are built on a data structure called the <code class="language-plaintext highlighter-rouge">valueSpecification</code>.  It is a table with the following keys and values:<br /><br />[“nil”] = true or nil<br />If this key is true, the specified value can be nil.<br /><br />[“boolean”] = true, “true”, “false”, or nil<br />If this key is true (boolean value), the specified value can be a boolean.<br />If this key is “true” (string), then the specified value can be true, but not false.<br />If this key is “false” (string), then the specified value can be false, but not true.<br />If this key is nil, the specified value can’t be a boolean.<br /><br />[“function”] = true, string, or nil<br />if this key is true or string, the specified value can be a function.<br />If string, the string describes the function, e.g. <code class="language-plaintext highlighter-rouge">function(unit)--&gt;number</code>.  Value specification checks do not check if the function actually matches the description, only that it is a function.<br />If this key is nil, the specified value can’t be a function.<br /><br />[“number”] = true or nil or {minVal=number/nil, maxVal=number/nil, integer=true/nil}<br />If true, the specified value can be any number.  If nil, the specified value can’t be a number.<br />If table, any number must also be larger than the <code class="language-plaintext highlighter-rouge">minVal</code> (if specified) and smaller than the <code class="language-plaintext highlighter-rouge">maxVal</code> (if specified).  If the <code class="language-plaintext highlighter-rouge">integer</code> key is true, the value must also be an integer.<br /><br />[“string”] = true or {[validString] = truthy} or nil<br />If this key is true, any string is allowed.<br />If it is a table, any string value must be a key in that table, with a truthy (anything other than false/nil) associated value.<br />If nil, the value can’t be a string.<br /><br />[“table”]=string, true, nil, or {[1]=function(table)-&gt;true or string, [2]=string}<br />If the key is a string, any table is accepted, and the string describes the kind of table needed.<br />If true, any table is accepted, and a generated description will be ‘table’.<br />If the key is a table, the table’s value for <code class="language-plaintext highlighter-rouge">1</code> is a function, which returns true if specified value is an acceptable table, and a string describing the problem if it is not.  The value for <code class="language-plaintext highlighter-rouge">2</code> is a string describing the required table, for generated descriptions/errors.<br />If nil, the specified value can’t be a table.<br /><br />[“userdata”] = {[dataTypeName]=isDataTypeFn} or nil<br />The keys to this table are strings that describe acceptable userdata, and the values are functions which return true if the specified value matches the type, and false otherwise.<br />E.g.<br /><code class="language-plaintext highlighter-rouge">{["unitTypeObject"] = civ.isUnitType, ["cityObject"] = civ.isCity}</code><br />Allows unitTypeObjects and cityObjects, but not other kinds of userdata.</p>
<h3 id="valuesatisfiesspecification">
  
  
    <a href="#valuesatisfiesspecification">&#128279</a> valueSatisfiesSpecification
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.valueSatisfiesSpecification(value: any, valueSpecification: table)
  -&gt; boolean
</code></pre></div></div>
<p>Returns true if value satisfies the valueSpecification, false otherwise.</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">valueSpecification</code> — A valueSpecification is a table with the following keys and values:<br /><br />[“nil”] = true or nil<br />If this key is true, the specified value can be nil.<br /><br />[“boolean”] = true, “true”, “false”, or nil<br />If this key is true (boolean value), the specified value can be a boolean.<br />If this key is “true” (string), then the specified value can be true, but not false.<br />If this key is “false” (string), then the specified value can be false, but not true.<br />If this key is nil, the specified value can’t be a boolean.<br /><br />[“function”] = true, string, or nil<br />if this key is true or string, the specified value can be a function.<br />If string, the string describes the function, e.g. <code class="language-plaintext highlighter-rouge">function(unit)--&gt;number</code>.  Value specification checks do not check if the function actually matches the description, only that it is a function.<br />If this key is nil, the specified value can’t be a function.<br /><br />[“number”] = true or nil or {minVal=number/nil, maxVal=number/nil, integer=true/nil}<br />If true, the specified value can be any number.  If nil, the specified value can’t be a number.<br />If table, any number must also be larger than the <code class="language-plaintext highlighter-rouge">minVal</code> (if specified) and smaller than the <code class="language-plaintext highlighter-rouge">maxVal</code> (if specified).  If the <code class="language-plaintext highlighter-rouge">integer</code> key is true, the value must also be an integer.<br /><br />[“string”] = true or {[validString] = truthy} or nil<br />If this key is true, any string is allowed.<br />If it is a table, any string value must be a key in that table, with a truthy (anything other than false/nil) associated value.<br />If nil, the value can’t be a string.<br /><br />[“table”]=string, true, nil, or {[1]=function(table)-&gt;true or string, [2]=string}<br />If the key is a string, any table is accepted, and the string describes the kind of table needed.<br />If true, any table is accepted, and a generated description will be ‘table’.<br />If the key is a table, the table’s value for <code class="language-plaintext highlighter-rouge">1</code> is a function, which returns true if specified value is an acceptable table, and a string describing the problem if it is not.  The value for <code class="language-plaintext highlighter-rouge">2</code> is a string describing the required table, for generated descriptions/errors.<br />If nil, the specified value can’t be a table.<br /><br />[“userdata”] = {[dataTypeName]=isDataTypeFn} or nil<br />The keys to this table are strings that describe acceptable userdata, and the values are functions which return true if the specified value matches the type, and false otherwise.<br />E.g.<br /><code class="language-plaintext highlighter-rouge">{["unitTypeObject"] = civ.isUnitType, ["cityObject"] = civ.isCity}</code><br />Allows unitTypeObjects and cityObjects, but not other kinds of userdata.</p>
<h3 id="validatefunctionargument">
  
  
    <a href="#validatefunctionargument">&#128279</a> validateFunctionArgument
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.validateFunctionArgument(value: any, moduleName: string, functionName: string, argumentNumber: integer, argumentName: string, valueSpecification: table, extraInfo?: string)
</code></pre></div></div>
<p>This validates a function’s argument, and provides an error if a bad value is supplied.</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">value</code> — The argument passed to the function.</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">moduleName</code> — The name of the module the function is in (so generated errors are more informative).</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">functionName</code> — The name of the function this function is validating values for (so generated errors are more informative).</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">argumentNumber</code> — The argument which is being validated (so generated errors are more informative).</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">argumentName</code> — The name of the argument which is being validated (so generated errors are more informative).</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">extraInfo</code> — Any extra information that might help in debugging, should an error occur.</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">valueSpecification</code> — A valueSpecification is a table with the following keys and values:<br /><br />[“nil”] = true or nil<br />If this key is true, the specified value can be nil.<br /><br />[“boolean”] = true, “true”, “false”, or nil<br />If this key is true (boolean value), the specified value can be a boolean.<br />If this key is “true” (string), then the specified value can be true, but not false.<br />If this key is “false” (string), then the specified value can be false, but not true.<br />If this key is nil, the specified value can’t be a boolean.<br /><br />[“function”] = true, string, or nil<br />if this key is true or string, the specified value can be a function.<br />If string, the string describes the function, e.g. <code class="language-plaintext highlighter-rouge">function(unit)--&gt;number</code>.  Value specification checks do not check if the function actually matches the description, only that it is a function.<br />If this key is nil, the specified value can’t be a function.<br /><br />[“number”] = true or nil or {minVal=number/nil, maxVal=number/nil, integer=true/nil}<br />If true, the specified value can be any number.  If nil, the specified value can’t be a number.<br />If table, any number must also be larger than the <code class="language-plaintext highlighter-rouge">minVal</code> (if specified) and smaller than the <code class="language-plaintext highlighter-rouge">maxVal</code> (if specified).  If the <code class="language-plaintext highlighter-rouge">integer</code> key is true, the value must also be an integer.<br /><br />[“string”] = true or {[validString] = truthy} or nil<br />If this key is true, any string is allowed.<br />If it is a table, any string value must be a key in that table, with a truthy (anything other than false/nil) associated value.<br />If nil, the value can’t be a string.<br /><br />[“table”]=string, true, nil, or {[1]=function(table)-&gt;true or string, [2]=string}<br />If the key is a string, any table is accepted, and the string describes the kind of table needed.<br />If true, any table is accepted, and a generated description will be ‘table’.<br />If the key is a table, the table’s value for <code class="language-plaintext highlighter-rouge">1</code> is a function, which returns true if specified value is an acceptable table, and a string describing the problem if it is not.  The value for <code class="language-plaintext highlighter-rouge">2</code> is a string describing the required table, for generated descriptions/errors.<br />If nil, the specified value can’t be a table.<br /><br />[“userdata”] = {[dataTypeName]=isDataTypeFn} or nil<br />The keys to this table are strings that describe acceptable userdata, and the values are functions which return true if the specified value matches the type, and false otherwise.<br />E.g.<br /><code class="language-plaintext highlighter-rouge">{["unitTypeObject"] = civ.isUnitType, ["cityObject"] = civ.isCity}</code><br />Allows unitTypeObjects and cityObjects, but not other kinds of userdata.</p>
<h3 id="createdatatype">
  
  
    <a href="#createdatatype">&#128279</a> createDataType
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.createDataType(dataName: string, specificKeyTable: table&lt;any, table&gt;, generalKeyTable: table&lt;fun(possibleKey: any):boolean, table&gt;, defaultValueTable: table, fixedKeyTable: table&lt;any, true&gt;, aliasKeyTable?: fun(aliasKey: any):any|table&lt;any, any&gt;)
  -&gt; fun(table: table):&lt;newDataType&gt;
  2. fun(item: any):boolean
  3. table
</code></pre></div></div>
<p>Returns functions necessary to create a basic custom data type.  Such a data type
is a table, but uses a metatable to restrict the keys that are allowed to be used,
and the values that can be assigned to those keys.  This way, errors can be
generated when incorrect key-value pairs are assigned to the data type, rather
than when later code receives unexpected values.
<br />Several parameters are defined with “valueSpecification” tables.
A valueSpecification is a table with the following keys and values:<br /><br />[“nil”] = true or nil<br />If this key is true, the specified value can be nil.<br /><br />[“boolean”] = true, “true”, “false”, or nil<br />If this key is true (boolean value), the specified value can be a boolean.<br />If this key is “true” (string), then the specified value can be true, but not false.<br />If this key is “false” (string), then the specified value can be false, but not true.<br />If this key is nil, the specified value can’t be a boolean.<br /><br />[“function”] = true, string, or nil<br />if this key is true or string, the specified value can be a function.<br />If string, the string describes the function, e.g. <code class="language-plaintext highlighter-rouge">function(unit)--&gt;number</code>.  Value specification checks do not check if the function actually matches the description, only that it is a function.<br />If this key is nil, the specified value can’t be a function.<br /><br />[“number”] = true or nil or {minVal=number/nil, maxVal=number/nil, integer=true/nil}<br />If true, the specified value can be any number.  If nil, the specified value can’t be a number.<br />If table, any number must also be larger than the <code class="language-plaintext highlighter-rouge">minVal</code> (if specified) and smaller than the <code class="language-plaintext highlighter-rouge">maxVal</code> (if specified).  If the <code class="language-plaintext highlighter-rouge">integer</code> key is true, the value must also be an integer.<br /><br />[“string”] = true or {[validString] = truthy} or nil<br />If this key is true, any string is allowed.<br />If it is a table, any string value must be a key in that table, with a truthy (anything other than false/nil) associated value.<br />If nil, the value can’t be a string.<br /><br />[“table”]=string, true, nil, or {[1]=function(table)-&gt;true or string, [2]=string}<br />If the key is a string, any table is accepted, and the string describes the kind of table needed.<br />If true, any table is accepted, and a generated description will be ‘table’.<br />If the key is a table, the table’s value for <code class="language-plaintext highlighter-rouge">1</code> is a function, which returns true if specified value is an acceptable table, and a string describing the problem if it is not.  The value for <code class="language-plaintext highlighter-rouge">2</code> is a string describing the required table, for generated descriptions/errors.<br />If nil, the specified value can’t be a table.<br /><br />[“userdata”] = {[dataTypeName]=isDataTypeFn} or nil<br />The keys to this table are strings that describe acceptable userdata, and the values are functions which return true if the specified value matches the type, and false otherwise.<br />E.g.<br /><code class="language-plaintext highlighter-rouge">{["unitTypeObject"] = civ.isUnitType, ["cityObject"] = civ.isCity}</code><br />Allows unitTypeObjects and cityObjects, but not other kinds of userdata.</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">dataName</code> — <br />string<br /><br /> The name of the new data type.</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">specificKeyTable</code> — <br />specificKeyTable={[key]=valueSpecification}<br /><br />Each <code class="language-plaintext highlighter-rouge">key</code> is a key that is allowed in the <code class="language-plaintext highlighter-rouge">dataName</code> data type, and values assigned to the <code class="language-plaintext highlighter-rouge">key</code> must satisfy the corresponding <code class="language-plaintext highlighter-rouge">valueSpecification</code>.</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">generalKeyTable</code> — <br />generalKeyTable = {[function(possibleKey)–&gt;boolean] = valueSpecification} <br /><br /> This table allows for keys of a general form to be used in the data type.  For a <code class="language-plaintext highlighter-rouge">possibleKey</code>, if any <code class="language-plaintext highlighter-rouge">function(possibleKey)</code> returns true, a value can be assigned to <code class="language-plaintext highlighter-rouge">possibleKey</code> as long as it satisfies the valueSpecification.</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">defaultValueTable</code> — <br />defaultValueTable = {[key]=value}<br /><br />When a new <code class="language-plaintext highlighter-rouge">dataName</code> is created, if <code class="language-plaintext highlighter-rouge">key</code> is not specified, assign the corresponding <code class="language-plaintext highlighter-rouge">value</code> to it.</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">fixedKeyTable</code> — <br />fixedKeyTable = {[key]=true}<br /><br /> If <code class="language-plaintext highlighter-rouge">key</code> is in this table, the new <code class="language-plaintext highlighter-rouge">dataName</code> can’t change the value of the key after it is created.</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">aliasKeyTable</code> — <br />aliasKeyTable = {[aliasKey] = key} or<br />fun(aliasKey)-&gt;key<br /><br />If table, and the aliasKey is a key in the aliasKeyTable, then the associated key is used for indexing or assigning instead.<br />If function, all keys have the function applied to them, and the returned value is used as a key instead.</p>

<p>@<em>return</em> — Creates a new instance of the <code class="language-plaintext highlighter-rouge">dataName</code> data type, assigning to it all the table key-value pairs in the <code class="language-plaintext highlighter-rouge">table</code>.<br />Generates an error if any key-value pairs are invalid.</p>

<p>@<em>return</em> — Checks if <code class="language-plaintext highlighter-rouge">item</code> is an instance of the <code class="language-plaintext highlighter-rouge">dataName</code> data type, returns true if it is, and false otherwise.</p>

<p>@<em>return</em> — The <a href="https://www.tutorialspoint.com/lua/lua_metatables.htm">metatable</a> for the <code class="language-plaintext highlighter-rouge">dataName</code> data type.  This is available in case you want to make more customizations to the data type.</p>
<h3 id="valuespecforcustomdata">
  
  
    <a href="#valuespecforcustomdata">&#128279</a> valueSpecForCustomData
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.valueSpecForCustomData(isItemFn: fun(item: any):boolean, failureDescription: string, itemDescription: string)
  -&gt; table
</code></pre></div></div>
<p>Creates a value specification for custom data created by <code class="language-plaintext highlighter-rouge">gen.createDataType</code> (or any other data type that uses a table as the base).</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">isItemFn</code> — A function that returns true if the item is the appropriate data type, and false otherwise.</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">failureDescription</code> — A message explaining that the item is not the appropriate data type.</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">itemDescription</code> — A description of the data type.</p>
<h3 id="describeallowablevalues">
  
  
    <a href="#describeallowablevalues">&#128279</a> describeAllowableValues
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.describeAllowableValues(valueSpecification: table)
  -&gt; string
</code></pre></div></div>
<p>Takes a valueSpecification, and returns a string describing the valid values.</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">valueSpecification</code> — A valueSpecification is a table with the following keys and values:<br /><br />[“nil”] = true or nil<br />If this key is true, the specified value can be nil.<br /><br />[“boolean”] = true, “true”, “false”, or nil<br />If this key is true (boolean value), the specified value can be a boolean.<br />If this key is “true” (string), then the specified value can be true, but not false.<br />If this key is “false” (string), then the specified value can be false, but not true.<br />If this key is nil, the specified value can’t be a boolean.<br /><br />[“function”] = true, string, or nil<br />if this key is true or string, the specified value can be a function.<br />If string, the string describes the function, e.g. <code class="language-plaintext highlighter-rouge">function(unit)--&gt;number</code>.  Value specification checks do not check if the function actually matches the description, only that it is a function.<br />If this key is nil, the specified value can’t be a function.<br /><br />[“number”] = true or nil or {minVal=number/nil, maxVal=number/nil, integer=true/nil}<br />If true, the specified value can be any number.  If nil, the specified value can’t be a number.<br />If table, any number must also be larger than the <code class="language-plaintext highlighter-rouge">minVal</code> (if specified) and smaller than the <code class="language-plaintext highlighter-rouge">maxVal</code> (if specified).  If the <code class="language-plaintext highlighter-rouge">integer</code> key is true, the value must also be an integer.<br /><br />[“string”] = true or {[validString] = truthy} or nil<br />If this key is true, any string is allowed.<br />If it is a table, any string value must be a key in that table, with a truthy (anything other than false/nil) associated value.<br />If nil, the value can’t be a string.<br /><br />[“table”]=string, true, nil, or {[1]=function(table)-&gt;true or string, [2]=string}<br />If the key is a string, any table is accepted, and the string describes the kind of table needed.<br />If true, any table is accepted, and a generated description will be ‘table’.<br />If the key is a table, the table’s value for <code class="language-plaintext highlighter-rouge">1</code> is a function, which returns true if specified value is an acceptable table, and a string describing the problem if it is not.  The value for <code class="language-plaintext highlighter-rouge">2</code> is a string describing the required table, for generated descriptions/errors.<br />If nil, the specified value can’t be a table.<br /><br />[“userdata”] = {[dataTypeName]=isDataTypeFn} or nil<br />The keys to this table are strings that describe acceptable userdata, and the values are functions which return true if the specified value matches the type, and false otherwise.<br />E.g.<br /><code class="language-plaintext highlighter-rouge">{["unitTypeObject"] = civ.isUnitType, ["cityObject"] = civ.isCity}</code><br />Allows unitTypeObjects and cityObjects, but not other kinds of userdata.</p>
<h3 id="validatetablevalue">
  
  
    <a href="#validatetablevalue">&#128279</a> validateTableValue
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.validateTableValue(tableDescription: string, key: any, value: any, valueSpec: table, extraInfo?: string)
</code></pre></div></div>
<p>Generates an error if the <code class="language-plaintext highlighter-rouge">value</code> doesn’t satisfy the <code class="language-plaintext highlighter-rouge">valueSpec</code>.  This is a “building block” function, so you probably don’t want to use it.</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">tableDescription</code> — A description of the table.</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">key</code> — The key being evaluated.</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">value</code> — The value being evaluated.</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">extraInfo</code> — Extra information that might be useful when debugging.</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">valueSpec</code> — A valueSpecification is a table with the following keys and values:<br /><br />[“nil”] = true or nil<br />If this key is true, the specified value can be nil.<br /><br />[“boolean”] = true, “true”, “false”, or nil<br />If this key is true (boolean value), the specified value can be a boolean.<br />If this key is “true” (string), then the specified value can be true, but not false.<br />If this key is “false” (string), then the specified value can be false, but not true.<br />If this key is nil, the specified value can’t be a boolean.<br /><br />[“function”] = true, string, or nil<br />if this key is true or string, the specified value can be a function.<br />If string, the string describes the function, e.g. <code class="language-plaintext highlighter-rouge">function(unit)--&gt;number</code>.  Value specification checks do not check if the function actually matches the description, only that it is a function.<br />If this key is nil, the specified value can’t be a function.<br /><br />[“number”] = true or nil or {minVal=number/nil, maxVal=number/nil, integer=true/nil}<br />If true, the specified value can be any number.  If nil, the specified value can’t be a number.<br />If table, any number must also be larger than the <code class="language-plaintext highlighter-rouge">minVal</code> (if specified) and smaller than the <code class="language-plaintext highlighter-rouge">maxVal</code> (if specified).  If the <code class="language-plaintext highlighter-rouge">integer</code> key is true, the value must also be an integer.<br /><br />[“string”] = true or {[validString] = truthy} or nil<br />If this key is true, any string is allowed.<br />If it is a table, any string value must be a key in that table, with a truthy (anything other than false/nil) associated value.<br />If nil, the value can’t be a string.<br /><br />[“table”]=string, true, nil, or {[1]=function(table)-&gt;true or string, [2]=string}<br />If the key is a string, any table is accepted, and the string describes the kind of table needed.<br />If true, any table is accepted, and a generated description will be ‘table’.<br />If the key is a table, the table’s value for <code class="language-plaintext highlighter-rouge">1</code> is a function, which returns true if specified value is an acceptable table, and a string describing the problem if it is not.  The value for <code class="language-plaintext highlighter-rouge">2</code> is a string describing the required table, for generated descriptions/errors.<br />If nil, the specified value can’t be a table.<br /><br />[“userdata”] = {[dataTypeName]=isDataTypeFn} or nil<br />The keys to this table are strings that describe acceptable userdata, and the values are functions which return true if the specified value matches the type, and false otherwise.<br />E.g.<br /><code class="language-plaintext highlighter-rouge">{["unitTypeObject"] = civ.isUnitType, ["cityObject"] = civ.isCity}</code><br />Allows unitTypeObjects and cityObjects, but not other kinds of userdata.</p>
<h3 id="tableofvaluespecification">
  
  
    <a href="#tableofvaluespecification">&#128279</a> tableOfValueSpecification
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.tableOfValueSpecification(valueSpecification: table)
  -&gt; valueSpecification: table
</code></pre></div></div>
<p>Takes a valueSpecification, and returns a valueSpecification where
  the valid data is a table where all values are of the
  submitted valueSpecification.</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">valueSpecification</code> — A valueSpecification is a table with the following keys and values:<br /><br />[“nil”] = true or nil<br />If this key is true, the specified value can be nil.<br /><br />[“boolean”] = true, “true”, “false”, or nil<br />If this key is true (boolean value), the specified value can be a boolean.<br />If this key is “true” (string), then the specified value can be true, but not false.<br />If this key is “false” (string), then the specified value can be false, but not true.<br />If this key is nil, the specified value can’t be a boolean.<br /><br />[“function”] = true, string, or nil<br />if this key is true or string, the specified value can be a function.<br />If string, the string describes the function, e.g. <code class="language-plaintext highlighter-rouge">function(unit)--&gt;number</code>.  Value specification checks do not check if the function actually matches the description, only that it is a function.<br />If this key is nil, the specified value can’t be a function.<br /><br />[“number”] = true or nil or {minVal=number/nil, maxVal=number/nil, integer=true/nil}<br />If true, the specified value can be any number.  If nil, the specified value can’t be a number.<br />If table, any number must also be larger than the <code class="language-plaintext highlighter-rouge">minVal</code> (if specified) and smaller than the <code class="language-plaintext highlighter-rouge">maxVal</code> (if specified).  If the <code class="language-plaintext highlighter-rouge">integer</code> key is true, the value must also be an integer.<br /><br />[“string”] = true or {[validString] = truthy} or nil<br />If this key is true, any string is allowed.<br />If it is a table, any string value must be a key in that table, with a truthy (anything other than false/nil) associated value.<br />If nil, the value can’t be a string.<br /><br />[“table”]=string, true, nil, or {[1]=function(table)-&gt;true or string, [2]=string}<br />If the key is a string, any table is accepted, and the string describes the kind of table needed.<br />If true, any table is accepted, and a generated description will be ‘table’.<br />If the key is a table, the table’s value for <code class="language-plaintext highlighter-rouge">1</code> is a function, which returns true if specified value is an acceptable table, and a string describing the problem if it is not.  The value for <code class="language-plaintext highlighter-rouge">2</code> is a string describing the required table, for generated descriptions/errors.<br />If nil, the specified value can’t be a table.<br /><br />[“userdata”] = {[dataTypeName]=isDataTypeFn} or nil<br />The keys to this table are strings that describe acceptable userdata, and the values are functions which return true if the specified value matches the type, and false otherwise.<br />E.g.<br /><code class="language-plaintext highlighter-rouge">{["unitTypeObject"] = civ.isUnitType, ["cityObject"] = civ.isCity}</code><br />Allows unitTypeObjects and cityObjects, but not other kinds of userdata.</p>
<h3 id="valuespecificationortableofvaluespecification">
  
  
    <a href="#valuespecificationortableofvaluespecification">&#128279</a> valueSpecificationOrTableOfValueSpecification
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.valueSpecificationOrTableOfValueSpecification(valueSpecification: table)
  -&gt; newValueSpecification: table
</code></pre></div></div>
<p>Takes a valueSpecification, and returns a newValueSpecification.
  The newValueSpecification allow both the original valueSpecification
  and tables where values are the original valueSpecification.<br /><br />
  Limiation: the valueSpecification can’t have a any tables as valid value types.  If you need that, consider <code class="language-plaintext highlighter-rouge">gen.tableOfValueSpecification</code> or writing a custom valueSpecification.</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">valueSpecification</code> — A valueSpecification is a table with the following keys and values:<br /><br />[“nil”] = true or nil<br />If this key is true, the specified value can be nil.<br /><br />[“boolean”] = true, “true”, “false”, or nil<br />If this key is true (boolean value), the specified value can be a boolean.<br />If this key is “true” (string), then the specified value can be true, but not false.<br />If this key is “false” (string), then the specified value can be false, but not true.<br />If this key is nil, the specified value can’t be a boolean.<br /><br />[“function”] = true, string, or nil<br />if this key is true or string, the specified value can be a function.<br />If string, the string describes the function, e.g. <code class="language-plaintext highlighter-rouge">function(unit)--&gt;number</code>.  Value specification checks do not check if the function actually matches the description, only that it is a function.<br />If this key is nil, the specified value can’t be a function.<br /><br />[“number”] = true or nil or {minVal=number/nil, maxVal=number/nil, integer=true/nil}<br />If true, the specified value can be any number.  If nil, the specified value can’t be a number.<br />If table, any number must also be larger than the <code class="language-plaintext highlighter-rouge">minVal</code> (if specified) and smaller than the <code class="language-plaintext highlighter-rouge">maxVal</code> (if specified).  If the <code class="language-plaintext highlighter-rouge">integer</code> key is true, the value must also be an integer.<br /><br />[“string”] = true or {[validString] = truthy} or nil<br />If this key is true, any string is allowed.<br />If it is a table, any string value must be a key in that table, with a truthy (anything other than false/nil) associated value.<br />If nil, the value can’t be a string.<br /><br />[“table”]=string, true, nil, or {[1]=function(table)-&gt;true or string, [2]=string}<br />If the key is a string, any table is accepted, and the string describes the kind of table needed.<br />If true, any table is accepted, and a generated description will be ‘table’.<br />If the key is a table, the table’s value for <code class="language-plaintext highlighter-rouge">1</code> is a function, which returns true if specified value is an acceptable table, and a string describing the problem if it is not.  The value for <code class="language-plaintext highlighter-rouge">2</code> is a string describing the required table, for generated descriptions/errors.<br />If nil, the specified value can’t be a table.<br /><br />[“userdata”] = {[dataTypeName]=isDataTypeFn} or nil<br />The keys to this table are strings that describe acceptable userdata, and the values are functions which return true if the specified value matches the type, and false otherwise.<br />E.g.<br /><code class="language-plaintext highlighter-rouge">{["unitTypeObject"] = civ.isUnitType, ["cityObject"] = civ.isCity}</code><br />Allows unitTypeObjects and cityObjects, but not other kinds of userdata.</p>
<h3 id="validatevaluespecificationkeys">
  
  
    <a href="#validatevaluespecificationkeys">&#128279</a> validateValueSpecificationKeys
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.validateValueSpecificationKeys(validDataInfo: any)
</code></pre></div></div>
<p>Value Specification
  valueSpecification = {
      [“nil”] = true or nil
          if this key is true, the data can be nil
      [“boolean”] = true, “true”, “false”, or nil
          if this key is true, the data can be a boolean
          if this key is “true”, only true is allowed (false is not)
          if this key is “false”, only false is allowed (true is not)
      [“function”] = true, string or nil
          if this key is true or string, the data can be a function
          the string describes the function e.g. function(unit) –&gt; number
          (the function is not tested)
      [“number”] = {minVal=numberNil, maxVal = numberNil, integer=trueNil} or true
          if this key is true, the data can be a number
          the keys in the table specify minimum and maximum values, and whether
          the number must be an integer
          note: math.huge and -math.huge are considered both numbers and integer here
      [“string”] = true or {[validString] = truthy}
          if true, the data can be any string
          if table, the data must be one of the keys in the table
      [“table”] = string or true or {[1]=function(table)–&gt;true or string,[2]=string}
          if string, any table is accepted, and the string describes the kind of table needed
          if true, any table is accepted, and the description is a table
          if table, [1] is a function returns that true if the table is accepted,
          and the problem with the table if it is not
          [2] is the description of the table required
      [“userdata”] = {[dataTypeName]=isDataTypeFn}
          this table is a table of each of the allowable data types, with the
          key being the name, and the function checking if it is that type
          being the value
  }</p>
<h2 id="non-standard-id-functions">
  
  
    <a href="#non-standard-id-functions">&#128279</a> Non-Standard ID Functions
  
  
</h2>
    

<p>These functions map Lua objects without an <code class="language-plaintext highlighter-rouge">id</code> field to suitable integers, or provide a way to go from the integer back to the original object.</p>
<h3 id="getbaseterrainid">
  
  
    <a href="#getbaseterrainid">&#128279</a> getBaseTerrainID
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.getBaseTerrainID(baseTerrain: baseTerrainObject)
  -&gt; integer
</code></pre></div></div>
<p>Returns an id number for the <code class="language-plaintext highlighter-rouge">baseTerrain</code> object.  This is different from <code class="language-plaintext highlighter-rouge">baseTerrain.type</code>, since <code class="language-plaintext highlighter-rouge">baseTerrain.type</code> is 0-15 for all maps, while this id changes for larger maps.</p>
<h3 id="getbaseterrainfromid">
  
  
    <a href="#getbaseterrainfromid">&#128279</a> getBaseTerrainFromID
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.getBaseTerrainFromID(id: integer)
  -&gt; baseTerrainObject|nil
</code></pre></div></div>
<p>Given an baseTerrain id, returns the corresponding baseTerrain object.</p>
<h3 id="getterrainid">
  
  
    <a href="#getterrainid">&#128279</a> getTerrainID
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.getTerrainID(terrain: terrainObject)
  -&gt; integer
</code></pre></div></div>
<p>Returns an id number for the <code class="language-plaintext highlighter-rouge">terrain</code> object.  This is different from <code class="language-plaintext highlighter-rouge">terrain.type</code>, since <code class="language-plaintext highlighter-rouge">terrain.type</code> is 0-15, based on the underlying baseTerrain type.  This id number is different for each terrain type on each map.</p>
<h3 id="getterrainfromid">
  
  
    <a href="#getterrainfromid">&#128279</a> getTerrainFromID
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.getTerrainFromID(id: integer)
  -&gt; terrainObject|nil
</code></pre></div></div>
<p>Returns a terrainObject from the corresponding id number created by gen.getTerrainID.</p>
<h3 id="gettileid">
  
  
    <a href="#gettileid">&#128279</a> getTileID
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.getTileID(tileORX: integer|table|tileObject, y?: integer, z?: integer)
  -&gt; nil
</code></pre></div></div>
<p>Returns a single-value numeric key that uniquely identifies a tile on any map.
by Knighttime, modified by Prof. Garfield</p>
<h3 id="gettilefromid">
  
  
    <a href="#gettilefromid">&#128279</a> getTileFromID
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.getTileFromID(tileID: integer)
  -&gt; tileObject|nil
</code></pre></div></div>
<p>Takes an integer generated by <code class="language-plaintext highlighter-rouge">gen.getTileID</code>, and returns the corresponding tile (or nil, if the key doesn’t correspond to a real tile).</p>
<h2 id="marker-functions">
  
  
    <a href="#marker-functions">&#128279</a> Marker Functions
  
  
</h2>
    

<p>Placing a marker on a tile changes the visible improvements for that tile, so that the tribe can now see the <code class="language-plaintext highlighter-rouge">markerOption</code> (“irrigation”, “pollution”, etc) on the tile.  However, information about the marker is stored in the state table (along with the originally visible improvements), so that the marker can be displayed again if it stops being visible, and removed if that is desired.</p>

<p>The valid options for markers are: “irrigation”, “mine”, “farmland”, “road”, “railroad”, “fortress”, “airbase”, “pollution”, “transporter”.  (Note: although the code works for using transporter markers, they may not be visible in practice.)</p>
<h3 id="placemarker">
  
  
    <a href="#placemarker">&#128279</a> placeMarker
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.placeMarker(tile: tileObject, tribe: tribeObject, markerOption: markerOptions)
</code></pre></div></div>
<p>Places a “marker” on <code class="language-plaintext highlighter-rouge">tile</code> for <code class="language-plaintext highlighter-rouge">tribe</code>.</p>

<p>Placing a marker on a tile changes the visible improvements for that tile, so that the tribe can now see the <code class="language-plaintext highlighter-rouge">markerOption</code> (“irrigation”, “pollution”, etc.– see below for the full list) on the tile.  However, information about the marker is stored in the state table (along with the originally visible improvements), so that the marker can be displayed again if it stops being visible.</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">tile</code> — The tile on which a “marker” will be placed.</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">tribe</code> — The tribe for whom the “marker” is visible.</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">markerOption</code> — Valid marker options are “irrigation”, “mine”, “farmland”, “road”, “railroad”, “fortress”, “airbase”, “pollution”, “transporter”.</p>
<h3 id="removemarker">
  
  
    <a href="#removemarker">&#128279</a> removeMarker
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.removeMarker(tile: tileObject, tribe: tribeObject, markerOption: markerOptions)
</code></pre></div></div>
<p>Removes the <code class="language-plaintext highlighter-rouge">markerOption</code> marker for <code class="language-plaintext highlighter-rouge">tribe</code> from <code class="language-plaintext highlighter-rouge">tile</code>, if it exist.</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">tile</code> — The tile on which a “marker” will be removed.</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">tribe</code> — The tribe for whom the “marker” is no longer visible.</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">markerOption</code> — Valid marker options are “irrigation”, “mine”, “farmland”, “road”, “railroad”, “fortress”, “airbase”, “pollution”, “transporter”.</p>
<h3 id="maintaintilemarkertable">
  
  
    <a href="#maintaintilemarkertable">&#128279</a> maintainTileMarkerTable
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.maintainTileMarkerTable()
</code></pre></div></div>
<p>Checks the marker table for any marker data that can be removed
 and remove it.</p>
<h3 id="removeallmarkers">
  
  
    <a href="#removeallmarkers">&#128279</a> removeAllMarkers
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.removeAllMarkers(tribe: tribeObject|nil, markerType: markerOptions|nil)
</code></pre></div></div>
<p>Removes all markers of <code class="language-plaintext highlighter-rouge">markerType</code> for tribe.
 If tribe not specified, removes all markerType markers for all tribes.
 If markerType not specified, removes all markers for tribe.
 If neither specified, removes all markers for all tribes.</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">markerType</code> — Valid marker options are “irrigation”, “mine”, “farmland”, “road”, “railroad”, “fortress”, “airbase”, “pollution”, “transporter”.</p>
<h3 id="removemarkersfromtile">
  
  
    <a href="#removemarkersfromtile">&#128279</a> removeMarkersFromTile
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.removeMarkersFromTile(tile: tileObject, tribe?: tribeObject)
</code></pre></div></div>
<p>Removes all markers on tile for the tribe, if tribe is omitted, removes markers for all tribes.</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">tile</code> — The tile for which all markers will be removed.</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">tribe</code> — The tribe for which the markers will be removed.  If nil, markers for all tribes are removed.</p>
<h3 id="showallmarkersontile">
  
  
    <a href="#showallmarkersontile">&#128279</a> showAllMarkersOnTile
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.showAllMarkersOnTile(tile: tileObject, topMarkerType: markerOptions|nil, secondMarkerType: markerOptions|nil)
</code></pre></div></div>
<p>Reapplies the charting functions for all markers
 on the tile for all players.  If topMarkerType isnt
 nil, that marker type is applied again last, in case
 there are conflicting markers.
 The secondMarkerType is applied just before the top marker type.</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">topMarkerType</code> — Valid marker options are “irrigation”, “mine”, “farmland”, “road”, “railroad”, “fortress”, “airbase”, “pollution”, “transporter”.</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">secondMarkerType</code> — Valid marker options are “irrigation”, “mine”, “farmland”, “road”, “railroad”, “fortress”, “airbase”, “pollution”, “transporter”.</p>
<h3 id="showallmarkers">
  
  
    <a href="#showallmarkers">&#128279</a> showAllMarkers
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.showAllMarkers(topMarkerType: markerOptions|nil, secondMarkerType: markerOptions|nil)
</code></pre></div></div>
<p>Reapplies the charting functions for all markers
 on all tiles for all players.  If topMarkerType isn’t nil,
 that marker type is applied last again, in case there
 are conflicting markers.
 The secondMarkerType is applied just before the top marker type.</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">topMarkerType</code> — Valid marker options are “irrigation”, “mine”, “farmland”, “road”, “railroad”, “fortress”, “airbase”, “pollution”, “transporter”.</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">secondMarkerType</code> — Valid marker options are “irrigation”, “mine”, “farmland”, “road”, “railroad”, “fortress”, “airbase”, “pollution”, “transporter”.</p>
<h3 id="hasmarker">
  
  
    <a href="#hasmarker">&#128279</a> hasMarker
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.hasMarker(tile: tileObject, tribe: tribeObject, markerType: markerOptions)
  -&gt; boolean
</code></pre></div></div>
<p>Returns true if <code class="language-plaintext highlighter-rouge">tile</code> has a marker of <code class="language-plaintext highlighter-rouge">markerType</code> for <code class="language-plaintext highlighter-rouge">tribe</code>.</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">markerType</code> — Valid marker options are “irrigation”, “mine”, “farmland”, “road”, “railroad”, “fortress”, “airbase”, “pollution”, “transporter”.</p>
<h3 id="ismarkervisible">
  
  
    <a href="#ismarkervisible">&#128279</a> isMarkerVisible
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.isMarkerVisible(tile: tileObject, tribe: tribeObject, markerType: markerOptions)
  -&gt; false
</code></pre></div></div>
<p>Returns true if the <code class="language-plaintext highlighter-rouge">tile</code> has the <code class="language-plaintext highlighter-rouge">markerType</code> and the <code class="language-plaintext highlighter-rouge">markerType</code> is charted, false otherwise.</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">markerType</code> — Valid marker options are “irrigation”, “mine”, “farmland”, “road”, “railroad”, “fortress”, “airbase”, “pollution”, “transporter”.</p>
<h3 id="hidemarker">
  
  
    <a href="#hidemarker">&#128279</a> hideMarker
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.hideMarker(tile: tileObject, tribe: tribeObject, markerType: markerOptions)
</code></pre></div></div>
<p>Uncharts the <code class="language-plaintext highlighter-rouge">markerType</code> marker for the <code class="language-plaintext highlighter-rouge">tribe</code>, but does not remove the marker.
 Does nothing if the tribe doesn’t have that marker
 or if the marker is already hidden.</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">markerType</code> — Valid marker options are “irrigation”, “mine”, “farmland”, “road”, “railroad”, “fortress”, “airbase”, “pollution”, “transporter”.</p>
<h3 id="hideallmarkers">
  
  
    <a href="#hideallmarkers">&#128279</a> hideAllMarkers
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.hideAllMarkers(tribeOrNil: tribeObject|nil, markerTypeOrNil: markerOptions|nil)
</code></pre></div></div>
<p>gen.hideAllMarkers(tribeOrNil,markerTypeOrNil)
 Hides all markers of the given type for that tribe.
 If tribe not specified, hides all markers of given type for
 all tribes.
 If markerType not specified, hides markers of all types.
comment</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">markerTypeOrNil</code> — Valid marker options are “irrigation”, “mine”, “farmland”, “road”, “railroad”, “fortress”, “airbase”, “pollution”, “transporter”.</p>
<h3 id="hideallmarkersontile">
  
  
    <a href="#hideallmarkersontile">&#128279</a> hideAllMarkersOnTile
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.hideAllMarkersOnTile(tile: tileObject, tribe: tribeObject)
</code></pre></div></div>
<p>Hides all markers on a given tile for the given tribe.</p>
<h3 id="showmarker">
  
  
    <a href="#showmarker">&#128279</a> showMarker
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.showMarker(tile: tileObject, tribe: tribeObject, markerType: markerOptions)
</code></pre></div></div>
<p>Shows the <code class="language-plaintext highlighter-rouge">markerType</code> for the <code class="language-plaintext highlighter-rouge">tribe</code> on the <code class="language-plaintext highlighter-rouge">tile</code>, if the marker is on the <code class="language-plaintext highlighter-rouge">tile</code>.</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">markerType</code> — Valid marker options are “irrigation”, “mine”, “farmland”, “road”, “railroad”, “fortress”, “airbase”, “pollution”, “transporter”.</p>
<h3 id="showmarkeronalltiles">
  
  
    <a href="#showmarkeronalltiles">&#128279</a> showMarkerOnAllTiles
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.showMarkerOnAllTiles(tribe: tribeObject, markerType: markerOptions)
</code></pre></div></div>
<p>Shows the <code class="language-plaintext highlighter-rouge">markerType</code> to <code class="language-plaintext highlighter-rouge">tribe</code> on all tiles where it exists.</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">markerType</code> — Valid marker options are “irrigation”, “mine”, “farmland”, “road”, “railroad”, “fortress”, “airbase”, “pollution”, “transporter”.</p>
<h2 id="item-weight-functions">
  
  
    <a href="#item-weight-functions">&#128279</a> Item Weight Functions
  
  
</h2>
    

<p>These functions provide a way to assign “weights” to items, based on a standard set
of criteria. Choosing item(s) with large (or small) weights can be a convenient way
for a program to choose between different options.</p>
<h3 id="calculateweight">
  
  
    <a href="#calculateweight">&#128279</a> calculateWeight
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.calculateWeight(item: &lt;weightItem&gt;, weightTable: table&lt;fun(item: &lt;weightItem&gt;, extraArgument: &lt;extraArg&gt;):boolean, boolean|number|fun(item: &lt;weightItem&gt;, extraArgument: &lt;extraArg&gt;):number|false&gt;, extraArgument?: &lt;extraArg&gt;)
  -&gt; boolean|number
</code></pre></div></div>
<p>This function calculates the “weight” of the <code class="language-plaintext highlighter-rouge">item</code>, taking into account the <code class="language-plaintext highlighter-rouge">extraArgument</code>, and uses the <code class="language-plaintext highlighter-rouge">weightTable</code>.  Calculating weights can be a simple way to choose between various options (with a return of <code class="language-plaintext highlighter-rouge">false</code> meaning not to choose this option).</p>

<p>In practice, you will probably not use this function itself.  There are several functions that use this function to make choices:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>gen.getExtremeWeights
gen.getBiggestWeights
gen.getSmallestWeights
</code></pre></div></div>

<p>weightTable has functions as keys, and numbers or false as values</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>{[keyFunc(item,extraArgument)-&gt;boolean] = number or boolean or string or function(item,extraArgument) -&gt; number\\|false}

for each key in the weight table, apply keyFunc to the item and extraArgument

if keyFunc(item,extraArgument) then
    if the value is a number, add the number to the weight
    if the value is a string add item[value] to the weight
    if the value is a function, add value(item,extraArgument) to the weight
    if the value is false, return 'false' as the weight
    if the value is true, do nothing
else
    if the value is a number, do nothing
    if the value is false, do nothing
    if the value is a string, do nothing
    if the value is true, return 'false' as the weight

That is, false means that keyFunc must not apply to the item
while true means that keyFunc must apply to the item

default weight is 0
</code></pre></div></div>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">extraArgument</code> — Default is nil.</p>

<p>@<em>return</em> — If number, the item has this weight.  False means the item was not given a weight.</p>
<h3 id="getextremeweights">
  
  
    <a href="#getextremeweights">&#128279</a> getExtremeWeights
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.getExtremeWeights(listOrIterator: table|iterator, weightTableOrWeightFunction: table|fun(item: &lt;itemToWeigh&gt;, extraArgument: &lt;extraArg&gt;):number|false, getTopX: integer|nil, changeOrder: fun(weight1: number|false|nil, weight2: number|false):boolean, functionName: string, extraArgument: &lt;extraArg&gt;)
  -&gt; &lt;itemToWeigh&gt;|table&lt;integer, &lt;itemToWeigh&gt;&gt;
  2. number|table&lt;integer, number&gt;
</code></pre></div></div>
<p>This function is wrapped to construct <code class="language-plaintext highlighter-rouge">gen.getBiggestWeight</code> and <code class="language-plaintext highlighter-rouge">gen.getSmallestWeight</code>.  You probably want to use one of them.</p>

<p>listOrIterator
    if iterator, returns the items for consideration
    if table, each item is a value in the table, and the table consists only of those values
weightTableOrWeightFunction
    if weightTable, use gen.calculateWeight(item,weightTable,extraArgument) as the weight function
    a weightFunction(item,extraArgument) must return either a number or false.  When false is returned,
    the item is not considered at all
getTopX
    if absent, the item with the largest weight is returned, or nil if no valid item is found
    if integer, a table with that number of items is returned, with index 1 associated with the
    item of the largest weight, 2 the next highest weight and so on.  If there are fewer valid
    items, the corresponding values are nil
changeOrder function
    if changeOrder(weight1,weight2) is true,
    weight2 should be before weight1
    changeOrder(nil,weight2) should always be true
functionName string
    name of the function being created (since this is designed to be wrapped by another function), for error purposes.</p>

<p>@<em>return</em> — best item, or table of the best items, starting at 1 with the best item.</p>

<p>@<em>return</em> — Weight of best item, or table of weights of the best items, starting at 1 with the best weight</p>
<h3 id="getbiggestweights">
  
  
    <a href="#getbiggestweights">&#128279</a> getBiggestWeights
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.getBiggestWeights(listOrIterator: iterator|table&lt;any, &lt;itemToWeigh&gt;&gt;, weightTableOrWeightFunction: table|fun(item: &lt;itemToWeigh&gt;, extraArgument: &lt;extraArg&gt;):number|false, getTopX: integer|nil, extraArgument: &lt;extraArg&gt;|nil)
  -&gt; &lt;itemToWeigh&gt;|table&lt;integer, &lt;itemToWeigh&gt;&gt;
  2. number|table&lt;integer, number&gt;
</code></pre></div></div>
<p>Finds the <code class="language-plaintext highlighter-rouge">getTopX</code> number items in <code class="language-plaintext highlighter-rouge">listOrIterator</code> with the highest weights.<br />
If <code class="language-plaintext highlighter-rouge">getTopX</code> is nil, the item with the largest weight, and its weight, are returned as two values.  If <code class="language-plaintext highlighter-rouge">getTopX</code> is not nil, two tables are returned instead, with items 1 being the largest value, and its weight, 2 the second largest value and its weight, and so on.</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">listOrIterator</code> — <br />If iterator, returns the items for consideration.<br /><br />If table, each item is a value in the table, and all the table values are items for consideration.</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">weightTableOrWeightFunction</code> — <br />If a table is provided, <code class="language-plaintext highlighter-rouge">gen.calculateWeight(item,weightTable,extraArgument)</code> is used to calculate the weight.<br /><br />If a function is provided, it is used to calculate the weights.</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">getTopX</code> — <br /> If absent/nil, the item with the largest weight is returned, and the second return value returns its weight. <br /><br /> If integer, a table (indexed with integers starting at 1) with this many values is returned, with the item having the largest weight being at key 1, the second best item at key 2, and so on.  If there are not <code class="language-plaintext highlighter-rouge">getTopX</code> valid items, then nil is the value in the table for the relevant keys.  The second return value is a table of the weights of the <code class="language-plaintext highlighter-rouge">getTopX</code> items.</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">extraArgument</code> — <br /> This is an extra piece of data for computing the weights.</p>
<h3 id="getsmallestweights">
  
  
    <a href="#getsmallestweights">&#128279</a> getSmallestWeights
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.getSmallestWeights(listOrIterator: iterator|table&lt;any, &lt;itemToWeigh&gt;&gt;, weightTableOrWeightFunction: table|fun(item: &lt;itemToWeigh&gt;, extraArgument: &lt;extraArg&gt;):number|false, getTopX: integer|nil, extraArgument: &lt;extraArg&gt;|nil)
  -&gt; &lt;itemToWeigh&gt;|table&lt;integer, &lt;itemToWeigh&gt;&gt;
  2. number|table&lt;integer, number&gt;
</code></pre></div></div>
<p>Finds the <code class="language-plaintext highlighter-rouge">getTopX</code> number items in <code class="language-plaintext highlighter-rouge">listOrIterator</code> with the smallest weights.<br />
If <code class="language-plaintext highlighter-rouge">getTopX</code> is nil, the item with the smallest weight, and its weight, are returned as two values.  If <code class="language-plaintext highlighter-rouge">getTopX</code> is not nil, two tables are returned instead, with items 1 being the item with the smallest weight, and its weight, 2 the second largest value and its weight, and so on.</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">listOrIterator</code> — <br />If iterator, returns the items for consideration.<br /><br />If table, each item is a value in the table, and all the table values are items for consideration.</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">weightTableOrWeightFunction</code> — <br />If a table is provided, <code class="language-plaintext highlighter-rouge">gen.calculateWeight(item,weightTable,extraArgument)</code> is used to calculate the weight.<br /><br />If a function is provided, it is used to calculate the weights.</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">getTopX</code> — <br /> If absent/nil, the item with the smallest weight is returned, and the second return value returns its weight. <br /><br /> If integer, a table (indexed with integers starting at 1) with this many values is returned, with the item having the smallest weight being at key 1, the second best item at key 2, and so on.  If there are not <code class="language-plaintext highlighter-rouge">getTopX</code> valid items, then nil is the value in the table for the relevant keys.  The second return value is a table of the weights of the <code class="language-plaintext highlighter-rouge">getTopX</code> items.</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">extraArgument</code> — <br /> This is an extra piece of data for computing the weights.</p>
<h2 id="tile-improvement-functions">
  
  
    <a href="#tile-improvement-functions">&#128279</a> Tile Improvement Functions
  
  
</h2>
    

<p>These functions interact with tile improvements.</p>
<h3 id="totile">
  
  
    <a href="#totile">&#128279</a> toTile
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.toTile(tileAnalog: table|tileObject)
  -&gt; tileObject
</code></pre></div></div>
<p>If given a tile object, returns the tile.
 If given coordinates for a tile, returns the tile.
 Causes error otherwise</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">tileAnalog</code> — Can be:<br /><br />tileObject<br /><br />{[1]=xCoord,[2]=yCoord,[3]=zCoord}<br />Converted to civ.getTile(xCoord,yCoord,zCoord) <br /><br />{[1]=xCoord,[2]=yCoord}<br />Converted to civ.getTile(xCoord,yCoord,0)<br /><br />{x=xCoord,y=yCoord,z=zCoord}<br />Converted to civ.getTile(xCoord,yCoord,zCoord) <br /><br />{x=xCoord,y=yCoord}<br />Converted to civ.getTile(xCoord,yCoord,0)</p>
<h3 id="hasirrigation">
  
  
    <a href="#hasirrigation">&#128279</a> hasIrrigation
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.hasIrrigation(tile: table|tileObject)
  -&gt; boolean
</code></pre></div></div>
<p>Returns true if tile has irrigation but no farm.
 Returns false otherwise.
 If you need to know if a tile has irrigation or farmland,
 use gen.hasAgriculture(tile)</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">tile</code> — Can be:<br /><br />tileObject<br /><br />{[1]=xCoord,[2]=yCoord,[3]=zCoord}<br />Converted to civ.getTile(xCoord,yCoord,zCoord) <br /><br />{[1]=xCoord,[2]=yCoord}<br />Converted to civ.getTile(xCoord,yCoord,0)<br /><br />{x=xCoord,y=yCoord,z=zCoord}<br />Converted to civ.getTile(xCoord,yCoord,zCoord) <br /><br />{x=xCoord,y=yCoord}<br />Converted to civ.getTile(xCoord,yCoord,0)</p>
<h3 id="placeirrigation">
  
  
    <a href="#placeirrigation">&#128279</a> placeIrrigation
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.placeIrrigation(tile: table|tileObject)
</code></pre></div></div>
<p>places irrigation on the tile provided
 removes mines and farmland if present
 does nothing if tile has a city</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">tile</code> — Can be:<br /><br />tileObject<br /><br />{[1]=xCoord,[2]=yCoord,[3]=zCoord}<br />Converted to civ.getTile(xCoord,yCoord,zCoord) <br /><br />{[1]=xCoord,[2]=yCoord}<br />Converted to civ.getTile(xCoord,yCoord,0)<br /><br />{x=xCoord,y=yCoord,z=zCoord}<br />Converted to civ.getTile(xCoord,yCoord,zCoord) <br /><br />{x=xCoord,y=yCoord}<br />Converted to civ.getTile(xCoord,yCoord,0)</p>
<h3 id="removeirrigation">
  
  
    <a href="#removeirrigation">&#128279</a> removeIrrigation
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.removeIrrigation(tile: table|tileObject)
</code></pre></div></div>
<p>If tile has irrigation but no farmland, removes the irrigation
 Does nothing to farmland
 Does nothing if tile has a city</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">tile</code> — Can be:<br /><br />tileObject<br /><br />{[1]=xCoord,[2]=yCoord,[3]=zCoord}<br />Converted to civ.getTile(xCoord,yCoord,zCoord) <br /><br />{[1]=xCoord,[2]=yCoord}<br />Converted to civ.getTile(xCoord,yCoord,0)<br /><br />{x=xCoord,y=yCoord,z=zCoord}<br />Converted to civ.getTile(xCoord,yCoord,zCoord) <br /><br />{x=xCoord,y=yCoord}<br />Converted to civ.getTile(xCoord,yCoord,0)</p>
<h3 id="hasmine">
  
  
    <a href="#hasmine">&#128279</a> hasMine
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.hasMine(tile: table|tileObject)
  -&gt; boolean
</code></pre></div></div>
<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">tile</code> — Can be:<br /><br />tileObject<br /><br />{[1]=xCoord,[2]=yCoord,[3]=zCoord}<br />Converted to civ.getTile(xCoord,yCoord,zCoord) <br /><br />{[1]=xCoord,[2]=yCoord}<br />Converted to civ.getTile(xCoord,yCoord,0)<br /><br />{x=xCoord,y=yCoord,z=zCoord}<br />Converted to civ.getTile(xCoord,yCoord,zCoord) <br /><br />{x=xCoord,y=yCoord}<br />Converted to civ.getTile(xCoord,yCoord,0)</p>
<h3 id="placemine">
  
  
    <a href="#placemine">&#128279</a> placeMine
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.placeMine(tile: table|tileObject)
</code></pre></div></div>
<p>places mines on the tile provided
 removes irrigation and farmland if present
 does nothing if tile has city</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">tile</code> — Can be:<br /><br />tileObject<br /><br />{[1]=xCoord,[2]=yCoord,[3]=zCoord}<br />Converted to civ.getTile(xCoord,yCoord,zCoord) <br /><br />{[1]=xCoord,[2]=yCoord}<br />Converted to civ.getTile(xCoord,yCoord,0)<br /><br />{x=xCoord,y=yCoord,z=zCoord}<br />Converted to civ.getTile(xCoord,yCoord,zCoord) <br /><br />{x=xCoord,y=yCoord}<br />Converted to civ.getTile(xCoord,yCoord,0)</p>
<h3 id="placemineundercity">
  
  
    <a href="#placemineundercity">&#128279</a> placeMineUnderCity
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.placeMineUnderCity(tile: table|tileObject)
</code></pre></div></div>
<p>places mine on a tile, even if a city is present
 removes irrigation and farmland if present</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">tile</code> — Can be:<br /><br />tileObject<br /><br />{[1]=xCoord,[2]=yCoord,[3]=zCoord}<br />Converted to civ.getTile(xCoord,yCoord,zCoord) <br /><br />{[1]=xCoord,[2]=yCoord}<br />Converted to civ.getTile(xCoord,yCoord,0)<br /><br />{x=xCoord,y=yCoord,z=zCoord}<br />Converted to civ.getTile(xCoord,yCoord,zCoord) <br /><br />{x=xCoord,y=yCoord}<br />Converted to civ.getTile(xCoord,yCoord,0)</p>
<h3 id="removemine">
  
  
    <a href="#removemine">&#128279</a> removeMine
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.removeMine(tile: table|tileObject)
</code></pre></div></div>
<p>if tile has mining but no farmland, removes mines
 does nothing to farmland
 does nothing if tile has a city</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">tile</code> — Can be:<br /><br />tileObject<br /><br />{[1]=xCoord,[2]=yCoord,[3]=zCoord}<br />Converted to civ.getTile(xCoord,yCoord,zCoord) <br /><br />{[1]=xCoord,[2]=yCoord}<br />Converted to civ.getTile(xCoord,yCoord,0)<br /><br />{x=xCoord,y=yCoord,z=zCoord}<br />Converted to civ.getTile(xCoord,yCoord,zCoord) <br /><br />{x=xCoord,y=yCoord}<br />Converted to civ.getTile(xCoord,yCoord,0)</p>
<h3 id="removemineundercity">
  
  
    <a href="#removemineundercity">&#128279</a> removeMineUnderCity
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.removeMineUnderCity(tile: table|tileObject)
</code></pre></div></div>
<p>if tile has mining but no farmland, removes mines
 does nothing to farmland</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">tile</code> — Can be:<br /><br />tileObject<br /><br />{[1]=xCoord,[2]=yCoord,[3]=zCoord}<br />Converted to civ.getTile(xCoord,yCoord,zCoord) <br /><br />{[1]=xCoord,[2]=yCoord}<br />Converted to civ.getTile(xCoord,yCoord,0)<br /><br />{x=xCoord,y=yCoord,z=zCoord}<br />Converted to civ.getTile(xCoord,yCoord,zCoord) <br /><br />{x=xCoord,y=yCoord}<br />Converted to civ.getTile(xCoord,yCoord,0)</p>
<h3 id="hasfarmland">
  
  
    <a href="#hasfarmland">&#128279</a> hasFarmland
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.hasFarmland(tile: table|tileObject)
  -&gt; boolean
</code></pre></div></div>
<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">tile</code> — Can be:<br /><br />tileObject<br /><br />{[1]=xCoord,[2]=yCoord,[3]=zCoord}<br />Converted to civ.getTile(xCoord,yCoord,zCoord) <br /><br />{[1]=xCoord,[2]=yCoord}<br />Converted to civ.getTile(xCoord,yCoord,0)<br /><br />{x=xCoord,y=yCoord,z=zCoord}<br />Converted to civ.getTile(xCoord,yCoord,zCoord) <br /><br />{x=xCoord,y=yCoord}<br />Converted to civ.getTile(xCoord,yCoord,0)</p>
<h3 id="placefarmland">
  
  
    <a href="#placefarmland">&#128279</a> placeFarmland
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.placeFarmland(tile: table|tileObject)
</code></pre></div></div>
<p>places farmland on a tile (removing mining)
 does nothing if a city is present</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">tile</code> — Can be:<br /><br />tileObject<br /><br />{[1]=xCoord,[2]=yCoord,[3]=zCoord}<br />Converted to civ.getTile(xCoord,yCoord,zCoord) <br /><br />{[1]=xCoord,[2]=yCoord}<br />Converted to civ.getTile(xCoord,yCoord,0)<br /><br />{x=xCoord,y=yCoord,z=zCoord}<br />Converted to civ.getTile(xCoord,yCoord,zCoord) <br /><br />{x=xCoord,y=yCoord}<br />Converted to civ.getTile(xCoord,yCoord,0)</p>
<h3 id="removefarmland">
  
  
    <a href="#removefarmland">&#128279</a> removeFarmland
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.removeFarmland(tile: table|tileObject)
</code></pre></div></div>
<p>removes farmland if present
 does nothing to irrigation or mining
 does nothing if city present</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">tile</code> — Can be:<br /><br />tileObject<br /><br />{[1]=xCoord,[2]=yCoord,[3]=zCoord}<br />Converted to civ.getTile(xCoord,yCoord,zCoord) <br /><br />{[1]=xCoord,[2]=yCoord}<br />Converted to civ.getTile(xCoord,yCoord,0)<br /><br />{x=xCoord,y=yCoord,z=zCoord}<br />Converted to civ.getTile(xCoord,yCoord,zCoord) <br /><br />{x=xCoord,y=yCoord}<br />Converted to civ.getTile(xCoord,yCoord,0)</p>
<h3 id="hasagriculture">
  
  
    <a href="#hasagriculture">&#128279</a> hasAgriculture
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.hasAgriculture(tile: table|tileObject)
  -&gt; boolean
</code></pre></div></div>
<p>returns true if tile has irrigation or farmland</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">tile</code> — Can be:<br /><br />tileObject<br /><br />{[1]=xCoord,[2]=yCoord,[3]=zCoord}<br />Converted to civ.getTile(xCoord,yCoord,zCoord) <br /><br />{[1]=xCoord,[2]=yCoord}<br />Converted to civ.getTile(xCoord,yCoord,0)<br /><br />{x=xCoord,y=yCoord,z=zCoord}<br />Converted to civ.getTile(xCoord,yCoord,zCoord) <br /><br />{x=xCoord,y=yCoord}<br />Converted to civ.getTile(xCoord,yCoord,0)</p>
<h3 id="improveagriculture">
  
  
    <a href="#improveagriculture">&#128279</a> improveAgriculture
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.improveAgriculture(tile: table|tileObject)
</code></pre></div></div>
<p>if tile has no irrigation, place irrigation (even if mining present)
 if tile has irrigation, place farmland
 if city do nothing</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">tile</code> — Can be:<br /><br />tileObject<br /><br />{[1]=xCoord,[2]=yCoord,[3]=zCoord}<br />Converted to civ.getTile(xCoord,yCoord,zCoord) <br /><br />{[1]=xCoord,[2]=yCoord}<br />Converted to civ.getTile(xCoord,yCoord,0)<br /><br />{x=xCoord,y=yCoord,z=zCoord}<br />Converted to civ.getTile(xCoord,yCoord,zCoord) <br /><br />{x=xCoord,y=yCoord}<br />Converted to civ.getTile(xCoord,yCoord,0)</p>
<h3 id="degradeagriculture">
  
  
    <a href="#degradeagriculture">&#128279</a> degradeAgriculture
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.degradeAgriculture(tile: table|tileObject)
</code></pre></div></div>
<p>if tile has farmland, reduce to irrigation
 if tile has irrigation, remove
 does nothing if city present</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">tile</code> — Can be:<br /><br />tileObject<br /><br />{[1]=xCoord,[2]=yCoord,[3]=zCoord}<br />Converted to civ.getTile(xCoord,yCoord,zCoord) <br /><br />{[1]=xCoord,[2]=yCoord}<br />Converted to civ.getTile(xCoord,yCoord,0)<br /><br />{x=xCoord,y=yCoord,z=zCoord}<br />Converted to civ.getTile(xCoord,yCoord,zCoord) <br /><br />{x=xCoord,y=yCoord}<br />Converted to civ.getTile(xCoord,yCoord,0)</p>
<h3 id="removeagriculture">
  
  
    <a href="#removeagriculture">&#128279</a> removeAgriculture
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.removeAgriculture(tile: table|tileObject)
</code></pre></div></div>
<p>remove farmland and irrigation if present
 do nothing to mining
 do nothing if city present</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">tile</code> — Can be:<br /><br />tileObject<br /><br />{[1]=xCoord,[2]=yCoord,[3]=zCoord}<br />Converted to civ.getTile(xCoord,yCoord,zCoord) <br /><br />{[1]=xCoord,[2]=yCoord}<br />Converted to civ.getTile(xCoord,yCoord,0)<br /><br />{x=xCoord,y=yCoord,z=zCoord}<br />Converted to civ.getTile(xCoord,yCoord,zCoord) <br /><br />{x=xCoord,y=yCoord}<br />Converted to civ.getTile(xCoord,yCoord,0)</p>
<h3 id="hasroad">
  
  
    <a href="#hasroad">&#128279</a> hasRoad
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.hasRoad(tile: table|tileObject)
  -&gt; boolean
</code></pre></div></div>
<p>returns true if tile has a road</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">tile</code> — Can be:<br /><br />tileObject<br /><br />{[1]=xCoord,[2]=yCoord,[3]=zCoord}<br />Converted to civ.getTile(xCoord,yCoord,zCoord) <br /><br />{[1]=xCoord,[2]=yCoord}<br />Converted to civ.getTile(xCoord,yCoord,0)<br /><br />{x=xCoord,y=yCoord,z=zCoord}<br />Converted to civ.getTile(xCoord,yCoord,zCoord) <br /><br />{x=xCoord,y=yCoord}<br />Converted to civ.getTile(xCoord,yCoord,0)</p>
<h3 id="placeroad">
  
  
    <a href="#placeroad">&#128279</a> placeRoad
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.placeRoad(tile: table|tileObject)
</code></pre></div></div>
<p>places a road on the tile
 does nothing if city present</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">tile</code> — Can be:<br /><br />tileObject<br /><br />{[1]=xCoord,[2]=yCoord,[3]=zCoord}<br />Converted to civ.getTile(xCoord,yCoord,zCoord) <br /><br />{[1]=xCoord,[2]=yCoord}<br />Converted to civ.getTile(xCoord,yCoord,0)<br /><br />{x=xCoord,y=yCoord,z=zCoord}<br />Converted to civ.getTile(xCoord,yCoord,zCoord) <br /><br />{x=xCoord,y=yCoord}<br />Converted to civ.getTile(xCoord,yCoord,0)</p>
<h3 id="removeroad">
  
  
    <a href="#removeroad">&#128279</a> removeRoad
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.removeRoad(tile: table|tileObject)
</code></pre></div></div>
<p>removes a road if there is a road but no rail
 doesn’t touch rail or cities</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">tile</code> — Can be:<br /><br />tileObject<br /><br />{[1]=xCoord,[2]=yCoord,[3]=zCoord}<br />Converted to civ.getTile(xCoord,yCoord,zCoord) <br /><br />{[1]=xCoord,[2]=yCoord}<br />Converted to civ.getTile(xCoord,yCoord,0)<br /><br />{x=xCoord,y=yCoord,z=zCoord}<br />Converted to civ.getTile(xCoord,yCoord,zCoord) <br /><br />{x=xCoord,y=yCoord}<br />Converted to civ.getTile(xCoord,yCoord,0)</p>
<h3 id="hasrailroad">
  
  
    <a href="#hasrailroad">&#128279</a> hasRailroad
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.hasRailroad(tile: table|tileObject)
  -&gt; boolean
</code></pre></div></div>
<p>returns true if a tile has a railroad (and road)</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">tile</code> — Can be:<br /><br />tileObject<br /><br />{[1]=xCoord,[2]=yCoord,[3]=zCoord}<br />Converted to civ.getTile(xCoord,yCoord,zCoord) <br /><br />{[1]=xCoord,[2]=yCoord}<br />Converted to civ.getTile(xCoord,yCoord,0)<br /><br />{x=xCoord,y=yCoord,z=zCoord}<br />Converted to civ.getTile(xCoord,yCoord,zCoord) <br /><br />{x=xCoord,y=yCoord}<br />Converted to civ.getTile(xCoord,yCoord,0)</p>
<h3 id="placerailroad">
  
  
    <a href="#placerailroad">&#128279</a> placeRailroad
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.placeRailroad(tile: table|tileObject)
</code></pre></div></div>
<p>places a railroad (and road) on a tile
 does nothing if city is present</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">tile</code> — Can be:<br /><br />tileObject<br /><br />{[1]=xCoord,[2]=yCoord,[3]=zCoord}<br />Converted to civ.getTile(xCoord,yCoord,zCoord) <br /><br />{[1]=xCoord,[2]=yCoord}<br />Converted to civ.getTile(xCoord,yCoord,0)<br /><br />{x=xCoord,y=yCoord,z=zCoord}<br />Converted to civ.getTile(xCoord,yCoord,zCoord) <br /><br />{x=xCoord,y=yCoord}<br />Converted to civ.getTile(xCoord,yCoord,0)</p>
<h3 id="removerailroad">
  
  
    <a href="#removerailroad">&#128279</a> removeRailroad
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.removeRailroad(tile: table|tileObject)
</code></pre></div></div>
<p>removes railroad from a tile if it exits,
 leaving road intact (if there is already road there)
 does nothing if a city is present</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">tile</code> — Can be:<br /><br />tileObject<br /><br />{[1]=xCoord,[2]=yCoord,[3]=zCoord}<br />Converted to civ.getTile(xCoord,yCoord,zCoord) <br /><br />{[1]=xCoord,[2]=yCoord}<br />Converted to civ.getTile(xCoord,yCoord,0)<br /><br />{x=xCoord,y=yCoord,z=zCoord}<br />Converted to civ.getTile(xCoord,yCoord,zCoord) <br /><br />{x=xCoord,y=yCoord}<br />Converted to civ.getTile(xCoord,yCoord,0)</p>
<h3 id="hastransportation">
  
  
    <a href="#hastransportation">&#128279</a> hasTransportation
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.hasTransportation(tile: table|tileObject)
  -&gt; boolean
</code></pre></div></div>
<p>returns true if tile has road or rail 
 (but not if city, unless an event has placed a road)</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">tile</code> — Can be:<br /><br />tileObject<br /><br />{[1]=xCoord,[2]=yCoord,[3]=zCoord}<br />Converted to civ.getTile(xCoord,yCoord,zCoord) <br /><br />{[1]=xCoord,[2]=yCoord}<br />Converted to civ.getTile(xCoord,yCoord,0)<br /><br />{x=xCoord,y=yCoord,z=zCoord}<br />Converted to civ.getTile(xCoord,yCoord,zCoord) <br /><br />{x=xCoord,y=yCoord}<br />Converted to civ.getTile(xCoord,yCoord,0)</p>
<h3 id="upgradetransportation">
  
  
    <a href="#upgradetransportation">&#128279</a> upgradeTransportation
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.upgradeTransportation(tile: table|tileObject)
</code></pre></div></div>
<p>places railroad if road exists, otherwise places road
 does nothing if city present</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">tile</code> — Can be:<br /><br />tileObject<br /><br />{[1]=xCoord,[2]=yCoord,[3]=zCoord}<br />Converted to civ.getTile(xCoord,yCoord,zCoord) <br /><br />{[1]=xCoord,[2]=yCoord}<br />Converted to civ.getTile(xCoord,yCoord,0)<br /><br />{x=xCoord,y=yCoord,z=zCoord}<br />Converted to civ.getTile(xCoord,yCoord,zCoord) <br /><br />{x=xCoord,y=yCoord}<br />Converted to civ.getTile(xCoord,yCoord,0)</p>
<h3 id="degradetransportation">
  
  
    <a href="#degradetransportation">&#128279</a> degradeTransportation
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.degradeTransportation(tile: table|tileObject)
</code></pre></div></div>
<p>reduces railroad to road, if rail exists
 if no rail but road, removes road
 if no transportation, does nothing
 if city does nothing</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">tile</code> — Can be:<br /><br />tileObject<br /><br />{[1]=xCoord,[2]=yCoord,[3]=zCoord}<br />Converted to civ.getTile(xCoord,yCoord,zCoord) <br /><br />{[1]=xCoord,[2]=yCoord}<br />Converted to civ.getTile(xCoord,yCoord,0)<br /><br />{x=xCoord,y=yCoord,z=zCoord}<br />Converted to civ.getTile(xCoord,yCoord,zCoord) <br /><br />{x=xCoord,y=yCoord}<br />Converted to civ.getTile(xCoord,yCoord,0)</p>
<h3 id="removetransportation">
  
  
    <a href="#removetransportation">&#128279</a> removeTransportation
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.removeTransportation(tile: table|tileObject)
</code></pre></div></div>
<p>removes road and rail, if it exists
 does nothing if city present</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">tile</code> — Can be:<br /><br />tileObject<br /><br />{[1]=xCoord,[2]=yCoord,[3]=zCoord}<br />Converted to civ.getTile(xCoord,yCoord,zCoord) <br /><br />{[1]=xCoord,[2]=yCoord}<br />Converted to civ.getTile(xCoord,yCoord,0)<br /><br />{x=xCoord,y=yCoord,z=zCoord}<br />Converted to civ.getTile(xCoord,yCoord,zCoord) <br /><br />{x=xCoord,y=yCoord}<br />Converted to civ.getTile(xCoord,yCoord,0)</p>
<h3 id="hasfortress">
  
  
    <a href="#hasfortress">&#128279</a> hasFortress
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.hasFortress(tile: table|tileObject)
  -&gt; boolean
</code></pre></div></div>
<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">tile</code> — Can be:<br /><br />tileObject<br /><br />{[1]=xCoord,[2]=yCoord,[3]=zCoord}<br />Converted to civ.getTile(xCoord,yCoord,zCoord) <br /><br />{[1]=xCoord,[2]=yCoord}<br />Converted to civ.getTile(xCoord,yCoord,0)<br /><br />{x=xCoord,y=yCoord,z=zCoord}<br />Converted to civ.getTile(xCoord,yCoord,zCoord) <br /><br />{x=xCoord,y=yCoord}<br />Converted to civ.getTile(xCoord,yCoord,0)</p>
<h3 id="placefortress">
  
  
    <a href="#placefortress">&#128279</a> placeFortress
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.placeFortress(tile: table|tileObject)
</code></pre></div></div>
<p>places a fortress on a square, unless
 there is already a city, transporter, or airbase on the tile</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">tile</code> — Can be:<br /><br />tileObject<br /><br />{[1]=xCoord,[2]=yCoord,[3]=zCoord}<br />Converted to civ.getTile(xCoord,yCoord,zCoord) <br /><br />{[1]=xCoord,[2]=yCoord}<br />Converted to civ.getTile(xCoord,yCoord,0)<br /><br />{x=xCoord,y=yCoord,z=zCoord}<br />Converted to civ.getTile(xCoord,yCoord,zCoord) <br /><br />{x=xCoord,y=yCoord}<br />Converted to civ.getTile(xCoord,yCoord,0)</p>
<h3 id="placefortressforce">
  
  
    <a href="#placefortressforce">&#128279</a> placeFortressForce
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.placeFortressForce(tile: table|tileObject)
</code></pre></div></div>
<p>places fortress (replacing airbase/transporter if necessary)
 If city on tile, nothing happens</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">tile</code> — Can be:<br /><br />tileObject<br /><br />{[1]=xCoord,[2]=yCoord,[3]=zCoord}<br />Converted to civ.getTile(xCoord,yCoord,zCoord) <br /><br />{[1]=xCoord,[2]=yCoord}<br />Converted to civ.getTile(xCoord,yCoord,0)<br /><br />{x=xCoord,y=yCoord,z=zCoord}<br />Converted to civ.getTile(xCoord,yCoord,zCoord) <br /><br />{x=xCoord,y=yCoord}<br />Converted to civ.getTile(xCoord,yCoord,0)</p>
<h3 id="removefortress">
  
  
    <a href="#removefortress">&#128279</a> removeFortress
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.removeFortress(tile: table|tileObject)
</code></pre></div></div>
<p>Checks that a fortress is in place (so as not to change
 other terrain improvements), and if so, removes the fortress</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">tile</code> — Can be:<br /><br />tileObject<br /><br />{[1]=xCoord,[2]=yCoord,[3]=zCoord}<br />Converted to civ.getTile(xCoord,yCoord,zCoord) <br /><br />{[1]=xCoord,[2]=yCoord}<br />Converted to civ.getTile(xCoord,yCoord,0)<br /><br />{x=xCoord,y=yCoord,z=zCoord}<br />Converted to civ.getTile(xCoord,yCoord,zCoord) <br /><br />{x=xCoord,y=yCoord}<br />Converted to civ.getTile(xCoord,yCoord,0)</p>
<h3 id="hasairbase">
  
  
    <a href="#hasairbase">&#128279</a> hasAirbase
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.hasAirbase(tile: table|tileObject)
  -&gt; boolean
</code></pre></div></div>
<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">tile</code> — Can be:<br /><br />tileObject<br /><br />{[1]=xCoord,[2]=yCoord,[3]=zCoord}<br />Converted to civ.getTile(xCoord,yCoord,zCoord) <br /><br />{[1]=xCoord,[2]=yCoord}<br />Converted to civ.getTile(xCoord,yCoord,0)<br /><br />{x=xCoord,y=yCoord,z=zCoord}<br />Converted to civ.getTile(xCoord,yCoord,zCoord) <br /><br />{x=xCoord,y=yCoord}<br />Converted to civ.getTile(xCoord,yCoord,0)</p>
<h3 id="placeairbase">
  
  
    <a href="#placeairbase">&#128279</a> placeAirbase
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.placeAirbase(tile: table|tileObject)
</code></pre></div></div>
<p>places an airbase on a tile as long as there is not already
 pollution, fortress, or transporter on the tile
 does nothing if city present</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">tile</code> — Can be:<br /><br />tileObject<br /><br />{[1]=xCoord,[2]=yCoord,[3]=zCoord}<br />Converted to civ.getTile(xCoord,yCoord,zCoord) <br /><br />{[1]=xCoord,[2]=yCoord}<br />Converted to civ.getTile(xCoord,yCoord,0)<br /><br />{x=xCoord,y=yCoord,z=zCoord}<br />Converted to civ.getTile(xCoord,yCoord,zCoord) <br /><br />{x=xCoord,y=yCoord}<br />Converted to civ.getTile(xCoord,yCoord,0)</p>
<h3 id="placeairbaseforce">
  
  
    <a href="#placeairbaseforce">&#128279</a> placeAirbaseForce
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.placeAirbaseForce(tile: table|tileObject)
</code></pre></div></div>
<p>places airbase, removing fortress/transporter/pollution if necessary
 if city on tile, nothing happens</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">tile</code> — Can be:<br /><br />tileObject<br /><br />{[1]=xCoord,[2]=yCoord,[3]=zCoord}<br />Converted to civ.getTile(xCoord,yCoord,zCoord) <br /><br />{[1]=xCoord,[2]=yCoord}<br />Converted to civ.getTile(xCoord,yCoord,0)<br /><br />{x=xCoord,y=yCoord,z=zCoord}<br />Converted to civ.getTile(xCoord,yCoord,zCoord) <br /><br />{x=xCoord,y=yCoord}<br />Converted to civ.getTile(xCoord,yCoord,0)</p>
<h3 id="removeairbase">
  
  
    <a href="#removeairbase">&#128279</a> removeAirbase
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.removeAirbase(tile: table|tileObject)
</code></pre></div></div>
<p>removes airbase, if one is on tile
 (so that something else doesn’t get removed)
 nothing happens if tile is a city</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">tile</code> — Can be:<br /><br />tileObject<br /><br />{[1]=xCoord,[2]=yCoord,[3]=zCoord}<br />Converted to civ.getTile(xCoord,yCoord,zCoord) <br /><br />{[1]=xCoord,[2]=yCoord}<br />Converted to civ.getTile(xCoord,yCoord,0)<br /><br />{x=xCoord,y=yCoord,z=zCoord}<br />Converted to civ.getTile(xCoord,yCoord,zCoord) <br /><br />{x=xCoord,y=yCoord}<br />Converted to civ.getTile(xCoord,yCoord,0)</p>
<h3 id="haspollution">
  
  
    <a href="#haspollution">&#128279</a> hasPollution
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.hasPollution(tile: table|tileObject)
  -&gt; boolean
</code></pre></div></div>
<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">tile</code> — Can be:<br /><br />tileObject<br /><br />{[1]=xCoord,[2]=yCoord,[3]=zCoord}<br />Converted to civ.getTile(xCoord,yCoord,zCoord) <br /><br />{[1]=xCoord,[2]=yCoord}<br />Converted to civ.getTile(xCoord,yCoord,0)<br /><br />{x=xCoord,y=yCoord,z=zCoord}<br />Converted to civ.getTile(xCoord,yCoord,zCoord) <br /><br />{x=xCoord,y=yCoord}<br />Converted to civ.getTile(xCoord,yCoord,0)</p>
<h3 id="placepollution">
  
  
    <a href="#placepollution">&#128279</a> placePollution
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.placePollution(tile: table|tileObject)
</code></pre></div></div>
<p>places pollution, unless the tile has a city, airbase
 or transporter already on the tile</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">tile</code> — Can be:<br /><br />tileObject<br /><br />{[1]=xCoord,[2]=yCoord,[3]=zCoord}<br />Converted to civ.getTile(xCoord,yCoord,zCoord) <br /><br />{[1]=xCoord,[2]=yCoord}<br />Converted to civ.getTile(xCoord,yCoord,0)<br /><br />{x=xCoord,y=yCoord,z=zCoord}<br />Converted to civ.getTile(xCoord,yCoord,zCoord) <br /><br />{x=xCoord,y=yCoord}<br />Converted to civ.getTile(xCoord,yCoord,0)</p>
<h3 id="placepollutionforce">
  
  
    <a href="#placepollutionforce">&#128279</a> placePollutionForce
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.placePollutionForce(tile: table|tileObject)
</code></pre></div></div>
<p>places pollution, unless the tile has a city, 
 transporters and airbases are removed</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">tile</code> — Can be:<br /><br />tileObject<br /><br />{[1]=xCoord,[2]=yCoord,[3]=zCoord}<br />Converted to civ.getTile(xCoord,yCoord,zCoord) <br /><br />{[1]=xCoord,[2]=yCoord}<br />Converted to civ.getTile(xCoord,yCoord,0)<br /><br />{x=xCoord,y=yCoord,z=zCoord}<br />Converted to civ.getTile(xCoord,yCoord,zCoord) <br /><br />{x=xCoord,y=yCoord}<br />Converted to civ.getTile(xCoord,yCoord,0)</p>
<h3 id="removepollution">
  
  
    <a href="#removepollution">&#128279</a> removePollution
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.removePollution(tile: table|tileObject)
</code></pre></div></div>
<p>checks if tile has pollution, and if so, removes it</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">tile</code> — Can be:<br /><br />tileObject<br /><br />{[1]=xCoord,[2]=yCoord,[3]=zCoord}<br />Converted to civ.getTile(xCoord,yCoord,zCoord) <br /><br />{[1]=xCoord,[2]=yCoord}<br />Converted to civ.getTile(xCoord,yCoord,0)<br /><br />{x=xCoord,y=yCoord,z=zCoord}<br />Converted to civ.getTile(xCoord,yCoord,zCoord) <br /><br />{x=xCoord,y=yCoord}<br />Converted to civ.getTile(xCoord,yCoord,0)</p>
<h3 id="hastransporter">
  
  
    <a href="#hastransporter">&#128279</a> hasTransporter
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.hasTransporter(tile: table|tileObject)
  -&gt; boolean
</code></pre></div></div>
<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">tile</code> — Can be:<br /><br />tileObject<br /><br />{[1]=xCoord,[2]=yCoord,[3]=zCoord}<br />Converted to civ.getTile(xCoord,yCoord,zCoord) <br /><br />{[1]=xCoord,[2]=yCoord}<br />Converted to civ.getTile(xCoord,yCoord,0)<br /><br />{x=xCoord,y=yCoord,z=zCoord}<br />Converted to civ.getTile(xCoord,yCoord,zCoord) <br /><br />{x=xCoord,y=yCoord}<br />Converted to civ.getTile(xCoord,yCoord,0)</p>
<h3 id="placetransporter">
  
  
    <a href="#placetransporter">&#128279</a> placeTransporter
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.placeTransporter(tile: any)
</code></pre></div></div>
<p>Placing transporters doesn’t work.
 This function simply produces an error.
 (This function exists mainly to show this functionality wasn’t overlooked.)</p>
<h3 id="removetransporter">
  
  
    <a href="#removetransporter">&#128279</a> removeTransporter
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.removeTransporter(tile: table|tileObject)
</code></pre></div></div>
<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">tile</code> — Can be:<br /><br />tileObject<br /><br />{[1]=xCoord,[2]=yCoord,[3]=zCoord}<br />Converted to civ.getTile(xCoord,yCoord,zCoord) <br /><br />{[1]=xCoord,[2]=yCoord}<br />Converted to civ.getTile(xCoord,yCoord,0)<br /><br />{x=xCoord,y=yCoord,z=zCoord}<br />Converted to civ.getTile(xCoord,yCoord,zCoord) <br /><br />{x=xCoord,y=yCoord}<br />Converted to civ.getTile(xCoord,yCoord,0)</p>
<h2 id="city-attribute-functions">
  
  
    <a href="#city-attribute-functions">&#128279</a> City Attribute Functions
  
  
</h2>
    

<p>These functions change the attribute flags of cities.  Many of these flags have unknown effects.</p>
<h3 id="iscivildisorder">
  
  
    <a href="#iscivildisorder">&#128279</a> isCivilDisorder
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.isCivilDisorder(city: cityObject)
  -&gt; boolean
</code></pre></div></div>
<h3 id="setcivildisorder">
  
  
    <a href="#setcivildisorder">&#128279</a> setCivilDisorder
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.setCivilDisorder(city: cityObject)
</code></pre></div></div>
<h3 id="clearcivildisorder">
  
  
    <a href="#clearcivildisorder">&#128279</a> clearCivilDisorder
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.clearCivilDisorder(city: cityObject)
</code></pre></div></div>
<h3 id="iswelovetheking">
  
  
    <a href="#iswelovetheking">&#128279</a> isWeLoveTheKing
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.isWeLoveTheKing(city: cityObject)
  -&gt; boolean
</code></pre></div></div>
<h3 id="setwelovetheking">
  
  
    <a href="#setwelovetheking">&#128279</a> setWeLoveTheKing
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.setWeLoveTheKing(city: cityObject)
</code></pre></div></div>
<h3 id="clearwelovetheking">
  
  
    <a href="#clearwelovetheking">&#128279</a> clearWeLoveTheKing
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.clearWeLoveTheKing(city: cityObject)
</code></pre></div></div>
<h3 id="isimprovementsold">
  
  
    <a href="#isimprovementsold">&#128279</a> isImprovementSold
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.isImprovementSold(city: cityObject)
  -&gt; boolean
</code></pre></div></div>
<h3 id="setimprovementsold">
  
  
    <a href="#setimprovementsold">&#128279</a> setImprovementSold
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.setImprovementSold(city: cityObject)
</code></pre></div></div>
<h3 id="clearimprovementsold">
  
  
    <a href="#clearimprovementsold">&#128279</a> clearImprovementSold
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.clearImprovementSold(city: cityObject)
</code></pre></div></div>
<h3 id="istechnologystolen">
  
  
    <a href="#istechnologystolen">&#128279</a> isTechnologyStolen
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.isTechnologyStolen(city: cityObject)
  -&gt; boolean
</code></pre></div></div>
<h3 id="settechnologystolen">
  
  
    <a href="#settechnologystolen">&#128279</a> setTechnologyStolen
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.setTechnologyStolen(city: cityObject)
</code></pre></div></div>
<h3 id="cleartechnologystolen">
  
  
    <a href="#cleartechnologystolen">&#128279</a> clearTechnologyStolen
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.clearTechnologyStolen(city: cityObject)
</code></pre></div></div>
<h3 id="isautobuild">
  
  
    <a href="#isautobuild">&#128279</a> isAutoBuild
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.isAutoBuild(city: cityObject)
  -&gt; boolean
</code></pre></div></div>
<h3 id="setautobuild">
  
  
    <a href="#setautobuild">&#128279</a> setAutoBuild
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.setAutoBuild(city: cityObject)
</code></pre></div></div>
<h3 id="clearautobuild">
  
  
    <a href="#clearautobuild">&#128279</a> clearAutoBuild
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.clearAutoBuild(city: cityObject)
</code></pre></div></div>
<h3 id="isattribute6">
  
  
    <a href="#isattribute6">&#128279</a> isAttribute6
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.isAttribute6(city: cityObject)
  -&gt; boolean
</code></pre></div></div>
<p>The function of this byte in <code class="language-plaintext highlighter-rouge">city.attributes</code> is currently unknown.  If you discover it, please inform the Scenario League at Civfanatics.</p>
<h3 id="setattribute6">
  
  
    <a href="#setattribute6">&#128279</a> setAttribute6
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.setAttribute6(city: cityObject)
</code></pre></div></div>
<p>The function of this byte in <code class="language-plaintext highlighter-rouge">city.attributes</code> is currently unknown.  If you discover it, please inform the Scenario League at Civfanatics.</p>
<h3 id="clearattribute6">
  
  
    <a href="#clearattribute6">&#128279</a> clearAttribute6
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.clearAttribute6(city: cityObject)
</code></pre></div></div>
<p>The function of this byte in <code class="language-plaintext highlighter-rouge">city.attributes</code> is currently unknown.  If you discover it, please inform the Scenario League at Civfanatics.</p>
<h3 id="isattribute7">
  
  
    <a href="#isattribute7">&#128279</a> isAttribute7
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.isAttribute7(city: cityObject)
  -&gt; boolean
</code></pre></div></div>
<p>The function of this byte in <code class="language-plaintext highlighter-rouge">city.attributes</code> is currently unknown.  If you discover it, please inform the Scenario League at Civfanatics.</p>
<h3 id="setattribute7">
  
  
    <a href="#setattribute7">&#128279</a> setAttribute7
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.setAttribute7(city: cityObject)
</code></pre></div></div>
<p>The function of this byte in <code class="language-plaintext highlighter-rouge">city.attributes</code> is currently unknown.  If you discover it, please inform the Scenario League at Civfanatics.</p>
<h3 id="clearattribute7">
  
  
    <a href="#clearattribute7">&#128279</a> clearAttribute7
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.clearAttribute7(city: cityObject)
</code></pre></div></div>
<p>The function of this byte in <code class="language-plaintext highlighter-rouge">city.attributes</code> is currently unknown.  If you discover it, please inform the Scenario League at Civfanatics.</p>
<h3 id="isbuildcoastal">
  
  
    <a href="#isbuildcoastal">&#128279</a> isBuildCoastal
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.isBuildCoastal(city: cityObject)
  -&gt; boolean
</code></pre></div></div>
<h3 id="setbuildcoastal">
  
  
    <a href="#setbuildcoastal">&#128279</a> setBuildCoastal
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.setBuildCoastal(city: cityObject)
</code></pre></div></div>
<h3 id="clearbuildcoastal">
  
  
    <a href="#clearbuildcoastal">&#128279</a> clearBuildCoastal
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.clearBuildCoastal(city: cityObject)
</code></pre></div></div>
<h3 id="isattribute9">
  
  
    <a href="#isattribute9">&#128279</a> isAttribute9
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.isAttribute9(city: cityObject)
  -&gt; boolean
</code></pre></div></div>
<p>The function of this byte in <code class="language-plaintext highlighter-rouge">city.attributes</code> is currently unknown.  If you discover it, please inform the Scenario League at Civfanatics.</p>
<h3 id="setattribute9">
  
  
    <a href="#setattribute9">&#128279</a> setAttribute9
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.setAttribute9(city: cityObject)
</code></pre></div></div>
<p>The function of this byte in <code class="language-plaintext highlighter-rouge">city.attributes</code> is currently unknown.  If you discover it, please inform the Scenario League at Civfanatics.</p>
<h3 id="clearattribute9">
  
  
    <a href="#clearattribute9">&#128279</a> clearAttribute9
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.clearAttribute9(city: cityObject)
</code></pre></div></div>
<p>The function of this byte in <code class="language-plaintext highlighter-rouge">city.attributes</code> is currently unknown.  If you discover it, please inform the Scenario League at Civfanatics.</p>
<h3 id="isattribute10">
  
  
    <a href="#isattribute10">&#128279</a> isAttribute10
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.isAttribute10(city: cityObject)
  -&gt; boolean
</code></pre></div></div>
<p>The function of this byte in <code class="language-plaintext highlighter-rouge">city.attributes</code> is currently unknown.  If you discover it, please inform the Scenario League at Civfanatics.</p>
<h3 id="setattribute10">
  
  
    <a href="#setattribute10">&#128279</a> setAttribute10
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.setAttribute10(city: cityObject)
</code></pre></div></div>
<p>The function of this byte in <code class="language-plaintext highlighter-rouge">city.attributes</code> is currently unknown.  If you discover it, please inform the Scenario League at Civfanatics.</p>
<h3 id="clearattribute10">
  
  
    <a href="#clearattribute10">&#128279</a> clearAttribute10
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.clearAttribute10(city: cityObject)
</code></pre></div></div>
<p>The function of this byte in <code class="language-plaintext highlighter-rouge">city.attributes</code> is currently unknown.  If you discover it, please inform the Scenario League at Civfanatics.</p>
<h3 id="isattribute11">
  
  
    <a href="#isattribute11">&#128279</a> isAttribute11
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.isAttribute11(city: cityObject)
  -&gt; boolean
</code></pre></div></div>
<p>The function of this byte in <code class="language-plaintext highlighter-rouge">city.attributes</code> is currently unknown.  If you discover it, please inform the Scenario League at Civfanatics.</p>
<h3 id="setattribute11">
  
  
    <a href="#setattribute11">&#128279</a> setAttribute11
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.setAttribute11(city: cityObject)
</code></pre></div></div>
<p>The function of this byte in <code class="language-plaintext highlighter-rouge">city.attributes</code> is currently unknown.  If you discover it, please inform the Scenario League at Civfanatics.</p>
<h3 id="clearattribute11">
  
  
    <a href="#clearattribute11">&#128279</a> clearAttribute11
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.clearAttribute11(city: cityObject)
</code></pre></div></div>
<p>The function of this byte in <code class="language-plaintext highlighter-rouge">city.attributes</code> is currently unknown.  If you discover it, please inform the Scenario League at Civfanatics.</p>
<h3 id="isbuildhydroplant">
  
  
    <a href="#isbuildhydroplant">&#128279</a> isBuildHydroPlant
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.isBuildHydroPlant(city: cityObject)
  -&gt; boolean
</code></pre></div></div>
<h3 id="setbuildhydroplant">
  
  
    <a href="#setbuildhydroplant">&#128279</a> setBuildHydroPlant
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.setBuildHydroPlant(city: cityObject)
</code></pre></div></div>
<h3 id="clearbuildhydroplant">
  
  
    <a href="#clearbuildhydroplant">&#128279</a> clearBuildHydroPlant
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.clearBuildHydroPlant(city: cityObject)
</code></pre></div></div>
<h3 id="isattribute13">
  
  
    <a href="#isattribute13">&#128279</a> isAttribute13
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.isAttribute13(city: cityObject)
  -&gt; boolean
</code></pre></div></div>
<p>The function of this byte in <code class="language-plaintext highlighter-rouge">city.attributes</code> is currently unknown.  If you discover it, please inform the Scenario League at Civfanatics.</p>
<h3 id="setattribute13">
  
  
    <a href="#setattribute13">&#128279</a> setAttribute13
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.setAttribute13(city: cityObject)
</code></pre></div></div>
<p>The function of this byte in <code class="language-plaintext highlighter-rouge">city.attributes</code> is currently unknown.  If you discover it, please inform the Scenario League at Civfanatics.</p>
<h3 id="clearattribute13">
  
  
    <a href="#clearattribute13">&#128279</a> clearAttribute13
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.clearAttribute13(city: cityObject)
</code></pre></div></div>
<p>The function of this byte in <code class="language-plaintext highlighter-rouge">city.attributes</code> is currently unknown.  If you discover it, please inform the Scenario League at Civfanatics.</p>
<h3 id="isattribute14">
  
  
    <a href="#isattribute14">&#128279</a> isAttribute14
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.isAttribute14(city: cityObject)
  -&gt; boolean
</code></pre></div></div>
<p>The function of this byte in <code class="language-plaintext highlighter-rouge">city.attributes</code> is currently unknown.  If you discover it, please inform the Scenario League at Civfanatics.</p>
<h3 id="setattribute14">
  
  
    <a href="#setattribute14">&#128279</a> setAttribute14
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.setAttribute14(city: cityObject)
</code></pre></div></div>
<p>The function of this byte in <code class="language-plaintext highlighter-rouge">city.attributes</code> is currently unknown.  If you discover it, please inform the Scenario League at Civfanatics.</p>
<h3 id="clearattribute14">
  
  
    <a href="#clearattribute14">&#128279</a> clearAttribute14
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.clearAttribute14(city: cityObject)
</code></pre></div></div>
<p>The function of this byte in <code class="language-plaintext highlighter-rouge">city.attributes</code> is currently unknown.  If you discover it, please inform the Scenario League at Civfanatics.</p>
<h3 id="isattribute15">
  
  
    <a href="#isattribute15">&#128279</a> isAttribute15
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.isAttribute15(city: cityObject)
  -&gt; boolean
</code></pre></div></div>
<p>The function of this byte in <code class="language-plaintext highlighter-rouge">city.attributes</code> is currently unknown.  If you discover it, please inform the Scenario League at Civfanatics.</p>
<h3 id="setattribute15">
  
  
    <a href="#setattribute15">&#128279</a> setAttribute15
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.setAttribute15(city: cityObject)
</code></pre></div></div>
<p>The function of this byte in <code class="language-plaintext highlighter-rouge">city.attributes</code> is currently unknown.  If you discover it, please inform the Scenario League at Civfanatics.</p>
<h3 id="clearattribute15">
  
  
    <a href="#clearattribute15">&#128279</a> clearAttribute15
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.clearAttribute15(city: cityObject)
</code></pre></div></div>
<p>The function of this byte in <code class="language-plaintext highlighter-rouge">city.attributes</code> is currently unknown.  If you discover it, please inform the Scenario League at Civfanatics.</p>
<h3 id="isattribute16">
  
  
    <a href="#isattribute16">&#128279</a> isAttribute16
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.isAttribute16(city: cityObject)
  -&gt; boolean
</code></pre></div></div>
<p>The function of this byte in <code class="language-plaintext highlighter-rouge">city.attributes</code> is currently unknown.  If you discover it, please inform the Scenario League at Civfanatics.</p>
<h3 id="setattribute16">
  
  
    <a href="#setattribute16">&#128279</a> setAttribute16
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.setAttribute16(city: cityObject)
</code></pre></div></div>
<p>The function of this byte in <code class="language-plaintext highlighter-rouge">city.attributes</code> is currently unknown.  If you discover it, please inform the Scenario League at Civfanatics.</p>
<h3 id="clearattribute16">
  
  
    <a href="#clearattribute16">&#128279</a> clearAttribute16
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.clearAttribute16(city: cityObject)
</code></pre></div></div>
<p>The function of this byte in <code class="language-plaintext highlighter-rouge">city.attributes</code> is currently unknown.  If you discover it, please inform the Scenario League at Civfanatics.</p>
<h3 id="isusedairport">
  
  
    <a href="#isusedairport">&#128279</a> isUsedAirport
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.isUsedAirport(city: cityObject)
  -&gt; boolean
</code></pre></div></div>
<h3 id="setusedairport">
  
  
    <a href="#setusedairport">&#128279</a> setUsedAirport
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.setUsedAirport(city: cityObject)
</code></pre></div></div>
<h3 id="clearusedairport">
  
  
    <a href="#clearusedairport">&#128279</a> clearUsedAirport
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.clearUsedAirport(city: cityObject)
</code></pre></div></div>
<h3 id="isattribute18">
  
  
    <a href="#isattribute18">&#128279</a> isAttribute18
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.isAttribute18(city: cityObject)
  -&gt; boolean
</code></pre></div></div>
<p>The function of this byte in <code class="language-plaintext highlighter-rouge">city.attributes</code> is currently unknown.  If you discover it, please inform the Scenario League at Civfanatics.</p>
<h3 id="setattribute18">
  
  
    <a href="#setattribute18">&#128279</a> setAttribute18
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.setAttribute18(city: cityObject)
</code></pre></div></div>
<p>The function of this byte in <code class="language-plaintext highlighter-rouge">city.attributes</code> is currently unknown.  If you discover it, please inform the Scenario League at Civfanatics.</p>
<h3 id="clearattribute18">
  
  
    <a href="#clearattribute18">&#128279</a> clearAttribute18
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.clearAttribute18(city: cityObject)
</code></pre></div></div>
<p>The function of this byte in <code class="language-plaintext highlighter-rouge">city.attributes</code> is currently unknown.  If you discover it, please inform the Scenario League at Civfanatics.</p>
<h3 id="isattribute19">
  
  
    <a href="#isattribute19">&#128279</a> isAttribute19
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.isAttribute19(city: cityObject)
  -&gt; boolean
</code></pre></div></div>
<p>The function of this byte in <code class="language-plaintext highlighter-rouge">city.attributes</code> is currently unknown.  If you discover it, please inform the Scenario League at Civfanatics.</p>
<h3 id="setattribute19">
  
  
    <a href="#setattribute19">&#128279</a> setAttribute19
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.setAttribute19(city: cityObject)
</code></pre></div></div>
<p>The function of this byte in <code class="language-plaintext highlighter-rouge">city.attributes</code> is currently unknown.  If you discover it, please inform the Scenario League at Civfanatics.</p>
<h3 id="clearattribute19">
  
  
    <a href="#clearattribute19">&#128279</a> clearAttribute19
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.clearAttribute19(city: cityObject)
</code></pre></div></div>
<p>The function of this byte in <code class="language-plaintext highlighter-rouge">city.attributes</code> is currently unknown.  If you discover it, please inform the Scenario League at Civfanatics.</p>
<h3 id="isattribute20">
  
  
    <a href="#isattribute20">&#128279</a> isAttribute20
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.isAttribute20(city: cityObject)
  -&gt; boolean
</code></pre></div></div>
<p>The function of this byte in <code class="language-plaintext highlighter-rouge">city.attributes</code> is currently unknown.  If you discover it, please inform the Scenario League at Civfanatics.</p>
<h3 id="setattribute20">
  
  
    <a href="#setattribute20">&#128279</a> setAttribute20
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.setAttribute20(city: cityObject)
</code></pre></div></div>
<p>The function of this byte in <code class="language-plaintext highlighter-rouge">city.attributes</code> is currently unknown.  If you discover it, please inform the Scenario League at Civfanatics.</p>
<h3 id="clearattribute20">
  
  
    <a href="#clearattribute20">&#128279</a> clearAttribute20
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.clearAttribute20(city: cityObject)
</code></pre></div></div>
<p>The function of this byte in <code class="language-plaintext highlighter-rouge">city.attributes</code> is currently unknown.  If you discover it, please inform the Scenario League at Civfanatics.</p>
<h3 id="isattribute21">
  
  
    <a href="#isattribute21">&#128279</a> isAttribute21
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.isAttribute21(city: cityObject)
  -&gt; boolean
</code></pre></div></div>
<p>The function of this byte in <code class="language-plaintext highlighter-rouge">city.attributes</code> is currently unknown.  If you discover it, please inform the Scenario League at Civfanatics.</p>
<h3 id="setattribute21">
  
  
    <a href="#setattribute21">&#128279</a> setAttribute21
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.setAttribute21(city: cityObject)
</code></pre></div></div>
<p>The function of this byte in <code class="language-plaintext highlighter-rouge">city.attributes</code> is currently unknown.  If you discover it, please inform the Scenario League at Civfanatics.</p>
<h3 id="clearattribute21">
  
  
    <a href="#clearattribute21">&#128279</a> clearAttribute21
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.clearAttribute21(city: cityObject)
</code></pre></div></div>
<p>The function of this byte in <code class="language-plaintext highlighter-rouge">city.attributes</code> is currently unknown.  If you discover it, please inform the Scenario League at Civfanatics.</p>
<h3 id="isbuildships">
  
  
    <a href="#isbuildships">&#128279</a> isBuildShips
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.isBuildShips(city: cityObject)
  -&gt; boolean
</code></pre></div></div>
<h3 id="setbuildships">
  
  
    <a href="#setbuildships">&#128279</a> setBuildShips
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.setBuildShips(city: cityObject)
</code></pre></div></div>
<h3 id="clearbuildships">
  
  
    <a href="#clearbuildships">&#128279</a> clearBuildShips
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.clearBuildShips(city: cityObject)
</code></pre></div></div>
<h3 id="iscityinvestigated">
  
  
    <a href="#iscityinvestigated">&#128279</a> isCityInvestigated
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.isCityInvestigated(city: cityObject)
  -&gt; boolean
</code></pre></div></div>
<h3 id="setcityinvestigated">
  
  
    <a href="#setcityinvestigated">&#128279</a> setCityInvestigated
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.setCityInvestigated(city: cityObject)
</code></pre></div></div>
<h3 id="clearcityinvestigated">
  
  
    <a href="#clearcityinvestigated">&#128279</a> clearCityInvestigated
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.clearCityInvestigated(city: cityObject)
</code></pre></div></div>
<h3 id="isattribute24">
  
  
    <a href="#isattribute24">&#128279</a> isAttribute24
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.isAttribute24(city: cityObject)
  -&gt; boolean
</code></pre></div></div>
<p>The function of this byte in <code class="language-plaintext highlighter-rouge">city.attributes</code> is currently unknown.  If you discover it, please inform the Scenario League at Civfanatics.</p>
<h3 id="setattribute24">
  
  
    <a href="#setattribute24">&#128279</a> setAttribute24
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.setAttribute24(city: cityObject)
</code></pre></div></div>
<p>The function of this byte in <code class="language-plaintext highlighter-rouge">city.attributes</code> is currently unknown.  If you discover it, please inform the Scenario League at Civfanatics.</p>
<h3 id="clearattribute24">
  
  
    <a href="#clearattribute24">&#128279</a> clearAttribute24
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.clearAttribute24(city: cityObject)
</code></pre></div></div>
<p>The function of this byte in <code class="language-plaintext highlighter-rouge">city.attributes</code> is currently unknown.  If you discover it, please inform the Scenario League at Civfanatics.</p>
<h3 id="ismilitaryautobuild">
  
  
    <a href="#ismilitaryautobuild">&#128279</a> isMilitaryAutoBuild
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.isMilitaryAutoBuild(city: cityObject)
  -&gt; boolean
</code></pre></div></div>
<h3 id="setmilitaryautobuild">
  
  
    <a href="#setmilitaryautobuild">&#128279</a> setMilitaryAutoBuild
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.setMilitaryAutoBuild(city: cityObject)
</code></pre></div></div>
<h3 id="clearmilitaryautobuild">
  
  
    <a href="#clearmilitaryautobuild">&#128279</a> clearMilitaryAutoBuild
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.clearMilitaryAutoBuild(city: cityObject)
</code></pre></div></div>
<h3 id="isdomesticautobuild">
  
  
    <a href="#isdomesticautobuild">&#128279</a> isDomesticAutoBuild
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.isDomesticAutoBuild(city: cityObject)
  -&gt; boolean
</code></pre></div></div>
<h3 id="setdomesticautobuild">
  
  
    <a href="#setdomesticautobuild">&#128279</a> setDomesticAutoBuild
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.setDomesticAutoBuild(city: cityObject)
</code></pre></div></div>
<h3 id="cleardomesticautobuild">
  
  
    <a href="#cleardomesticautobuild">&#128279</a> clearDomesticAutoBuild
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.clearDomesticAutoBuild(city: cityObject)
</code></pre></div></div>
<h3 id="isobjective">
  
  
    <a href="#isobjective">&#128279</a> isObjective
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.isObjective(city: cityObject)
  -&gt; boolean
</code></pre></div></div>
<h3 id="setobjective">
  
  
    <a href="#setobjective">&#128279</a> setObjective
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.setObjective(city: cityObject)
</code></pre></div></div>
<h3 id="clearobjective">
  
  
    <a href="#clearobjective">&#128279</a> clearObjective
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.clearObjective(city: cityObject)
</code></pre></div></div>
<h3 id="isattribute28">
  
  
    <a href="#isattribute28">&#128279</a> isAttribute28
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.isAttribute28(city: cityObject)
  -&gt; boolean
</code></pre></div></div>
<p>The function of this byte in <code class="language-plaintext highlighter-rouge">city.attributes</code> is currently unknown.  If you discover it, please inform the Scenario League at Civfanatics.</p>
<h3 id="setattribute28">
  
  
    <a href="#setattribute28">&#128279</a> setAttribute28
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.setAttribute28(city: cityObject)
</code></pre></div></div>
<p>The function of this byte in <code class="language-plaintext highlighter-rouge">city.attributes</code> is currently unknown.  If you discover it, please inform the Scenario League at Civfanatics.</p>
<h3 id="clearattribute28">
  
  
    <a href="#clearattribute28">&#128279</a> clearAttribute28
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.clearAttribute28(city: cityObject)
</code></pre></div></div>
<p>The function of this byte in <code class="language-plaintext highlighter-rouge">city.attributes</code> is currently unknown.  If you discover it, please inform the Scenario League at Civfanatics.</p>
<h3 id="ismajorobjective">
  
  
    <a href="#ismajorobjective">&#128279</a> isMajorObjective
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.isMajorObjective(city: cityObject)
  -&gt; boolean
</code></pre></div></div>
<h3 id="setmajorobjective">
  
  
    <a href="#setmajorobjective">&#128279</a> setMajorObjective
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.setMajorObjective(city: cityObject)
</code></pre></div></div>
<h3 id="clearmajorobjective">
  
  
    <a href="#clearmajorobjective">&#128279</a> clearMajorObjective
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.clearMajorObjective(city: cityObject)
</code></pre></div></div>
<h3 id="isusedtransporter">
  
  
    <a href="#isusedtransporter">&#128279</a> isUsedTransporter
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.isUsedTransporter(city: cityObject)
  -&gt; boolean
</code></pre></div></div>
<h3 id="setusedtransporter">
  
  
    <a href="#setusedtransporter">&#128279</a> setUsedTransporter
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.setUsedTransporter(city: cityObject)
</code></pre></div></div>
<h3 id="clearusedtransporter">
  
  
    <a href="#clearusedtransporter">&#128279</a> clearUsedTransporter
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.clearUsedTransporter(city: cityObject)
</code></pre></div></div>
<h3 id="isattribute31">
  
  
    <a href="#isattribute31">&#128279</a> isAttribute31
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.isAttribute31(city: cityObject)
  -&gt; boolean
</code></pre></div></div>
<p>The function of this byte in <code class="language-plaintext highlighter-rouge">city.attributes</code> is currently unknown.  If you discover it, please inform the Scenario League at Civfanatics.</p>
<h3 id="setattribute31">
  
  
    <a href="#setattribute31">&#128279</a> setAttribute31
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.setAttribute31(city: cityObject)
</code></pre></div></div>
<p>The function of this byte in <code class="language-plaintext highlighter-rouge">city.attributes</code> is currently unknown.  If you discover it, please inform the Scenario League at Civfanatics.</p>
<h3 id="clearattribute31">
  
  
    <a href="#clearattribute31">&#128279</a> clearAttribute31
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.clearAttribute31(city: cityObject)
</code></pre></div></div>
<p>The function of this byte in <code class="language-plaintext highlighter-rouge">city.attributes</code> is currently unknown.  If you discover it, please inform the Scenario League at Civfanatics.</p>
<h3 id="isattribute32">
  
  
    <a href="#isattribute32">&#128279</a> isAttribute32
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.isAttribute32(city: cityObject)
  -&gt; boolean
</code></pre></div></div>
<p>The function of this byte in <code class="language-plaintext highlighter-rouge">city.attributes</code> is currently unknown.  If you discover it, please inform the Scenario League at Civfanatics.</p>
<h3 id="setattribute32">
  
  
    <a href="#setattribute32">&#128279</a> setAttribute32
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.setAttribute32(city: cityObject)
</code></pre></div></div>
<p>The function of this byte in <code class="language-plaintext highlighter-rouge">city.attributes</code> is currently unknown.  If you discover it, please inform the Scenario League at Civfanatics.</p>
<h3 id="clearattribute32">
  
  
    <a href="#clearattribute32">&#128279</a> clearAttribute32
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.clearAttribute32(city: cityObject)
</code></pre></div></div>
<p>The function of this byte in <code class="language-plaintext highlighter-rouge">city.attributes</code> is currently unknown.  If you discover it, please inform the Scenario League at Civfanatics.</p>
<h2 id="unit-order-functions">
  
  
    <a href="#unit-order-functions">&#128279</a> Unit Order Functions
  
  
</h2>
    

<p>These functions interact with the orders given to units.</p>
<h3 id="isfortifying">
  
  
    <a href="#isfortifying">&#128279</a> isFortifying
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.isFortifying(unit: unitObject)
  -&gt; boolean
</code></pre></div></div>
<h3 id="settofortifying">
  
  
    <a href="#settofortifying">&#128279</a> setToFortifying
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.setToFortifying(unit: unitObject)
</code></pre></div></div>
<h3 id="isfortified">
  
  
    <a href="#isfortified">&#128279</a> isFortified
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.isFortified(unit: unitObject)
  -&gt; boolean
</code></pre></div></div>
<h3 id="settofortified">
  
  
    <a href="#settofortified">&#128279</a> setToFortified
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.setToFortified(unit: unitObject)
</code></pre></div></div>
<h3 id="issleeping">
  
  
    <a href="#issleeping">&#128279</a> isSleeping
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.isSleeping(unit: unitObject)
  -&gt; boolean
</code></pre></div></div>
<h3 id="settosleeping">
  
  
    <a href="#settosleeping">&#128279</a> setToSleeping
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.setToSleeping(unit: unitObject)
</code></pre></div></div>
<h3 id="isbuildingfortress">
  
  
    <a href="#isbuildingfortress">&#128279</a> isBuildingFortress
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.isBuildingFortress(unit: unitObject)
  -&gt; boolean
</code></pre></div></div>
<h3 id="settobuildingfortress">
  
  
    <a href="#settobuildingfortress">&#128279</a> setToBuildingFortress
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.setToBuildingFortress(unit: unitObject)
</code></pre></div></div>
<h3 id="isbuildingroad">
  
  
    <a href="#isbuildingroad">&#128279</a> isBuildingRoad
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.isBuildingRoad(unit: unitObject)
  -&gt; boolean
</code></pre></div></div>
<h3 id="settobuildingroad">
  
  
    <a href="#settobuildingroad">&#128279</a> setToBuildingRoad
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.setToBuildingRoad(unit: unitObject)
</code></pre></div></div>
<h3 id="isirrigating">
  
  
    <a href="#isirrigating">&#128279</a> isIrrigating
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.isIrrigating(unit: unitObject)
  -&gt; boolean
</code></pre></div></div>
<h3 id="settoirrigating">
  
  
    <a href="#settoirrigating">&#128279</a> setToIrrigating
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.setToIrrigating(unit: unitObject)
</code></pre></div></div>
<h3 id="ismining">
  
  
    <a href="#ismining">&#128279</a> isMining
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.isMining(unit: unitObject)
  -&gt; boolean
</code></pre></div></div>
<h3 id="settomining">
  
  
    <a href="#settomining">&#128279</a> setToMining
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.setToMining(unit: unitObject)
</code></pre></div></div>
<h3 id="istransformingterrain">
  
  
    <a href="#istransformingterrain">&#128279</a> isTransformingTerrain
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.isTransformingTerrain(unit: unitObject)
  -&gt; boolean
</code></pre></div></div>
<h3 id="settotransformingterrain">
  
  
    <a href="#settotransformingterrain">&#128279</a> setToTransformingTerrain
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.setToTransformingTerrain(unit: unitObject)
</code></pre></div></div>
<h3 id="isbuildingairbase">
  
  
    <a href="#isbuildingairbase">&#128279</a> isBuildingAirbase
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.isBuildingAirbase(unit: unitObject)
  -&gt; boolean
</code></pre></div></div>
<h3 id="settobuildingairbase">
  
  
    <a href="#settobuildingairbase">&#128279</a> setToBuildingAirbase
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.setToBuildingAirbase(unit: unitObject)
</code></pre></div></div>
<h3 id="isbuildingtransporter">
  
  
    <a href="#isbuildingtransporter">&#128279</a> isBuildingTransporter
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.isBuildingTransporter(unit: unitObject)
  -&gt; boolean
</code></pre></div></div>
<h3 id="settobuildingtransporter">
  
  
    <a href="#settobuildingtransporter">&#128279</a> setToBuildingTransporter
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.setToBuildingTransporter(unit: unitObject)
</code></pre></div></div>
<h3 id="iscleaningpollution">
  
  
    <a href="#iscleaningpollution">&#128279</a> isCleaningPollution
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.isCleaningPollution(unit: unitObject)
  -&gt; boolean
</code></pre></div></div>
<h3 id="settocleaningpollution">
  
  
    <a href="#settocleaningpollution">&#128279</a> setToCleaningPollution
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.setToCleaningPollution(unit: unitObject)
</code></pre></div></div>
<h3 id="isgoingto">
  
  
    <a href="#isgoingto">&#128279</a> isGoingTo
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.isGoingTo(unit: unitObject)
  -&gt; boolean
</code></pre></div></div>
<p>Returns true if the unit has a goto order, and false otherwise.</p>
<h3 id="settogoingto">
  
  
    <a href="#settogoingto">&#128279</a> setToGoingTo
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.setToGoingTo(unit: unitObject, tile: table|tileObject|nil)
</code></pre></div></div>
<p>gives the unit a goto order for the tile
 if nil is submitted, and the unit already
 has a goto order, the unit will be changed to no orders
 (unit.gotoTile=nil results in an error)
 if the unit has some other order, it will keep that order
 note: this also accepts a table of coordinates as a tile
 (just as all other tile functions do here)</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">tile</code> — if table, the table must be a tile of coordinates</p>
<h3 id="isnoorder">
  
  
    <a href="#isnoorder">&#128279</a> isNoOrder
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.isNoOrder(unit: unitObject)
  -&gt; boolean
</code></pre></div></div>
<h3 id="settonoorders">
  
  
    <a href="#settonoorders">&#128279</a> setToNoOrders
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.setToNoOrders(unit: unitObject)
</code></pre></div></div>
<h3 id="iswaiting">
  
  
    <a href="#iswaiting">&#128279</a> isWaiting
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.isWaiting(unit: unitObject)
  -&gt; boolean
</code></pre></div></div>
<h3 id="settowaiting">
  
  
    <a href="#settowaiting">&#128279</a> setToWaiting
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.setToWaiting(unit: unitObject)
</code></pre></div></div>
<h3 id="clearwaiting">
  
  
    <a href="#clearwaiting">&#128279</a> clearWaiting
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.clearWaiting(unit: unitObject)
</code></pre></div></div>
<h3 id="isparadropped">
  
  
    <a href="#isparadropped">&#128279</a> isParadropped
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.isParadropped(unit: unitObject)
  -&gt; boolean
</code></pre></div></div>
<h3 id="setparadropped">
  
  
    <a href="#setparadropped">&#128279</a> setParadropped
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.setParadropped(unit: unitObject)
</code></pre></div></div>
<h3 id="clearparadropped">
  
  
    <a href="#clearparadropped">&#128279</a> clearParadropped
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.clearParadropped(unit: unitObject)
</code></pre></div></div>
<h3 id="ismoved">
  
  
    <a href="#ismoved">&#128279</a> isMoved
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.isMoved(unit: unitObject)
  -&gt; boolean
</code></pre></div></div>
<p>The game sets this flag when a unit moves (even if no movement points are spent).  The Unit won’t heal on next turn if this flag is set.</p>
<h3 id="setmoved">
  
  
    <a href="#setmoved">&#128279</a> setMoved
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.setMoved(unit: unitObject)
</code></pre></div></div>
<p>The game sets this flag when a unit moves (even if no movement points are spent).  The Unit won’t heal on next turn if this flag is set.</p>
<h3 id="clearmoved">
  
  
    <a href="#clearmoved">&#128279</a> clearMoved
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.clearMoved(unit: unitObject)
</code></pre></div></div>
<p>The game sets this flag when a unit moves (even if no movement points are spent).  The Unit won’t heal on next turn if this flag is set.</p>
<h2 id="unit-type-flag-functions">
  
  
    <a href="#unit-type-flag-functions">&#128279</a> Unit Type Flag Functions
  
  
</h2>
    

<p>These functions interact with the unit special ability flags.</p>
<h3 id="isseetwospaces">
  
  
    <a href="#isseetwospaces">&#128279</a> isSeeTwoSpaces
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.isSeeTwoSpaces(unitType: unitTypeObject)
  -&gt; boolean
</code></pre></div></div>
<h3 id="giveseetwospaces">
  
  
    <a href="#giveseetwospaces">&#128279</a> giveSeeTwoSpaces
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.giveSeeTwoSpaces(unitType: unitTypeObject)
</code></pre></div></div>
<h3 id="removeseetwospaces">
  
  
    <a href="#removeseetwospaces">&#128279</a> removeSeeTwoSpaces
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.removeSeeTwoSpaces(unitType: unitTypeObject)
</code></pre></div></div>
<h3 id="isignorezoc">
  
  
    <a href="#isignorezoc">&#128279</a> isIgnoreZOC
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.isIgnoreZOC(unitType: unitTypeObject)
  -&gt; boolean
</code></pre></div></div>
<h3 id="giveignorezoc">
  
  
    <a href="#giveignorezoc">&#128279</a> giveIgnoreZOC
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.giveIgnoreZOC(unitType: unitTypeObject)
</code></pre></div></div>
<h3 id="removeignorezoc">
  
  
    <a href="#removeignorezoc">&#128279</a> removeIgnoreZOC
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.removeIgnoreZOC(unitType: unitTypeObject)
</code></pre></div></div>
<h3 id="isamphibious">
  
  
    <a href="#isamphibious">&#128279</a> isAmphibious
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.isAmphibious(unitType: unitTypeObject)
  -&gt; boolean
</code></pre></div></div>
<h3 id="giveamphibious">
  
  
    <a href="#giveamphibious">&#128279</a> giveAmphibious
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.giveAmphibious(unitType: unitTypeObject)
</code></pre></div></div>
<h3 id="removeamphibious">
  
  
    <a href="#removeamphibious">&#128279</a> removeAmphibious
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.removeAmphibious(unitType: unitTypeObject)
</code></pre></div></div>
<h3 id="issubmarine">
  
  
    <a href="#issubmarine">&#128279</a> isSubmarine
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.isSubmarine(unitType: unitTypeObject)
  -&gt; boolean
</code></pre></div></div>
<h3 id="givesubmarine">
  
  
    <a href="#givesubmarine">&#128279</a> giveSubmarine
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.giveSubmarine(unitType: unitTypeObject)
</code></pre></div></div>
<h3 id="removesubmarine">
  
  
    <a href="#removesubmarine">&#128279</a> removeSubmarine
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.removeSubmarine(unitType: unitTypeObject)
</code></pre></div></div>
<h3 id="isattackair">
  
  
    <a href="#isattackair">&#128279</a> isAttackAir
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.isAttackAir(unitType: unitTypeObject)
  -&gt; boolean
</code></pre></div></div>
<h3 id="giveattackair">
  
  
    <a href="#giveattackair">&#128279</a> giveAttackAir
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.giveAttackAir(unitType: unitTypeObject)
</code></pre></div></div>
<h3 id="removeattackair">
  
  
    <a href="#removeattackair">&#128279</a> removeAttackAir
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.removeAttackAir(unitType: unitTypeObject)
</code></pre></div></div>
<h3 id="iscoastal">
  
  
    <a href="#iscoastal">&#128279</a> isCoastal
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.isCoastal(unitType: unitTypeObject)
  -&gt; boolean
</code></pre></div></div>
<h3 id="givecoastal">
  
  
    <a href="#givecoastal">&#128279</a> giveCoastal
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.giveCoastal(unitType: unitTypeObject)
</code></pre></div></div>
<h3 id="removecoastal">
  
  
    <a href="#removecoastal">&#128279</a> removeCoastal
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.removeCoastal(unitType: unitTypeObject)
</code></pre></div></div>
<h3 id="isignorewalls">
  
  
    <a href="#isignorewalls">&#128279</a> isIgnoreWalls
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.isIgnoreWalls(unitType: unitTypeObject)
  -&gt; boolean
</code></pre></div></div>
<h3 id="giveignorewalls">
  
  
    <a href="#giveignorewalls">&#128279</a> giveIgnoreWalls
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.giveIgnoreWalls(unitType: unitTypeObject)
</code></pre></div></div>
<h3 id="removeignorewalls">
  
  
    <a href="#removeignorewalls">&#128279</a> removeIgnoreWalls
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.removeIgnoreWalls(unitType: unitTypeObject)
</code></pre></div></div>
<h3 id="iscarryair">
  
  
    <a href="#iscarryair">&#128279</a> isCarryAir
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.isCarryAir(unitType: unitTypeObject)
  -&gt; boolean
</code></pre></div></div>
<h3 id="givecarryair">
  
  
    <a href="#givecarryair">&#128279</a> giveCarryAir
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.giveCarryAir(unitType: unitTypeObject)
</code></pre></div></div>
<h3 id="removecarryair">
  
  
    <a href="#removecarryair">&#128279</a> removeCarryAir
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.removeCarryAir(unitType: unitTypeObject)
</code></pre></div></div>
<h3 id="isparadrop">
  
  
    <a href="#isparadrop">&#128279</a> isParadrop
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.isParadrop(unitType: unitTypeObject)
  -&gt; boolean
</code></pre></div></div>
<h3 id="giveparadrop">
  
  
    <a href="#giveparadrop">&#128279</a> giveParadrop
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.giveParadrop(unitType: unitTypeObject)
</code></pre></div></div>
<h3 id="removeparadrop">
  
  
    <a href="#removeparadrop">&#128279</a> removeParadrop
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.removeParadrop(unitType: unitTypeObject)
</code></pre></div></div>
<h3 id="isalpine">
  
  
    <a href="#isalpine">&#128279</a> isAlpine
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.isAlpine(unitType: unitTypeObject)
  -&gt; boolean
</code></pre></div></div>
<h3 id="givealpine">
  
  
    <a href="#givealpine">&#128279</a> giveAlpine
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.giveAlpine(unitType: unitTypeObject)
</code></pre></div></div>
<h3 id="removealpine">
  
  
    <a href="#removealpine">&#128279</a> removeAlpine
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.removeAlpine(unitType: unitTypeObject)
</code></pre></div></div>
<h3 id="isbonusagainsthorse">
  
  
    <a href="#isbonusagainsthorse">&#128279</a> isBonusAgainstHorse
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.isBonusAgainstHorse(unitType: unitTypeObject)
  -&gt; boolean
</code></pre></div></div>
<h3 id="givebonusagainsthorse">
  
  
    <a href="#givebonusagainsthorse">&#128279</a> giveBonusAgainstHorse
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.giveBonusAgainstHorse(unitType: unitTypeObject)
</code></pre></div></div>
<h3 id="removebonusagainsthorse">
  
  
    <a href="#removebonusagainsthorse">&#128279</a> removeBonusAgainstHorse
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.removeBonusAgainstHorse(unitType: unitTypeObject)
</code></pre></div></div>
<h3 id="isfreesupportunderfundamentalism">
  
  
    <a href="#isfreesupportunderfundamentalism">&#128279</a> isFreeSupportUnderFundamentalism
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.isFreeSupportUnderFundamentalism(unitType: unitTypeObject)
  -&gt; boolean
</code></pre></div></div>
<h3 id="givefreesupportunderfundamentalism">
  
  
    <a href="#givefreesupportunderfundamentalism">&#128279</a> giveFreeSupportUnderFundamentalism
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.giveFreeSupportUnderFundamentalism(unitType: unitTypeObject)
</code></pre></div></div>
<h3 id="removefreesupportunderfundamentalism">
  
  
    <a href="#removefreesupportunderfundamentalism">&#128279</a> removeFreeSupportUnderFundamentalism
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.removeFreeSupportUnderFundamentalism(unitType: unitTypeObject)
</code></pre></div></div>
<h3 id="isdestroyedafterattacking">
  
  
    <a href="#isdestroyedafterattacking">&#128279</a> isDestroyedAfterAttacking
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.isDestroyedAfterAttacking(unitType: unitTypeObject)
  -&gt; boolean
</code></pre></div></div>
<h3 id="givedestroyedafterattacking">
  
  
    <a href="#givedestroyedafterattacking">&#128279</a> giveDestroyedAfterAttacking
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.giveDestroyedAfterAttacking(unitType: unitTypeObject)
</code></pre></div></div>
<h3 id="removedestroyedafterattacking">
  
  
    <a href="#removedestroyedafterattacking">&#128279</a> removeDestroyedAfterAttacking
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.removeDestroyedAfterAttacking(unitType: unitTypeObject)
</code></pre></div></div>
<h3 id="isbonusagainstair">
  
  
    <a href="#isbonusagainstair">&#128279</a> isBonusAgainstAir
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.isBonusAgainstAir(unitType: unitTypeObject)
  -&gt; boolean
</code></pre></div></div>
<h3 id="givebonusagainstair">
  
  
    <a href="#givebonusagainstair">&#128279</a> giveBonusAgainstAir
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.giveBonusAgainstAir(unitType: unitTypeObject)
</code></pre></div></div>
<h3 id="removebonusagainstair">
  
  
    <a href="#removebonusagainstair">&#128279</a> removeBonusAgainstAir
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.removeBonusAgainstAir(unitType: unitTypeObject)
</code></pre></div></div>
<h3 id="isspotsubmarines">
  
  
    <a href="#isspotsubmarines">&#128279</a> isSpotSubmarines
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.isSpotSubmarines(unitType: unitTypeObject)
  -&gt; boolean
</code></pre></div></div>
<h3 id="givespotsubmarines">
  
  
    <a href="#givespotsubmarines">&#128279</a> giveSpotSubmarines
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.giveSpotSubmarines(unitType: unitTypeObject)
</code></pre></div></div>
<h3 id="removespotsubmarines">
  
  
    <a href="#removespotsubmarines">&#128279</a> removeSpotSubmarines
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.removeSpotSubmarines(unitType: unitTypeObject)
</code></pre></div></div>
<h3 id="isinvisibleuntilattack">
  
  
    <a href="#isinvisibleuntilattack">&#128279</a> isInvisibleUntilAttack
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.isInvisibleUntilAttack(unitType: unitTypeObject)
  -&gt; boolean
</code></pre></div></div>
<h3 id="giveinvisibleuntilattack">
  
  
    <a href="#giveinvisibleuntilattack">&#128279</a> giveInvisibleUntilAttack
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.giveInvisibleUntilAttack(unitType: unitTypeObject)
</code></pre></div></div>
<h3 id="removeinvisibleuntilattack">
  
  
    <a href="#removeinvisibleuntilattack">&#128279</a> removeInvisibleUntilAttack
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.removeInvisibleUntilAttack(unitType: unitTypeObject)
</code></pre></div></div>
<h3 id="isnondisbandable">
  
  
    <a href="#isnondisbandable">&#128279</a> isNonDisbandable
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.isNonDisbandable(unitType: unitTypeObject)
  -&gt; boolean
</code></pre></div></div>
<h3 id="givenondisbandable">
  
  
    <a href="#givenondisbandable">&#128279</a> giveNonDisbandable
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.giveNonDisbandable(unitType: unitTypeObject)
</code></pre></div></div>
<h3 id="removenondisbandable">
  
  
    <a href="#removenondisbandable">&#128279</a> removeNonDisbandable
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.removeNonDisbandable(unitType: unitTypeObject)
</code></pre></div></div>
<h3 id="iszerorangeairunitdamageoverride">
  
  
    <a href="#iszerorangeairunitdamageoverride">&#128279</a> isZeroRangeAirUnitDamageOverride
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.isZeroRangeAirUnitDamageOverride(unitType: unitTypeObject)
  -&gt; boolean
</code></pre></div></div>
<h3 id="givezerorangeairunitdamageoverride">
  
  
    <a href="#givezerorangeairunitdamageoverride">&#128279</a> giveZeroRangeAirUnitDamageOverride
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.giveZeroRangeAirUnitDamageOverride(unitType: unitTypeObject)
</code></pre></div></div>
<h3 id="removezerorangeairunitdamageoverride">
  
  
    <a href="#removezerorangeairunitdamageoverride">&#128279</a> removeZeroRangeAirUnitDamageOverride
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.removeZeroRangeAirUnitDamageOverride(unitType: unitTypeObject)
</code></pre></div></div>
<h3 id="iscannotbuyoffbarbarian">
  
  
    <a href="#iscannotbuyoffbarbarian">&#128279</a> isCannotBuyOffBarbarian
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.isCannotBuyOffBarbarian(unitType: unitTypeObject)
  -&gt; boolean
</code></pre></div></div>
<h3 id="givecannotbuyoffbarbarian">
  
  
    <a href="#givecannotbuyoffbarbarian">&#128279</a> giveCannotBuyOffBarbarian
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.giveCannotBuyOffBarbarian(unitType: unitTypeObject)
</code></pre></div></div>
<h3 id="removecannotbuyoffbarbarian">
  
  
    <a href="#removecannotbuyoffbarbarian">&#128279</a> removeCannotBuyOffBarbarian
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.removeCannotBuyOffBarbarian(unitType: unitTypeObject)
</code></pre></div></div>
<h3 id="iscancrossimpassableterrain">
  
  
    <a href="#iscancrossimpassableterrain">&#128279</a> isCanCrossImpassableTerrain
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.isCanCrossImpassableTerrain(unitType: unitTypeObject)
  -&gt; boolean
</code></pre></div></div>
<h3 id="givecancrossimpassableterrain">
  
  
    <a href="#givecancrossimpassableterrain">&#128279</a> giveCanCrossImpassableTerrain
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.giveCanCrossImpassableTerrain(unitType: unitTypeObject)
</code></pre></div></div>
<h3 id="removecancrossimpassableterrain">
  
  
    <a href="#removecancrossimpassableterrain">&#128279</a> removeCanCrossImpassableTerrain
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.removeCanCrossImpassableTerrain(unitType: unitTypeObject)
</code></pre></div></div>
<h3 id="isbarbarianwillnotexpire">
  
  
    <a href="#isbarbarianwillnotexpire">&#128279</a> isBarbarianWillNotExpire
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.isBarbarianWillNotExpire(unitType: unitTypeObject)
  -&gt; boolean
</code></pre></div></div>
<h3 id="givebarbarianwillnotexpire">
  
  
    <a href="#givebarbarianwillnotexpire">&#128279</a> giveBarbarianWillNotExpire
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.giveBarbarianWillNotExpire(unitType: unitTypeObject)
</code></pre></div></div>
<h3 id="removebarbarianwillnotexpire">
  
  
    <a href="#removebarbarianwillnotexpire">&#128279</a> removeBarbarianWillNotExpire
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.removeBarbarianWillNotExpire(unitType: unitTypeObject)
</code></pre></div></div>
<h3 id="isoverridespr">
  
  
    <a href="#isoverridespr">&#128279</a> isOverrideSPR
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.isOverrideSPR(unitType: unitTypeObject)
  -&gt; boolean
</code></pre></div></div>
<h3 id="giveoverridespr">
  
  
    <a href="#giveoverridespr">&#128279</a> giveOverrideSPR
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.giveOverrideSPR(unitType: unitTypeObject)
</code></pre></div></div>
<h3 id="removeoverridespr">
  
  
    <a href="#removeoverridespr">&#128279</a> removeOverrideSPR
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.removeOverrideSPR(unitType: unitTypeObject)
</code></pre></div></div>
<h3 id="isreducepopulationwhenbuilt">
  
  
    <a href="#isreducepopulationwhenbuilt">&#128279</a> isReducePopulationWhenBuilt
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.isReducePopulationWhenBuilt(unitType: unitTypeObject)
  -&gt; boolean
</code></pre></div></div>
<h3 id="givereducepopulationwhenbuilt">
  
  
    <a href="#givereducepopulationwhenbuilt">&#128279</a> giveReducePopulationWhenBuilt
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.giveReducePopulationWhenBuilt(unitType: unitTypeObject)
</code></pre></div></div>
<h3 id="removereducepopulationwhenbuilt">
  
  
    <a href="#removereducepopulationwhenbuilt">&#128279</a> removeReducePopulationWhenBuilt
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.removeReducePopulationWhenBuilt(unitType: unitTypeObject)
</code></pre></div></div>
<h3 id="isrequiresfoodsupport">
  
  
    <a href="#isrequiresfoodsupport">&#128279</a> isRequiresFoodSupport
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.isRequiresFoodSupport(unitType: unitTypeObject)
  -&gt; boolean
</code></pre></div></div>
<h3 id="giverequiresfoodsupport">
  
  
    <a href="#giverequiresfoodsupport">&#128279</a> giveRequiresFoodSupport
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.giveRequiresFoodSupport(unitType: unitTypeObject)
</code></pre></div></div>
<h3 id="removerequiresfoodsupport">
  
  
    <a href="#removerequiresfoodsupport">&#128279</a> removeRequiresFoodSupport
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.removeRequiresFoodSupport(unitType: unitTypeObject)
</code></pre></div></div>
<h3 id="iscanfoundcities">
  
  
    <a href="#iscanfoundcities">&#128279</a> isCanFoundCities
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.isCanFoundCities(unitType: unitTypeObject)
  -&gt; boolean
</code></pre></div></div>
<h3 id="givecanfoundcities">
  
  
    <a href="#givecanfoundcities">&#128279</a> giveCanFoundCities
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.giveCanFoundCities(unitType: unitTypeObject)
</code></pre></div></div>
<h3 id="removecanfoundcities">
  
  
    <a href="#removecanfoundcities">&#128279</a> removeCanFoundCities
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.removeCanFoundCities(unitType: unitTypeObject)
</code></pre></div></div>
<h3 id="iscanimprovetiles">
  
  
    <a href="#iscanimprovetiles">&#128279</a> isCanImproveTiles
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.isCanImproveTiles(unitType: unitTypeObject)
  -&gt; boolean
</code></pre></div></div>
<h3 id="givecanimprovetiles">
  
  
    <a href="#givecanimprovetiles">&#128279</a> giveCanImproveTiles
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.giveCanImproveTiles(unitType: unitTypeObject, ignoreError?: boolean)
</code></pre></div></div>
<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">ignoreError</code> — Default is false</p>

<p>Bestows the ability to improve tiles to units with settler role.
 Units without settler role produce an error, unless ignoreError
 is set to true.</p>
<h3 id="removecanimprovetiles">
  
  
    <a href="#removecanimprovetiles">&#128279</a> removeCanImproveTiles
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.removeCanImproveTiles(unitType: unitTypeObject, ignoreError?: boolean)
</code></pre></div></div>
<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">ignoreError</code> — Default is false</p>

<p>Removes the ability to improve tiles from units with settler role.
 Units without settler role produce an error, unless ignoreError
 is set to true.</p>
<h3 id="isallowedonmap">
  
  
    <a href="#isallowedonmap">&#128279</a> isAllowedOnMap
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.isAllowedOnMap(unitType: unitTypeObject, map: integer|mapObject)
  -&gt; boolean
</code></pre></div></div>
<p>Returns true if the <code class="language-plaintext highlighter-rouge">unitType</code> is allowed on <code class="language-plaintext highlighter-rouge">map</code>, and false otherwise.</p>
<h3 id="giveallowedonmap">
  
  
    <a href="#giveallowedonmap">&#128279</a> giveAllowedOnMap
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.giveAllowedOnMap(unitType: unitTypeObject, map: integer|mapObject)
</code></pre></div></div>
<p>Allows the <code class="language-plaintext highlighter-rouge">unitType</code> to be on <code class="language-plaintext highlighter-rouge">map</code></p>
<h3 id="removeallowedonmap">
  
  
    <a href="#removeallowedonmap">&#128279</a> removeAllowedOnMap
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.removeAllowedOnMap(unitType: unitTypeObject, map: integer|mapObject)
</code></pre></div></div>
<p>Forbids the <code class="language-plaintext highlighter-rouge">unitType</code> to be on <code class="language-plaintext highlighter-rouge">map</code></p>
<h3 id="isnativetransportbetweenmaps">
  
  
    <a href="#isnativetransportbetweenmaps">&#128279</a> isNativeTransportBetweenMaps
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.isNativeTransportBetweenMaps(unitType: unitTypeObject, map1: integer|mapObject, map2: integer|mapObject)
  -&gt; boolean
</code></pre></div></div>
<p>Returns true if <code class="language-plaintext highlighter-rouge">unitType</code> can natively teleport between <code class="language-plaintext highlighter-rouge">map1</code> and <code class="language-plaintext highlighter-rouge">map2</code>, and false otherwise.
Always returns true if <code class="language-plaintext highlighter-rouge">map1</code> and <code class="language-plaintext highlighter-rouge">map2</code> are the same.</p>
<h3 id="givenativetransportbetweenmaps">
  
  
    <a href="#givenativetransportbetweenmaps">&#128279</a> giveNativeTransportBetweenMaps
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.giveNativeTransportBetweenMaps(unitType: unitTypeObject, map1: integer|mapObject, map2: integer|mapObject, suppressFailureError?: boolean)
</code></pre></div></div>
<p>Changes the <code class="language-plaintext highlighter-rouge">unitType</code>’s nativeTransport field so that the
 unit can teleport between <code class="language-plaintext highlighter-rouge">map1</code> and <code class="language-plaintext highlighter-rouge">map2</code>.
 (If there are multiple map relationships
 between <code class="language-plaintext highlighter-rouge">map1</code> and <code class="language-plaintext highlighter-rouge">map2</code>, there is no guarantee which one will
 be enabled, and, in fact, one may be enabled even if another one
 already grants the relationship.  If such details are important,
 write a function manually.)
 If the maps are the same, or there is no possible transportation
 between them, an error is thrown, unless <code class="language-plaintext highlighter-rouge">suppressFailureError</code>
 is <code class="language-plaintext highlighter-rouge">true</code>, in which case the nativeTransport field is unchanged.</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">suppressFailureError</code> — if true, invalid map combinations do nothing instead of causing an error.</p>
<h3 id="removenativetransportbetweenmaps">
  
  
    <a href="#removenativetransportbetweenmaps">&#128279</a> removeNativeTransportBetweenMaps
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.removeNativeTransportBetweenMaps(unitType: unitTypeObject, map1: integer|mapObject, map2: integer|mapObject, suppressFailureError?: boolean)
</code></pre></div></div>
<p>Changes the <code class="language-plaintext highlighter-rouge">unitType</code>’s nativeTransport field so that the
 unit can’t teleport between <code class="language-plaintext highlighter-rouge">map1</code> and <code class="language-plaintext highlighter-rouge">map2</code>.
 (If there are multiple map relationships
 between <code class="language-plaintext highlighter-rouge">map1</code> and <code class="language-plaintext highlighter-rouge">map2</code>, all will be removed.)
 If the maps are the same, or there is no possible transportation
 between them, an error is thrown, unless <code class="language-plaintext highlighter-rouge">suppressFailureError</code>
 is <code class="language-plaintext highlighter-rouge">true</code>, in which case the nativeTransport field is unchanged.</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">suppressFailureError</code> — if true, invalid map combinations do nothing instead of causing an error.</p>
<h3 id="isbuildtransportbetweenmaps">
  
  
    <a href="#isbuildtransportbetweenmaps">&#128279</a> isBuildTransportBetweenMaps
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.isBuildTransportBetweenMaps(unitType: unitTypeObject, map1: integer|mapObject, map2: integer|mapObject)
  -&gt; boolean
</code></pre></div></div>
<p>Returns true if <code class="language-plaintext highlighter-rouge">unitType</code> can build transporters between <code class="language-plaintext highlighter-rouge">map1</code> and <code class="language-plaintext highlighter-rouge">map2</code>, and false otherwise.
Always returns true if <code class="language-plaintext highlighter-rouge">map1</code> and <code class="language-plaintext highlighter-rouge">map2</code> are the same.</p>
<h3 id="givebuildtransportbetweenmaps">
  
  
    <a href="#givebuildtransportbetweenmaps">&#128279</a> giveBuildTransportBetweenMaps
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.giveBuildTransportBetweenMaps(unitType: unitTypeObject, map1: integer|mapObject, map2: integer|mapObject, suppressFailureError?: boolean)
</code></pre></div></div>
<p>Changes the <code class="language-plaintext highlighter-rouge">unitType</code>’s buildTransport field so that the
 unit can build teleporters between <code class="language-plaintext highlighter-rouge">map1</code> and <code class="language-plaintext highlighter-rouge">map2</code>.
 (If there are multiple map relationships
 between <code class="language-plaintext highlighter-rouge">map1</code> and <code class="language-plaintext highlighter-rouge">map2</code>, there is no guarantee which one will
 be enabled, and, in fact, one may be enabled even if another one
 already grants the relationship.  If such details are important,
 write a function manually.)
 If the maps are the same, or there is no possible transportation
 between them, an error is thrown, unless <code class="language-plaintext highlighter-rouge">suppressFailureError</code>
 is <code class="language-plaintext highlighter-rouge">true</code>, in which case the buildTransport field is unchanged.</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">suppressFailureError</code> — if true, invalid map combinations do nothing instead of causing an error.</p>
<h3 id="removebuildtransportbetweenmaps">
  
  
    <a href="#removebuildtransportbetweenmaps">&#128279</a> removeBuildTransportBetweenMaps
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.removeBuildTransportBetweenMaps(unitType: unitTypeObject, map1: integer|mapObject, map2: integer|mapObject, suppressFailureError?: boolean)
</code></pre></div></div>
<p>Changes the <code class="language-plaintext highlighter-rouge">unitType</code>’s buildTransport field so that the
 unit can’t build teleporters between <code class="language-plaintext highlighter-rouge">map1</code> and <code class="language-plaintext highlighter-rouge">map2</code>.
 (If there are multiple map relationships
 between <code class="language-plaintext highlighter-rouge">map1</code> and <code class="language-plaintext highlighter-rouge">map2</code>, all will be set to 0.)
 If the maps are the same, or there is no possible transportation
 between them, an error is thrown, unless <code class="language-plaintext highlighter-rouge">suppressFailureError</code>
 is <code class="language-plaintext highlighter-rouge">true</code>, in which case the buildTransport field is unchanged.</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">suppressFailureError</code> — if true, invalid map combinations do nothing instead of causing an error.</p>
<h3 id="isusetransportbetweenmaps">
  
  
    <a href="#isusetransportbetweenmaps">&#128279</a> isUseTransportBetweenMaps
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.isUseTransportBetweenMaps(unitType: unitTypeObject, map1: integer|mapObject, map2: integer|mapObject)
  -&gt; boolean
</code></pre></div></div>
<p>Returns true if <code class="language-plaintext highlighter-rouge">unitType</code> can build transporters between <code class="language-plaintext highlighter-rouge">map1</code> and <code class="language-plaintext highlighter-rouge">map2</code>, and false otherwise.
Always returns true if <code class="language-plaintext highlighter-rouge">map1</code> and <code class="language-plaintext highlighter-rouge">map2</code> are the same.</p>
<h3 id="giveusetransportbetweenmaps">
  
  
    <a href="#giveusetransportbetweenmaps">&#128279</a> giveUseTransportBetweenMaps
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.giveUseTransportBetweenMaps(unitType: unitTypeObject, map1: integer|mapObject, map2: integer|mapObject, suppressFailureError?: boolean)
</code></pre></div></div>
<p>Changes the <code class="language-plaintext highlighter-rouge">unitType</code>’s useTransport field so that the
 unit can use teleporters between <code class="language-plaintext highlighter-rouge">map1</code> and <code class="language-plaintext highlighter-rouge">map2</code>.
 (If there are multiple map relationships
 between <code class="language-plaintext highlighter-rouge">map1</code> and <code class="language-plaintext highlighter-rouge">map2</code>, there is no guarantee which one will
 be enabled, and, in fact, one may be enabled even if another one
 already grants the relationship.  If such details are important,
 write a function manually.)
 If the maps are the same, or there is no possible transportation
 between them, an error is thrown, unless <code class="language-plaintext highlighter-rouge">suppressFailureError</code>
 is <code class="language-plaintext highlighter-rouge">true</code>, in which case the useTransport field is unchanged.</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">suppressFailureError</code> — if true, invalid map combinations do nothing instead of causing an error.</p>
<h3 id="removeusetransportbetweenmaps">
  
  
    <a href="#removeusetransportbetweenmaps">&#128279</a> removeUseTransportBetweenMaps
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.removeUseTransportBetweenMaps(unitType: unitTypeObject, map1: integer|mapObject, map2: integer|mapObject, suppressFailureError?: boolean)
</code></pre></div></div>
<p>Changes the <code class="language-plaintext highlighter-rouge">unitType</code>’s useTransport field so that the
 unit can’t use teleporters between <code class="language-plaintext highlighter-rouge">map1</code> and <code class="language-plaintext highlighter-rouge">map2</code>.
 (If there are multiple map relationships
 between <code class="language-plaintext highlighter-rouge">map1</code> and <code class="language-plaintext highlighter-rouge">map2</code>, all will be set to 0)
 If the maps are the same, or there is no possible transportation
 between them, an error is thrown, unless <code class="language-plaintext highlighter-rouge">suppressFailureError</code>
 is <code class="language-plaintext highlighter-rouge">true</code>, in which case the useTransport field is unchanged.</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">suppressFailureError</code> — if true, invalid map combinations do nothing instead of causing an error.</p>
<h2 id="map-visibility-functions">
  
  
    <a href="#map-visibility-functions">&#128279</a> Map Visibility Functions
  
  
</h2>
    

<p>These functions control what is shown to individual tribes on the map.</p>
<h3 id="istilerevealed">
  
  
    <a href="#istilerevealed">&#128279</a> isTileRevealed
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.isTileRevealed(tile: table|tileObject, tribe: tribeObject)
  -&gt; boolean
</code></pre></div></div>
<p>Returns true if <code class="language-plaintext highlighter-rouge">tile</code> is revealed to <code class="language-plaintext highlighter-rouge">tribe</code>, false otherwise.</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">tile</code> — Can be:<br /><br />tileObject<br /><br />{[1]=xCoord,[2]=yCoord,[3]=zCoord}<br />Converted to civ.getTile(xCoord,yCoord,zCoord) <br /><br />{[1]=xCoord,[2]=yCoord}<br />Converted to civ.getTile(xCoord,yCoord,0)<br /><br />{x=xCoord,y=yCoord,z=zCoord}<br />Converted to civ.getTile(xCoord,yCoord,zCoord) <br /><br />{x=xCoord,y=yCoord}<br />Converted to civ.getTile(xCoord,yCoord,0)</p>
<h3 id="revealtile">
  
  
    <a href="#revealtile">&#128279</a> revealTile
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.revealTile(tile: table|tileObject, tribe: tribeObject)
</code></pre></div></div>
<p>gen.revealTile(tile,tribe) -&gt; void
 makes <code class="language-plaintext highlighter-rouge">tile</code> visible to <code class="language-plaintext highlighter-rouge">tribe</code></p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">tile</code> — Can be:<br /><br />tileObject<br /><br />{[1]=xCoord,[2]=yCoord,[3]=zCoord}<br />Converted to civ.getTile(xCoord,yCoord,zCoord) <br /><br />{[1]=xCoord,[2]=yCoord}<br />Converted to civ.getTile(xCoord,yCoord,0)<br /><br />{x=xCoord,y=yCoord,z=zCoord}<br />Converted to civ.getTile(xCoord,yCoord,zCoord) <br /><br />{x=xCoord,y=yCoord}<br />Converted to civ.getTile(xCoord,yCoord,0)</p>
<h3 id="covertile">
  
  
    <a href="#covertile">&#128279</a> coverTile
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.coverTile(tile: table|tileObject, tribe: tribeObject)
</code></pre></div></div>
<p>gen.coverTile(tile,tribe) -&gt; void
 covers a tile so it isn’t visible to tribe (if it ever was)</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">tile</code> — Can be:<br /><br />tileObject<br /><br />{[1]=xCoord,[2]=yCoord,[3]=zCoord}<br />Converted to civ.getTile(xCoord,yCoord,zCoord) <br /><br />{[1]=xCoord,[2]=yCoord}<br />Converted to civ.getTile(xCoord,yCoord,0)<br /><br />{x=xCoord,y=yCoord,z=zCoord}<br />Converted to civ.getTile(xCoord,yCoord,zCoord) <br /><br />{x=xCoord,y=yCoord}<br />Converted to civ.getTile(xCoord,yCoord,0)</p>
<h3 id="isunitstackvisible">
  
  
    <a href="#isunitstackvisible">&#128279</a> isUnitStackVisible
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.isUnitStackVisible(unitOrTile: tileObject|unitObject, tribe: tribeObject, emptyTileReturnValue: &lt;emptyTileReturnValue&gt;)
  -&gt; boolean|&lt;emptyTileReturnValue&gt;
</code></pre></div></div>
<p>If a unit is provided, returns true if that unit is visible to tribe, and false if not.
 Note: a tribe’s own units are visible to it (even though unit.visibility doesn’t show this).
 If a tile is provided, returns true if there are units on the tile and the tribe can see them,
 false if units are on the tile and the tribe can’t see them, and
 returns emptyTileReturnValue (default nil) if there are no units on the tile.</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">emptyTileReturnValue</code> — Default value is nil.</p>
<h3 id="hideunitstack">
  
  
    <a href="#hideunitstack">&#128279</a> hideUnitStack
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.hideUnitStack(unitOrTile: table|tileObject|unitObject, tribe: tribeObject)
</code></pre></div></div>
<p>If a unit is provided, hides the unit and all other units on the tile from tribe
 If a tile is provided, hides all units on the tile (if any are present)</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">unitOrTile</code> — Can be:<br /><br />tileObject<br /><br />unitObject<br /><br />{[1]=xCoord,[2]=yCoord,[3]=zCoord}<br />Converted to civ.getTile(xCoord,yCoord,zCoord) <br /><br />{[1]=xCoord,[2]=yCoord}<br />Converted to civ.getTile(xCoord,yCoord,0)<br /><br />{x=xCoord,y=yCoord,z=zCoord}<br />Converted to civ.getTile(xCoord,yCoord,zCoord) <br /><br />{x=xCoord,y=yCoord}<br />Converted to civ.getTile(xCoord,yCoord,0)</p>
<h3 id="revealunitstack">
  
  
    <a href="#revealunitstack">&#128279</a> revealUnitStack
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.revealUnitStack(unitOrTile: table|tileObject|unitObject, tribe: tribeObject)
</code></pre></div></div>
<p>If a unit is provided, reveals that unit and all other units on the tile
 to the tribe.
 If a tile is provided, reveals all units on the tile to the tribe (if any are present).</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">unitOrTile</code> — Can be:<br /><br />tileObject<br /><br />unitObject<br /><br />{[1]=xCoord,[2]=yCoord,[3]=zCoord}<br />Converted to civ.getTile(xCoord,yCoord,zCoord) <br /><br />{[1]=xCoord,[2]=yCoord}<br />Converted to civ.getTile(xCoord,yCoord,0)<br /><br />{x=xCoord,y=yCoord,z=zCoord}<br />Converted to civ.getTile(xCoord,yCoord,zCoord) <br /><br />{x=xCoord,y=yCoord}<br />Converted to civ.getTile(xCoord,yCoord,0)</p>
<h3 id="iscitycharted">
  
  
    <a href="#iscitycharted">&#128279</a> isCityCharted
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.isCityCharted(city: cityObject, tribe: tribeObject)
  -&gt; boolean
</code></pre></div></div>
<p>Returns true if city is “knownTo” tribe (that is,
 will appear on the map if the tile is visible), false otherwise.</p>
<h3 id="chartcity">
  
  
    <a href="#chartcity">&#128279</a> chartCity
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.chartCity(city: cityObject, tribe: tribeObject, visibleSize?: integer)
</code></pre></div></div>
<p>Makes city visible to tribe on the map, setting it to visibleSize if provided.
 If city.sizeForTribe[tribe] == 0 (the default value) after this, it is set to 1
 since a city does not appear if city.sizeForTribe[tribe] == 0
 does not change the visibility of the tile.</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">visibleSize</code> — 1 by default.</p>
<h3 id="unchartcity">
  
  
    <a href="#unchartcity">&#128279</a> unchartCity
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.unchartCity(city: any, tribe: any)
</code></pre></div></div>
<p>Makes a <code class="language-plaintext highlighter-rouge">city</code> invisible to <code class="language-plaintext highlighter-rouge">tribe</code> (but doesn’t cover the tile in black)
 by changing the knownTo field.</p>
<h3 id="isirrigationcharted">
  
  
    <a href="#isirrigationcharted">&#128279</a> isIrrigationCharted
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.isIrrigationCharted(tile: tileObject, tribe: tribeObject)
  -&gt; boolean
</code></pre></div></div>
<p>Returns true if tribe sees Irrigation on the tile, and false otherwise.
 Does not consider if tile is revealed to the tribe.</p>
<h3 id="chartirrigation">
  
  
    <a href="#chartirrigation">&#128279</a> chartIrrigation
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.chartIrrigation(tile: tileObject, tribe: tribeObject)
</code></pre></div></div>
<p>Charts Irrigation on the tribe’s map of tile, uncharting any conflicting improvements.</p>
<h3 id="unchartirrigation">
  
  
    <a href="#unchartirrigation">&#128279</a> unchartIrrigation
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.unchartIrrigation(tile: tileObject, tribe: tribeObject)
</code></pre></div></div>
<p>Uncharts Irrigation on the tribe’s map of tile, if Irrigation has been charted.
 If Irrigation is not charted, the chart remains unchanged.</p>
<h3 id="isminecharted">
  
  
    <a href="#isminecharted">&#128279</a> isMineCharted
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.isMineCharted(tile: tileObject, tribe: tribeObject)
  -&gt; boolean
</code></pre></div></div>
<p>Returns true if tribe sees Mine on the tile, and false otherwise.
 Does not consider if tile is revealed to the tribe.</p>
<h3 id="chartmine">
  
  
    <a href="#chartmine">&#128279</a> chartMine
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.chartMine(tile: tileObject, tribe: tribeObject)
</code></pre></div></div>
<p>Charts Mine on the tribe’s map of tile, uncharting any conflicting improvements.</p>
<h3 id="unchartmine">
  
  
    <a href="#unchartmine">&#128279</a> unchartMine
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.unchartMine(tile: tileObject, tribe: tribeObject)
</code></pre></div></div>
<p>Uncharts Mine on the tribe’s map of tile, if Mine has been charted.
 If Mine is not charted, the chart remains unchanged.</p>
<h3 id="isfarmlandcharted">
  
  
    <a href="#isfarmlandcharted">&#128279</a> isFarmlandCharted
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.isFarmlandCharted(tile: tileObject, tribe: tribeObject)
  -&gt; boolean
</code></pre></div></div>
<p>Returns true if tribe sees Farmland on the tile, and false otherwise.
 Does not consider if tile is revealed to the tribe.</p>
<h3 id="chartfarmland">
  
  
    <a href="#chartfarmland">&#128279</a> chartFarmland
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.chartFarmland(tile: tileObject, tribe: tribeObject)
</code></pre></div></div>
<p>Charts Farmland on the tribe’s map of tile, uncharting any conflicting improvements.</p>
<h3 id="unchartfarmland">
  
  
    <a href="#unchartfarmland">&#128279</a> unchartFarmland
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.unchartFarmland(tile: tileObject, tribe: tribeObject)
  -&gt; boolean
</code></pre></div></div>
<p>Uncharts Farmland on the tribe’s map of tile, if Farmland has been charted.
 If Farmland is not charted, the chart remains unchanged.</p>
<h3 id="isroadcharted">
  
  
    <a href="#isroadcharted">&#128279</a> isRoadCharted
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.isRoadCharted(tile: tileObject, tribe: tribeObject)
  -&gt; boolean
</code></pre></div></div>
<p>Returns true if tribe sees Road on the tile, and false otherwise.
 Does not consider if tile is revealed to the tribe.</p>
<h3 id="chartroad">
  
  
    <a href="#chartroad">&#128279</a> chartRoad
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.chartRoad(tile: tileObject, tribe: tribeObject)
</code></pre></div></div>
<p>Charts Road on the tribe’s map of tile, uncharting any conflicting improvements.</p>
<h3 id="unchartroad">
  
  
    <a href="#unchartroad">&#128279</a> unchartRoad
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.unchartRoad(tile: tileObject, tribe: tribeObject)
</code></pre></div></div>
<p>Uncharts Road on the tribe’s map of tile, if Road has been charted.
 If Road is not charted, the chart remains unchanged.</p>
<h3 id="israilroadcharted">
  
  
    <a href="#israilroadcharted">&#128279</a> isRailroadCharted
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.isRailroadCharted(tile: tileObject, tribe: tribeObject)
  -&gt; boolean
</code></pre></div></div>
<p>Returns true if tribe sees Railroad on the tile, and false otherwise.
 Does not consider if tile is revealed to the tribe.</p>
<h3 id="chartrailroad">
  
  
    <a href="#chartrailroad">&#128279</a> chartRailroad
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.chartRailroad(tile: tileObject, tribe: tribeObject)
</code></pre></div></div>
<p>Charts Railroad on the tribe’s map of tile, uncharting any conflicting improvements.</p>
<h3 id="unchartrailroad">
  
  
    <a href="#unchartrailroad">&#128279</a> unchartRailroad
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.unchartRailroad(tile: tileObject, tribe: tribeObject)
</code></pre></div></div>
<p>Uncharts Railroad on the tribe’s map of tile, if Railroad has been charted.
 If Railroad is not charted, the chart remains unchanged.</p>
<h3 id="uncharttransportation">
  
  
    <a href="#uncharttransportation">&#128279</a> unchartTransportation
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.unchartTransportation(tile: tileObject, tribe: tribeObject)
</code></pre></div></div>
<p>gen.unchartTransportation(tile,tribe) –&gt; void
 Uncharts road and railroad on the tribe’s map of tile.</p>
<h3 id="isfortresscharted">
  
  
    <a href="#isfortresscharted">&#128279</a> isFortressCharted
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.isFortressCharted(tile: tileObject, tribe: tribeObject)
  -&gt; boolean
</code></pre></div></div>
<p>Returns true if tribe sees Fortress on the tile, and false otherwise.
 Does not consider if tile is revealed to the tribe.</p>
<h3 id="chartfortress">
  
  
    <a href="#chartfortress">&#128279</a> chartFortress
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.chartFortress(tile: tileObject, tribe: tribeObject)
</code></pre></div></div>
<p>Charts Fortress on the tribe’s map of tile, uncharting any conflicting improvements.</p>
<h3 id="unchartfortress">
  
  
    <a href="#unchartfortress">&#128279</a> unchartFortress
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.unchartFortress(tile: tileObject, tribe: tribeObject)
</code></pre></div></div>
<p>Uncharts Fortress on the tribe’s map of tile, if Fortress has been charted.
 If Fortress is not charted, the chart remains unchanged.</p>
<h3 id="isairbasecharted">
  
  
    <a href="#isairbasecharted">&#128279</a> isAirbaseCharted
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.isAirbaseCharted(tile: tileObject, tribe: tribeObject)
  -&gt; boolean
</code></pre></div></div>
<p>Returns true if tribe sees Airbase on the tile, and false otherwise.
 Does not consider if tile is revealed to the tribe.</p>
<h3 id="chartairbase">
  
  
    <a href="#chartairbase">&#128279</a> chartAirbase
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.chartAirbase(tile: tileObject, tribe: tribeObject)
</code></pre></div></div>
<p>Charts Airbase on the tribe’s map of tile, uncharting any conflicting improvements.</p>
<h3 id="unchartairbase">
  
  
    <a href="#unchartairbase">&#128279</a> unchartAirbase
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.unchartAirbase(tile: tileObject, tribe: tribeObject)
</code></pre></div></div>
<p>Uncharts Airbase on the tribe’s map of tile, if Airbase has been charted.
 If Airbase is not charted, the chart remains unchanged.</p>
<h3 id="ispollutioncharted">
  
  
    <a href="#ispollutioncharted">&#128279</a> isPollutionCharted
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.isPollutionCharted(tile: tileObject, tribe: tribeObject)
  -&gt; boolean
</code></pre></div></div>
<p>gen.isPollutionCharted(tile,tribe) –&gt; bool
 Returns true if tribe sees Pollution on the tile, and false otherwise.
 Does not consider if tile is revealed to the tribe.</p>
<h3 id="chartpollution">
  
  
    <a href="#chartpollution">&#128279</a> chartPollution
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.chartPollution(tile: tileObject, tribe: tribeObject)
</code></pre></div></div>
<p>Charts Pollution on the tribe’s map of tile, uncharting any conflicting improvements.</p>
<h3 id="unchartpollution">
  
  
    <a href="#unchartpollution">&#128279</a> unchartPollution
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.unchartPollution(tile: tileObject, tribe: tribeObject)
</code></pre></div></div>
<p>Uncharts Pollution on the tribe’s map of tile, if Pollution has been charted.
 If Pollution is not charted, the chart remains unchanged.</p>
<h3 id="istransportercharted">
  
  
    <a href="#istransportercharted">&#128279</a> isTransporterCharted
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.isTransporterCharted(tile: tileObject, tribe: tribeObject)
  -&gt; boolean
</code></pre></div></div>
<p>Returns true if tribe sees Transporter on the tile, and false otherwise.
 Does not consider if tile is revealed to the tribe.</p>
<h3 id="charttransporter">
  
  
    <a href="#charttransporter">&#128279</a> chartTransporter
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.chartTransporter(tile: tileObject, tribe: tribeObject)
</code></pre></div></div>
<p>Charts Transporter on the tribe’s map of tile, uncharting any conflicting improvements.</p>
<h3 id="uncharttransporter">
  
  
    <a href="#uncharttransporter">&#128279</a> unchartTransporter
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.unchartTransporter(tile: tileObject, tribe: tribeObject)
</code></pre></div></div>
<p>Uncharts Transporter on the tribe’s map of tile, if Transporter has been charted.
 If Transporter is not charted, the chart remains unchanged.</p>
<h3 id="charttruthfully">
  
  
    <a href="#charttruthfully">&#128279</a> chartTruthfully
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.chartTruthfully(tile: tileObject, tribe: tribeObject)
</code></pre></div></div>
<p>gen.chartTruthfully(tile,tribe) –&gt; void
 Reveals <code class="language-plaintext highlighter-rouge">tile</code> to <code class="language-plaintext highlighter-rouge">tribe</code>, and makes visible the tile improvements that actually exist.</p>
<h2 id="bitmask-tools">
  
  
    <a href="#bitmask-tools">&#128279</a> Bitmask Tools
  
  
</h2>
    

<p>These tools can be helpful if you have a reason to perform bitwise operations.  Note, however, that the General Library might already have a function which can achieve your objective.</p>
<h3 id="checkbits">
  
  
    <a href="#checkbits">&#128279</a> checkBits
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.checkBits(bitmask: integer|bitmask, bitString: string)
  -&gt; bitsMatch: boolean
</code></pre></div></div>
<p>Compares the binary representation of an integer with
 a string.  If the string has a 1 in a given place,
 the binary representation of the integer should also
 have a 1.  If the string has a 0 in a given place, the
 binary representation should also have a 0. Any other
 character in the string means the integer can have a
 0 or a 1.  If the integer representation is longer than
 the string, the string is aligned with the smallest
 part of the integer.</p>
<div class="language-lua highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">gen</span><span class="p">.</span><span class="n">checkBits</span><span class="p">(</span><span class="mi">0</span><span class="n">b10101011</span><span class="p">,</span><span class="s2">"xx10xwqp"</span><span class="p">)</span><span class="c1">--&gt;true</span>
<span class="n">gen</span><span class="p">.</span><span class="n">checkBits</span><span class="p">(</span><span class="mi">0</span><span class="n">b10101011</span><span class="p">,</span><span class="s2">"xx11xwqp"</span><span class="p">)</span><span class="c1">--&gt;false</span>
<span class="n">gen</span><span class="p">.</span><span class="n">checkBits</span><span class="p">(</span><span class="mi">0</span><span class="n">b011110101011</span><span class="p">,</span><span class="s2">"xx10xwqp"</span><span class="p">)</span><span class="c1">--&gt;true</span>
<span class="n">gen</span><span class="p">.</span><span class="n">checkBits</span><span class="p">(</span><span class="mi">0</span><span class="n">b011110101011</span><span class="p">,</span><span class="s2">"xx10xwqp"</span><span class="p">)</span><span class="c1">--&gt;true</span>
</code></pre></div></div>
<p>note: lua does not actually accept integers specified in binary 
 (though it does for hexidecimal)</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">bitmask</code> — the number/bitmask to be checked</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">bitString</code> — specification of bits that should be checked</p>
<h3 id="setbits">
  
  
    <a href="#setbits">&#128279</a> setBits
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.setBits(bitmask: integer|bitmask, bitString: string)
  -&gt; bitmask: bitmask
</code></pre></div></div>
<p>Sets binary bits in an integer/bitmask to 1 or 0 based on
 the information provided by a string.  Characters that 
 are not 1 or 0 leave the corresponding bit unchanged
 Last character of the string corresponds to the 1’s bit
 in the integer (string lines up to the least significant
 part of the number).</p>
<div class="language-lua highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">gen</span><span class="p">.</span><span class="n">setBits</span><span class="p">(</span><span class="mi">0</span><span class="n">b00000000</span><span class="p">,</span><span class="s2">"xx10xxxx"</span><span class="p">)</span><span class="c1">--&gt;0b00100000</span>
<span class="n">gen</span><span class="p">.</span><span class="n">setBits</span><span class="p">(</span><span class="mi">0</span><span class="n">b00000000</span><span class="p">,</span><span class="s2">"xx10xx"</span><span class="p">)</span><span class="c1">--&gt;0b00001000</span>
<span class="n">gen</span><span class="p">.</span><span class="n">setBits</span><span class="p">(</span><span class="mi">0</span><span class="n">b11111100</span><span class="p">,</span><span class="s2">"xx0011xx"</span><span class="p">)</span><span class="c1">--&gt;0b11001100</span>
<span class="n">gen</span><span class="p">.</span><span class="n">setBits</span><span class="p">(</span><span class="mi">0</span><span class="n">b10101011</span><span class="p">,</span><span class="s2">"xx10xwqp"</span><span class="p">)</span><span class="c1">--&gt;0b10101011</span>
<span class="n">gen</span><span class="p">.</span><span class="n">setBits</span><span class="p">(</span><span class="mi">0</span><span class="n">b10101011</span><span class="p">,</span><span class="s2">"xx11xwqp"</span><span class="p">)</span><span class="c1">--&gt;0b10111011</span>
</code></pre></div></div>
<p>note: lua does not actually accept integers specified in binary (though it does for hexidecimal)</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">bitmask</code> — the bitmask to change</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">bitString</code> — specification of bits to set</p>

<p>@<em>return</em> <code class="language-plaintext highlighter-rouge">bitmask</code> — The integer/bitmask after the bits have been set</p>
<h3 id="printbits">
  
  
    <a href="#printbits">&#128279</a> printBits
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>gen.printBits --&gt; function
</code></pre></div></div>
<h3 id="bitmasktostring">
  
  
    <a href="#bitmasktostring">&#128279</a> bitmaskToString
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.bitmaskToString(bitmask: bitmask, numOfBits?: integer)
  -&gt; binaryRepresentation: string
</code></pre></div></div>
<p>creates the binary representation of integer/bitmask,
 including the numOfBits least significant bits
 if numOfBits is nil, it defaults to 32</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">bitmask</code> — the bits to print</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">numOfBits</code> — the number of bits to show (default 32)</p>
<h3 id="isbit1">
  
  
    <a href="#isbit1">&#128279</a> isBit1
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.isBit1(bitmask: integer, bitNumber: integer)
  -&gt; boolean
</code></pre></div></div>
<p>tells if bitNumber bit of integer/bitmask is 1 
 (1st bit is the bit for the ones position)</p>
<div class="language-lua highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">gen</span><span class="p">.</span><span class="n">isBit1</span><span class="p">(</span><span class="mi">0</span><span class="n">b00000010</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span> <span class="c1">--&gt;true</span>
<span class="n">gen</span><span class="p">.</span><span class="n">isBit1</span><span class="p">(</span><span class="mi">0</span><span class="n">b11111110</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span> <span class="c1">--&gt;false</span>
</code></pre></div></div>
<p>note: lua does not actually accept integers specified in binary (though it does accept hexidecimal)</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">bitmask</code> — bitmask</p>
<h3 id="isbit0">
  
  
    <a href="#isbit0">&#128279</a> isBit0
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.isBit0(bitmask: integer|bitmask, bitNumber: integer)
  -&gt; boolean
</code></pre></div></div>
<p>tells if bitNumber bit of integer is 0 
 (1st bit is the bit for the ones position)</p>
<div class="language-lua highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">gen</span><span class="p">.</span><span class="n">isBit0</span><span class="p">(</span><span class="mi">0</span><span class="n">b00000010</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span> <span class="c1">--&gt;false</span>
<span class="n">gen</span><span class="p">.</span><span class="n">isBit0</span><span class="p">(</span><span class="mi">0</span><span class="n">b11111110</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span> <span class="c1">--&gt;true</span>
</code></pre></div></div>
<p>note: lua does not actually accept integers specified in binary (though it does accept hexidecimal)</p>
<h3 id="setbit1">
  
  
    <a href="#setbit1">&#128279</a> setBit1
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.setBit1(bitmask: integer|bitmask, bitNumber: integer)
  -&gt; bitmask
</code></pre></div></div>
<p>sets bitNumber bit of the integer/bitmask to 1
 (1st bit is the bit for the ones position)</p>
<div class="language-lua highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">gen</span><span class="p">.</span><span class="n">setBit1</span><span class="p">(</span><span class="mi">0</span><span class="n">b00000000</span><span class="p">,</span><span class="mi">3</span><span class="p">)</span> <span class="c1">--&gt; 0b00000100</span>
</code></pre></div></div>
<p>note: lua does not actually accept integers specified in binary (though it does accept hexidecimal)</p>
<h3 id="setbit0">
  
  
    <a href="#setbit0">&#128279</a> setBit0
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.setBit0(bitmask: integer|bitmask, bitNumber: integer)
  -&gt; bitmask
</code></pre></div></div>
<p>sets bitNumber bit of the integer/bitmask to 0
 (1st bit is the bit for the ones position)</p>
<div class="language-lua highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">gen</span><span class="p">.</span><span class="n">setBit0</span><span class="p">(</span><span class="mi">0</span><span class="n">b11111111</span><span class="p">,</span><span class="mi">3</span><span class="p">)</span> <span class="c1">--&gt; 0b11111011</span>
</code></pre></div></div>
<p>note: lua does not actually accept integers specified in binary (though it does accept hexidecimal)</p>
<h3 id="istransportbetweenmaps">
  
  
    <a href="#istransportbetweenmaps">&#128279</a> isTransportBetweenMaps
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.isTransportBetweenMaps(map1: integer|mapObject, map2: integer|mapObject, transportBitmask: bitmask, functionName?: string)
  -&gt; boolean
</code></pre></div></div>
<p>Returns true if the supplied bitmask indicates that transportation
 can take place between <code class="language-plaintext highlighter-rouge">map1</code> and <code class="language-plaintext highlighter-rouge">map2</code> (or if they are the same map),
 and false otherwise.</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">functionName</code> — Carries through the function name for the error if changeRules.lua is not available.</p>
<h3 id="givetransportbetweenmaps">
  
  
    <a href="#givetransportbetweenmaps">&#128279</a> giveTransportBetweenMaps
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.giveTransportBetweenMaps(map1: integer|mapObject, map2: integer|mapObject, transportBitmask: bitmask, suppressFailureError?: boolean, functionName?: string)
  -&gt; bitmask
</code></pre></div></div>
<p>Takes the <code class="language-plaintext highlighter-rouge">transportBitmask</code> for nativeTransport, buildTransport, useTransport,
 and changes an appropriate bit to 1 so that transport exists
 between the maps.  (If there are multiple map relationships
 between <code class="language-plaintext highlighter-rouge">map1</code> and <code class="language-plaintext highlighter-rouge">map2</code>, there is no guarantee which one will
 be enabled, and, in fact, one may be enabled even if another one
 already grants the relationship.  If such details are important,
 write a function manually.)
 Returns the new bitmask.
 If the maps are the same, or there is no possible transportation
 between them, an error is thrown, unless <code class="language-plaintext highlighter-rouge">suppressFailureError</code>
 is <code class="language-plaintext highlighter-rouge">true</code>, in which case the original bitmask is returned.</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">suppressFailureError</code> — set to true so that invalid map pairs do nothing instead of causing errors.</p>
<h3 id="removetransportbetweenmaps">
  
  
    <a href="#removetransportbetweenmaps">&#128279</a> removeTransportBetweenMaps
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.removeTransportBetweenMaps(map1: integer|mapObject, map2: integer|mapObject, transportBitmask: bitmask, suppressFailureError?: boolean, functionName?: string)
  -&gt; bitmask
</code></pre></div></div>
<p>Takes the <code class="language-plaintext highlighter-rouge">transportBitmask</code> for nativeTransport, buildTransport, useTransport,
 and changes all appropriate bit to 0 so that transport no longer exists
 between the maps.<br />
 Returns the new bitmask.
 If the maps are the same, or there is no possible transportation
 between them, an error is thrown, unless <code class="language-plaintext highlighter-rouge">suppressFailureError</code>
 is <code class="language-plaintext highlighter-rouge">true</code>, in which case the original bitmask is returned.</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">suppressFailureError</code> — set to true so that invalid map pairs do nothing instead of causing errors.</p>
<h2 id="alternate-names">
  
  
    <a href="#alternate-names">&#128279</a> Alternate Names
  
  
</h2>
    

<p>This section contains entries with alternate names for functions.  This is often because the function’s primary name was changed, but the original name is kept available for backwards compatibility.  Sometimes, the alternate name is simply shorter.</p>
<h3 id="isattribute17">
  
  
    <a href="#isattribute17">&#128279</a> isAttribute17
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>gen.isAttribute17 --&gt; function
</code></pre></div></div>

<p>Alternate name for <a href="#isusedairport">gen.isUsedAirport</a>.</p>
<h3 id="setattribute17">
  
  
    <a href="#setattribute17">&#128279</a> setAttribute17
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>gen.setAttribute17 --&gt; function
</code></pre></div></div>

<p>Alternate name for <a href="#setusedairport">gen.setUsedAirport</a>.</p>
<h3 id="clearattribute17">
  
  
    <a href="#clearattribute17">&#128279</a> clearAttribute17
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>gen.clearAttribute17 --&gt; function
</code></pre></div></div>

<p>Alternate name for <a href="#clearusedairport">gen.clearUsedAirport</a>.</p>
<h3 id="isattribute23">
  
  
    <a href="#isattribute23">&#128279</a> isAttribute23
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>gen.isAttribute23 --&gt; function
</code></pre></div></div>

<p>Alternate name for <a href="#iscityinvestigated">gen.isCityInvestigated</a>.</p>
<h3 id="setattribute23">
  
  
    <a href="#setattribute23">&#128279</a> setAttribute23
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>gen.setAttribute23 --&gt; function
</code></pre></div></div>

<p>Alternate name for <a href="#setcityinvestigated">gen.setCityInvestigated</a>.</p>
<h3 id="clearattribute23">
  
  
    <a href="#clearattribute23">&#128279</a> clearAttribute23
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>gen.clearAttribute23 --&gt; function
</code></pre></div></div>

<p>Alternate name for <a href="#clearcityinvestigated">gen.clearCityInvestigated</a>.</p>
<h3 id="isattribute30">
  
  
    <a href="#isattribute30">&#128279</a> isAttribute30
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>gen.isAttribute30 --&gt; function
</code></pre></div></div>

<p>Alternate name for <a href="#isusedtransporter">gen.isUsedTransporter</a>.</p>
<h3 id="setattribute30">
  
  
    <a href="#setattribute30">&#128279</a> setAttribute30
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>gen.setAttribute30 --&gt; function
</code></pre></div></div>

<p>Alternate name for <a href="#setusedtransporter">gen.setUsedTransporter</a>.</p>
<h3 id="clearattribute30">
  
  
    <a href="#clearattribute30">&#128279</a> clearAttribute30
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>gen.clearAttribute30 --&gt; function
</code></pre></div></div>

<p>Alternate name for <a href="#clearusedtransporter">gen.clearUsedTransporter</a>.</p>
<h3 id="describeallowabledata">
  
  
    <a href="#describeallowabledata">&#128279</a> describeAllowableData
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>gen.describeAllowableData --&gt; function
</code></pre></div></div>

<p>Alternate name for <a href="#describeallowablevalues">gen.describeAllowableValues</a>.</p>
<h3 id="checkvaliddatainfo">
  
  
    <a href="#checkvaliddatainfo">&#128279</a> checkValidDataInfo
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>gen.checkValidDataInfo --&gt; function
</code></pre></div></div>

<p>Alternate name for <a href="#validatevaluespecificationkeys">gen.validateValueSpecificationKeys</a>.</p>
<h3 id="valuesatisfiesvaliddatainfo">
  
  
    <a href="#valuesatisfiesvaliddatainfo">&#128279</a> valueSatisfiesValidDataInfo
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>gen.valueSatisfiesValidDataInfo --&gt; function
</code></pre></div></div>

<p>Alternate name for <a href="#validatevaluespecificationkeys">gen.validateValueSpecificationKeys</a>.</p>
<h3 id="tableofvdi">
  
  
    <a href="#tableofvdi">&#128279</a> tableOfVDI
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>gen.tableOfVDI --&gt; function
</code></pre></div></div>

<p>Alternate name for <a href="#tableofvaluespecification">gen.tableOfValueSpecification</a>.</p>
<h3 id="vdiortableofvdi">
  
  
    <a href="#vdiortableofvdi">&#128279</a> vDIOrTableOfVDI
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>gen.vDIOrTableOfVDI --&gt; function
</code></pre></div></div>

<p>Alternate name for <a href="#valuespecificationortableofvaluespecification">gen.valueSpecificationOrTableOfValueSpecification</a>.</p>
<h3 id="valuespecortable">
  
  
    <a href="#valuespecortable">&#128279</a> valueSpecOrTable
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>gen.valueSpecOrTable --&gt; function
</code></pre></div></div>

<p>Alternate name for <a href="#valuespecificationortableofvaluespecification">gen.valueSpecificationOrTableOfValueSpecification</a>.</p>
<h3 id="wondermodifiedmoves">
  
  
    <a href="#wondermodifiedmoves">&#128279</a> wonderModifiedMoves
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>gen.wonderModifiedMoves --&gt; function
</code></pre></div></div>

<p>Alternate name for <a href="#fullhealthmovementallowance">gen.fullHealthMovementAllowance</a>.</p>
<h3 id="getbaseterrainfromid-1">
  
  
    <a href="#getbaseterrainfromid-1">&#128279</a> getBaseTerrainFromId
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>gen.getBaseTerrainFromId --&gt; function
</code></pre></div></div>

<p>Alternate name for <a href="#getbaseterrainfromid">gen.getBaseTerrainFromID</a>.</p>
<h3 id="getbaseterrainid-1">
  
  
    <a href="#getbaseterrainid-1">&#128279</a> getBaseTerrainId
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>gen.getBaseTerrainId --&gt; function
</code></pre></div></div>

<p>Alternate name for <a href="#getbaseterrainid">gen.getBaseTerrainID</a>.</p>
<h3 id="getterrainfromid-1">
  
  
    <a href="#getterrainfromid-1">&#128279</a> getTerrainFromId
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>gen.getTerrainFromId --&gt; function
</code></pre></div></div>

<p>Alternate name for <a href="#getterrainfromid">gen.getTerrainFromID</a>.</p>
<h3 id="getterrainid-1">
  
  
    <a href="#getterrainid-1">&#128279</a> getTerrainId
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>gen.getTerrainId --&gt; function
</code></pre></div></div>

<p>Alternate name for <a href="#getterrainid">gen.getTerrainID</a>.</p>
<h3 id="gettilefromid-1">
  
  
    <a href="#gettilefromid-1">&#128279</a> getTileFromId
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>gen.getTileFromId --&gt; function
</code></pre></div></div>

<p>Alternate name for <a href="#gettilefromid">gen.getTileFromID</a>.</p>
<h3 id="gettileid-1">
  
  
    <a href="#gettileid-1">&#128279</a> getTileId
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>gen.getTileId --&gt; function
</code></pre></div></div>

<p>Alternate name for <a href="#gettileid">gen.getTileID</a>.</p>
<h3 id="giveampibious">
  
  
    <a href="#giveampibious">&#128279</a> giveAmpibious
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>gen.giveAmpibious --&gt; function
</code></pre></div></div>
<p>backwards compatibility typo</p>

<p>Alternate name for <a href="#giveamphibious">gen.giveAmphibious</a>.</p>
<h3 id="giveingorewalls">
  
  
    <a href="#giveingorewalls">&#128279</a> giveIngoreWalls
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>gen.giveIngoreWalls --&gt; function
</code></pre></div></div>

<p>Alternate name for <a href="#giveignorewalls">gen.giveIgnoreWalls</a>.</p>
<h3 id="removeseetowspaces">
  
  
    <a href="#removeseetowspaces">&#128279</a> removeSeeTowSpaces
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>gen.removeSeeTowSpaces --&gt; function
</code></pre></div></div>
<p>Note: The typo is preserved, on the off chance that
 someone used it</p>

<p>Alternate name for <a href="#removeseetwospace">gen.removeSeeTwoSpace</a>.</p>
<h2 id="event-and-module-machinery">
  
  
    <a href="#event-and-module-machinery">&#128279</a> Event and Module Machinery
  
  
</h2>
    

<p>These functions help modules work, or are used to provide functionality
which was not substantial enough to merit a separate module.</p>
<h3 id="rehomeunitsincapturedcity">
  
  
    <a href="#rehomeunitsincapturedcity">&#128279</a> rehomeUnitsInCapturedCity
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.rehomeUnitsInCapturedCity(city: cityObject, defender: tribeObject)
</code></pre></div></div>
<p>Re-homes units in a captured city to other cities owned by
 the same tribe, so that they are not disbanded.
 <br />If you are using the Lua Scenario Template, you can enable this feature in simpleSettings.lua.</p>
<h3 id="linkactivationfunction">
  
  
    <a href="#linkactivationfunction">&#128279</a> linkActivationFunction
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.linkActivationFunction(activationFn: fun(unit: unitObject, source: boolean))
</code></pre></div></div>
<p>#gen.linkActivationFunction(function(unit,source)–&gt;void)–&gt;void
 If you are using the Lua Scenario Template, there is no need to worry about this function.
 use to specify the code that should be run when a unit is
 activated by gen.activate or gen.activateWtihSource</p>
<h3 id="getactivationfunction">
  
  
    <a href="#getactivationfunction">&#128279</a> getActivationFunction
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.getActivationFunction()
  -&gt; fun(unit: unitObject, source: boolean)
</code></pre></div></div>
<p>gen.getActivationFunction()–&gt;function(unit,source)
provides the unit activation function linked to the general library</p>
<h3 id="noglobal">
  
  
    <a href="#noglobal">&#128279</a> noGlobal
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.noGlobal()
</code></pre></div></div>
<p>gen.noGlobal()
 after gen.noGlobal is run, errors will be generated when trying to create a new
 global variable, or when accessing a global variable that doesn’t already exist
 if you want to have a ‘console’ table to access certain functions from the console,
 you should declare it (but you don’t have to fill it) before running this function
 In the Lua Scenario Template, this is run near the top of events.lua</p>
<h3 id="restoreglobal">
  
  
    <a href="#restoreglobal">&#128279</a> restoreGlobal
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.restoreGlobal()
</code></pre></div></div>
<p>Allows Global variables to be used, if they have been disabled by
 <code class="language-plaintext highlighter-rouge">gen.noGlobal</code></p>
<h3 id="linkstate">
  
  
    <a href="#linkstate">&#128279</a> linkState
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.linkState(stateTable: boolean|string|number|table&lt;string|number, boolean|string|number|table&gt;)
</code></pre></div></div>
<p>Links the state table to the General Library
 provides access to the state table so that
 gen.getState() can provide it.</p>
<h3 id="linkgenerallibrarystate">
  
  
    <a href="#linkgenerallibrarystate">&#128279</a> linkGeneralLibraryState
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.linkGeneralLibraryState(stateTable: boolean|string|number|table&lt;string|number, boolean|string|number|table&gt;)
</code></pre></div></div>
<p>Links a sub table of the state table for the purposes of
 providing a table for functions in the General Library
 this is distinct from getState, which provides a 
 ‘visible’ state table to the end user</p>
<h3 id="setdeathfunctions">
  
  
    <a href="#setdeathfunctions">&#128279</a> setDeathFunctions
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.setDeathFunctions(defeatFn: fun(loser: unitObject, winner: unitObject, aggressor: unitObject, victim: unitObject, loserLocation: tileObject, winnerVetStatus: boolean, loserVetStatus: boolean):unitObject|nil, deathFn: fun(dyingUnit: unitObject), deletionFn: fun(deletedUnit: unitObject, replacingUnit: unitObject|nil), deathNoCombatFn: fun(dyingUnit: unitObject))
</code></pre></div></div>
<p>gen.setDeathFunctions(defeatFunction,deathFunction,deletionFunction) –&gt; void
 Registers event functions for when units are killed/deleted.
 If you are using the Lua Scenario Template, this is already
 run in events.lua, and you do not need to use this function.
      defeatFunction(loser,winner,aggressor,victim,loserLocation,winnerVetStatus,loserVetStatus)–&gt; nil or unit
          function for when a unit is defeated either in game combat or in an event representing combat
          if a unit is returned, that is a replacement unit for demotion
      deathFunction(dyingUnit) –&gt; void
          for when a unit ‘dies’, either in standard or event combat, or through some other event ‘kill’
      deletionFunction(deletedUnit,replacingUnit=nil) –&gt; void
          maintenance for when a unit is deleted, either because of combat, death, replacement or some other ‘administrative’ situation.  If no replacing unit, the replacingUnit argument is nil
  registers functions to be performed when a unit is defeated (either in game combat or events)
  or deleted by events in some other way
      deathNoCombatFn(dyingUnit) –&gt; void
          for when a unit dies, but not in combat or through the gen.defeatUnit function</p>
<h3 id="setscenariodirectory">
  
  
    <a href="#setscenariodirectory">&#128279</a> setScenarioDirectory
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.setScenarioDirectory(directory: string)
</code></pre></div></div>
<p>Registers <code class="language-plaintext highlighter-rouge">directory</code> as the path to the current scenario’s main directory.  This value is returned by <code class="language-plaintext highlighter-rouge">gen.getScenarioDirectory()</code>.  If you are using the Lua Scenario Template, this is handled in events.lua, and you do not need to worry about it.</p>
<h3 id="getscenariodirectory">
  
  
    <a href="#getscenariodirectory">&#128279</a> getScenarioDirectory
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.getScenarioDirectory()
  -&gt; scenarioMainDirectory: string
</code></pre></div></div>
<p>Returns the scenario’s main directory.</p>
<h3 id="setoutofrangemessage">
  
  
    <a href="#setoutofrangemessage">&#128279</a> setOutOfRangeMessage
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.setOutOfRangeMessage(textOrFunction: string|fun(unit: unitObject), title?: string)
</code></pre></div></div>
<p>This function registers what happens when Lua code causes a
 unit to be destroyed because it is ‘out of range/fuel’.  This could be
 because events expended the last movement points of an aircraft,
 or because land/sea units have been given a range using Lua.<br />
 (No code is run when the standard game detects an aircraft to be
 out of range)<br /><br />
 If <code class="language-plaintext highlighter-rouge">textOrFunction</code> is a string, the text is shown when a unit is 
 lost due to being out of range, with %STRING1 substitutes for the unit type’s name.  <code class="language-plaintext highlighter-rouge">title</code> provides the title for the box.</p>

<p>If <code class="language-plaintext highlighter-rouge">textOrFunction</code> is a <code class="language-plaintext highlighter-rouge">function(unit) -&gt; void</code>, the
 function is exectued, and is trusted to generate the 
 the function is trusted to generate a suitable message.
 <br /><br /> In the Lua Scenario Template, this function is called in <code class="language-plaintext highlighter-rouge">parameters.lua</code></p>
<h3 id="outofrangemessage">
  
  
    <a href="#outofrangemessage">&#128279</a> outOfRangeMessage
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.outOfRangeMessage(unit: unitObject)
</code></pre></div></div>
<p>Shows the ‘out of range’ message for <code class="language-plaintext highlighter-rouge">unit</code>.
 The message is registered by <code class="language-plaintext highlighter-rouge">gen.setOutOfRangeMessage</code>.</p>
<h3 id="activaterangeforlandandsea">
  
  
    <a href="#activaterangeforlandandsea">&#128279</a> activateRangeForLandAndSea
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.activateRangeForLandAndSea(restoreRangeFn?: fun(unit: unitObject):boolean, applyToAI?: boolean)
</code></pre></div></div>
<p>This function makes land and sea units obey the range field in the rules.txt (if they are not 0),
the same way that air units do.  If <code class="language-plaintext highlighter-rouge">applyToAI</code> is set to true, the AI will lose units as well, but the AI isn’t programmed to respect these limitations.
<br /><br />
In the Lua Scenario Template, this function is ready to use in simpleSettings.lua.
If you’re not using the Template, then this function only works if you’ve set up the discrete events.</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">restoreRangeFn</code> — <br />This function governs when a unit’s range is restored.  It is checked when the unit enters a tile and also after the unit has been given its last order for the turn (i.e. when the unit has all movement expended and the next unit is activated, or at the end of the turn if it still has movement points e.g. if sleeping).  <br />If true, range is restored, if false range is not restored.<br />By default, range is restored in city squares and on airbases.<br />If you want to clear movement points (like for air units) do it in this function.</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">applyToAI</code> — If true, the AI’s units are lost if they go beyond their range.</p>
<h3 id="versionfunctions">
  
  
    <a href="#versionfunctions">&#128279</a> versionFunctions
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.versionFunctions(moduleTable: table, vNum: number, fileMod: boolean, moduleFileName: string)
</code></pre></div></div>
<p>Provides module with these methods<br />
<code class="language-plaintext highlighter-rouge">module:minVersion(vNumber)</code><br />
Causes an error if the module’s versionNumber is below vNumber.<br />
<code class="language-plaintext highlighter-rouge">module:recommendedVersion(vNumber)</code><br />
Prints a warning to the console if the module’s versionNumber is below vNumber.
<br />
Note: Using these methods will stop Lua Language Server from recognizing a require function.  To avoid this, use —@module “fileName” on the line above:</p>
<div class="language-lua highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">---@module "someModuleName"</span>
<span class="kd">local</span> <span class="n">someModule</span> <span class="o">=</span> <span class="nb">require</span><span class="p">(</span><span class="s2">"someModuleName"</span><span class="p">):</span><span class="n">minVersion</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
</code></pre></div></div>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">moduleTable</code> — The table that has the module functions.</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">vNum</code> — the module’s current version number</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">fileMod</code> — A boolean telling if the file has been modified by the scenario designer.  This way, the error can warn the designer that upgrading may remove some work they did.</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">moduleFileName</code> — The module’s file name.</p>
<h3 id="registereventsluaversion">
  
  
    <a href="#registereventsluaversion">&#128279</a> registerEventsLuaVersion
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.registerEventsLuaVersion(vNum: number, fileMod: boolean, regressionNumber: number)
</code></pre></div></div>
<p>In the Lua Scenario Template, this is called in events.lua, so you do not need to worry about it.
  Registers version information for the events.lua file.<br />
  versionNumber is the events.lua verison number<br />
  fileMod is a boolean that should be true if events.lua has been modified by the scenario designer<br />
  regressionNumber is incremented if events.lua has functionality removed<br /></p>
<h3 id="setmusicdirectory">
  
  
    <a href="#setmusicdirectory">&#128279</a> setMusicDirectory
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.setMusicDirectory(path: string)
</code></pre></div></div>
<p>Tells gen.playMusic to look in this directory for music files.
 In the Lua Scenario Template, the directory is <MainScenarioDirectory>\Sound</MainScenarioDirectory></p>
<h3 id="betterunitmanualwait">
  
  
    <a href="#betterunitmanualwait">&#128279</a> betterUnitManualWait
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.betterUnitManualWait()
</code></pre></div></div>
<p>Part of custom unit selection (In the Lua Scenario Template, this can be activated in simpleSettings.lua – enableCustomUnitSelection
If you’re not using the Template, add this code to the onKeyPress event:</p>
<div class="language-lua highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="k">if</span> <span class="n">civ</span><span class="p">.</span><span class="n">getActiveUnit</span><span class="p">()</span> <span class="ow">and</span> <span class="n">keyID</span> <span class="o">==</span> <span class="mi">87</span> <span class="k">then</span>
        <span class="n">gen</span><span class="p">.</span><span class="n">betterUnitManualWait</span><span class="p">()</span>
    <span class="k">end</span>
</code></pre></div></div>
<h3 id="clearmanualwait">
  
  
    <a href="#clearmanualwait">&#128279</a> clearManualWait
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.clearManualWait()
</code></pre></div></div>
<p>this empties the waitingUnits table, so that units
 will appear according to the weight function</p>
<h3 id="selectnextactiveunit">
  
  
    <a href="#selectnextactiveunit">&#128279</a> selectNextActiveUnit
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.selectNextActiveUnit(activeUnit: unitObject, source: boolean, customWeightFn: fun(unit: unitObject, activeUnit: unitObject):integer)
</code></pre></div></div>
<p>Part of custom unit selection (In the Lua Scenario Template, this can be activated in simpleSettings.lua – enableCustomUnitSelection
If you’re not using the Template, use as the first line inside the function given to <code class="language-plaintext highlighter-rouge">civ.scen.onActivateUnit(function(unit,source)--&gt;void)</code>.
The line should be
<code class="language-plaintext highlighter-rouge">gen.selectNextActiveUnit(unit,source,customWeightFn)</code>
(note: if the arguments to function(unit,source)
aren’t called ‘unit’ and ‘source’, use the actual name)</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">customWeightFn</code> — returns the “weight” of each possible unit, and selects the lowest weight to be active next</p>
<h3 id="makeclearairprotection">
  
  
    <a href="#makeclearairprotection">&#128279</a> makeClearAirProtection
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.makeClearAirProtection()
  -&gt; function
</code></pre></div></div>
<p>#gen.clearAirProtection(tile)–&gt;void
 A basic function to move air units protecting stacks
 from a tile.  See <code class="language-plaintext highlighter-rouge">gen.clearAirProtection</code> and <code class="language-plaintext highlighter-rouge">gen.clearAdjacentAirProtection</code>
 for functions to actually use.</p>
<h3 id="mineventsluaversion">
  
  
    <a href="#mineventsluaversion">&#128279</a> minEventsLuaVersion
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.minEventsLuaVersion(minVersion: number, regNum: number, fileName: string)
</code></pre></div></div>
<p>Checks that the events.lua file is up to date, so all of the module’s tie ins to the rest of the code base work properly.</p>
<h3 id="registerauthoritativedefaultrules">
  
  
    <a href="#registerauthoritativedefaultrules">&#128279</a> registerAuthoritativeDefaultRules
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.registerAuthoritativeDefaultRules(aDRTable: table)
</code></pre></div></div>
<p>This function is used to register the authoritativeDefaultRules
table from changeRules.lua to be used in the General Library.
All functions in the General Library will function appropriately
even if the authoritativeDefaultRules are never registered.</p>
<h3 id="registercustomcosmic">
  
  
    <a href="#registercustomcosmic">&#128279</a> registerCustomCosmic
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.registerCustomCosmic(cc: table)
</code></pre></div></div>
<p>This function is used to register the customCosmic functions,
so that some generalLibrary functions can use the information
registered by the customCosmic module.</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">cc</code> — The table for the customCosmic module.</p>
<h3 id="requireifavailable">
  
  
    <a href="#requireifavailable">&#128279</a> requireIfAvailable
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.requireIfAvailable(fileName: string)
  -&gt; fileFound: boolean
  2. modulePrefix: table|nil
</code></pre></div></div>
<p>Attempts to require the module called fileName
returns true, modulePrefix if the module is found
returns false, nil if no module is found
makes an error if there is a problem loading the module</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">fileName</code> — The name of the file to require</p>

<p>@<em>return</em> <code class="language-plaintext highlighter-rouge">fileFound</code> — true if the module was found, false otherwise</p>

<p>@<em>return</em> <code class="language-plaintext highlighter-rouge">modulePrefix</code> — returns the module table if it was found, or nil if not</p>
<h2 id="obsolete-functions">
  
  
    <a href="#obsolete-functions">&#128279</a> Obsolete Functions
  
  
</h2>
    

<p>These functions exist for backwards compatibility, but they’re no longer the preferred (or required) way of doing things.</p>
<h3 id="ismapflat">
  
  
    <a href="#ismapflat">&#128279</a> isMapFlat
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.isMapFlat()
  -&gt; mapIsFlat: boolean
</code></pre></div></div>
<p>gen.isMapFlat()–&gt;boolean
Returns true if the game map is flat, and false if it is round.</p>
<h3 id="ismapround">
  
  
    <a href="#ismapround">&#128279</a> isMapRound
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.isMapRound()
  -&gt; mapIsRound: boolean
</code></pre></div></div>
<p>gen.isMapRound()–&gt;boolean
Returns true if the game map is round, and false if it is flat.</p>
<h3 id="declaremapflat">
  
  
    <a href="#declaremapflat">&#128279</a> declareMapFlat
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.declareMapFlat()
</code></pre></div></div>
<p>gen.declareMapFlat()–&gt;void
 tells this module that the map should be considered flat
 for things like distances and adjacent squares
 no longer has practical effect, since above
 functions access world shape directly with TOTPP v16</p>
<h3 id="declaremapround">
  
  
    <a href="#declaremapround">&#128279</a> declareMapRound
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.declareMapRound()
</code></pre></div></div>
<p>gen.declareMapRound()–&gt;void</p>
<h3 id="setterraintype">
  
  
    <a href="#setterraintype">&#128279</a> setTerrainType
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.setTerrainType(tile: table|tileObject, terrainID: integer)
</code></pre></div></div>
<p>changes the terrain type of tile to terrainID
 have this function, so that if
 terrainType key functionality is changed, this
 function can change instead of all code everywhere</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">tile</code> — Can be:<br /><br />tileObject<br /><br />{[1]=xCoord,[2]=yCoord,[3]=zCoord}<br />Converted to civ.getTile(xCoord,yCoord,zCoord) <br /><br />{[1]=xCoord,[2]=yCoord}<br />Converted to civ.getTile(xCoord,yCoord,0)<br /><br />{x=xCoord,y=yCoord,z=zCoord}<br />Converted to civ.getTile(xCoord,yCoord,zCoord) <br /><br />{x=xCoord,y=yCoord}<br />Converted to civ.getTile(xCoord,yCoord,0)</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">terrainID</code> — the id (0-15) of the new baseTerrain type</p>
<h3 id="activate">
  
  
    <a href="#activate">&#128279</a> activate
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.activate(unit: any)
</code></pre></div></div>
<p>Deprecated.  This was written when unit:activate() did not run the civ.scen.onActivateUnit event.
 use to activate a unit.  This assumes that the ‘source’ of the activation is true
 (i.e. human generated).  Use gen.activateWithSource if false is needed (either sometimes or always)</p>
<h3 id="activatewithsource">
  
  
    <a href="#activatewithsource">&#128279</a> activateWithSource
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.activateWithSource(unit: any, source: any)
</code></pre></div></div>
<p>Deprecated.  This was written when unit:activate() did not run the civ.scen.onActivateUnit event.
 use to activate a unit and specify the source of the activation</p>
<h2 id="uncategorised">
  
  
    <a href="#uncategorised">&#128279</a> Uncategorised
  
  
</h2>
    

<p>These functions have not been assigned to a section.  Some might be new functions which have been automatically documented, but not yet assigned to a section of this page.</p>
<h3 id="cityproduction">
  
  
    <a href="#cityproduction">&#128279</a> cityProduction
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.cityProduction(city: cityObject, item: improvementObject|unitTypeObject|wonderObject)
</code></pre></div></div>
<p>Makes the <code class="language-plaintext highlighter-rouge">city</code> immediately produce the <code class="language-plaintext highlighter-rouge">item</code>.
That is, the city is given the supplied city improvement or wonder,
or a unit with the type specified.  The function registered to civ.scen.onCityProduction is also called.</p>

<p>No check is made if the production order is legal.  An item without
appropriate pre-requisites can be created, or a wonder can be moved.</p>
<h3 id="complementlist">
  
  
    <a href="#complementlist">&#128279</a> complementList
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.complementList(list: table&lt;any, any&gt;, itemIterator: fun():any)
  -&gt; table&lt;integer, any&gt;
</code></pre></div></div>
<p>Takes a table of items, and an iterator or table of all possible
 items, and returns a list of all items that are not values
 in the table.  If the iterator is a table, only the
 values in the table are considered.
 These functions might be useful:
 <code class="language-plaintext highlighter-rouge">gen.iterateUnitTypes()</code>
 <code class="language-plaintext highlighter-rouge">gen.iterateImprovements()</code>
 <code class="language-plaintext highlighter-rouge">gen.iterateWonders()</code>
 <code class="language-plaintext highlighter-rouge">gen.iterateBaseTerrain()</code>
 <code class="language-plaintext highlighter-rouge">gen.iterateTerrain()</code></p>
<h3 id="iteratetechs">
  
  
    <a href="#iteratetechs">&#128279</a> iterateTechs
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.iterateTechs()
  -&gt; fun():techObject
</code></pre></div></div>
<p>Returns an iterator for all tech objects.</p>
<h3 id="registercityproductionfunction">
  
  
    <a href="#registercityproductionfunction">&#128279</a> registerCityProductionFunction
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.registerCityProductionFunction(cityProductionFunction: fun(city: cityObject, prod: improvementObject|unitObject|wonderObject))
</code></pre></div></div>
<p>Registers the function that is called when a city produces something</p>
<h3 id="registerupdatecityvalidationinfo">
  
  
    <a href="#registerupdatecityvalidationinfo">&#128279</a> registerUpdateCityValidationInfo
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.registerUpdateCityValidationInfo(changeValidationInfo: fun(city: cityObject))
</code></pre></div></div>
<p>Registers a function that updates the validation information
for a city, to be called when a city’s owner is changed.
(This is called in cityData.lua, and will probably not be used
directly by a scenario creator.)</p>
<h3 id="registerupdateunitvalidationinfo">
  
  
    <a href="#registerupdateunitvalidationinfo">&#128279</a> registerUpdateUnitValidationInfo
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.registerUpdateUnitValidationInfo(changeValidationInfo: fun(unit: unitObject))
</code></pre></div></div>
<p>Registers a function that updates the validation information
for a unit, to be called when a unit’s owner is changed.
(This is called in unitData.lua, and will probably not be used
directly by a scenario creator.)</p>
<h3 id="sorttablekeysinascendingvalueorder">
  
  
    <a href="#sorttablekeysinascendingvalueorder">&#128279</a> sortTableKeysInAscendingValueOrder
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.sortTableKeysInAscendingValueOrder(table: table)
  -&gt; table&lt;integer, any&gt;
</code></pre></div></div>
<p>Returns an array of all the keys in the table with number values,
in increasing order, starting with the smallest value at index 1.</p>

<p>If there are multiple keys with the same value, the order of those
keys is not guaranteed.</p>

<p>Keys with non-number values are ignored.  If no key has a number value,
an empty table is returned.</p>
<h3 id="sorttablekeysindescendingvalueorder">
  
  
    <a href="#sorttablekeysindescendingvalueorder">&#128279</a> sortTableKeysInDescendingValueOrder
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.sortTableKeysInDescendingValueOrder(table: table)
  -&gt; table&lt;integer, any&gt;
</code></pre></div></div>
<p>Returns an array of all the keys in the table with number values,
in descending order, starting with the largest value at index 1.</p>

<p>If there are multiple keys with the same value, the order of those
keys is not guaranteed.</p>

<p>Keys with non-number values are ignored.  If no key has a number value,
an empty table is returned.</p>
<h3 id="transfertilecontents">
  
  
    <a href="#transfertilecontents">&#128279</a> transferTileContents
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function gen.transferTileContents(tile: tileObject, newOwner: tribeObject)
</code></pre></div></div>
<p>Changes the owner of the city and or units on the tile
to newOwner from the current owner.</p>
 -->
      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/"></data>

  <div class="wrapper">

    <div class="footer-col-wrapper">
      <div class="footer-col">
<!--        <p class="feed-subscribe">
          <a href="/feed.xml">
            <svg class="svg-icon orange">
              <use xlink:href="/assets/minima-social-icons.svg#rss"></use>
            </svg><span>Subscribe</span>
          </a>
        </p>
-->
<!--
-->
      </div>
      <div class="footer-col">
        <p>Reference materials and lessons for using Lua to program events for Civilization II: Test of Time</p>
      </div>
    </div>

    <div class="social-links">
<ul class="social-media-list">
  <li><a rel="me" href="https://github.com/ProfGarfield" target="_blank" title="ProfGarfield"><svg class="svg-icon grey"><use xlink:href="/assets/minima-social-icons.svg#github"></use></svg>ProfGarfield</a></li>
  <li><a rel="me" href="https://www.youtube.com/user/ProfCiv2" target="_blank" title="YouTube"><svg class="svg-icon grey"><use xlink:href="/assets/minima-social-icons.svg#youtube"></use></svg>ProfCiv2</a></li>
  <li><a rel="me" href="https://forums.civfanatics.com/members/prof-garfield.43783/" target="_blank" title="Civfanatics Profile"><img src="/assets/civfanatics_icon.png" class="svg-icon grey"></img>Prof. Garfield</a></li>
</ul>
</div>

  </div>

</footer>
</body>

</html>

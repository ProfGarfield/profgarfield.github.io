<!DOCTYPE html>

<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="/assets/css/style.css">
  <!--<link rel="icon" type="image/png" href="/assets/civfanatics_icon.png">-->
    <title>text</title>
    <link type="application/atom+xml" rel="alternate" href="/feed.xml" title="Lua for Civilization II" />
    <!-- Begin Jekyll SEO tag v2.8.0 -->
<title>text | Lua for Civilization II</title>
<meta name="generator" content="Jekyll v4.3.2" />
<meta property="og:title" content="text" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Reference materials and lessons for using Lua to program events for Civilization II: Test of Time" />
<meta property="og:description" content="Reference materials and lessons for using Lua to program events for Civilization II: Test of Time" />
<link rel="canonical" href="/auto_doc/text.html" />
<meta property="og:url" content="/auto_doc/text.html" />
<meta property="og:site_name" content="Lua for Civilization II" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="text" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"WebPage","description":"Reference materials and lessons for using Lua to program events for Civilization II: Test of Time","headline":"text","url":"/auto_doc/text.html"}</script>
<!-- End Jekyll SEO tag -->

</head>
<body><header class="site-header">
  <div class="wrapper">
    <!--img src="/assets/logo-cfc.png" class="center"--><a class="site-title" rel="author" href="/">Lua for Civilization II</a><nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger"><a class="page-link" href="/about/">About</a><a class="page-link" href="/auto_doc/autoIndex.html">Function Docs</a><a class="page-link" href="/executionPoints.html">Execution Points</a><a class="page-link" href="/lua_lessons/lessons_toc.html">Lua Lessons</a></div>
      </nav></div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <head><title>text.lua Documentation</title>
</head>
<article class="post">

  <header class="post-header">
    <h1 class="post-title">text</h1>
  </header>
  
  <div class="toc-div">
    <h2 class="toc-header">Contents</h2>
    <ul><li><a href="#addmultilinetexttodialog">addMultiLineTextToDialog</a></li><li><a href="#addtoarchive">addToArchive</a></li><li><a href="#anglicise">anglicise</a></li><li><a href="#checkboxmenu">checkboxMenu</a></li><li><a href="#converttabletocolumntext">convertTableToColumnText</a></li><li><a href="#coordinates">coordinates</a></li><li><a href="#copytableastext">copyTableAsText</a></li><li><a href="#deleteaiarchives">deleteAIArchives</a></li><li><a href="#displayaccumulatedmessages">displayAccumulatedMessages</a></li><li><a href="#displayarchivedmessage">displayArchivedMessage</a></li><li><a href="#displaynextopportunity">displayNextOpportunity</a></li><li><a href="#englishequivalent">englishEquivalent</a></li><li><a href="#getlinesperwindow">getLinesPerWindow</a></li><li><a href="#getshortveterantitle">getShortVeteranTitle</a></li><li><a href="#getveterantitle">getVeteranTitle</a></li><li><a href="#groupdigits">groupDigits</a></li><li><a href="#i">i</a></li><li><a href="#ilower">iLower</a></li><li><a href="#iupper">iUpper</a></li><li><a href="#initcap">initCap</a></li><li><a href="#international">international</a></li><li><a href="#ismenurecord">isMenuRecord</a></li><li><a href="#linkstate">linkState</a></li><li><a href="#lower">lower</a></li><li><a href="#lpad">lpad</a></li><li><a href="#makechoosenumbermenu">makeChooseNumberMenu</a></li><li><a href="#makereverselistnogaps">makeReverseListNoGaps</a></li><li><a href="#maketabletext">makeTableText</a></li><li><a href="#menu">menu</a></li><li><a href="#money">money</a></li><li><a href="#newmenurecord">newMenuRecord</a></li><li><a href="#nicelist">niceList</a></li><li><a href="#openarchive">openArchive</a></li><li><a href="#pad">pad</a></li><li><a href="#purgearchive">purgeArchive</a></li><li><a href="#registerdictionary">registerDictionary</a></li><li><a href="#registerunitsimage">registerUnitsImage</a></li><li><a href="#rpad">rpad</a></li><li><a href="#setdigitgroupseparator">setDigitGroupSeparator</a></li><li><a href="#setimagetable">setImageTable</a></li><li><a href="#setlinesperwindow">setLinesPerWindow</a></li><li><a href="#setmoney">setMoney</a></li><li><a href="#setshortveterantitle">setShortVeteranTitle</a></li><li><a href="#setveterantitle">setVeteranTitle</a></li><li><a href="#simple">simple</a></li><li><a href="#simpletabtabletotext">simpleTabTableToText</a></li><li><a href="#simpletabulation">simpleTabulation</a></li><li><a href="#stateimagereference">stateImageReference</a></li><li><a href="#substitute">substitute</a></li><li><a href="#tabulationmenu">tabulationMenu</a></li><li><a href="#tabulationwithoptions">tabulationWithOptions</a></li><li><a href="#toimage">toImage</a></li><li><a href="#tostateimage">toStateImage</a></li><li><a href="#unittypeimage">unitTypeImage</a></li><li><a href="#upper">upper</a></li></ul></div>  
  
  <div class="post-content">
    <h1 id="text">
  
  
    text <a href="#text"><span class="self-link">&#128279</span></a>
  
  
</h1>
    

<p>The text module provides functions for displaying text boxes and menus.  It also provides code for manipulating strings, though
these are primarily useful to make messages that other functions
in the module will display.</p>

<p>The Civfanatics users <a href="https://forums.civfanatics.com/members/knighttime.21777/">Knighttime</a> and <a href="https://forums.civfanatics.com/members/pablostuka.14725/">Pablostuka</a> have contributed functionality to this module.</p>
<h3 id="addmultilinetexttodialog">
  
  
    addMultiLineTextToDialog <a href="#addmultilinetexttodialog"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function text.addMultiLineTextToDialog(string: string, dialog: dialogObject)
</code></pre></div></div>
<p>Adds some text to the dialog object, in such a way that the
character sequence \n^ will cause a line break when the
dialog is displayed.</p>
<h3 id="addtoarchive">
  
  
    addToArchive <a href="#addtoarchive"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function text.addToArchive(tribeID: integer|tribeObject, messageBody: string, messageTitle: string, archiveTitle: string, imageInfo?: string|table|imageObject)
</code></pre></div></div>
<p>Adds a message to a tribe’s archive</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">tribeID</code> — The tribe for whom the message should be added to the archive.</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">messageBody</code> — The message to be displayed in the archive.</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">messageTitle</code> — The title of the text box of the message.</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">archiveTitle</code> — The title of the message in the archive menu.</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">imageInfo</code> — The image to show in the text box.  Defaults to not showing an image.<br /><br />An <code class="language-plaintext highlighter-rouge">imageInfo</code> is one of the following:<br /><br />An <code class="language-plaintext highlighter-rouge">imageObject</code>. <br /><br />A <code class="language-plaintext highlighter-rouge">table</code> such that the first 5 values (some of which can be nil) are valid arguments for <code class="language-plaintext highlighter-rouge">civ.ui.loadImage</code>.<br /><br />A <code class="language-plaintext highlighter-rouge">string</code> that is the key corresponding to an <code class="language-plaintext highlighter-rouge">imageObject</code> in the <code class="language-plaintext highlighter-rouge">imageTable</code> registered by <code class="language-plaintext highlighter-rouge">text.setImageTable</code>.</p>
<h3 id="anglicise">
  
  
    anglicise <a href="#anglicise"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function text.anglicise(str: any)
  -&gt; string
</code></pre></div></div>
<p>text.anglicise(string) –&gt; string
  replaces international characters with English equivalents
  Intended for constructing object.lua file, but might have
  other uses</p>
<h3 id="checkboxmenu">
  
  
    checkboxMenu <a href="#checkboxmenu"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>text.checkboxMenu --&gt; function
</code></pre></div></div>
<h3 id="converttabletocolumntext">
  
  
    convertTableToColumnText <a href="#converttabletocolumntext"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>text.convertTableToColumnText --&gt; function
</code></pre></div></div>
<h3 id="coordinates">
  
  
    coordinates <a href="#coordinates"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>text.coordinates --&gt; function
</code></pre></div></div>
<h3 id="copytableastext">
  
  
    copyTableAsText <a href="#copytableastext"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>text.copyTableAsText --&gt; function
</code></pre></div></div>
<h3 id="deleteaiarchives">
  
  
    deleteAIArchives <a href="#deleteaiarchives"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function text.deleteAIArchives()
</code></pre></div></div>
<p>Deletes all messages saved in archives owned by AI Tribes</p>
<h3 id="displayaccumulatedmessages">
  
  
    displayAccumulatedMessages <a href="#displayaccumulatedmessages"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function text.displayAccumulatedMessages()
</code></pre></div></div>
<p>Displays to the current player all messages that were to be displayed
at the next opportunity, then either archives or deletes the messages.</p>

<p>If the player is an AI, the messages will not be displayed, unless the broadcast parameter was true.</p>

<p>In the Lua Scenario Template, this is in the onCityProcessingComplete 
execution point, and the scenario designer should not need to call it.</p>
<h3 id="displayarchivedmessage">
  
  
    displayArchivedMessage <a href="#displayarchivedmessage"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>text.displayArchivedMessage --&gt; function
</code></pre></div></div>
<h3 id="displaynextopportunity">
  
  
    displayNextOpportunity <a href="#displaynextopportunity"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function text.displayNextOpportunity(tribes: integer|table&lt;any, integer|tribeObject&gt;|tribeObject, messageBody: string, messageTitle?: string, archiveTitle?: string, imageInfo?: string|table|imageObject, broadcast?: boolean)
</code></pre></div></div>
<p>Displays a message to a tribe or tribes at the next possible opportunity,
either immediately (if the tribe is active), or during the onCityProcessingComplete execution point.</p>

<p>If an archive title is specified, the message will be added to the tribe’s archive after it is shown.</p>

<p>Note: For backwards compatibility, the order of the last two arguments can be reversed.  The function will figure it out.</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">tribes</code> — The tribe or tribes to whom the message should be displayed.  Integers reference the tribe’s ID.</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">messageBody</code> — The message to be displayed.</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">messageTitle</code> — The title of the text box of the message.</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">archiveTitle</code> — The title of the message in the archive menu.  If nil, the message will not be added to the archive.</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">imageInfo</code> — The image to show in the text box.  Defaults to not showing an image.<br /><br />An <code class="language-plaintext highlighter-rouge">imageInfo</code> is one of the following:<br /><br />An <code class="language-plaintext highlighter-rouge">imageObject</code>. <br /><br />A <code class="language-plaintext highlighter-rouge">table</code> such that the first 5 values (some of which can be nil) are valid arguments for <code class="language-plaintext highlighter-rouge">civ.ui.loadImage</code>.<br /><br />A <code class="language-plaintext highlighter-rouge">string</code> that is the key corresponding to an <code class="language-plaintext highlighter-rouge">imageObject</code> in the <code class="language-plaintext highlighter-rouge">imageTable</code> registered by <code class="language-plaintext highlighter-rouge">text.setImageTable</code>.</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">broadcast</code> — If true, the text box with the message will be displayed even if the tribe is controlled by an AI.  If false or absent, it will only be displayed if the tribe is controlled by a human.</p>
<h3 id="englishequivalent">
  
  
    englishEquivalent <a href="#englishequivalent"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>text.englishEquivalent --&gt; table
</code></pre></div></div>
<h3 id="getlinesperwindow">
  
  
    getLinesPerWindow <a href="#getlinesperwindow"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function text.getLinesPerWindow()
  -&gt; integer
</code></pre></div></div>
<p>Returns the current setting for the number of lines per text box,
which functions in this module use to determine when to break a
message or menu into multiple text boxes.</p>
<h3 id="getshortveterantitle">
  
  
    getShortVeteranTitle <a href="#getshortveterantitle"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>text.getShortVeteranTitle --&gt; function
</code></pre></div></div>
<h3 id="getveterantitle">
  
  
    getVeteranTitle <a href="#getveterantitle"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>text.getVeteranTitle --&gt; function
</code></pre></div></div>
<h3 id="groupdigits">
  
  
    groupDigits <a href="#groupdigits"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>text.groupDigits --&gt; function
</code></pre></div></div>
<h3 id="i">
  
  
    i <a href="#i"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>text.i --&gt; function
</code></pre></div></div>
<h3 id="ilower">
  
  
    iLower <a href="#ilower"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>text.iLower --&gt; function
</code></pre></div></div>
<h3 id="iupper">
  
  
    iUpper <a href="#iupper"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>text.iUpper --&gt; function
</code></pre></div></div>
<h3 id="initcap">
  
  
    initCap <a href="#initcap"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>text.initCap --&gt; function
</code></pre></div></div>
<h3 id="international">
  
  
    international <a href="#international"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>text.international --&gt; function
</code></pre></div></div>
<h3 id="ismenurecord">
  
  
    isMenuRecord <a href="#ismenurecord"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function text.isMenuRecord(item: any)
</code></pre></div></div>
<p>text.isMenuRecord(item) –&gt; bool
      returns true if item is a menuRecord, and false otherwise</p>
<h3 id="linkstate">
  
  
    linkState <a href="#linkstate"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>text.linkState --&gt; function
</code></pre></div></div>
<h3 id="lower">
  
  
    lower <a href="#lower"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>text.lower --&gt; function
</code></pre></div></div>
<h3 id="lpad">
  
  
    lpad <a href="#lpad"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>text.lpad --&gt; function
</code></pre></div></div>
<h3 id="makechoosenumbermenu">
  
  
    makeChooseNumberMenu <a href="#makechoosenumbermenu"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function text.makeChooseNumberMenu(increments: any, extremes: any, selectionKey: any, nextMenu: any, goBackOptions: any, menuName: any, plusOptionWrapper: any, minusOptionWrapper: any, confirmOptionWrapper: any)
  -&gt; unknown
</code></pre></div></div>
<h3 id="makereverselistnogaps">
  
  
    makeReverseListNoGaps <a href="#makereverselistnogaps"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>text.makeReverseListNoGaps --&gt; function
</code></pre></div></div>
<h3 id="maketabletext">
  
  
    makeTableText <a href="#maketabletext"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>text.makeTableText --&gt; function
</code></pre></div></div>
<h3 id="menu">
  
  
    menu <a href="#menu"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function text.menu(menuTable: table&lt;integer, string&gt;, menuText: string, menuTitle?: string, canCancel?: boolean, imageInfo?: string|table|imageObject, dimensions?: { width: integer|nil, height: integer|nil }, menuPage?: integer)
  -&gt; choice: integer
  2. menuPage: integer
</code></pre></div></div>
<p>This function displays a menu of options to the user, as defined by the menuTable.  The user can choose one of the options, and may or may not be given the option to “cancel” as a choice.  The function returns the index of the menuTable entry that was chosen, or 0 if the user cancels the menu.  If the menu has multiple pages, the function returns the page where the choice was made.</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">menuTable</code> — A table of menu options.  The keys are the numbers that will be returned when the option is chosen.  The values are the text to display for each option.</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">menuText</code> — The text to display above the menu options.</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">menuTitle</code> — The title of the menu’s text box.  Defaults to “”.</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">canCancel</code> — Whether or not the menu should have a “Cancel” option, which returns 0.  Defaults to false.</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">dimensions</code> — The dimensions of the menu text box.  If not specified, the game will choose.</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">menuPage</code> — The page of the menu to start on.  Defaults to 1.</p>

<p>@<em>return</em> <code class="language-plaintext highlighter-rouge">choice</code> — The index of the menuTable entry that was chosen.</p>

<p>@<em>return</em> <code class="language-plaintext highlighter-rouge">menuPage</code> — The page of the menu where the choice was made.  This could be useful if you want to be able to re-open the menu on the same page.</p>
<h3 id="money">
  
  
    money <a href="#money"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>text.money --&gt; function
</code></pre></div></div>
<h3 id="newmenurecord">
  
  
    newMenuRecord <a href="#newmenurecord"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function text.newMenuRecord(specTable: any)
</code></pre></div></div>
<p>text.newMenuRecord(specTable) –&gt; menuRecord
      converts a specification table for a menuRecord
      into a menuRecord</p>
<h3 id="nicelist">
  
  
    niceList <a href="#nicelist"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>text.niceList --&gt; function
</code></pre></div></div>
<h3 id="openarchive">
  
  
    openArchive <a href="#openarchive"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>text.openArchive --&gt; function
</code></pre></div></div>
<h3 id="pad">
  
  
    pad <a href="#pad"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>text.pad --&gt; function
</code></pre></div></div>
<h3 id="purgearchive">
  
  
    purgeArchive <a href="#purgearchive"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function text.purgeArchive(tribeOrID: integer|tribeObject)
</code></pre></div></div>
<p>Purges (deletes) all archived messages that have been marked for purging
by the tribe.</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">tribeOrID</code> — The tribe or tribe ID for whom to purge the archive.</p>
<h3 id="registerdictionary">
  
  
    registerDictionary <a href="#registerdictionary"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function text.registerDictionary(dictionary: table)
</code></pre></div></div>
<p>Registers a ‘dictionary’ table with the text module.  The dictionary table
should have the following format:</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>dictionary[anyKey] = {singular=singularVersionOfWord, plural=pluralVersionOfWord, an=boolean}
</code></pre></div></div>
<p>an = true if it is ‘an singularVersionOfWord’ and false/nil if it is ‘a singularVersionOfWord’</p>

<p>The keys in the dictionary table do not matter.</p>

<p>The dictionary table is used to enhance the functionality of text.substitute.</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">dictionary</code> — A table with the above format</p>
<h3 id="registerunitsimage">
  
  
    registerUnitsImage <a href="#registerunitsimage"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function text.registerUnitsImage(filename: any)
</code></pre></div></div>
<p>text.registerUnitsImage(filename)
      registers the name of the units image file
      to be used for text.unitTypeImage</p>
<h3 id="rpad">
  
  
    rpad <a href="#rpad"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>text.rpad --&gt; function
</code></pre></div></div>
<h3 id="setdigitgroupseparator">
  
  
    setDigitGroupSeparator <a href="#setdigitgroupseparator"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>text.setDigitGroupSeparator --&gt; function
</code></pre></div></div>
<h3 id="setimagetable">
  
  
    setImageTable <a href="#setimagetable"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function text.setImageTable(table: table, tableName: string)
</code></pre></div></div>
<p>This function lets you specify a table that is being used to store
imageObjects.  Some functions in this module will allow you to
specify an imageObject by providing a (string) table key.<br />
This function specifies the table that will be used to look up
the image.</p>

<p>If you generate an object.lua file using the script included
in the Lua Scenario Template, then the imageTable will be
set to the object file.</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">table</code> — A table where images can be stored and looked up.</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">tableName</code> — A name for the table to use in error messages.</p>
<h3 id="setlinesperwindow">
  
  
    setLinesPerWindow <a href="#setlinesperwindow"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function text.setLinesPerWindow(numberOfLines: integer)
</code></pre></div></div>
<p>Set the number of lines per text box for some functions provided
 by this module (especially menus).
 By default, there is a setting in the configuration module
 that will allow the player to change this setting.</p>
<h3 id="setmoney">
  
  
    setMoney <a href="#setmoney"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>text.setMoney --&gt; function
</code></pre></div></div>
<h3 id="setshortveterantitle">
  
  
    setShortVeteranTitle <a href="#setshortveterantitle"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>text.setShortVeteranTitle --&gt; function
</code></pre></div></div>
<h3 id="setveterantitle">
  
  
    setVeteranTitle <a href="#setveterantitle"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>text.setVeteranTitle --&gt; function
</code></pre></div></div>
<h3 id="simple">
  
  
    simple <a href="#simple"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function text.simple(stringOrTable: string|string[], boxTitle?: string, imageInfo?: string|table|imageObject)
</code></pre></div></div>
<p>Shows a text box with the message and title, splitting
into multiple text boxes if the string is very long.
If a table of strings is input, each string is shown in
order starting at tableOfStrings[1].  If an imageInfo
is provided, the image is shown in the text box.</p>

<p>The function determines how many lines of text are in the
message by counting newline characters (note that newline
characters by themselves do not cause a line break in the
text box).  If the message has too many lines, as determined
by the variable <code class="language-plaintext highlighter-rouge">linesPerWindow</code>, then the message is split
at a newline character.  (<code class="language-plaintext highlighter-rouge">linesPerWindow</code> can be changed
using text.setLinesPerWindow – by default, the player can
change it using the configuration module.)</p>

<p>To create a line break in the text box, use the character
sequence \n^ (newline, caret).</p>

<p>If you wish to break up a message into two text boxes
at a particular point, use the sequence of characters
‘%PAGEBREAK’ (not including quote marks).</p>

<p>If you wish to center a line of text, use the sequence
\n^^ (newline, caret, caret).</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">boxTitle</code> — The title for the text box.  Defaults to “”</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">imageInfo</code> — The image to show in the text box.  Defaults to not showing an image.<br /><br />An <code class="language-plaintext highlighter-rouge">imageInfo</code> is one of the following:<br /><br />An <code class="language-plaintext highlighter-rouge">imageObject</code>. <br /><br />A <code class="language-plaintext highlighter-rouge">table</code> such that the first 5 values (some of which can be nil) are valid arguments for <code class="language-plaintext highlighter-rouge">civ.ui.loadImage</code>.<br /><br />A <code class="language-plaintext highlighter-rouge">string</code> that is the key corresponding to an <code class="language-plaintext highlighter-rouge">imageObject</code> in the <code class="language-plaintext highlighter-rouge">imageTable</code> registered by <code class="language-plaintext highlighter-rouge">text.setImageTable</code>.</p>
<h3 id="simpletabtabletotext">
  
  
    simpleTabTableToText <a href="#simpletabtabletotext"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>text.simpleTabTableToText --&gt; function
</code></pre></div></div>
<h3 id="simpletabulation">
  
  
    simpleTabulation <a href="#simpletabulation"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>text.simpleTabulation --&gt; function
</code></pre></div></div>
<h3 id="stateimagereference">
  
  
    stateImageReference <a href="#stateimagereference"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>text.stateImageReference --&gt; function
</code></pre></div></div>
<h3 id="substitute">
  
  
    substitute <a href="#substitute"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function text.substitute(rawText: string, substitutionTable: table&lt;integer, any&gt;)
  -&gt; string
</code></pre></div></div>
<p>Substitutes values from the substitutionTable into the rawText, based on 
tags in the rawText.</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">substitutionTable</code> — the values associated with the keys 0-9 are eligible to be used for substitution.</p>
<h3 id="tabulationmenu">
  
  
    tabulationMenu <a href="#tabulationmenu"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>text.tabulationMenu --&gt; function
</code></pre></div></div>
<h3 id="tabulationwithoptions">
  
  
    tabulationWithOptions <a href="#tabulationwithoptions"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>text.tabulationWithOptions --&gt; function
</code></pre></div></div>
<h3 id="toimage">
  
  
    toImage <a href="#toimage"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function text.toImage(input: string|table|imageObject)
  -&gt; imageObject
</code></pre></div></div>
<p>Converts an <code class="language-plaintext highlighter-rouge">imageInfo</code> to an <code class="language-plaintext highlighter-rouge">imageObject</code>.</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">input</code> — An <code class="language-plaintext highlighter-rouge">imageInfo</code> is one of the following:<br /><br />An <code class="language-plaintext highlighter-rouge">imageObject</code>. <br /><br />A <code class="language-plaintext highlighter-rouge">table</code> such that the first 5 values (some of which can be nil) are valid arguments for <code class="language-plaintext highlighter-rouge">civ.ui.loadImage</code>.<br /><br />A <code class="language-plaintext highlighter-rouge">string</code> that is the key corresponding to an <code class="language-plaintext highlighter-rouge">imageObject</code> in the <code class="language-plaintext highlighter-rouge">imageTable</code> registered by <code class="language-plaintext highlighter-rouge">text.setImageTable</code>.</p>
<h3 id="tostateimage">
  
  
    toStateImage <a href="#tostateimage"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function text.toStateImage(imageInfo: string|table|imageObject)
  -&gt; boolean|string|number|table&lt;string|number, boolean|string|number|table&gt;
</code></pre></div></div>
<p>Takes an imageInfo and returns a string or table that can be saved in the state table and used to recover the image later.</p>

<p>If the imageInfo is a table of arguments for civ.ui.loadImage, then the table is returned.  An error is thrown if civ.ui.loadImage doesn’t return a valid imageObject when called with those arguments.</p>

<p>If the imageInfo is a string, then the string is returned if it is a key for an image in the <code class="language-plaintext highlighter-rouge">imageTable</code> (registered by <code class="language-plaintext highlighter-rouge">text.setImageTable</code>).  An error is thrown if the string is not a key for an image in the <code class="language-plaintext highlighter-rouge">imageTable</code>.</p>

<p>If the imageInfo is an imageObject, then the image is searched for in the <code class="language-plaintext highlighter-rouge">imageTable</code>, and the key for that image is returned.  If the image is not found in the <code class="language-plaintext highlighter-rouge">imageTable</code>, then an error is thrown.</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">imageInfo</code> — An <code class="language-plaintext highlighter-rouge">imageInfo</code> is one of the following:<br /><br />An <code class="language-plaintext highlighter-rouge">imageObject</code>. <br /><br />A <code class="language-plaintext highlighter-rouge">table</code> such that the first 5 values (some of which can be nil) are valid arguments for <code class="language-plaintext highlighter-rouge">civ.ui.loadImage</code>.<br /><br />A <code class="language-plaintext highlighter-rouge">string</code> that is the key corresponding to an <code class="language-plaintext highlighter-rouge">imageObject</code> in the <code class="language-plaintext highlighter-rouge">imageTable</code> registered by <code class="language-plaintext highlighter-rouge">text.setImageTable</code>.</p>
<h3 id="unittypeimage">
  
  
    unitTypeImage <a href="#unittypeimage"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function text.unitTypeImage(unitTypeOrID: any)
  -&gt; unknown
</code></pre></div></div>
<p>text.unitTypeImage(unitTypeOrID) –&gt; imageObject
      provides the image of a unit, found in the file provided to
      text.registerUnitsImage, or nil if there is no image</p>
<h3 id="upper">
  
  
    upper <a href="#upper"><span class="self-link">&#128279</span></a>
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>text.upper --&gt; function
</code></pre></div></div>

  </div>
</article>
<!--
    <h1 id="text">
  
  
    <a href="#text">&#128279</a> text
  
  
</h1>
    

<p>The text module provides functions for displaying text boxes and menus.  It also provides code for manipulating strings, though
these are primarily useful to make messages that other functions
in the module will display.</p>

<p>The Civfanatics users <a href="https://forums.civfanatics.com/members/knighttime.21777/">Knighttime</a> and <a href="https://forums.civfanatics.com/members/pablostuka.14725/">Pablostuka</a> have contributed functionality to this module.</p>
<h3 id="addmultilinetexttodialog">
  
  
    <a href="#addmultilinetexttodialog">&#128279</a> addMultiLineTextToDialog
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function text.addMultiLineTextToDialog(string: string, dialog: dialogObject)
</code></pre></div></div>
<p>Adds some text to the dialog object, in such a way that the
character sequence \n^ will cause a line break when the
dialog is displayed.</p>
<h3 id="addtoarchive">
  
  
    <a href="#addtoarchive">&#128279</a> addToArchive
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function text.addToArchive(tribeID: integer|tribeObject, messageBody: string, messageTitle: string, archiveTitle: string, imageInfo?: string|table|imageObject)
</code></pre></div></div>
<p>Adds a message to a tribe’s archive</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">tribeID</code> — The tribe for whom the message should be added to the archive.</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">messageBody</code> — The message to be displayed in the archive.</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">messageTitle</code> — The title of the text box of the message.</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">archiveTitle</code> — The title of the message in the archive menu.</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">imageInfo</code> — The image to show in the text box.  Defaults to not showing an image.<br /><br />An <code class="language-plaintext highlighter-rouge">imageInfo</code> is one of the following:<br /><br />An <code class="language-plaintext highlighter-rouge">imageObject</code>. <br /><br />A <code class="language-plaintext highlighter-rouge">table</code> such that the first 5 values (some of which can be nil) are valid arguments for <code class="language-plaintext highlighter-rouge">civ.ui.loadImage</code>.<br /><br />A <code class="language-plaintext highlighter-rouge">string</code> that is the key corresponding to an <code class="language-plaintext highlighter-rouge">imageObject</code> in the <code class="language-plaintext highlighter-rouge">imageTable</code> registered by <code class="language-plaintext highlighter-rouge">text.setImageTable</code>.</p>
<h3 id="anglicise">
  
  
    <a href="#anglicise">&#128279</a> anglicise
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function text.anglicise(str: any)
  -&gt; string
</code></pre></div></div>
<p>text.anglicise(string) –&gt; string
  replaces international characters with English equivalents
  Intended for constructing object.lua file, but might have
  other uses</p>
<h3 id="checkboxmenu">
  
  
    <a href="#checkboxmenu">&#128279</a> checkboxMenu
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>text.checkboxMenu --&gt; function
</code></pre></div></div>
<h3 id="converttabletocolumntext">
  
  
    <a href="#converttabletocolumntext">&#128279</a> convertTableToColumnText
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>text.convertTableToColumnText --&gt; function
</code></pre></div></div>
<h3 id="coordinates">
  
  
    <a href="#coordinates">&#128279</a> coordinates
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>text.coordinates --&gt; function
</code></pre></div></div>
<h3 id="copytableastext">
  
  
    <a href="#copytableastext">&#128279</a> copyTableAsText
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>text.copyTableAsText --&gt; function
</code></pre></div></div>
<h3 id="deleteaiarchives">
  
  
    <a href="#deleteaiarchives">&#128279</a> deleteAIArchives
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function text.deleteAIArchives()
</code></pre></div></div>
<p>Deletes all messages saved in archives owned by AI Tribes</p>
<h3 id="displayaccumulatedmessages">
  
  
    <a href="#displayaccumulatedmessages">&#128279</a> displayAccumulatedMessages
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function text.displayAccumulatedMessages()
</code></pre></div></div>
<p>Displays to the current player all messages that were to be displayed
at the next opportunity, then either archives or deletes the messages.</p>

<p>If the player is an AI, the messages will not be displayed, unless the broadcast parameter was true.</p>

<p>In the Lua Scenario Template, this is in the onCityProcessingComplete 
execution point, and the scenario designer should not need to call it.</p>
<h3 id="displayarchivedmessage">
  
  
    <a href="#displayarchivedmessage">&#128279</a> displayArchivedMessage
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>text.displayArchivedMessage --&gt; function
</code></pre></div></div>
<h3 id="displaynextopportunity">
  
  
    <a href="#displaynextopportunity">&#128279</a> displayNextOpportunity
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function text.displayNextOpportunity(tribes: integer|table&lt;any, integer|tribeObject&gt;|tribeObject, messageBody: string, messageTitle?: string, archiveTitle?: string, imageInfo?: string|table|imageObject, broadcast?: boolean)
</code></pre></div></div>
<p>Displays a message to a tribe or tribes at the next possible opportunity,
either immediately (if the tribe is active), or during the onCityProcessingComplete execution point.</p>

<p>If an archive title is specified, the message will be added to the tribe’s archive after it is shown.</p>

<p>Note: For backwards compatibility, the order of the last two arguments can be reversed.  The function will figure it out.</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">tribes</code> — The tribe or tribes to whom the message should be displayed.  Integers reference the tribe’s ID.</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">messageBody</code> — The message to be displayed.</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">messageTitle</code> — The title of the text box of the message.</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">archiveTitle</code> — The title of the message in the archive menu.  If nil, the message will not be added to the archive.</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">imageInfo</code> — The image to show in the text box.  Defaults to not showing an image.<br /><br />An <code class="language-plaintext highlighter-rouge">imageInfo</code> is one of the following:<br /><br />An <code class="language-plaintext highlighter-rouge">imageObject</code>. <br /><br />A <code class="language-plaintext highlighter-rouge">table</code> such that the first 5 values (some of which can be nil) are valid arguments for <code class="language-plaintext highlighter-rouge">civ.ui.loadImage</code>.<br /><br />A <code class="language-plaintext highlighter-rouge">string</code> that is the key corresponding to an <code class="language-plaintext highlighter-rouge">imageObject</code> in the <code class="language-plaintext highlighter-rouge">imageTable</code> registered by <code class="language-plaintext highlighter-rouge">text.setImageTable</code>.</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">broadcast</code> — If true, the text box with the message will be displayed even if the tribe is controlled by an AI.  If false or absent, it will only be displayed if the tribe is controlled by a human.</p>
<h3 id="englishequivalent">
  
  
    <a href="#englishequivalent">&#128279</a> englishEquivalent
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>text.englishEquivalent --&gt; table
</code></pre></div></div>
<h3 id="getlinesperwindow">
  
  
    <a href="#getlinesperwindow">&#128279</a> getLinesPerWindow
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function text.getLinesPerWindow()
  -&gt; integer
</code></pre></div></div>
<p>Returns the current setting for the number of lines per text box,
which functions in this module use to determine when to break a
message or menu into multiple text boxes.</p>
<h3 id="getshortveterantitle">
  
  
    <a href="#getshortveterantitle">&#128279</a> getShortVeteranTitle
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>text.getShortVeteranTitle --&gt; function
</code></pre></div></div>
<h3 id="getveterantitle">
  
  
    <a href="#getveterantitle">&#128279</a> getVeteranTitle
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>text.getVeteranTitle --&gt; function
</code></pre></div></div>
<h3 id="groupdigits">
  
  
    <a href="#groupdigits">&#128279</a> groupDigits
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>text.groupDigits --&gt; function
</code></pre></div></div>
<h3 id="i">
  
  
    <a href="#i">&#128279</a> i
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>text.i --&gt; function
</code></pre></div></div>
<h3 id="ilower">
  
  
    <a href="#ilower">&#128279</a> iLower
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>text.iLower --&gt; function
</code></pre></div></div>
<h3 id="iupper">
  
  
    <a href="#iupper">&#128279</a> iUpper
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>text.iUpper --&gt; function
</code></pre></div></div>
<h3 id="initcap">
  
  
    <a href="#initcap">&#128279</a> initCap
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>text.initCap --&gt; function
</code></pre></div></div>
<h3 id="international">
  
  
    <a href="#international">&#128279</a> international
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>text.international --&gt; function
</code></pre></div></div>
<h3 id="ismenurecord">
  
  
    <a href="#ismenurecord">&#128279</a> isMenuRecord
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function text.isMenuRecord(item: any)
</code></pre></div></div>
<p>text.isMenuRecord(item) –&gt; bool
      returns true if item is a menuRecord, and false otherwise</p>
<h3 id="linkstate">
  
  
    <a href="#linkstate">&#128279</a> linkState
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>text.linkState --&gt; function
</code></pre></div></div>
<h3 id="lower">
  
  
    <a href="#lower">&#128279</a> lower
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>text.lower --&gt; function
</code></pre></div></div>
<h3 id="lpad">
  
  
    <a href="#lpad">&#128279</a> lpad
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>text.lpad --&gt; function
</code></pre></div></div>
<h3 id="makechoosenumbermenu">
  
  
    <a href="#makechoosenumbermenu">&#128279</a> makeChooseNumberMenu
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function text.makeChooseNumberMenu(increments: any, extremes: any, selectionKey: any, nextMenu: any, goBackOptions: any, menuName: any, plusOptionWrapper: any, minusOptionWrapper: any, confirmOptionWrapper: any)
  -&gt; unknown
</code></pre></div></div>
<h3 id="makereverselistnogaps">
  
  
    <a href="#makereverselistnogaps">&#128279</a> makeReverseListNoGaps
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>text.makeReverseListNoGaps --&gt; function
</code></pre></div></div>
<h3 id="maketabletext">
  
  
    <a href="#maketabletext">&#128279</a> makeTableText
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>text.makeTableText --&gt; function
</code></pre></div></div>
<h3 id="menu">
  
  
    <a href="#menu">&#128279</a> menu
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function text.menu(menuTable: table&lt;integer, string&gt;, menuText: string, menuTitle?: string, canCancel?: boolean, imageInfo?: string|table|imageObject, dimensions?: { width: integer|nil, height: integer|nil }, menuPage?: integer)
  -&gt; choice: integer
  2. menuPage: integer
</code></pre></div></div>
<p>This function displays a menu of options to the user, as defined by the menuTable.  The user can choose one of the options, and may or may not be given the option to “cancel” as a choice.  The function returns the index of the menuTable entry that was chosen, or 0 if the user cancels the menu.  If the menu has multiple pages, the function returns the page where the choice was made.</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">menuTable</code> — A table of menu options.  The keys are the numbers that will be returned when the option is chosen.  The values are the text to display for each option.</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">menuText</code> — The text to display above the menu options.</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">menuTitle</code> — The title of the menu’s text box.  Defaults to “”.</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">canCancel</code> — Whether or not the menu should have a “Cancel” option, which returns 0.  Defaults to false.</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">dimensions</code> — The dimensions of the menu text box.  If not specified, the game will choose.</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">menuPage</code> — The page of the menu to start on.  Defaults to 1.</p>

<p>@<em>return</em> <code class="language-plaintext highlighter-rouge">choice</code> — The index of the menuTable entry that was chosen.</p>

<p>@<em>return</em> <code class="language-plaintext highlighter-rouge">menuPage</code> — The page of the menu where the choice was made.  This could be useful if you want to be able to re-open the menu on the same page.</p>
<h3 id="money">
  
  
    <a href="#money">&#128279</a> money
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>text.money --&gt; function
</code></pre></div></div>
<h3 id="newmenurecord">
  
  
    <a href="#newmenurecord">&#128279</a> newMenuRecord
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function text.newMenuRecord(specTable: any)
</code></pre></div></div>
<p>text.newMenuRecord(specTable) –&gt; menuRecord
      converts a specification table for a menuRecord
      into a menuRecord</p>
<h3 id="nicelist">
  
  
    <a href="#nicelist">&#128279</a> niceList
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>text.niceList --&gt; function
</code></pre></div></div>
<h3 id="openarchive">
  
  
    <a href="#openarchive">&#128279</a> openArchive
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>text.openArchive --&gt; function
</code></pre></div></div>
<h3 id="pad">
  
  
    <a href="#pad">&#128279</a> pad
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>text.pad --&gt; function
</code></pre></div></div>
<h3 id="purgearchive">
  
  
    <a href="#purgearchive">&#128279</a> purgeArchive
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function text.purgeArchive(tribeOrID: integer|tribeObject)
</code></pre></div></div>
<p>Purges (deletes) all archived messages that have been marked for purging
by the tribe.</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">tribeOrID</code> — The tribe or tribe ID for whom to purge the archive.</p>
<h3 id="registerdictionary">
  
  
    <a href="#registerdictionary">&#128279</a> registerDictionary
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function text.registerDictionary(dictionary: table)
</code></pre></div></div>
<p>Registers a ‘dictionary’ table with the text module.  The dictionary table
should have the following format:</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>dictionary[anyKey] = {singular=singularVersionOfWord, plural=pluralVersionOfWord, an=boolean}
</code></pre></div></div>
<p>an = true if it is ‘an singularVersionOfWord’ and false/nil if it is ‘a singularVersionOfWord’</p>

<p>The keys in the dictionary table do not matter.</p>

<p>The dictionary table is used to enhance the functionality of text.substitute.</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">dictionary</code> — A table with the above format</p>
<h3 id="registerunitsimage">
  
  
    <a href="#registerunitsimage">&#128279</a> registerUnitsImage
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function text.registerUnitsImage(filename: any)
</code></pre></div></div>
<p>text.registerUnitsImage(filename)
      registers the name of the units image file
      to be used for text.unitTypeImage</p>
<h3 id="rpad">
  
  
    <a href="#rpad">&#128279</a> rpad
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>text.rpad --&gt; function
</code></pre></div></div>
<h3 id="setdigitgroupseparator">
  
  
    <a href="#setdigitgroupseparator">&#128279</a> setDigitGroupSeparator
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>text.setDigitGroupSeparator --&gt; function
</code></pre></div></div>
<h3 id="setimagetable">
  
  
    <a href="#setimagetable">&#128279</a> setImageTable
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function text.setImageTable(table: table, tableName: string)
</code></pre></div></div>
<p>This function lets you specify a table that is being used to store
imageObjects.  Some functions in this module will allow you to
specify an imageObject by providing a (string) table key.<br />
This function specifies the table that will be used to look up
the image.</p>

<p>If you generate an object.lua file using the script included
in the Lua Scenario Template, then the imageTable will be
set to the object file.</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">table</code> — A table where images can be stored and looked up.</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">tableName</code> — A name for the table to use in error messages.</p>
<h3 id="setlinesperwindow">
  
  
    <a href="#setlinesperwindow">&#128279</a> setLinesPerWindow
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function text.setLinesPerWindow(numberOfLines: integer)
</code></pre></div></div>
<p>Set the number of lines per text box for some functions provided
 by this module (especially menus).
 By default, there is a setting in the configuration module
 that will allow the player to change this setting.</p>
<h3 id="setmoney">
  
  
    <a href="#setmoney">&#128279</a> setMoney
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>text.setMoney --&gt; function
</code></pre></div></div>
<h3 id="setshortveterantitle">
  
  
    <a href="#setshortveterantitle">&#128279</a> setShortVeteranTitle
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>text.setShortVeteranTitle --&gt; function
</code></pre></div></div>
<h3 id="setveterantitle">
  
  
    <a href="#setveterantitle">&#128279</a> setVeteranTitle
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>text.setVeteranTitle --&gt; function
</code></pre></div></div>
<h3 id="simple">
  
  
    <a href="#simple">&#128279</a> simple
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function text.simple(stringOrTable: string|string[], boxTitle?: string, imageInfo?: string|table|imageObject)
</code></pre></div></div>
<p>Shows a text box with the message and title, splitting
into multiple text boxes if the string is very long.
If a table of strings is input, each string is shown in
order starting at tableOfStrings[1].  If an imageInfo
is provided, the image is shown in the text box.</p>

<p>The function determines how many lines of text are in the
message by counting newline characters (note that newline
characters by themselves do not cause a line break in the
text box).  If the message has too many lines, as determined
by the variable <code class="language-plaintext highlighter-rouge">linesPerWindow</code>, then the message is split
at a newline character.  (<code class="language-plaintext highlighter-rouge">linesPerWindow</code> can be changed
using text.setLinesPerWindow – by default, the player can
change it using the configuration module.)</p>

<p>To create a line break in the text box, use the character
sequence \n^ (newline, caret).</p>

<p>If you wish to break up a message into two text boxes
at a particular point, use the sequence of characters
‘%PAGEBREAK’ (not including quote marks).</p>

<p>If you wish to center a line of text, use the sequence
\n^^ (newline, caret, caret).</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">boxTitle</code> — The title for the text box.  Defaults to “”</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">imageInfo</code> — The image to show in the text box.  Defaults to not showing an image.<br /><br />An <code class="language-plaintext highlighter-rouge">imageInfo</code> is one of the following:<br /><br />An <code class="language-plaintext highlighter-rouge">imageObject</code>. <br /><br />A <code class="language-plaintext highlighter-rouge">table</code> such that the first 5 values (some of which can be nil) are valid arguments for <code class="language-plaintext highlighter-rouge">civ.ui.loadImage</code>.<br /><br />A <code class="language-plaintext highlighter-rouge">string</code> that is the key corresponding to an <code class="language-plaintext highlighter-rouge">imageObject</code> in the <code class="language-plaintext highlighter-rouge">imageTable</code> registered by <code class="language-plaintext highlighter-rouge">text.setImageTable</code>.</p>
<h3 id="simpletabtabletotext">
  
  
    <a href="#simpletabtabletotext">&#128279</a> simpleTabTableToText
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>text.simpleTabTableToText --&gt; function
</code></pre></div></div>
<h3 id="simpletabulation">
  
  
    <a href="#simpletabulation">&#128279</a> simpleTabulation
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>text.simpleTabulation --&gt; function
</code></pre></div></div>
<h3 id="stateimagereference">
  
  
    <a href="#stateimagereference">&#128279</a> stateImageReference
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>text.stateImageReference --&gt; function
</code></pre></div></div>
<h3 id="substitute">
  
  
    <a href="#substitute">&#128279</a> substitute
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function text.substitute(rawText: string, substitutionTable: table&lt;integer, any&gt;)
  -&gt; string
</code></pre></div></div>
<p>Substitutes values from the substitutionTable into the rawText, based on 
tags in the rawText.</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">substitutionTable</code> — the values associated with the keys 0-9 are eligible to be used for substitution.</p>
<h3 id="tabulationmenu">
  
  
    <a href="#tabulationmenu">&#128279</a> tabulationMenu
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>text.tabulationMenu --&gt; function
</code></pre></div></div>
<h3 id="tabulationwithoptions">
  
  
    <a href="#tabulationwithoptions">&#128279</a> tabulationWithOptions
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>text.tabulationWithOptions --&gt; function
</code></pre></div></div>
<h3 id="toimage">
  
  
    <a href="#toimage">&#128279</a> toImage
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function text.toImage(input: string|table|imageObject)
  -&gt; imageObject
</code></pre></div></div>
<p>Converts an <code class="language-plaintext highlighter-rouge">imageInfo</code> to an <code class="language-plaintext highlighter-rouge">imageObject</code>.</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">input</code> — An <code class="language-plaintext highlighter-rouge">imageInfo</code> is one of the following:<br /><br />An <code class="language-plaintext highlighter-rouge">imageObject</code>. <br /><br />A <code class="language-plaintext highlighter-rouge">table</code> such that the first 5 values (some of which can be nil) are valid arguments for <code class="language-plaintext highlighter-rouge">civ.ui.loadImage</code>.<br /><br />A <code class="language-plaintext highlighter-rouge">string</code> that is the key corresponding to an <code class="language-plaintext highlighter-rouge">imageObject</code> in the <code class="language-plaintext highlighter-rouge">imageTable</code> registered by <code class="language-plaintext highlighter-rouge">text.setImageTable</code>.</p>
<h3 id="tostateimage">
  
  
    <a href="#tostateimage">&#128279</a> toStateImage
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function text.toStateImage(imageInfo: string|table|imageObject)
  -&gt; boolean|string|number|table&lt;string|number, boolean|string|number|table&gt;
</code></pre></div></div>
<p>Takes an imageInfo and returns a string or table that can be saved in the state table and used to recover the image later.</p>

<p>If the imageInfo is a table of arguments for civ.ui.loadImage, then the table is returned.  An error is thrown if civ.ui.loadImage doesn’t return a valid imageObject when called with those arguments.</p>

<p>If the imageInfo is a string, then the string is returned if it is a key for an image in the <code class="language-plaintext highlighter-rouge">imageTable</code> (registered by <code class="language-plaintext highlighter-rouge">text.setImageTable</code>).  An error is thrown if the string is not a key for an image in the <code class="language-plaintext highlighter-rouge">imageTable</code>.</p>

<p>If the imageInfo is an imageObject, then the image is searched for in the <code class="language-plaintext highlighter-rouge">imageTable</code>, and the key for that image is returned.  If the image is not found in the <code class="language-plaintext highlighter-rouge">imageTable</code>, then an error is thrown.</p>

<p>@<em>param</em> <code class="language-plaintext highlighter-rouge">imageInfo</code> — An <code class="language-plaintext highlighter-rouge">imageInfo</code> is one of the following:<br /><br />An <code class="language-plaintext highlighter-rouge">imageObject</code>. <br /><br />A <code class="language-plaintext highlighter-rouge">table</code> such that the first 5 values (some of which can be nil) are valid arguments for <code class="language-plaintext highlighter-rouge">civ.ui.loadImage</code>.<br /><br />A <code class="language-plaintext highlighter-rouge">string</code> that is the key corresponding to an <code class="language-plaintext highlighter-rouge">imageObject</code> in the <code class="language-plaintext highlighter-rouge">imageTable</code> registered by <code class="language-plaintext highlighter-rouge">text.setImageTable</code>.</p>
<h3 id="unittypeimage">
  
  
    <a href="#unittypeimage">&#128279</a> unitTypeImage
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function text.unitTypeImage(unitTypeOrID: any)
  -&gt; unknown
</code></pre></div></div>
<p>text.unitTypeImage(unitTypeOrID) –&gt; imageObject
      provides the image of a unit, found in the file provided to
      text.registerUnitsImage, or nil if there is no image</p>
<h3 id="upper">
  
  
    <a href="#upper">&#128279</a> upper
  
  
</h3>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>text.upper --&gt; function
</code></pre></div></div>
 -->
      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/"></data>

  <div class="wrapper">

    <div class="footer-col-wrapper">
      <div class="footer-col">
<!--        <p class="feed-subscribe">
          <a href="/feed.xml">
            <svg class="svg-icon orange">
              <use xlink:href="/assets/minima-social-icons.svg#rss"></use>
            </svg><span>Subscribe</span>
          </a>
        </p>
-->
<!--
-->
      </div>
      <div class="footer-col">
        <p>Reference materials and lessons for using Lua to program events for Civilization II: Test of Time</p>
      </div>
    </div>

    <div class="social-links">
<ul class="social-media-list">
  <li><a rel="me" href="https://github.com/ProfGarfield" target="_blank" title="ProfGarfield"><svg class="svg-icon grey"><use xlink:href="/assets/minima-social-icons.svg#github"></use></svg>ProfGarfield</a></li>
  <li><a rel="me" href="https://www.youtube.com/user/ProfCiv2" target="_blank" title="YouTube"><svg class="svg-icon grey"><use xlink:href="/assets/minima-social-icons.svg#youtube"></use></svg>ProfCiv2</a></li>
  <li><a rel="me" href="https://forums.civfanatics.com/members/prof-garfield.43783/" target="_blank" title="Civfanatics Profile"><img src="/assets/civfanatics_icon.png" class="svg-icon grey"></img>Prof. Garfield</a></li>
</ul>
</div>

  </div>

</footer>
</body>

</html>
